import{c as N,a as L,u as E,b as A,r as d,j as e,L as v,f as c,z as u}from"./index-NNquW-1y.js";import{m as w}from"./mockDatabase-Ca8sFJxX.js";import{C as T,S as r,T as D,X as I,V as M}from"./Skeleton-C0raRndY.js";import{L as R}from"./log-out-DPNrTp4B.js";import{D as F}from"./dollar-sign-CL_MtYiR.js";import{U as H}from"./users-D7P_dVlH.js";import{C as $}from"./clock-CwuxmInd.js";import{C as U}from"./check-C84hLqpR.js";import"./calendar-DxkCDrtU.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=N("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=N("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),Z=()=>{const{currentUserId:a,logout:y}=L(),k=E(),{t}=A(),[x,p]=d.useState("overview"),[m,g]=d.useState({earnings:0,students:0,hours:0}),[o,f]=d.useState([]),[z,b]=d.useState([]),[h,j]=d.useState(!0);d.useEffect(()=>{a&&(async()=>{j(!0);try{const l=w.getWallet(a),n=await c.getTeacherAvailability(a),C=await c.getRequestsForTeacher(a);g({earnings:l.balance,students:12,hours:45}),f(C),b(n)}catch(l){console.error("Error fetching dashboard data",l),u.error("Error al cargar datos")}finally{j(!1)}})();const i=()=>{const l=w.getWallet(a);g(n=>({...n,earnings:l.balance}))};return window.addEventListener("wallet-update",i),()=>window.removeEventListener("wallet-update",i)},[a]);const S=async s=>{const i=o.find(l=>l.studentId===s);i&&(await c.updateRequestStatus(i.id,"approved"),f(l=>l.filter(n=>n.studentId!==s)),u.success(`Solicitud de ${s} aceptada`))},_=async s=>{await c.updateTeacherAvailability(a,s),b(s),u.success("Horario actualizado correctamente")},q=()=>{y(),k("/")};return e.jsxs("div",{className:"p-4 md:p-8 max-w-7xl mx-auto space-y-6 md:space-y-8 animate-fade-in pb-24",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold font-display text-white",children:[t("dashboard.title")," ",e.jsx("span",{className:"text-gold",children:"."})]}),e.jsx("p",{className:"text-sm md:text-base text-text-muted",children:t("dashboard.subtitle")})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 md:gap-4 items-center w-full md:w-auto",children:[e.jsxs(v,{to:`/classroom/${a}`,className:"btn-secondary flex items-center gap-2 text-sm md:text-base flex-1 md:flex-none justify-center",children:[e.jsx(V,{size:18}),t("dashboard.my_classroom")]}),e.jsxs("div",{className:"flex gap-2 p-1 bg-dark-panel rounded-lg border border-white/5 flex-1 md:flex-none justify-center",children:[e.jsx("button",{onClick:()=>p("overview"),className:`flex-1 md:flex-none px-3 md:px-4 py-2 rounded-md text-xs md:text-sm font-medium transition-all ${x==="overview"?"bg-gold text-black shadow-lg":"text-text-muted hover:text-white"}`,children:t("dashboard.overview")}),e.jsx("button",{onClick:()=>p("schedule"),className:`flex-1 md:flex-none px-3 md:px-4 py-2 rounded-md text-xs md:text-sm font-medium transition-all ${x==="schedule"?"bg-gold text-black shadow-lg":"text-text-muted hover:text-white"}`,children:t("dashboard.schedule")})]}),e.jsx("button",{onClick:q,className:"p-2 text-text-muted hover:text-red-400 transition-colors rounded-lg border border-white/5 hover:border-red-500/20",title:t("nav.exit"),"aria-label":t("nav.exit"),children:e.jsx(R,{size:20})})]})]}),x==="schedule"?e.jsx("div",{className:"glass-panel p-4 md:p-6 rounded-2xl animate-enter overflow-x-auto",children:e.jsx("div",{className:"min-w-[600px] md:min-w-0",children:e.jsx(T,{mode:"edit",availability:z,onSaveAvailability:_})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:h?e.jsx(e.Fragment,{children:[1,2,3,4].map(s=>e.jsxs("div",{className:"glass-panel p-4 md:p-6 rounded-2xl flex flex-col justify-between",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsx(r,{variant:"circular",width:48,height:48})}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(r,{width:"60%",height:32}),e.jsx(r,{width:"40%",height:16})]})]},s))}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass-panel p-4 md:p-6 rounded-2xl flex flex-col justify-between group hover:border-gold/30 transition-all",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{className:"p-3 rounded-xl bg-green-500/10 text-green-400 group-hover:scale-110 transition-transform",children:e.jsx(F,{size:24})}),e.jsx("span",{className:"text-xs font-mono text-green-400/80",children:"+15% este mes"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("span",{className:"text-2xl md:text-3xl font-bold text-white tracking-tight",children:[m.earnings.toFixed(2),"€"]}),e.jsx("p",{className:"text-xs md:text-sm text-text-muted",children:t("dashboard.total_earnings")})]})]}),e.jsxs("div",{className:"glass-panel p-4 md:p-6 rounded-2xl flex flex-col justify-between group hover:border-gold/30 transition-all",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsx("div",{className:"p-3 rounded-xl bg-blue-500/10 text-blue-400 group-hover:scale-110 transition-transform",children:e.jsx(H,{size:24})})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("span",{className:"text-2xl md:text-3xl font-bold text-white tracking-tight",children:m.students}),e.jsx("p",{className:"text-xs md:text-sm text-text-muted",children:t("dashboard.active_students")})]})]}),e.jsxs("div",{className:"glass-panel p-4 md:p-6 rounded-2xl flex flex-col justify-between group hover:border-gold/30 transition-all",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsx("div",{className:"p-3 rounded-xl bg-purple-500/10 text-purple-400 group-hover:scale-110 transition-transform",children:e.jsx($,{size:24})})}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("span",{className:"text-2xl md:text-3xl font-bold text-white tracking-tight",children:[m.hours,"h"]}),e.jsx("p",{className:"text-xs md:text-sm text-text-muted",children:t("dashboard.classes_given")})]})]}),e.jsxs("div",{className:"glass-panel p-4 md:p-6 rounded-2xl bg-gradient-to-br from-dark-panel to-gold/5 border-gold/20 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gold/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(D,{size:20,className:"text-gold"}),e.jsx("span",{className:"text-gold font-bold text-sm uppercase tracking-wider",children:"Nivel Maestro"})]}),e.jsx("div",{className:"w-full bg-black/40 h-2 rounded-full mb-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-gold to-orange-500 w-[75%] shadow-[0_0_10px_rgba(255,215,0,0.5)]"})}),e.jsxs("p",{className:"text-xs text-text-muted flex justify-between",children:[e.jsx("span",{children:"Progreso: 75%"}),e.jsx("span",{className:"text-gold",children:"Próx: Gran Maestro"})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-white/5 text-[10px] space-y-1",children:[e.jsxs("p",{className:"flex justify-between text-white/80",children:[e.jsx("span",{children:"Comisión actual:"})," ",e.jsx("span",{className:"text-green-400 font-mono",children:"15%"})]}),e.jsxs("p",{className:"flex justify-between text-white/50",children:[e.jsx("span",{children:"Siguiente nivel:"})," ",e.jsx("span",{className:"text-gold font-mono",children:"10%"})]})]})]})]})]})}),e.jsxs("div",{className:"flex gap-6 flex-col lg:flex-row h-full",children:[e.jsxs("div",{className:"flex-1 glass-panel rounded-2xl p-4 md:p-6 min-h-[400px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-bold text-white",children:t("dashboard.pending_requests")}),!h&&e.jsxs("span",{className:"bg-red-500/20 text-red-400 px-2 py-0.5 rounded text-xs font-bold animate-pulse",children:[o.length," nuevas"]})]}),e.jsx("div",{className:"space-y-4",children:h?e.jsx(e.Fragment,{children:[1,2,3].map(s=>e.jsxs("div",{className:"p-3 md:p-4 rounded-xl bg-white/5 border border-white/5 flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx(r,{variant:"circular",width:40,height:40}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(r,{width:"40%",height:16}),e.jsx(r,{width:"60%",height:12})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{width:32,height:32}),e.jsx(r,{width:32,height:32})]})]},s))}):o.length===0?e.jsxs("div",{className:"text-center py-10 text-text-muted",children:[e.jsx(B,{size:40,className:"mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"No tienes solicitudes nuevas."})]}):o.map(s=>e.jsxs("div",{className:"p-3 md:p-4 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 transition-colors flex flex-col sm:flex-row items-start sm:items-center justify-between group gap-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center font-bold text-white flex-shrink-0",children:s.studentId.substring(0,2).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white",children:s.studentId}),e.jsx("p",{className:"text-xs text-text-muted",children:"Quiere aprender Defensa India"})]})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto justify-end",children:[e.jsx("button",{onClick:()=>S(s.studentId),className:"p-2 rounded-lg bg-green-500/20 text-green-400 hover:bg-green-500 hover:text-white transition-all",title:"Aceptar","aria-label":"Aceptar",children:e.jsx(U,{size:18})}),e.jsx("button",{className:"p-2 rounded-lg bg-red-500/20 text-red-400 hover:bg-red-500 hover:text-white transition-all",title:"Rechazar","aria-label":"Rechazar",children:e.jsx(I,{size:18})})]})]},s.id))})]}),e.jsxs("div",{className:"w-full lg:w-80 glass-panel rounded-2xl p-4 md:p-6 flex flex-col gap-4",children:[e.jsx("h2",{className:"text-lg md:text-xl font-bold text-white mb-2",children:t("dashboard.quick_access")}),e.jsxs(v,{to:`/classroom/${a}`,className:"group relative overflow-hidden rounded-xl aspect-video bg-black flex items-center justify-center border border-white/10 hover:border-gold/50 transition-all",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1529699211952-734e80c4d42b?ixlib=rb-1.2.1&auto=format&fit=crop&w=1000&q=80')] bg-cover bg-center opacity-40 group-hover:scale-105 transition-transform duration-700"}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gold/90 text-black flex items-center justify-center shadow-[0_0_20px_rgba(255,215,0,0.3)] group-hover:scale-110 transition-transform",children:e.jsx(M,{size:24})}),e.jsx("span",{className:"font-bold text-white tracking-wide",children:t("dashboard.enter_classroom")})]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/5 space-y-2",children:[e.jsx("h4",{className:"font-bold text-sm text-gold",children:t("dashboard.next_class")}),e.jsx("p",{className:"text-xs text-white",children:"Hoy, 18:00 - vs. Student1"}),e.jsx("div",{className:"h-1 w-full bg-black/50 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500 w-[60%]"})}),e.jsx("p",{className:"text-[10px] text-text-muted text-right",children:"En 2 horas"})]})]})]})]})]})};export{Z as default};
