function EC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function TC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var nT={exports:{}},Wc={},rT={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ga=Symbol.for("react.element"),SC=Symbol.for("react.portal"),IC=Symbol.for("react.fragment"),xC=Symbol.for("react.strict_mode"),AC=Symbol.for("react.profiler"),PC=Symbol.for("react.provider"),CC=Symbol.for("react.context"),RC=Symbol.for("react.forward_ref"),kC=Symbol.for("react.suspense"),bC=Symbol.for("react.memo"),NC=Symbol.for("react.lazy"),Lv=Symbol.iterator;function DC(t){return t===null||typeof t!="object"?null:(t=Lv&&t[Lv]||t["@@iterator"],typeof t=="function"?t:null)}var iT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sT=Object.assign,oT={};function no(t,e,n){this.props=t,this.context=e,this.refs=oT,this.updater=n||iT}no.prototype.isReactComponent={};no.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};no.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function aT(){}aT.prototype=no.prototype;function om(t,e,n){this.props=t,this.context=e,this.refs=oT,this.updater=n||iT}var am=om.prototype=new aT;am.constructor=om;sT(am,no.prototype);am.isPureReactComponent=!0;var Ov=Array.isArray,lT=Object.prototype.hasOwnProperty,lm={current:null},uT={key:!0,ref:!0,__self:!0,__source:!0};function cT(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)lT.call(e,r)&&!uT.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ga,type:t,key:s,ref:o,props:i,_owner:lm.current}}function VC(t,e){return{$$typeof:Ga,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function um(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ga}function LC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Mv=/\/+/g;function id(t,e){return typeof t=="object"&&t!==null&&t.key!=null?LC(""+t.key):e.toString(36)}function pu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ga:case SC:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+id(o,0):r,Ov(i)?(n="",t!=null&&(n=t.replace(Mv,"$&/")+"/"),pu(i,e,n,"",function(c){return c})):i!=null&&(um(i)&&(i=VC(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Mv,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Ov(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+id(s,a);o+=pu(s,e,n,l,i)}else if(l=DC(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+id(s,a++),o+=pu(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Fl(t,e,n){if(t==null)return t;var r=[],i=0;return pu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function OC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xt={current:null},mu={transition:null},MC={ReactCurrentDispatcher:xt,ReactCurrentBatchConfig:mu,ReactCurrentOwner:lm};function hT(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:Fl,forEach:function(t,e,n){Fl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Fl(t,function(){e++}),e},toArray:function(t){return Fl(t,function(e){return e})||[]},only:function(t){if(!um(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=no;ie.Fragment=IC;ie.Profiler=AC;ie.PureComponent=om;ie.StrictMode=xC;ie.Suspense=kC;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MC;ie.act=hT;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=sT({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=lm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)lT.call(e,l)&&!uT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ga,type:t.type,key:i,ref:s,props:r,_owner:o}};ie.createContext=function(t){return t={$$typeof:CC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:PC,_context:t},t.Consumer=t};ie.createElement=cT;ie.createFactory=function(t){var e=cT.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:RC,render:t}};ie.isValidElement=um;ie.lazy=function(t){return{$$typeof:NC,_payload:{_status:-1,_result:t},_init:OC}};ie.memo=function(t,e){return{$$typeof:bC,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=mu.transition;mu.transition={};try{t()}finally{mu.transition=e}};ie.unstable_act=hT;ie.useCallback=function(t,e){return xt.current.useCallback(t,e)};ie.useContext=function(t){return xt.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return xt.current.useDeferredValue(t)};ie.useEffect=function(t,e){return xt.current.useEffect(t,e)};ie.useId=function(){return xt.current.useId()};ie.useImperativeHandle=function(t,e,n){return xt.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return xt.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return xt.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return xt.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return xt.current.useReducer(t,e,n)};ie.useRef=function(t){return xt.current.useRef(t)};ie.useState=function(t){return xt.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return xt.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return xt.current.useTransition()};ie.version="18.3.1";rT.exports=ie;var N=rT.exports;const Qa=TC(N),FC=EC({__proto__:null,default:Qa},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jC=N,UC=Symbol.for("react.element"),$C=Symbol.for("react.fragment"),BC=Object.prototype.hasOwnProperty,zC=jC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WC={key:!0,ref:!0,__self:!0,__source:!0};function dT(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)BC.call(e,r)&&!WC.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:UC,type:t,key:s,ref:o,props:i,_owner:zC.current}}Wc.Fragment=$C;Wc.jsx=dT;Wc.jsxs=dT;nT.exports=Wc;var D=nT.exports,fT={exports:{}},Wt={},pT={exports:{}},mT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,q){var Q=$.length;$.push(q);e:for(;0<Q;){var re=Q-1>>>1,oe=$[re];if(0<i(oe,q))$[re]=q,$[Q]=oe,Q=re;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var q=$[0],Q=$.pop();if(Q!==q){$[0]=Q;e:for(var re=0,oe=$.length,me=oe>>>1;re<me;){var Kt=2*(re+1)-1,qt=$[Kt],On=Kt+1,Mn=$[On];if(0>i(qt,Q))On<oe&&0>i(Mn,qt)?($[re]=Mn,$[On]=Q,re=On):($[re]=qt,$[Kt]=Q,re=Kt);else if(On<oe&&0>i(Mn,Q))$[re]=Mn,$[On]=Q,re=On;else break e}}return q}function i($,q){var Q=$.sortIndex-q.sortIndex;return Q!==0?Q:$.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,g=!1,y=!1,I=!1,P=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E($){for(var q=n(c);q!==null;){if(q.callback===null)r(c);else if(q.startTime<=$)r(c),q.sortIndex=q.expirationTime,e(l,q);else break;q=n(c)}}function R($){if(I=!1,E($),!y)if(n(l)!==null)y=!0,Re(V);else{var q=n(c);q!==null&&ne(R,q.startTime-$)}}function V($,q){y=!1,I&&(I=!1,w(v),v=-1),g=!0;var Q=p;try{for(E(q),d=n(l);d!==null&&(!(d.expirationTime>q)||$&&!k());){var re=d.callback;if(typeof re=="function"){d.callback=null,p=d.priorityLevel;var oe=re(d.expirationTime<=q);q=t.unstable_now(),typeof oe=="function"?d.callback=oe:d===n(l)&&r(l),E(q)}else r(l);d=n(l)}if(d!==null)var me=!0;else{var Kt=n(c);Kt!==null&&ne(R,Kt.startTime-q),me=!1}return me}finally{d=null,p=Q,g=!1}}var M=!1,x=null,v=-1,S=5,A=-1;function k(){return!(t.unstable_now()-A<S)}function b(){if(x!==null){var $=t.unstable_now();A=$;var q=!0;try{q=x(!0,$)}finally{q?C():(M=!1,x=null)}}else M=!1}var C;if(typeof _=="function")C=function(){_(b)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,de=Y.port2;Y.port1.onmessage=b,C=function(){de.postMessage(null)}}else C=function(){P(b,0)};function Re($){x=$,M||(M=!0,C())}function ne($,q){v=P(function(){$(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,Re(V))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var Q=p;p=q;try{return $()}finally{p=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Q=p;p=$;try{return q()}finally{p=Q}},t.unstable_scheduleCallback=function($,q,Q){var re=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?re+Q:re):Q=re,$){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=Q+oe,$={id:h++,callback:q,priorityLevel:$,startTime:Q,expirationTime:oe,sortIndex:-1},Q>re?($.sortIndex=Q,e(c,$),n(l)===null&&$===n(c)&&(I?(w(v),v=-1):I=!0,ne(R,Q-re))):($.sortIndex=oe,e(l,$),y||g||(y=!0,Re(V))),$},t.unstable_shouldYield=k,t.unstable_wrapCallback=function($){var q=p;return function(){var Q=p;p=q;try{return $.apply(this,arguments)}finally{p=Q}}}})(mT);pT.exports=mT;var HC=pT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KC=N,zt=HC;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gT=new Set,ma={};function Wi(t,e){Fs(t,e),Fs(t+"Capture",e)}function Fs(t,e){for(ma[t]=e,t=0;t<e.length;t++)gT.add(e[t])}var nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),df=Object.prototype.hasOwnProperty,qC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fv={},jv={};function GC(t){return df.call(jv,t)?!0:df.call(Fv,t)?!1:qC.test(t)?jv[t]=!0:(Fv[t]=!0,!1)}function QC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function YC(t,e,n,r){if(e===null||typeof e>"u"||QC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function At(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rt[t]=new At(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rt[e]=new At(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rt[t]=new At(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rt[t]=new At(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rt[t]=new At(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rt[t]=new At(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rt[t]=new At(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rt[t]=new At(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rt[t]=new At(t,5,!1,t.toLowerCase(),null,!1,!1)});var cm=/[\-:]([a-z])/g;function hm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(cm,hm);rt[e]=new At(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(cm,hm);rt[e]=new At(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(cm,hm);rt[e]=new At(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rt[t]=new At(t,1,!1,t.toLowerCase(),null,!1,!1)});rt.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rt[t]=new At(t,1,!1,t.toLowerCase(),null,!0,!0)});function dm(t,e,n,r){var i=rt.hasOwnProperty(e)?rt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(YC(e,n,i,r)&&(n=null),r||i===null?GC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var dr=KC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jl=Symbol.for("react.element"),us=Symbol.for("react.portal"),cs=Symbol.for("react.fragment"),fm=Symbol.for("react.strict_mode"),ff=Symbol.for("react.profiler"),yT=Symbol.for("react.provider"),vT=Symbol.for("react.context"),pm=Symbol.for("react.forward_ref"),pf=Symbol.for("react.suspense"),mf=Symbol.for("react.suspense_list"),mm=Symbol.for("react.memo"),Tr=Symbol.for("react.lazy"),_T=Symbol.for("react.offscreen"),Uv=Symbol.iterator;function Ro(t){return t===null||typeof t!="object"?null:(t=Uv&&t[Uv]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,sd;function Uo(t){if(sd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sd=e&&e[1]||""}return`
`+sd+t}var od=!1;function ad(t,e){if(!t||od)return"";od=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{od=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Uo(t):""}function XC(t){switch(t.tag){case 5:return Uo(t.type);case 16:return Uo("Lazy");case 13:return Uo("Suspense");case 19:return Uo("SuspenseList");case 0:case 2:case 15:return t=ad(t.type,!1),t;case 11:return t=ad(t.type.render,!1),t;case 1:return t=ad(t.type,!0),t;default:return""}}function gf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case cs:return"Fragment";case us:return"Portal";case ff:return"Profiler";case fm:return"StrictMode";case pf:return"Suspense";case mf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vT:return(t.displayName||"Context")+".Consumer";case yT:return(t._context.displayName||"Context")+".Provider";case pm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mm:return e=t.displayName||null,e!==null?e:gf(t.type)||"Memo";case Tr:e=t._payload,t=t._init;try{return gf(t(e))}catch{}}return null}function JC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gf(e);case 8:return e===fm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ZC(t){var e=wT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ul(t){t._valueTracker||(t._valueTracker=ZC(t))}function ET(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=wT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function zu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yf(t,e){var n=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $v(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Gr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function TT(t,e){e=e.checked,e!=null&&dm(t,"checked",e,!1)}function vf(t,e){TT(t,e);var n=Gr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_f(t,e.type,n):e.hasOwnProperty("defaultValue")&&_f(t,e.type,Gr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Bv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _f(t,e,n){(e!=="number"||zu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var $o=Array.isArray;function Ps(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Gr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function wf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if($o(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Gr(n)}}function ST(t,e){var n=Gr(e.value),r=Gr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Wv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function IT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ef(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?IT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $l,xT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($l=$l||document.createElement("div"),$l.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$l.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ga(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Qo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eR=["Webkit","ms","Moz","O"];Object.keys(Qo).forEach(function(t){eR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Qo[e]=Qo[t]})});function AT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Qo.hasOwnProperty(t)&&Qo[t]?(""+e).trim():e+"px"}function PT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=AT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var tR=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tf(t,e){if(e){if(tR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Sf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var If=null;function gm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xf=null,Cs=null,Rs=null;function Hv(t){if(t=Ja(t)){if(typeof xf!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Qc(e),xf(t.stateNode,t.type,e))}}function CT(t){Cs?Rs?Rs.push(t):Rs=[t]:Cs=t}function RT(){if(Cs){var t=Cs,e=Rs;if(Rs=Cs=null,Hv(t),e)for(t=0;t<e.length;t++)Hv(e[t])}}function kT(t,e){return t(e)}function bT(){}var ld=!1;function NT(t,e,n){if(ld)return t(e,n);ld=!0;try{return kT(t,e,n)}finally{ld=!1,(Cs!==null||Rs!==null)&&(bT(),RT())}}function ya(t,e){var n=t.stateNode;if(n===null)return null;var r=Qc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Af=!1;if(nr)try{var ko={};Object.defineProperty(ko,"passive",{get:function(){Af=!0}}),window.addEventListener("test",ko,ko),window.removeEventListener("test",ko,ko)}catch{Af=!1}function nR(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Yo=!1,Wu=null,Hu=!1,Pf=null,rR={onError:function(t){Yo=!0,Wu=t}};function iR(t,e,n,r,i,s,o,a,l){Yo=!1,Wu=null,nR.apply(rR,arguments)}function sR(t,e,n,r,i,s,o,a,l){if(iR.apply(this,arguments),Yo){if(Yo){var c=Wu;Yo=!1,Wu=null}else throw Error(U(198));Hu||(Hu=!0,Pf=c)}}function Hi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function DT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Kv(t){if(Hi(t)!==t)throw Error(U(188))}function oR(t){var e=t.alternate;if(!e){if(e=Hi(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Kv(i),t;if(s===r)return Kv(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function VT(t){return t=oR(t),t!==null?LT(t):null}function LT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=LT(t);if(e!==null)return e;t=t.sibling}return null}var OT=zt.unstable_scheduleCallback,qv=zt.unstable_cancelCallback,aR=zt.unstable_shouldYield,lR=zt.unstable_requestPaint,Le=zt.unstable_now,uR=zt.unstable_getCurrentPriorityLevel,ym=zt.unstable_ImmediatePriority,MT=zt.unstable_UserBlockingPriority,Ku=zt.unstable_NormalPriority,cR=zt.unstable_LowPriority,FT=zt.unstable_IdlePriority,Hc=null,An=null;function hR(t){if(An&&typeof An.onCommitFiberRoot=="function")try{An.onCommitFiberRoot(Hc,t,void 0,(t.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:pR,dR=Math.log,fR=Math.LN2;function pR(t){return t>>>=0,t===0?32:31-(dR(t)/fR|0)|0}var Bl=64,zl=4194304;function Bo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Bo(a):(s&=o,s!==0&&(r=Bo(s)))}else o=n&~i,o!==0?r=Bo(o):s!==0&&(r=Bo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-hn(e),i=1<<n,r|=t[n],e&=~i;return r}function mR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gR(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-hn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=mR(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Cf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jT(){var t=Bl;return Bl<<=1,!(Bl&4194240)&&(Bl=64),t}function ud(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ya(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hn(e),t[e]=n}function yR(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-hn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function vm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-hn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var fe=0;function UT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $T,_m,BT,zT,WT,Rf=!1,Wl=[],Lr=null,Or=null,Mr=null,va=new Map,_a=new Map,Ir=[],vR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gv(t,e){switch(t){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":Or=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":va.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_a.delete(e.pointerId)}}function bo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ja(e),e!==null&&_m(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function _R(t,e,n,r,i){switch(e){case"focusin":return Lr=bo(Lr,t,e,n,r,i),!0;case"dragenter":return Or=bo(Or,t,e,n,r,i),!0;case"mouseover":return Mr=bo(Mr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return va.set(s,bo(va.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,_a.set(s,bo(_a.get(s)||null,t,e,n,r,i)),!0}return!1}function HT(t){var e=Ei(t.target);if(e!==null){var n=Hi(e);if(n!==null){if(e=n.tag,e===13){if(e=DT(n),e!==null){t.blockedOn=e,WT(t.priority,function(){BT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=kf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);If=r,n.target.dispatchEvent(r),If=null}else return e=Ja(n),e!==null&&_m(e),t.blockedOn=n,!1;e.shift()}return!0}function Qv(t,e,n){gu(t)&&n.delete(e)}function wR(){Rf=!1,Lr!==null&&gu(Lr)&&(Lr=null),Or!==null&&gu(Or)&&(Or=null),Mr!==null&&gu(Mr)&&(Mr=null),va.forEach(Qv),_a.forEach(Qv)}function No(t,e){t.blockedOn===e&&(t.blockedOn=null,Rf||(Rf=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,wR)))}function wa(t){function e(i){return No(i,t)}if(0<Wl.length){No(Wl[0],t);for(var n=1;n<Wl.length;n++){var r=Wl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Lr!==null&&No(Lr,t),Or!==null&&No(Or,t),Mr!==null&&No(Mr,t),va.forEach(e),_a.forEach(e),n=0;n<Ir.length;n++)r=Ir[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ir.length&&(n=Ir[0],n.blockedOn===null);)HT(n),n.blockedOn===null&&Ir.shift()}var ks=dr.ReactCurrentBatchConfig,Gu=!0;function ER(t,e,n,r){var i=fe,s=ks.transition;ks.transition=null;try{fe=1,wm(t,e,n,r)}finally{fe=i,ks.transition=s}}function TR(t,e,n,r){var i=fe,s=ks.transition;ks.transition=null;try{fe=4,wm(t,e,n,r)}finally{fe=i,ks.transition=s}}function wm(t,e,n,r){if(Gu){var i=kf(t,e,n,r);if(i===null)_d(t,e,r,Qu,n),Gv(t,r);else if(_R(i,t,e,n,r))r.stopPropagation();else if(Gv(t,r),e&4&&-1<vR.indexOf(t)){for(;i!==null;){var s=Ja(i);if(s!==null&&$T(s),s=kf(t,e,n,r),s===null&&_d(t,e,r,Qu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else _d(t,e,r,null,n)}}var Qu=null;function kf(t,e,n,r){if(Qu=null,t=gm(r),t=Ei(t),t!==null)if(e=Hi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=DT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Qu=t,null}function KT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uR()){case ym:return 1;case MT:return 4;case Ku:case cR:return 16;case FT:return 536870912;default:return 16}default:return 16}}var kr=null,Em=null,yu=null;function qT(){if(yu)return yu;var t,e=Em,n=e.length,r,i="value"in kr?kr.value:kr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return yu=i.slice(t,1<r?1-r:void 0)}function vu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Hl(){return!0}function Yv(){return!1}function Ht(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Hl:Yv,this.isPropagationStopped=Yv,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hl)},persist:function(){},isPersistent:Hl}),e}var ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tm=Ht(ro),Xa=Pe({},ro,{view:0,detail:0}),SR=Ht(Xa),cd,hd,Do,Kc=Pe({},Xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Do&&(Do&&t.type==="mousemove"?(cd=t.screenX-Do.screenX,hd=t.screenY-Do.screenY):hd=cd=0,Do=t),cd)},movementY:function(t){return"movementY"in t?t.movementY:hd}}),Xv=Ht(Kc),IR=Pe({},Kc,{dataTransfer:0}),xR=Ht(IR),AR=Pe({},Xa,{relatedTarget:0}),dd=Ht(AR),PR=Pe({},ro,{animationName:0,elapsedTime:0,pseudoElement:0}),CR=Ht(PR),RR=Pe({},ro,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kR=Ht(RR),bR=Pe({},ro,{data:0}),Jv=Ht(bR),NR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=VR[t])?!!e[t]:!1}function Sm(){return LR}var OR=Pe({},Xa,{key:function(t){if(t.key){var e=NR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?DR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sm,charCode:function(t){return t.type==="keypress"?vu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),MR=Ht(OR),FR=Pe({},Kc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zv=Ht(FR),jR=Pe({},Xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sm}),UR=Ht(jR),$R=Pe({},ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),BR=Ht($R),zR=Pe({},Kc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),WR=Ht(zR),HR=[9,13,27,32],Im=nr&&"CompositionEvent"in window,Xo=null;nr&&"documentMode"in document&&(Xo=document.documentMode);var KR=nr&&"TextEvent"in window&&!Xo,GT=nr&&(!Im||Xo&&8<Xo&&11>=Xo),e_=" ",t_=!1;function QT(t,e){switch(t){case"keyup":return HR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hs=!1;function qR(t,e){switch(t){case"compositionend":return YT(e);case"keypress":return e.which!==32?null:(t_=!0,e_);case"textInput":return t=e.data,t===e_&&t_?null:t;default:return null}}function GR(t,e){if(hs)return t==="compositionend"||!Im&&QT(t,e)?(t=qT(),yu=Em=kr=null,hs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return GT&&e.locale!=="ko"?null:e.data;default:return null}}var QR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function n_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!QR[t.type]:e==="textarea"}function XT(t,e,n,r){CT(r),e=Yu(e,"onChange"),0<e.length&&(n=new Tm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Jo=null,Ea=null;function YR(t){lS(t,0)}function qc(t){var e=ps(t);if(ET(e))return t}function XR(t,e){if(t==="change")return e}var JT=!1;if(nr){var fd;if(nr){var pd="oninput"in document;if(!pd){var r_=document.createElement("div");r_.setAttribute("oninput","return;"),pd=typeof r_.oninput=="function"}fd=pd}else fd=!1;JT=fd&&(!document.documentMode||9<document.documentMode)}function i_(){Jo&&(Jo.detachEvent("onpropertychange",ZT),Ea=Jo=null)}function ZT(t){if(t.propertyName==="value"&&qc(Ea)){var e=[];XT(e,Ea,t,gm(t)),NT(YR,e)}}function JR(t,e,n){t==="focusin"?(i_(),Jo=e,Ea=n,Jo.attachEvent("onpropertychange",ZT)):t==="focusout"&&i_()}function ZR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qc(Ea)}function ek(t,e){if(t==="click")return qc(e)}function tk(t,e){if(t==="input"||t==="change")return qc(e)}function nk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gn=typeof Object.is=="function"?Object.is:nk;function Ta(t,e){if(gn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!df.call(e,i)||!gn(t[i],e[i]))return!1}return!0}function s_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function o_(t,e){var n=s_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=s_(n)}}function eS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?eS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tS(){for(var t=window,e=zu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=zu(t.document)}return e}function xm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function rk(t){var e=tS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&eS(n.ownerDocument.documentElement,n)){if(r!==null&&xm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=o_(n,s);var o=o_(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ik=nr&&"documentMode"in document&&11>=document.documentMode,ds=null,bf=null,Zo=null,Nf=!1;function a_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Nf||ds==null||ds!==zu(r)||(r=ds,"selectionStart"in r&&xm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zo&&Ta(Zo,r)||(Zo=r,r=Yu(bf,"onSelect"),0<r.length&&(e=new Tm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ds)))}function Kl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var fs={animationend:Kl("Animation","AnimationEnd"),animationiteration:Kl("Animation","AnimationIteration"),animationstart:Kl("Animation","AnimationStart"),transitionend:Kl("Transition","TransitionEnd")},md={},nS={};nr&&(nS=document.createElement("div").style,"AnimationEvent"in window||(delete fs.animationend.animation,delete fs.animationiteration.animation,delete fs.animationstart.animation),"TransitionEvent"in window||delete fs.transitionend.transition);function Gc(t){if(md[t])return md[t];if(!fs[t])return t;var e=fs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in nS)return md[t]=e[n];return t}var rS=Gc("animationend"),iS=Gc("animationiteration"),sS=Gc("animationstart"),oS=Gc("transitionend"),aS=new Map,l_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(t,e){aS.set(t,e),Wi(e,[t])}for(var gd=0;gd<l_.length;gd++){var yd=l_[gd],sk=yd.toLowerCase(),ok=yd[0].toUpperCase()+yd.slice(1);ni(sk,"on"+ok)}ni(rS,"onAnimationEnd");ni(iS,"onAnimationIteration");ni(sS,"onAnimationStart");ni("dblclick","onDoubleClick");ni("focusin","onFocus");ni("focusout","onBlur");ni(oS,"onTransitionEnd");Fs("onMouseEnter",["mouseout","mouseover"]);Fs("onMouseLeave",["mouseout","mouseover"]);Fs("onPointerEnter",["pointerout","pointerover"]);Fs("onPointerLeave",["pointerout","pointerover"]);Wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ak=new Set("cancel close invalid load scroll toggle".split(" ").concat(zo));function u_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,sR(r,e,void 0,t),t.currentTarget=null}function lS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;u_(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;u_(i,a,c),s=l}}}if(Hu)throw t=Pf,Hu=!1,Pf=null,t}function we(t,e){var n=e[Mf];n===void 0&&(n=e[Mf]=new Set);var r=t+"__bubble";n.has(r)||(uS(e,t,2,!1),n.add(r))}function vd(t,e,n){var r=0;e&&(r|=4),uS(n,t,r,e)}var ql="_reactListening"+Math.random().toString(36).slice(2);function Sa(t){if(!t[ql]){t[ql]=!0,gT.forEach(function(n){n!=="selectionchange"&&(ak.has(n)||vd(n,!1,t),vd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ql]||(e[ql]=!0,vd("selectionchange",!1,e))}}function uS(t,e,n,r){switch(KT(e)){case 1:var i=ER;break;case 4:i=TR;break;default:i=wm}n=i.bind(null,e,n,t),i=void 0,!Af||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function _d(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ei(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}NT(function(){var c=s,h=gm(n),d=[];e:{var p=aS.get(t);if(p!==void 0){var g=Tm,y=t;switch(t){case"keypress":if(vu(n)===0)break e;case"keydown":case"keyup":g=MR;break;case"focusin":y="focus",g=dd;break;case"focusout":y="blur",g=dd;break;case"beforeblur":case"afterblur":g=dd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Xv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=xR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=UR;break;case rS:case iS:case sS:g=CR;break;case oS:g=BR;break;case"scroll":g=SR;break;case"wheel":g=WR;break;case"copy":case"cut":case"paste":g=kR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Zv}var I=(e&4)!==0,P=!I&&t==="scroll",w=I?p!==null?p+"Capture":null:p;I=[];for(var _=c,E;_!==null;){E=_;var R=E.stateNode;if(E.tag===5&&R!==null&&(E=R,w!==null&&(R=ya(_,w),R!=null&&I.push(Ia(_,R,E)))),P)break;_=_.return}0<I.length&&(p=new g(p,y,null,n,h),d.push({event:p,listeners:I}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==If&&(y=n.relatedTarget||n.fromElement)&&(Ei(y)||y[rr]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=c,y=y?Ei(y):null,y!==null&&(P=Hi(y),y!==P||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=c),g!==y)){if(I=Xv,R="onMouseLeave",w="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(I=Zv,R="onPointerLeave",w="onPointerEnter",_="pointer"),P=g==null?p:ps(g),E=y==null?p:ps(y),p=new I(R,_+"leave",g,n,h),p.target=P,p.relatedTarget=E,R=null,Ei(h)===c&&(I=new I(w,_+"enter",y,n,h),I.target=E,I.relatedTarget=P,R=I),P=R,g&&y)t:{for(I=g,w=y,_=0,E=I;E;E=Zi(E))_++;for(E=0,R=w;R;R=Zi(R))E++;for(;0<_-E;)I=Zi(I),_--;for(;0<E-_;)w=Zi(w),E--;for(;_--;){if(I===w||w!==null&&I===w.alternate)break t;I=Zi(I),w=Zi(w)}I=null}else I=null;g!==null&&c_(d,p,g,I,!1),y!==null&&P!==null&&c_(d,P,y,I,!0)}}e:{if(p=c?ps(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var V=XR;else if(n_(p))if(JT)V=tk;else{V=ZR;var M=JR}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(V=ek);if(V&&(V=V(t,c))){XT(d,V,n,h);break e}M&&M(t,p,c),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&_f(p,"number",p.value)}switch(M=c?ps(c):window,t){case"focusin":(n_(M)||M.contentEditable==="true")&&(ds=M,bf=c,Zo=null);break;case"focusout":Zo=bf=ds=null;break;case"mousedown":Nf=!0;break;case"contextmenu":case"mouseup":case"dragend":Nf=!1,a_(d,n,h);break;case"selectionchange":if(ik)break;case"keydown":case"keyup":a_(d,n,h)}var x;if(Im)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else hs?QT(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(GT&&n.locale!=="ko"&&(hs||v!=="onCompositionStart"?v==="onCompositionEnd"&&hs&&(x=qT()):(kr=h,Em="value"in kr?kr.value:kr.textContent,hs=!0)),M=Yu(c,v),0<M.length&&(v=new Jv(v,t,null,n,h),d.push({event:v,listeners:M}),x?v.data=x:(x=YT(n),x!==null&&(v.data=x)))),(x=KR?qR(t,n):GR(t,n))&&(c=Yu(c,"onBeforeInput"),0<c.length&&(h=new Jv("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=x))}lS(d,e)})}function Ia(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ya(t,n),s!=null&&r.unshift(Ia(t,s,i)),s=ya(t,e),s!=null&&r.push(Ia(t,s,i))),t=t.return}return r}function Zi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function c_(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=ya(n,s),l!=null&&o.unshift(Ia(n,l,a))):i||(l=ya(n,s),l!=null&&o.push(Ia(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var lk=/\r\n?/g,uk=/\u0000|\uFFFD/g;function h_(t){return(typeof t=="string"?t:""+t).replace(lk,`
`).replace(uk,"")}function Gl(t,e,n){if(e=h_(e),h_(t)!==e&&n)throw Error(U(425))}function Xu(){}var Df=null,Vf=null;function Lf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Of=typeof setTimeout=="function"?setTimeout:void 0,ck=typeof clearTimeout=="function"?clearTimeout:void 0,d_=typeof Promise=="function"?Promise:void 0,hk=typeof queueMicrotask=="function"?queueMicrotask:typeof d_<"u"?function(t){return d_.resolve(null).then(t).catch(dk)}:Of;function dk(t){setTimeout(function(){throw t})}function wd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),wa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);wa(e)}function Fr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function f_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var io=Math.random().toString(36).slice(2),Sn="__reactFiber$"+io,xa="__reactProps$"+io,rr="__reactContainer$"+io,Mf="__reactEvents$"+io,fk="__reactListeners$"+io,pk="__reactHandles$"+io;function Ei(t){var e=t[Sn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[rr]||n[Sn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=f_(t);t!==null;){if(n=t[Sn])return n;t=f_(t)}return e}t=n,n=t.parentNode}return null}function Ja(t){return t=t[Sn]||t[rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ps(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Qc(t){return t[xa]||null}var Ff=[],ms=-1;function ri(t){return{current:t}}function Te(t){0>ms||(t.current=Ff[ms],Ff[ms]=null,ms--)}function ye(t,e){ms++,Ff[ms]=t.current,t.current=e}var Qr={},yt=ri(Qr),Dt=ri(!1),Di=Qr;function js(t,e){var n=t.type.contextTypes;if(!n)return Qr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Vt(t){return t=t.childContextTypes,t!=null}function Ju(){Te(Dt),Te(yt)}function p_(t,e,n){if(yt.current!==Qr)throw Error(U(168));ye(yt,e),ye(Dt,n)}function cS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,JC(t)||"Unknown",i));return Pe({},n,r)}function Zu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qr,Di=yt.current,ye(yt,t),ye(Dt,Dt.current),!0}function m_(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=cS(t,e,Di),r.__reactInternalMemoizedMergedChildContext=t,Te(Dt),Te(yt),ye(yt,t)):Te(Dt),ye(Dt,n)}var Hn=null,Yc=!1,Ed=!1;function hS(t){Hn===null?Hn=[t]:Hn.push(t)}function mk(t){Yc=!0,hS(t)}function ii(){if(!Ed&&Hn!==null){Ed=!0;var t=0,e=fe;try{var n=Hn;for(fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Hn=null,Yc=!1}catch(i){throw Hn!==null&&(Hn=Hn.slice(t+1)),OT(ym,ii),i}finally{fe=e,Ed=!1}}return null}var gs=[],ys=0,ec=null,tc=0,Qt=[],Yt=0,Vi=null,Gn=1,Qn="";function yi(t,e){gs[ys++]=tc,gs[ys++]=ec,ec=t,tc=e}function dS(t,e,n){Qt[Yt++]=Gn,Qt[Yt++]=Qn,Qt[Yt++]=Vi,Vi=t;var r=Gn;t=Qn;var i=32-hn(r)-1;r&=~(1<<i),n+=1;var s=32-hn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Gn=1<<32-hn(e)+i|n<<i|r,Qn=s+t}else Gn=1<<s|n<<i|r,Qn=t}function Am(t){t.return!==null&&(yi(t,1),dS(t,1,0))}function Pm(t){for(;t===ec;)ec=gs[--ys],gs[ys]=null,tc=gs[--ys],gs[ys]=null;for(;t===Vi;)Vi=Qt[--Yt],Qt[Yt]=null,Qn=Qt[--Yt],Qt[Yt]=null,Gn=Qt[--Yt],Qt[Yt]=null}var $t=null,jt=null,Se=!1,cn=null;function fS(t,e){var n=Xt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function g_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$t=t,jt=Fr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$t=t,jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Vi!==null?{id:Gn,overflow:Qn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$t=t,jt=null,!0):!1;default:return!1}}function jf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Uf(t){if(Se){var e=jt;if(e){var n=e;if(!g_(t,e)){if(jf(t))throw Error(U(418));e=Fr(n.nextSibling);var r=$t;e&&g_(t,e)?fS(r,n):(t.flags=t.flags&-4097|2,Se=!1,$t=t)}}else{if(jf(t))throw Error(U(418));t.flags=t.flags&-4097|2,Se=!1,$t=t}}}function y_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$t=t}function Ql(t){if(t!==$t)return!1;if(!Se)return y_(t),Se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lf(t.type,t.memoizedProps)),e&&(e=jt)){if(jf(t))throw pS(),Error(U(418));for(;e;)fS(t,e),e=Fr(e.nextSibling)}if(y_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jt=Fr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jt=null}}else jt=$t?Fr(t.stateNode.nextSibling):null;return!0}function pS(){for(var t=jt;t;)t=Fr(t.nextSibling)}function Us(){jt=$t=null,Se=!1}function Cm(t){cn===null?cn=[t]:cn.push(t)}var gk=dr.ReactCurrentBatchConfig;function Vo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Yl(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function v_(t){var e=t._init;return e(t._payload)}function mS(t){function e(w,_){if(t){var E=w.deletions;E===null?(w.deletions=[_],w.flags|=16):E.push(_)}}function n(w,_){if(!t)return null;for(;_!==null;)e(w,_),_=_.sibling;return null}function r(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function i(w,_){return w=Br(w,_),w.index=0,w.sibling=null,w}function s(w,_,E){return w.index=E,t?(E=w.alternate,E!==null?(E=E.index,E<_?(w.flags|=2,_):E):(w.flags|=2,_)):(w.flags|=1048576,_)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,_,E,R){return _===null||_.tag!==6?(_=Cd(E,w.mode,R),_.return=w,_):(_=i(_,E),_.return=w,_)}function l(w,_,E,R){var V=E.type;return V===cs?h(w,_,E.props.children,R,E.key):_!==null&&(_.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Tr&&v_(V)===_.type)?(R=i(_,E.props),R.ref=Vo(w,_,E),R.return=w,R):(R=xu(E.type,E.key,E.props,null,w.mode,R),R.ref=Vo(w,_,E),R.return=w,R)}function c(w,_,E,R){return _===null||_.tag!==4||_.stateNode.containerInfo!==E.containerInfo||_.stateNode.implementation!==E.implementation?(_=Rd(E,w.mode,R),_.return=w,_):(_=i(_,E.children||[]),_.return=w,_)}function h(w,_,E,R,V){return _===null||_.tag!==7?(_=Ri(E,w.mode,R,V),_.return=w,_):(_=i(_,E),_.return=w,_)}function d(w,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Cd(""+_,w.mode,E),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case jl:return E=xu(_.type,_.key,_.props,null,w.mode,E),E.ref=Vo(w,null,_),E.return=w,E;case us:return _=Rd(_,w.mode,E),_.return=w,_;case Tr:var R=_._init;return d(w,R(_._payload),E)}if($o(_)||Ro(_))return _=Ri(_,w.mode,E,null),_.return=w,_;Yl(w,_)}return null}function p(w,_,E,R){var V=_!==null?_.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return V!==null?null:a(w,_,""+E,R);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case jl:return E.key===V?l(w,_,E,R):null;case us:return E.key===V?c(w,_,E,R):null;case Tr:return V=E._init,p(w,_,V(E._payload),R)}if($o(E)||Ro(E))return V!==null?null:h(w,_,E,R,null);Yl(w,E)}return null}function g(w,_,E,R,V){if(typeof R=="string"&&R!==""||typeof R=="number")return w=w.get(E)||null,a(_,w,""+R,V);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case jl:return w=w.get(R.key===null?E:R.key)||null,l(_,w,R,V);case us:return w=w.get(R.key===null?E:R.key)||null,c(_,w,R,V);case Tr:var M=R._init;return g(w,_,E,M(R._payload),V)}if($o(R)||Ro(R))return w=w.get(E)||null,h(_,w,R,V,null);Yl(_,R)}return null}function y(w,_,E,R){for(var V=null,M=null,x=_,v=_=0,S=null;x!==null&&v<E.length;v++){x.index>v?(S=x,x=null):S=x.sibling;var A=p(w,x,E[v],R);if(A===null){x===null&&(x=S);break}t&&x&&A.alternate===null&&e(w,x),_=s(A,_,v),M===null?V=A:M.sibling=A,M=A,x=S}if(v===E.length)return n(w,x),Se&&yi(w,v),V;if(x===null){for(;v<E.length;v++)x=d(w,E[v],R),x!==null&&(_=s(x,_,v),M===null?V=x:M.sibling=x,M=x);return Se&&yi(w,v),V}for(x=r(w,x);v<E.length;v++)S=g(x,w,v,E[v],R),S!==null&&(t&&S.alternate!==null&&x.delete(S.key===null?v:S.key),_=s(S,_,v),M===null?V=S:M.sibling=S,M=S);return t&&x.forEach(function(k){return e(w,k)}),Se&&yi(w,v),V}function I(w,_,E,R){var V=Ro(E);if(typeof V!="function")throw Error(U(150));if(E=V.call(E),E==null)throw Error(U(151));for(var M=V=null,x=_,v=_=0,S=null,A=E.next();x!==null&&!A.done;v++,A=E.next()){x.index>v?(S=x,x=null):S=x.sibling;var k=p(w,x,A.value,R);if(k===null){x===null&&(x=S);break}t&&x&&k.alternate===null&&e(w,x),_=s(k,_,v),M===null?V=k:M.sibling=k,M=k,x=S}if(A.done)return n(w,x),Se&&yi(w,v),V;if(x===null){for(;!A.done;v++,A=E.next())A=d(w,A.value,R),A!==null&&(_=s(A,_,v),M===null?V=A:M.sibling=A,M=A);return Se&&yi(w,v),V}for(x=r(w,x);!A.done;v++,A=E.next())A=g(x,w,v,A.value,R),A!==null&&(t&&A.alternate!==null&&x.delete(A.key===null?v:A.key),_=s(A,_,v),M===null?V=A:M.sibling=A,M=A);return t&&x.forEach(function(b){return e(w,b)}),Se&&yi(w,v),V}function P(w,_,E,R){if(typeof E=="object"&&E!==null&&E.type===cs&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case jl:e:{for(var V=E.key,M=_;M!==null;){if(M.key===V){if(V=E.type,V===cs){if(M.tag===7){n(w,M.sibling),_=i(M,E.props.children),_.return=w,w=_;break e}}else if(M.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Tr&&v_(V)===M.type){n(w,M.sibling),_=i(M,E.props),_.ref=Vo(w,M,E),_.return=w,w=_;break e}n(w,M);break}else e(w,M);M=M.sibling}E.type===cs?(_=Ri(E.props.children,w.mode,R,E.key),_.return=w,w=_):(R=xu(E.type,E.key,E.props,null,w.mode,R),R.ref=Vo(w,_,E),R.return=w,w=R)}return o(w);case us:e:{for(M=E.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===E.containerInfo&&_.stateNode.implementation===E.implementation){n(w,_.sibling),_=i(_,E.children||[]),_.return=w,w=_;break e}else{n(w,_);break}else e(w,_);_=_.sibling}_=Rd(E,w.mode,R),_.return=w,w=_}return o(w);case Tr:return M=E._init,P(w,_,M(E._payload),R)}if($o(E))return y(w,_,E,R);if(Ro(E))return I(w,_,E,R);Yl(w,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,_!==null&&_.tag===6?(n(w,_.sibling),_=i(_,E),_.return=w,w=_):(n(w,_),_=Cd(E,w.mode,R),_.return=w,w=_),o(w)):n(w,_)}return P}var $s=mS(!0),gS=mS(!1),nc=ri(null),rc=null,vs=null,Rm=null;function km(){Rm=vs=rc=null}function bm(t){var e=nc.current;Te(nc),t._currentValue=e}function $f(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function bs(t,e){rc=t,Rm=vs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Nt=!0),t.firstContext=null)}function tn(t){var e=t._currentValue;if(Rm!==t)if(t={context:t,memoizedValue:e,next:null},vs===null){if(rc===null)throw Error(U(308));vs=t,rc.dependencies={lanes:0,firstContext:t}}else vs=vs.next=t;return e}var Ti=null;function Nm(t){Ti===null?Ti=[t]:Ti.push(t)}function yS(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Nm(e)):(n.next=i.next,i.next=n),e.interleaved=n,ir(t,r)}function ir(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Sr=!1;function Dm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function er(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ue&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ir(t,n)}return i=r.interleaved,i===null?(e.next=e,Nm(r)):(e.next=i.next,i.next=e),r.interleaved=e,ir(t,n)}function _u(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vm(t,n)}}function __(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ic(t,e,n,r){var i=t.updateQueue;Sr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,I=a;switch(p=e,g=n,I.tag){case 1:if(y=I.payload,typeof y=="function"){d=y.call(g,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=I.payload,p=typeof y=="function"?y.call(g,d,p):y,p==null)break e;d=Pe({},d,p);break e;case 2:Sr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,l=d):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Oi|=o,t.lanes=o,t.memoizedState=d}}function w_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var Za={},Pn=ri(Za),Aa=ri(Za),Pa=ri(Za);function Si(t){if(t===Za)throw Error(U(174));return t}function Vm(t,e){switch(ye(Pa,e),ye(Aa,t),ye(Pn,Za),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ef(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ef(e,t)}Te(Pn),ye(Pn,e)}function Bs(){Te(Pn),Te(Aa),Te(Pa)}function _S(t){Si(Pa.current);var e=Si(Pn.current),n=Ef(e,t.type);e!==n&&(ye(Aa,t),ye(Pn,n))}function Lm(t){Aa.current===t&&(Te(Pn),Te(Aa))}var Ie=ri(0);function sc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Td=[];function Om(){for(var t=0;t<Td.length;t++)Td[t]._workInProgressVersionPrimary=null;Td.length=0}var wu=dr.ReactCurrentDispatcher,Sd=dr.ReactCurrentBatchConfig,Li=0,Ae=null,Be=null,Ge=null,oc=!1,ea=!1,Ca=0,yk=0;function lt(){throw Error(U(321))}function Mm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!gn(t[n],e[n]))return!1;return!0}function Fm(t,e,n,r,i,s){if(Li=s,Ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wu.current=t===null||t.memoizedState===null?Ek:Tk,t=n(r,i),ea){s=0;do{if(ea=!1,Ca=0,25<=s)throw Error(U(301));s+=1,Ge=Be=null,e.updateQueue=null,wu.current=Sk,t=n(r,i)}while(ea)}if(wu.current=ac,e=Be!==null&&Be.next!==null,Li=0,Ge=Be=Ae=null,oc=!1,e)throw Error(U(300));return t}function jm(){var t=Ca!==0;return Ca=0,t}function En(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Ae.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function nn(){if(Be===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=Be.next;var e=Ge===null?Ae.memoizedState:Ge.next;if(e!==null)Ge=e,Be=t;else{if(t===null)throw Error(U(310));Be=t,t={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},Ge===null?Ae.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function Ra(t,e){return typeof e=="function"?e(t):e}function Id(t){var e=nn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Be,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Li&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Ae.lanes|=h,Oi|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,gn(r,e.memoizedState)||(Nt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ae.lanes|=s,Oi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xd(t){var e=nn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);gn(s,e.memoizedState)||(Nt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function wS(){}function ES(t,e){var n=Ae,r=nn(),i=e(),s=!gn(r.memoizedState,i);if(s&&(r.memoizedState=i,Nt=!0),r=r.queue,Um(IS.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,ka(9,SS.bind(null,n,r,i,e),void 0,null),Qe===null)throw Error(U(349));Li&30||TS(n,e,i)}return i}function TS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function SS(t,e,n,r){e.value=n,e.getSnapshot=r,xS(e)&&AS(t)}function IS(t,e,n){return n(function(){xS(e)&&AS(t)})}function xS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gn(t,n)}catch{return!0}}function AS(t){var e=ir(t,1);e!==null&&dn(e,t,1,-1)}function E_(t){var e=En();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:t},e.queue=t,t=t.dispatch=wk.bind(null,Ae,t),[e.memoizedState,t]}function ka(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function PS(){return nn().memoizedState}function Eu(t,e,n,r){var i=En();Ae.flags|=t,i.memoizedState=ka(1|e,n,void 0,r===void 0?null:r)}function Xc(t,e,n,r){var i=nn();r=r===void 0?null:r;var s=void 0;if(Be!==null){var o=Be.memoizedState;if(s=o.destroy,r!==null&&Mm(r,o.deps)){i.memoizedState=ka(e,n,s,r);return}}Ae.flags|=t,i.memoizedState=ka(1|e,n,s,r)}function T_(t,e){return Eu(8390656,8,t,e)}function Um(t,e){return Xc(2048,8,t,e)}function CS(t,e){return Xc(4,2,t,e)}function RS(t,e){return Xc(4,4,t,e)}function kS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bS(t,e,n){return n=n!=null?n.concat([t]):null,Xc(4,4,kS.bind(null,e,t),n)}function $m(){}function NS(t,e){var n=nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function DS(t,e){var n=nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function VS(t,e,n){return Li&21?(gn(n,e)||(n=jT(),Ae.lanes|=n,Oi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Nt=!0),t.memoizedState=n)}function vk(t,e){var n=fe;fe=n!==0&&4>n?n:4,t(!0);var r=Sd.transition;Sd.transition={};try{t(!1),e()}finally{fe=n,Sd.transition=r}}function LS(){return nn().memoizedState}function _k(t,e,n){var r=$r(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},OS(t))MS(e,n);else if(n=yS(t,e,n,r),n!==null){var i=It();dn(n,t,r,i),FS(n,e,r)}}function wk(t,e,n){var r=$r(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(OS(t))MS(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,gn(a,o)){var l=e.interleaved;l===null?(i.next=i,Nm(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=yS(t,e,i,r),n!==null&&(i=It(),dn(n,t,r,i),FS(n,e,r))}}function OS(t){var e=t.alternate;return t===Ae||e!==null&&e===Ae}function MS(t,e){ea=oc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function FS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,vm(t,n)}}var ac={readContext:tn,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},Ek={readContext:tn,useCallback:function(t,e){return En().memoizedState=[t,e===void 0?null:e],t},useContext:tn,useEffect:T_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Eu(4194308,4,kS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Eu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Eu(4,2,t,e)},useMemo:function(t,e){var n=En();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=En();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=_k.bind(null,Ae,t),[r.memoizedState,t]},useRef:function(t){var e=En();return t={current:t},e.memoizedState=t},useState:E_,useDebugValue:$m,useDeferredValue:function(t){return En().memoizedState=t},useTransition:function(){var t=E_(!1),e=t[0];return t=vk.bind(null,t[1]),En().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ae,i=En();if(Se){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Qe===null)throw Error(U(349));Li&30||TS(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,T_(IS.bind(null,r,s,t),[t]),r.flags|=2048,ka(9,SS.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=En(),e=Qe.identifierPrefix;if(Se){var n=Qn,r=Gn;n=(r&~(1<<32-hn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ca++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=yk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Tk={readContext:tn,useCallback:NS,useContext:tn,useEffect:Um,useImperativeHandle:bS,useInsertionEffect:CS,useLayoutEffect:RS,useMemo:DS,useReducer:Id,useRef:PS,useState:function(){return Id(Ra)},useDebugValue:$m,useDeferredValue:function(t){var e=nn();return VS(e,Be.memoizedState,t)},useTransition:function(){var t=Id(Ra)[0],e=nn().memoizedState;return[t,e]},useMutableSource:wS,useSyncExternalStore:ES,useId:LS,unstable_isNewReconciler:!1},Sk={readContext:tn,useCallback:NS,useContext:tn,useEffect:Um,useImperativeHandle:bS,useInsertionEffect:CS,useLayoutEffect:RS,useMemo:DS,useReducer:xd,useRef:PS,useState:function(){return xd(Ra)},useDebugValue:$m,useDeferredValue:function(t){var e=nn();return Be===null?e.memoizedState=t:VS(e,Be.memoizedState,t)},useTransition:function(){var t=xd(Ra)[0],e=nn().memoizedState;return[t,e]},useMutableSource:wS,useSyncExternalStore:ES,useId:LS,unstable_isNewReconciler:!1};function ln(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Bf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jc={isMounted:function(t){return(t=t._reactInternals)?Hi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=It(),i=$r(t),s=er(r,i);s.payload=e,n!=null&&(s.callback=n),e=jr(t,s,i),e!==null&&(dn(e,t,i,r),_u(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=It(),i=$r(t),s=er(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=jr(t,s,i),e!==null&&(dn(e,t,i,r),_u(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=It(),r=$r(t),i=er(n,r);i.tag=2,e!=null&&(i.callback=e),e=jr(t,i,r),e!==null&&(dn(e,t,r,n),_u(e,t,r))}};function S_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ta(n,r)||!Ta(i,s):!0}function jS(t,e,n){var r=!1,i=Qr,s=e.contextType;return typeof s=="object"&&s!==null?s=tn(s):(i=Vt(e)?Di:yt.current,r=e.contextTypes,s=(r=r!=null)?js(t,i):Qr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function I_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Jc.enqueueReplaceState(e,e.state,null)}function zf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Dm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=tn(s):(s=Vt(e)?Di:yt.current,i.context=js(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Bf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Jc.enqueueReplaceState(i,i.state,null),ic(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function zs(t,e){try{var n="",r=e;do n+=XC(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ad(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Wf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ik=typeof WeakMap=="function"?WeakMap:Map;function US(t,e,n){n=er(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){uc||(uc=!0,ep=r),Wf(t,e)},n}function $S(t,e,n){n=er(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Wf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Wf(t,e),typeof r!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function x_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Ik;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Fk.bind(null,t,e,n),e.then(t,t))}function A_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function P_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=er(-1,1),e.tag=2,jr(n,e,1))),n.lanes|=1),t)}var xk=dr.ReactCurrentOwner,Nt=!1;function Et(t,e,n,r){e.child=t===null?gS(e,null,n,r):$s(e,t.child,n,r)}function C_(t,e,n,r,i){n=n.render;var s=e.ref;return bs(e,i),r=Fm(t,e,n,r,s,i),n=jm(),t!==null&&!Nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,sr(t,e,i)):(Se&&n&&Am(e),e.flags|=1,Et(t,e,r,i),e.child)}function R_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Qm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,BS(t,e,s,r,i)):(t=xu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ta,n(o,r)&&t.ref===e.ref)return sr(t,e,i)}return e.flags|=1,t=Br(s,r),t.ref=e.ref,t.return=e,e.child=t}function BS(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ta(s,r)&&t.ref===e.ref)if(Nt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Nt=!0);else return e.lanes=t.lanes,sr(t,e,i)}return Hf(t,e,n,r,i)}function zS(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(ws,Ft),Ft|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(ws,Ft),Ft|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ye(ws,Ft),Ft|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ye(ws,Ft),Ft|=r;return Et(t,e,i,n),e.child}function WS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Hf(t,e,n,r,i){var s=Vt(n)?Di:yt.current;return s=js(e,s),bs(e,i),n=Fm(t,e,n,r,s,i),r=jm(),t!==null&&!Nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,sr(t,e,i)):(Se&&r&&Am(e),e.flags|=1,Et(t,e,n,i),e.child)}function k_(t,e,n,r,i){if(Vt(n)){var s=!0;Zu(e)}else s=!1;if(bs(e,i),e.stateNode===null)Tu(t,e),jS(e,n,r),zf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=tn(c):(c=Vt(n)?Di:yt.current,c=js(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&I_(e,o,r,c),Sr=!1;var p=e.memoizedState;o.state=p,ic(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Dt.current||Sr?(typeof h=="function"&&(Bf(e,n,h,r),l=e.memoizedState),(a=Sr||S_(e,n,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,vS(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ln(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=tn(l):(l=Vt(n)?Di:yt.current,l=js(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&I_(e,o,r,l),Sr=!1,p=e.memoizedState,o.state=p,ic(e,r,o,i);var y=e.memoizedState;a!==d||p!==y||Dt.current||Sr?(typeof g=="function"&&(Bf(e,n,g,r),y=e.memoizedState),(c=Sr||S_(e,n,c,r,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Kf(t,e,n,r,s,i)}function Kf(t,e,n,r,i,s){WS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&m_(e,n,!1),sr(t,e,s);r=e.stateNode,xk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=$s(e,t.child,null,s),e.child=$s(e,null,a,s)):Et(t,e,a,s),e.memoizedState=r.state,i&&m_(e,n,!0),e.child}function HS(t){var e=t.stateNode;e.pendingContext?p_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&p_(t,e.context,!1),Vm(t,e.containerInfo)}function b_(t,e,n,r,i){return Us(),Cm(i),e.flags|=256,Et(t,e,n,r),e.child}var qf={dehydrated:null,treeContext:null,retryLane:0};function Gf(t){return{baseLanes:t,cachePool:null,transitions:null}}function KS(t,e,n){var r=e.pendingProps,i=Ie.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ye(Ie,i&1),t===null)return Uf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=th(o,r,0,null),t=Ri(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Gf(n),e.memoizedState=qf,t):Bm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Ak(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Br(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Br(a,s):(s=Ri(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Gf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=qf,r}return s=t.child,t=s.sibling,r=Br(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Bm(t,e){return e=th({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xl(t,e,n,r){return r!==null&&Cm(r),$s(e,t.child,null,n),t=Bm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ak(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ad(Error(U(422))),Xl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=th({mode:"visible",children:r.children},i,0,null),s=Ri(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&$s(e,t.child,null,o),e.child.memoizedState=Gf(o),e.memoizedState=qf,s);if(!(e.mode&1))return Xl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(U(419)),r=Ad(s,r,void 0),Xl(t,e,o,r)}if(a=(o&t.childLanes)!==0,Nt||a){if(r=Qe,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ir(t,i),dn(r,t,i,-1))}return Gm(),r=Ad(Error(U(421))),Xl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=jk.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,jt=Fr(i.nextSibling),$t=e,Se=!0,cn=null,t!==null&&(Qt[Yt++]=Gn,Qt[Yt++]=Qn,Qt[Yt++]=Vi,Gn=t.id,Qn=t.overflow,Vi=e),e=Bm(e,r.children),e.flags|=4096,e)}function N_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),$f(t.return,e,n)}function Pd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qS(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Et(t,e,r.children,n),r=Ie.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&N_(t,n,e);else if(t.tag===19)N_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ye(Ie,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&sc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Pd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&sc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Pd(e,!0,n,null,s);break;case"together":Pd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function sr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Oi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Br(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Br(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Pk(t,e,n){switch(e.tag){case 3:HS(e),Us();break;case 5:_S(e);break;case 1:Vt(e.type)&&Zu(e);break;case 4:Vm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ye(nc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ye(Ie,Ie.current&1),e.flags|=128,null):n&e.child.childLanes?KS(t,e,n):(ye(Ie,Ie.current&1),t=sr(t,e,n),t!==null?t.sibling:null);ye(Ie,Ie.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return qS(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ye(Ie,Ie.current),r)break;return null;case 22:case 23:return e.lanes=0,zS(t,e,n)}return sr(t,e,n)}var GS,Qf,QS,YS;GS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Qf=function(){};QS=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Si(Pn.current);var s=null;switch(n){case"input":i=yf(t,i),r=yf(t,r),s=[];break;case"select":i=Pe({},i,{value:void 0}),r=Pe({},r,{value:void 0}),s=[];break;case"textarea":i=wf(t,i),r=wf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xu)}Tf(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ma.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ma.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&we("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};YS=function(t,e,n,r){n!==r&&(e.flags|=4)};function Lo(t,e){if(!Se)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ck(t,e,n){var r=e.pendingProps;switch(Pm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(e),null;case 1:return Vt(e.type)&&Ju(),ut(e),null;case 3:return r=e.stateNode,Bs(),Te(Dt),Te(yt),Om(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ql(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,cn!==null&&(rp(cn),cn=null))),Qf(t,e),ut(e),null;case 5:Lm(e);var i=Si(Pa.current);if(n=e.type,t!==null&&e.stateNode!=null)QS(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return ut(e),null}if(t=Si(Pn.current),Ql(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Sn]=e,r[xa]=s,t=(e.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(i=0;i<zo.length;i++)we(zo[i],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":$v(r,s),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},we("invalid",r);break;case"textarea":zv(r,s),we("invalid",r)}Tf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Gl(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Gl(r.textContent,a,t),i=["children",""+a]):ma.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&we("scroll",r)}switch(n){case"input":Ul(r),Bv(r,s,!0);break;case"textarea":Ul(r),Wv(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Xu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=IT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Sn]=e,t[xa]=r,GS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Sf(n,r),n){case"dialog":we("cancel",t),we("close",t),i=r;break;case"iframe":case"object":case"embed":we("load",t),i=r;break;case"video":case"audio":for(i=0;i<zo.length;i++)we(zo[i],t);i=r;break;case"source":we("error",t),i=r;break;case"img":case"image":case"link":we("error",t),we("load",t),i=r;break;case"details":we("toggle",t),i=r;break;case"input":$v(t,r),i=yf(t,r),we("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Pe({},r,{value:void 0}),we("invalid",t);break;case"textarea":zv(t,r),i=wf(t,r),we("invalid",t);break;default:i=r}Tf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?PT(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&xT(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ga(t,l):typeof l=="number"&&ga(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ma.hasOwnProperty(s)?l!=null&&s==="onScroll"&&we("scroll",t):l!=null&&dm(t,s,l,o))}switch(n){case"input":Ul(t),Bv(t,r,!1);break;case"textarea":Ul(t),Wv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Gr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ps(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ps(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Xu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ut(e),null;case 6:if(t&&e.stateNode!=null)YS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Si(Pa.current),Si(Pn.current),Ql(e)){if(r=e.stateNode,n=e.memoizedProps,r[Sn]=e,(s=r.nodeValue!==n)&&(t=$t,t!==null))switch(t.tag){case 3:Gl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Gl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sn]=e,e.stateNode=r}return ut(e),null;case 13:if(Te(Ie),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Se&&jt!==null&&e.mode&1&&!(e.flags&128))pS(),Us(),e.flags|=98560,s=!1;else if(s=Ql(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Sn]=e}else Us(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ut(e),s=!1}else cn!==null&&(rp(cn),cn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ie.current&1?We===0&&(We=3):Gm())),e.updateQueue!==null&&(e.flags|=4),ut(e),null);case 4:return Bs(),Qf(t,e),t===null&&Sa(e.stateNode.containerInfo),ut(e),null;case 10:return bm(e.type._context),ut(e),null;case 17:return Vt(e.type)&&Ju(),ut(e),null;case 19:if(Te(Ie),s=e.memoizedState,s===null)return ut(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Lo(s,!1);else{if(We!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=sc(t),o!==null){for(e.flags|=128,Lo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(Ie,Ie.current&1|2),e.child}t=t.sibling}s.tail!==null&&Le()>Ws&&(e.flags|=128,r=!0,Lo(s,!1),e.lanes=4194304)}else{if(!r)if(t=sc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Lo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Se)return ut(e),null}else 2*Le()-s.renderingStartTime>Ws&&n!==1073741824&&(e.flags|=128,r=!0,Lo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Le(),e.sibling=null,n=Ie.current,ye(Ie,r?n&1|2:n&1),e):(ut(e),null);case 22:case 23:return qm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ft&1073741824&&(ut(e),e.subtreeFlags&6&&(e.flags|=8192)):ut(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function Rk(t,e){switch(Pm(e),e.tag){case 1:return Vt(e.type)&&Ju(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Bs(),Te(Dt),Te(yt),Om(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Lm(e),null;case 13:if(Te(Ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Us()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(Ie),null;case 4:return Bs(),null;case 10:return bm(e.type._context),null;case 22:case 23:return qm(),null;case 24:return null;default:return null}}var Jl=!1,ft=!1,kk=typeof WeakSet=="function"?WeakSet:Set,z=null;function _s(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(t,e,r)}else n.current=null}function Yf(t,e,n){try{n()}catch(r){De(t,e,r)}}var D_=!1;function bk(t,e){if(Df=Gu,t=tS(),xm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)p=d,d=g;for(;;){if(d===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(g=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vf={focusedElem:t,selectionRange:n},Gu=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var I=y.memoizedProps,P=y.memoizedState,w=e.stateNode,_=w.getSnapshotBeforeUpdate(e.elementType===e.type?I:ln(e.type,I),P);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(R){De(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return y=D_,D_=!1,y}function ta(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Yf(e,n,s)}i=i.next}while(i!==r)}}function Zc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Xf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function XS(t){var e=t.alternate;e!==null&&(t.alternate=null,XS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sn],delete e[xa],delete e[Mf],delete e[fk],delete e[pk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function JS(t){return t.tag===5||t.tag===3||t.tag===4}function V_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||JS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xu));else if(r!==4&&(t=t.child,t!==null))for(Jf(t,e,n),t=t.sibling;t!==null;)Jf(t,e,n),t=t.sibling}function Zf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Zf(t,e,n),t=t.sibling;t!==null;)Zf(t,e,n),t=t.sibling}var Xe=null,un=!1;function vr(t,e,n){for(n=n.child;n!==null;)ZS(t,e,n),n=n.sibling}function ZS(t,e,n){if(An&&typeof An.onCommitFiberUnmount=="function")try{An.onCommitFiberUnmount(Hc,n)}catch{}switch(n.tag){case 5:ft||_s(n,e);case 6:var r=Xe,i=un;Xe=null,vr(t,e,n),Xe=r,un=i,Xe!==null&&(un?(t=Xe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Xe.removeChild(n.stateNode));break;case 18:Xe!==null&&(un?(t=Xe,n=n.stateNode,t.nodeType===8?wd(t.parentNode,n):t.nodeType===1&&wd(t,n),wa(t)):wd(Xe,n.stateNode));break;case 4:r=Xe,i=un,Xe=n.stateNode.containerInfo,un=!0,vr(t,e,n),Xe=r,un=i;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Yf(n,e,o),i=i.next}while(i!==r)}vr(t,e,n);break;case 1:if(!ft&&(_s(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){De(n,e,a)}vr(t,e,n);break;case 21:vr(t,e,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,vr(t,e,n),ft=r):vr(t,e,n);break;default:vr(t,e,n)}}function L_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new kk),e.forEach(function(r){var i=Uk.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function sn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Xe=a.stateNode,un=!1;break e;case 3:Xe=a.stateNode.containerInfo,un=!0;break e;case 4:Xe=a.stateNode.containerInfo,un=!0;break e}a=a.return}if(Xe===null)throw Error(U(160));ZS(s,o,i),Xe=null,un=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){De(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)eI(e,t),e=e.sibling}function eI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(sn(e,t),vn(t),r&4){try{ta(3,t,t.return),Zc(3,t)}catch(I){De(t,t.return,I)}try{ta(5,t,t.return)}catch(I){De(t,t.return,I)}}break;case 1:sn(e,t),vn(t),r&512&&n!==null&&_s(n,n.return);break;case 5:if(sn(e,t),vn(t),r&512&&n!==null&&_s(n,n.return),t.flags&32){var i=t.stateNode;try{ga(i,"")}catch(I){De(t,t.return,I)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&TT(i,s),Sf(a,o);var c=Sf(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?PT(i,d):h==="dangerouslySetInnerHTML"?xT(i,d):h==="children"?ga(i,d):dm(i,h,d,c)}switch(a){case"input":vf(i,s);break;case"textarea":ST(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Ps(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?Ps(i,!!s.multiple,s.defaultValue,!0):Ps(i,!!s.multiple,s.multiple?[]:"",!1))}i[xa]=s}catch(I){De(t,t.return,I)}}break;case 6:if(sn(e,t),vn(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(I){De(t,t.return,I)}}break;case 3:if(sn(e,t),vn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wa(e.containerInfo)}catch(I){De(t,t.return,I)}break;case 4:sn(e,t),vn(t);break;case 13:sn(e,t),vn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Hm=Le())),r&4&&L_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(ft=(c=ft)||h,sn(e,t),ft=c):sn(e,t),vn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(z=t,h=t.child;h!==null;){for(d=z=h;z!==null;){switch(p=z,g=p.child,p.tag){case 0:case 11:case 14:case 15:ta(4,p,p.return);break;case 1:_s(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(I){De(r,n,I)}}break;case 5:_s(p,p.return);break;case 22:if(p.memoizedState!==null){M_(d);continue}}g!==null?(g.return=p,z=g):M_(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=AT("display",o))}catch(I){De(t,t.return,I)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(I){De(t,t.return,I)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:sn(e,t),vn(t),r&4&&L_(t);break;case 21:break;default:sn(e,t),vn(t)}}function vn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(JS(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ga(i,""),r.flags&=-33);var s=V_(t);Zf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=V_(t);Jf(t,a,o);break;default:throw Error(U(161))}}catch(l){De(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Nk(t,e,n){z=t,tI(t)}function tI(t,e,n){for(var r=(t.mode&1)!==0;z!==null;){var i=z,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Jl;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ft;a=Jl;var c=ft;if(Jl=o,(ft=l)&&!c)for(z=i;z!==null;)o=z,l=o.child,o.tag===22&&o.memoizedState!==null?F_(i):l!==null?(l.return=o,z=l):F_(i);for(;s!==null;)z=s,tI(s),s=s.sibling;z=i,Jl=a,ft=c}O_(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,z=s):O_(t)}}function O_(t){for(;z!==null;){var e=z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ft||Zc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ft)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ln(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&w_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}w_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&wa(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}ft||e.flags&512&&Xf(e)}catch(p){De(e,e.return,p)}}if(e===t){z=null;break}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}}function M_(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,z=n;break}z=e.return}}function F_(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Zc(4,e)}catch(l){De(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){De(e,i,l)}}var s=e.return;try{Xf(e)}catch(l){De(e,s,l)}break;case 5:var o=e.return;try{Xf(e)}catch(l){De(e,o,l)}}}catch(l){De(e,e.return,l)}if(e===t){z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,z=a;break}z=e.return}}var Dk=Math.ceil,lc=dr.ReactCurrentDispatcher,zm=dr.ReactCurrentOwner,Zt=dr.ReactCurrentBatchConfig,ue=0,Qe=null,je=null,tt=0,Ft=0,ws=ri(0),We=0,ba=null,Oi=0,eh=0,Wm=0,na=null,kt=null,Hm=0,Ws=1/0,Wn=null,uc=!1,ep=null,Ur=null,Zl=!1,br=null,cc=0,ra=0,tp=null,Su=-1,Iu=0;function It(){return ue&6?Le():Su!==-1?Su:Su=Le()}function $r(t){return t.mode&1?ue&2&&tt!==0?tt&-tt:gk.transition!==null?(Iu===0&&(Iu=jT()),Iu):(t=fe,t!==0||(t=window.event,t=t===void 0?16:KT(t.type)),t):1}function dn(t,e,n,r){if(50<ra)throw ra=0,tp=null,Error(U(185));Ya(t,n,r),(!(ue&2)||t!==Qe)&&(t===Qe&&(!(ue&2)&&(eh|=n),We===4&&xr(t,tt)),Lt(t,r),n===1&&ue===0&&!(e.mode&1)&&(Ws=Le()+500,Yc&&ii()))}function Lt(t,e){var n=t.callbackNode;gR(t,e);var r=qu(t,t===Qe?tt:0);if(r===0)n!==null&&qv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&qv(n),e===1)t.tag===0?mk(j_.bind(null,t)):hS(j_.bind(null,t)),hk(function(){!(ue&6)&&ii()}),n=null;else{switch(UT(r)){case 1:n=ym;break;case 4:n=MT;break;case 16:n=Ku;break;case 536870912:n=FT;break;default:n=Ku}n=uI(n,nI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function nI(t,e){if(Su=-1,Iu=0,ue&6)throw Error(U(327));var n=t.callbackNode;if(Ns()&&t.callbackNode!==n)return null;var r=qu(t,t===Qe?tt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=hc(t,r);else{e=r;var i=ue;ue|=2;var s=iI();(Qe!==t||tt!==e)&&(Wn=null,Ws=Le()+500,Ci(t,e));do try{Ok();break}catch(a){rI(t,a)}while(!0);km(),lc.current=s,ue=i,je!==null?e=0:(Qe=null,tt=0,e=We)}if(e!==0){if(e===2&&(i=Cf(t),i!==0&&(r=i,e=np(t,i))),e===1)throw n=ba,Ci(t,0),xr(t,r),Lt(t,Le()),n;if(e===6)xr(t,r);else{if(i=t.current.alternate,!(r&30)&&!Vk(i)&&(e=hc(t,r),e===2&&(s=Cf(t),s!==0&&(r=s,e=np(t,s))),e===1))throw n=ba,Ci(t,0),xr(t,r),Lt(t,Le()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:vi(t,kt,Wn);break;case 3:if(xr(t,r),(r&130023424)===r&&(e=Hm+500-Le(),10<e)){if(qu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){It(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Of(vi.bind(null,t,kt,Wn),e);break}vi(t,kt,Wn);break;case 4:if(xr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-hn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Dk(r/1960))-r,10<r){t.timeoutHandle=Of(vi.bind(null,t,kt,Wn),r);break}vi(t,kt,Wn);break;case 5:vi(t,kt,Wn);break;default:throw Error(U(329))}}}return Lt(t,Le()),t.callbackNode===n?nI.bind(null,t):null}function np(t,e){var n=na;return t.current.memoizedState.isDehydrated&&(Ci(t,e).flags|=256),t=hc(t,e),t!==2&&(e=kt,kt=n,e!==null&&rp(e)),t}function rp(t){kt===null?kt=t:kt.push.apply(kt,t)}function Vk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!gn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xr(t,e){for(e&=~Wm,e&=~eh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-hn(e),r=1<<n;t[n]=-1,e&=~r}}function j_(t){if(ue&6)throw Error(U(327));Ns();var e=qu(t,0);if(!(e&1))return Lt(t,Le()),null;var n=hc(t,e);if(t.tag!==0&&n===2){var r=Cf(t);r!==0&&(e=r,n=np(t,r))}if(n===1)throw n=ba,Ci(t,0),xr(t,e),Lt(t,Le()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vi(t,kt,Wn),Lt(t,Le()),null}function Km(t,e){var n=ue;ue|=1;try{return t(e)}finally{ue=n,ue===0&&(Ws=Le()+500,Yc&&ii())}}function Mi(t){br!==null&&br.tag===0&&!(ue&6)&&Ns();var e=ue;ue|=1;var n=Zt.transition,r=fe;try{if(Zt.transition=null,fe=1,t)return t()}finally{fe=r,Zt.transition=n,ue=e,!(ue&6)&&ii()}}function qm(){Ft=ws.current,Te(ws)}function Ci(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ck(n)),je!==null)for(n=je.return;n!==null;){var r=n;switch(Pm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ju();break;case 3:Bs(),Te(Dt),Te(yt),Om();break;case 5:Lm(r);break;case 4:Bs();break;case 13:Te(Ie);break;case 19:Te(Ie);break;case 10:bm(r.type._context);break;case 22:case 23:qm()}n=n.return}if(Qe=t,je=t=Br(t.current,null),tt=Ft=e,We=0,ba=null,Wm=eh=Oi=0,kt=na=null,Ti!==null){for(e=0;e<Ti.length;e++)if(n=Ti[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ti=null}return t}function rI(t,e){do{var n=je;try{if(km(),wu.current=ac,oc){for(var r=Ae.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}oc=!1}if(Li=0,Ge=Be=Ae=null,ea=!1,Ca=0,zm.current=null,n===null||n.return===null){We=1,ba=e,je=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=tt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=A_(o);if(g!==null){g.flags&=-257,P_(g,o,a,s,e),g.mode&1&&x_(s,c,e),e=g,l=c;var y=e.updateQueue;if(y===null){var I=new Set;I.add(l),e.updateQueue=I}else y.add(l);break e}else{if(!(e&1)){x_(s,c,e),Gm();break e}l=Error(U(426))}}else if(Se&&a.mode&1){var P=A_(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),P_(P,o,a,s,e),Cm(zs(l,a));break e}}s=l=zs(l,a),We!==4&&(We=2),na===null?na=[s]:na.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=US(s,l,e);__(s,w);break e;case 1:a=l;var _=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ur===null||!Ur.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=$S(s,a,e);__(s,R);break e}}s=s.return}while(s!==null)}oI(n)}catch(V){e=V,je===n&&n!==null&&(je=n=n.return);continue}break}while(!0)}function iI(){var t=lc.current;return lc.current=ac,t===null?ac:t}function Gm(){(We===0||We===3||We===2)&&(We=4),Qe===null||!(Oi&268435455)&&!(eh&268435455)||xr(Qe,tt)}function hc(t,e){var n=ue;ue|=2;var r=iI();(Qe!==t||tt!==e)&&(Wn=null,Ci(t,e));do try{Lk();break}catch(i){rI(t,i)}while(!0);if(km(),ue=n,lc.current=r,je!==null)throw Error(U(261));return Qe=null,tt=0,We}function Lk(){for(;je!==null;)sI(je)}function Ok(){for(;je!==null&&!aR();)sI(je)}function sI(t){var e=lI(t.alternate,t,Ft);t.memoizedProps=t.pendingProps,e===null?oI(t):je=e,zm.current=null}function oI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Rk(n,e),n!==null){n.flags&=32767,je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{We=6,je=null;return}}else if(n=Ck(n,e,Ft),n!==null){je=n;return}if(e=e.sibling,e!==null){je=e;return}je=e=t}while(e!==null);We===0&&(We=5)}function vi(t,e,n){var r=fe,i=Zt.transition;try{Zt.transition=null,fe=1,Mk(t,e,n,r)}finally{Zt.transition=i,fe=r}return null}function Mk(t,e,n,r){do Ns();while(br!==null);if(ue&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(yR(t,s),t===Qe&&(je=Qe=null,tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zl||(Zl=!0,uI(Ku,function(){return Ns(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Zt.transition,Zt.transition=null;var o=fe;fe=1;var a=ue;ue|=4,zm.current=null,bk(t,n),eI(n,t),rk(Vf),Gu=!!Df,Vf=Df=null,t.current=n,Nk(n),lR(),ue=a,fe=o,Zt.transition=s}else t.current=n;if(Zl&&(Zl=!1,br=t,cc=i),s=t.pendingLanes,s===0&&(Ur=null),hR(n.stateNode),Lt(t,Le()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(uc)throw uc=!1,t=ep,ep=null,t;return cc&1&&t.tag!==0&&Ns(),s=t.pendingLanes,s&1?t===tp?ra++:(ra=0,tp=t):ra=0,ii(),null}function Ns(){if(br!==null){var t=UT(cc),e=Zt.transition,n=fe;try{if(Zt.transition=null,fe=16>t?16:t,br===null)var r=!1;else{if(t=br,br=null,cc=0,ue&6)throw Error(U(331));var i=ue;for(ue|=4,z=t.current;z!==null;){var s=z,o=s.child;if(z.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(z=c;z!==null;){var h=z;switch(h.tag){case 0:case 11:case 15:ta(8,h,s)}var d=h.child;if(d!==null)d.return=h,z=d;else for(;z!==null;){h=z;var p=h.sibling,g=h.return;if(XS(h),h===c){z=null;break}if(p!==null){p.return=g,z=p;break}z=g}}}var y=s.alternate;if(y!==null){var I=y.child;if(I!==null){y.child=null;do{var P=I.sibling;I.sibling=null,I=P}while(I!==null)}}z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,z=o;else e:for(;z!==null;){if(s=z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ta(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,z=w;break e}z=s.return}}var _=t.current;for(z=_;z!==null;){o=z;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,z=E;else e:for(o=_;z!==null;){if(a=z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Zc(9,a)}}catch(V){De(a,a.return,V)}if(a===o){z=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,z=R;break e}z=a.return}}if(ue=i,ii(),An&&typeof An.onPostCommitFiberRoot=="function")try{An.onPostCommitFiberRoot(Hc,t)}catch{}r=!0}return r}finally{fe=n,Zt.transition=e}}return!1}function U_(t,e,n){e=zs(n,e),e=US(t,e,1),t=jr(t,e,1),e=It(),t!==null&&(Ya(t,1,e),Lt(t,e))}function De(t,e,n){if(t.tag===3)U_(t,t,n);else for(;e!==null;){if(e.tag===3){U_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ur===null||!Ur.has(r))){t=zs(n,t),t=$S(e,t,1),e=jr(e,t,1),t=It(),e!==null&&(Ya(e,1,t),Lt(e,t));break}}e=e.return}}function Fk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=It(),t.pingedLanes|=t.suspendedLanes&n,Qe===t&&(tt&n)===n&&(We===4||We===3&&(tt&130023424)===tt&&500>Le()-Hm?Ci(t,0):Wm|=n),Lt(t,e)}function aI(t,e){e===0&&(t.mode&1?(e=zl,zl<<=1,!(zl&130023424)&&(zl=4194304)):e=1);var n=It();t=ir(t,e),t!==null&&(Ya(t,e,n),Lt(t,n))}function jk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),aI(t,n)}function Uk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),aI(t,n)}var lI;lI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Dt.current)Nt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Nt=!1,Pk(t,e,n);Nt=!!(t.flags&131072)}else Nt=!1,Se&&e.flags&1048576&&dS(e,tc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Tu(t,e),t=e.pendingProps;var i=js(e,yt.current);bs(e,n),i=Fm(null,e,r,t,i,n);var s=jm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vt(r)?(s=!0,Zu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Dm(e),i.updater=Jc,e.stateNode=i,i._reactInternals=e,zf(e,r,t,n),e=Kf(null,e,r,!0,s,n)):(e.tag=0,Se&&s&&Am(e),Et(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Tu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Bk(r),t=ln(r,t),i){case 0:e=Hf(null,e,r,t,n);break e;case 1:e=k_(null,e,r,t,n);break e;case 11:e=C_(null,e,r,t,n);break e;case 14:e=R_(null,e,r,ln(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),Hf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),k_(t,e,r,i,n);case 3:e:{if(HS(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,vS(t,e),ic(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=zs(Error(U(423)),e),e=b_(t,e,r,n,i);break e}else if(r!==i){i=zs(Error(U(424)),e),e=b_(t,e,r,n,i);break e}else for(jt=Fr(e.stateNode.containerInfo.firstChild),$t=e,Se=!0,cn=null,n=gS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Us(),r===i){e=sr(t,e,n);break e}Et(t,e,r,n)}e=e.child}return e;case 5:return _S(e),t===null&&Uf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Lf(r,i)?o=null:s!==null&&Lf(r,s)&&(e.flags|=32),WS(t,e),Et(t,e,o,n),e.child;case 6:return t===null&&Uf(e),null;case 13:return KS(t,e,n);case 4:return Vm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=$s(e,null,r,n):Et(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),C_(t,e,r,i,n);case 7:return Et(t,e,e.pendingProps,n),e.child;case 8:return Et(t,e,e.pendingProps.children,n),e.child;case 12:return Et(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ye(nc,r._currentValue),r._currentValue=o,s!==null)if(gn(s.value,o)){if(s.children===i.children&&!Dt.current){e=sr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=er(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),$f(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),$f(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Et(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,bs(e,n),i=tn(i),r=r(i),e.flags|=1,Et(t,e,r,n),e.child;case 14:return r=e.type,i=ln(r,e.pendingProps),i=ln(r.type,i),R_(t,e,r,i,n);case 15:return BS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),Tu(t,e),e.tag=1,Vt(r)?(t=!0,Zu(e)):t=!1,bs(e,n),jS(e,r,i),zf(e,r,i,n),Kf(null,e,r,!0,t,n);case 19:return qS(t,e,n);case 22:return zS(t,e,n)}throw Error(U(156,e.tag))};function uI(t,e){return OT(t,e)}function $k(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(t,e,n,r){return new $k(t,e,n,r)}function Qm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Bk(t){if(typeof t=="function")return Qm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pm)return 11;if(t===mm)return 14}return 2}function Br(t,e){var n=t.alternate;return n===null?(n=Xt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Qm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case cs:return Ri(n.children,i,s,e);case fm:o=8,i|=8;break;case ff:return t=Xt(12,n,e,i|2),t.elementType=ff,t.lanes=s,t;case pf:return t=Xt(13,n,e,i),t.elementType=pf,t.lanes=s,t;case mf:return t=Xt(19,n,e,i),t.elementType=mf,t.lanes=s,t;case _T:return th(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yT:o=10;break e;case vT:o=9;break e;case pm:o=11;break e;case mm:o=14;break e;case Tr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Xt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ri(t,e,n,r){return t=Xt(7,t,r,e),t.lanes=n,t}function th(t,e,n,r){return t=Xt(22,t,r,e),t.elementType=_T,t.lanes=n,t.stateNode={isHidden:!1},t}function Cd(t,e,n){return t=Xt(6,t,null,e),t.lanes=n,t}function Rd(t,e,n){return e=Xt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function zk(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ud(0),this.expirationTimes=ud(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ud(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ym(t,e,n,r,i,s,o,a,l){return t=new zk(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Xt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dm(s),t}function Wk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:us,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function cI(t){if(!t)return Qr;t=t._reactInternals;e:{if(Hi(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Vt(n))return cS(t,n,e)}return e}function hI(t,e,n,r,i,s,o,a,l){return t=Ym(n,r,!0,t,i,s,o,a,l),t.context=cI(null),n=t.current,r=It(),i=$r(n),s=er(r,i),s.callback=e??null,jr(n,s,i),t.current.lanes=i,Ya(t,i,r),Lt(t,r),t}function nh(t,e,n,r){var i=e.current,s=It(),o=$r(i);return n=cI(n),e.context===null?e.context=n:e.pendingContext=n,e=er(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=jr(i,e,o),t!==null&&(dn(t,i,o,s),_u(t,i,o)),o}function dc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xm(t,e){$_(t,e),(t=t.alternate)&&$_(t,e)}function Hk(){return null}var dI=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jm(t){this._internalRoot=t}rh.prototype.render=Jm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));nh(t,e,null,null)};rh.prototype.unmount=Jm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Mi(function(){nh(null,t,null,null)}),e[rr]=null}};function rh(t){this._internalRoot=t}rh.prototype.unstable_scheduleHydration=function(t){if(t){var e=zT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ir.length&&e!==0&&e<Ir[n].priority;n++);Ir.splice(n,0,t),n===0&&HT(t)}};function Zm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ih(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function B_(){}function Kk(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=dc(o);s.call(c)}}var o=hI(e,r,t,0,null,!1,!1,"",B_);return t._reactRootContainer=o,t[rr]=o.current,Sa(t.nodeType===8?t.parentNode:t),Mi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=dc(l);a.call(c)}}var l=Ym(t,0,!1,null,null,!1,!1,"",B_);return t._reactRootContainer=l,t[rr]=l.current,Sa(t.nodeType===8?t.parentNode:t),Mi(function(){nh(e,l,n,r)}),l}function sh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=dc(o);a.call(l)}}nh(e,o,t,i)}else o=Kk(n,e,t,i,r);return dc(o)}$T=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bo(e.pendingLanes);n!==0&&(vm(e,n|1),Lt(e,Le()),!(ue&6)&&(Ws=Le()+500,ii()))}break;case 13:Mi(function(){var r=ir(t,1);if(r!==null){var i=It();dn(r,t,1,i)}}),Xm(t,1)}};_m=function(t){if(t.tag===13){var e=ir(t,134217728);if(e!==null){var n=It();dn(e,t,134217728,n)}Xm(t,134217728)}};BT=function(t){if(t.tag===13){var e=$r(t),n=ir(t,e);if(n!==null){var r=It();dn(n,t,e,r)}Xm(t,e)}};zT=function(){return fe};WT=function(t,e){var n=fe;try{return fe=t,e()}finally{fe=n}};xf=function(t,e,n){switch(e){case"input":if(vf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Qc(r);if(!i)throw Error(U(90));ET(r),vf(r,i)}}}break;case"textarea":ST(t,n);break;case"select":e=n.value,e!=null&&Ps(t,!!n.multiple,e,!1)}};kT=Km;bT=Mi;var qk={usingClientEntryPoint:!1,Events:[Ja,ps,Qc,CT,RT,Km]},Oo={findFiberByHostInstance:Ei,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gk={bundleType:Oo.bundleType,version:Oo.version,rendererPackageName:Oo.rendererPackageName,rendererConfig:Oo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=VT(t),t===null?null:t.stateNode},findFiberByHostInstance:Oo.findFiberByHostInstance||Hk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eu.isDisabled&&eu.supportsFiber)try{Hc=eu.inject(Gk),An=eu}catch{}}Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qk;Wt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zm(e))throw Error(U(200));return Wk(t,e,null,n)};Wt.createRoot=function(t,e){if(!Zm(t))throw Error(U(299));var n=!1,r="",i=dI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ym(t,1,!1,null,null,n,!1,r,i),t[rr]=e.current,Sa(t.nodeType===8?t.parentNode:t),new Jm(e)};Wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=VT(e),t=t===null?null:t.stateNode,t};Wt.flushSync=function(t){return Mi(t)};Wt.hydrate=function(t,e,n){if(!ih(e))throw Error(U(200));return sh(null,t,e,!0,n)};Wt.hydrateRoot=function(t,e,n){if(!Zm(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=dI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=hI(e,null,t,1,n??null,i,!1,s,o),t[rr]=e.current,Sa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new rh(e)};Wt.render=function(t,e,n){if(!ih(e))throw Error(U(200));return sh(null,t,e,!1,n)};Wt.unmountComponentAtNode=function(t){if(!ih(t))throw Error(U(40));return t._reactRootContainer?(Mi(function(){sh(null,null,t,!1,function(){t._reactRootContainer=null,t[rr]=null})}),!0):!1};Wt.unstable_batchedUpdates=Km;Wt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ih(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return sh(t,e,n,!1,r)};Wt.version="18.3.1-next-f1338f8080-20240426";function fI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fI)}catch(t){console.error(t)}}fI(),fT.exports=Wt;var pI=fT.exports,mI,z_=pI;mI=z_.createRoot,z_.hydrateRoot;const Qk="modulepreload",Yk=function(t){return"/TopChess/"+t},W_={},Xk=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=Yk(l),l in W_)return;W_[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":Qk,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((p,g)=>{d.addEventListener("load",p),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Na(){return Na=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Na.apply(this,arguments)}var Nr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Nr||(Nr={}));const H_="popstate";function Jk(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return ip("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:fc(i)}return eb(e,n,null,t)}function Oe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function eg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Zk(){return Math.random().toString(36).substr(2,8)}function K_(t,e){return{usr:t.state,key:t.key,idx:e}}function ip(t,e,n,r){return n===void 0&&(n=null),Na({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?so(e):e,{state:n,key:e&&e.key||r||Zk()})}function fc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function so(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function eb(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Nr.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Na({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Nr.Pop;let P=h(),w=P==null?null:P-c;c=P,l&&l({action:a,location:I.location,delta:w})}function p(P,w){a=Nr.Push;let _=ip(I.location,P,w);c=h()+1;let E=K_(_,c),R=I.createHref(_);try{o.pushState(E,"",R)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(R)}s&&l&&l({action:a,location:I.location,delta:1})}function g(P,w){a=Nr.Replace;let _=ip(I.location,P,w);c=h();let E=K_(_,c),R=I.createHref(_);o.replaceState(E,"",R),s&&l&&l({action:a,location:I.location,delta:0})}function y(P){let w=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof P=="string"?P:fc(P);return _=_.replace(/ $/,"%20"),Oe(w,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,w)}let I={get action(){return a},get location(){return t(i,o)},listen(P){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(H_,d),l=P,()=>{i.removeEventListener(H_,d),l=null}},createHref(P){return e(i,P)},createURL:y,encodeLocation(P){let w=y(P);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:g,go(P){return o.go(P)}};return I}var q_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(q_||(q_={}));function tb(t,e,n){return n===void 0&&(n="/"),nb(t,e,n)}function nb(t,e,n,r){let i=typeof e=="string"?so(e):e,s=tg(i.pathname||"/",n);if(s==null)return null;let o=gI(t);rb(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=mb(s);a=db(o[l],c)}return a}function gI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Oe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=zr([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Oe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),gI(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:cb(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of yI(s.path))i(s,o,l)}),e}function yI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=yI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function rb(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:hb(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ib=/^:[\w-]+$/,sb=3,ob=2,ab=1,lb=10,ub=-2,G_=t=>t==="*";function cb(t,e){let n=t.split("/"),r=n.length;return n.some(G_)&&(r+=ub),e&&(r+=ob),n.filter(i=>!G_(i)).reduce((i,s)=>i+(ib.test(s)?sb:s===""?ab:lb),r)}function hb(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function db(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=fb({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:zr([s,d.pathname]),pathnameBase:wb(zr([s,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(s=zr([s,d.pathnameBase]))}return o}function fb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=pb(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:p,isOptional:g}=h;if(p==="*"){let I=a[d]||"";o=s.slice(0,s.length-I.length).replace(/(.)\/+$/,"$1")}const y=a[d];return g&&!y?c[p]=void 0:c[p]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function pb(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),eg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function mb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return eg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function tg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const gb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yb=t=>gb.test(t);function vb(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?so(t):t,s;if(n)if(yb(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),eg(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=Q_(n.substring(1),"/"):s=Q_(n,e)}else s=e;return{pathname:s,search:Eb(r),hash:Tb(i)}}function Q_(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function kd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _b(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ng(t,e){let n=_b(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function rg(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=so(t):(i=Na({},t),Oe(!i.pathname||!i.pathname.includes("?"),kd("?","pathname","search",i)),Oe(!i.pathname||!i.pathname.includes("#"),kd("#","pathname","hash",i)),Oe(!i.search||!i.search.includes("#"),kd("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=vb(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const zr=t=>t.join("/").replace(/\/\/+/g,"/"),wb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Eb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Tb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Sb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const vI=["post","put","patch","delete"];new Set(vI);const Ib=["get",...vI];new Set(Ib);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Da(){return Da=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Da.apply(this,arguments)}const ig=N.createContext(null),xb=N.createContext(null),si=N.createContext(null),oh=N.createContext(null),oi=N.createContext({outlet:null,matches:[],isDataRoute:!1}),_I=N.createContext(null);function Ab(t,e){let{relative:n}=e===void 0?{}:e;oo()||Oe(!1);let{basename:r,navigator:i}=N.useContext(si),{hash:s,pathname:o,search:a}=EI(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:zr([r,o])),i.createHref({pathname:l,search:a,hash:s})}function oo(){return N.useContext(oh)!=null}function fr(){return oo()||Oe(!1),N.useContext(oh).location}function wI(t){N.useContext(si).static||N.useLayoutEffect(t)}function el(){let{isDataRoute:t}=N.useContext(oi);return t?jb():Pb()}function Pb(){oo()||Oe(!1);let t=N.useContext(ig),{basename:e,future:n,navigator:r}=N.useContext(si),{matches:i}=N.useContext(oi),{pathname:s}=fr(),o=JSON.stringify(ng(i,n.v7_relativeSplatPath)),a=N.useRef(!1);return wI(()=>{a.current=!0}),N.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=rg(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:zr([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}function EI(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=N.useContext(si),{matches:i}=N.useContext(oi),{pathname:s}=fr(),o=JSON.stringify(ng(i,r.v7_relativeSplatPath));return N.useMemo(()=>rg(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function Cb(t,e){return Rb(t,e)}function Rb(t,e,n,r){oo()||Oe(!1);let{navigator:i}=N.useContext(si),{matches:s}=N.useContext(oi),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=fr(),h;if(e){var d;let P=typeof e=="string"?so(e):e;l==="/"||(d=P.pathname)!=null&&d.startsWith(l)||Oe(!1),h=P}else h=c;let p=h.pathname||"/",g=p;if(l!=="/"){let P=l.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(P.length).join("/")}let y=tb(t,{pathname:g}),I=Vb(y&&y.map(P=>Object.assign({},P,{params:Object.assign({},a,P.params),pathname:zr([l,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?l:zr([l,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),s,n,r);return e&&I?N.createElement(oh.Provider,{value:{location:Da({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Nr.Pop}},I):I}function kb(){let t=Fb(),e=Sb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:i},n):null,null)}const bb=N.createElement(kb,null);class Nb extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?N.createElement(oi.Provider,{value:this.props.routeContext},N.createElement(_I.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Db(t){let{routeContext:e,match:n,children:r}=t,i=N.useContext(ig);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(oi.Provider,{value:e},r)}function Vb(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Oe(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:g}=n,y=d.route.loader&&p[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,p)=>{let g,y=!1,I=null,P=null;n&&(g=a&&d.route.id?a[d.route.id]:void 0,I=d.route.errorElement||bb,l&&(c<0&&p===0?(Ub("route-fallback"),y=!0,P=null):c===p&&(y=!0,P=d.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,p+1)),_=()=>{let E;return g?E=I:y?E=P:d.route.Component?E=N.createElement(d.route.Component,null):d.route.element?E=d.route.element:E=h,N.createElement(Db,{match:d,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:E})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?N.createElement(Nb,{location:n.location,revalidation:n.revalidation,component:I,error:g,children:_(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):_()},null)}var TI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(TI||{}),SI=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(SI||{});function Lb(t){let e=N.useContext(ig);return e||Oe(!1),e}function Ob(t){let e=N.useContext(xb);return e||Oe(!1),e}function Mb(t){let e=N.useContext(oi);return e||Oe(!1),e}function II(t){let e=Mb(),n=e.matches[e.matches.length-1];return n.route.id||Oe(!1),n.route.id}function Fb(){var t;let e=N.useContext(_I),n=Ob(),r=II();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function jb(){let{router:t}=Lb(TI.UseNavigateStable),e=II(SI.UseNavigateStable),n=N.useRef(!1);return wI(()=>{n.current=!0}),N.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Da({fromRouteId:e},s)))},[t,e])}const Y_={};function Ub(t,e,n){Y_[t]||(Y_[t]=!0)}function $b(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function xI(t){let{to:e,replace:n,state:r,relative:i}=t;oo()||Oe(!1);let{future:s,static:o}=N.useContext(si),{matches:a}=N.useContext(oi),{pathname:l}=fr(),c=el(),h=rg(e,ng(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(h);return N.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function Mt(t){Oe(!1)}function Bb(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Nr.Pop,navigator:s,static:o=!1,future:a}=t;oo()&&Oe(!1);let l=e.replace(/^\/*/,"/"),c=N.useMemo(()=>({basename:l,navigator:s,static:o,future:Da({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=so(r));let{pathname:h="/",search:d="",hash:p="",state:g=null,key:y="default"}=r,I=N.useMemo(()=>{let P=tg(h,l);return P==null?null:{location:{pathname:P,search:d,hash:p,state:g,key:y},navigationType:i}},[l,h,d,p,g,y,i]);return I==null?null:N.createElement(si.Provider,{value:c},N.createElement(oh.Provider,{children:n,value:I}))}function zb(t){let{children:e,location:n}=t;return Cb(sp(e),n)}new Promise(()=>{});function sp(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(r,i)=>{if(!N.isValidElement(r))return;let s=[...e,i];if(r.type===N.Fragment){n.push.apply(n,sp(r.props.children,s));return}r.type!==Mt&&Oe(!1),!r.props.index||!r.props.children||Oe(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=sp(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function op(){return op=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},op.apply(this,arguments)}function Wb(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Hb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Kb(t,e){return t.button===0&&(!e||e==="_self")&&!Hb(t)}const qb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Gb="6";try{window.__reactRouterVersion=Gb}catch{}const Qb="startTransition",X_=FC[Qb];function Yb(t){let{basename:e,children:n,future:r,window:i}=t,s=N.useRef();s.current==null&&(s.current=Jk({window:i,v5Compat:!0}));let o=s.current,[a,l]=N.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=N.useCallback(d=>{c&&X_?X_(()=>l(d)):l(d)},[l,c]);return N.useLayoutEffect(()=>o.listen(h),[o,h]),N.useEffect(()=>$b(r),[r]),N.createElement(Bb,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const Xb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Jb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kn=N.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,p=Wb(e,qb),{basename:g}=N.useContext(si),y,I=!1;if(typeof c=="string"&&Jb.test(c)&&(y=c,Xb))try{let E=new URL(window.location.href),R=c.startsWith("//")?new URL(E.protocol+c):new URL(c),V=tg(R.pathname,g);R.origin===E.origin&&V!=null?c=V+R.search+R.hash:I=!0}catch{}let P=Ab(c,{relative:i}),w=Zb(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:d});function _(E){r&&r(E),E.defaultPrevented||w(E)}return N.createElement("a",op({},p,{href:y||P,onClick:I||s?r:_,ref:n,target:l}))});var J_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(J_||(J_={}));var Z_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Z_||(Z_={}));function Zb(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=el(),c=fr(),h=EI(t,{relative:o});return N.useCallback(d=>{if(Kb(d,n)){d.preventDefault();let p=r!==void 0?r:fc(c)===fc(h);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}let eN={data:""},tN=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||eN},nN=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,rN=/\/\*[^]*?\*\/|  +/g,e0=/\n+/g,Ar=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?Ar(o,s):s+"{"+Ar(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=Ar(o,e?e.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Ar.p?Ar.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Un={},AI=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+AI(t[n]);return e}return t},iN=(t,e,n,r,i)=>{let s=AI(t),o=Un[s]||(Un[s]=(l=>{let c=0,h=11;for(;c<l.length;)h=101*h+l.charCodeAt(c++)>>>0;return"go"+h})(s));if(!Un[o]){let l=s!==t?t:(c=>{let h,d,p=[{}];for(;h=nN.exec(c.replace(rN,""));)h[4]?p.shift():h[3]?(d=h[3].replace(e0," ").trim(),p.unshift(p[0][d]=p[0][d]||{})):p[0][h[1]]=h[2].replace(e0," ").trim();return p[0]})(t);Un[o]=Ar(i?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&Un.g?Un.g:null;return n&&(Un.g=Un[o]),((l,c,h,d)=>{d?c.data=c.data.replace(d,l):c.data.indexOf(l)===-1&&(c.data=h?l+c.data:c.data+l)})(Un[o],e,r,a),o},sN=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":Ar(a,""):a===!1?"":a}return r+i+(o??"")},"");function ah(t){let e=this||{},n=t.call?t(e.p):t;return iN(n.unshift?n.raw?sN(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,tN(e.target),e.g,e.o,e.k)}let PI,ap,lp;ah.bind({g:1});let or=ah.bind({k:1});function oN(t,e,n,r){Ar.p=e,PI=t,ap=n,lp=r}function ai(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),l=a.className||i.className;n.p=Object.assign({theme:ap&&ap()},a),n.o=/ *go\d+/.test(l),a.className=ah.apply(n,r)+(l?" "+l:"");let c=t;return t[0]&&(c=a.as||t,delete a.as),lp&&c[0]&&lp(a),PI(c,a)}return i}}var aN=t=>typeof t=="function",pc=(t,e)=>aN(t)?t(e):t,lN=(()=>{let t=0;return()=>(++t).toString()})(),CI=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),uN=20,sg="default",RI=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===e.toast.id?{...o,...e.toast}:o)};case 2:let{toast:r}=e;return RI(t,{type:t.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=e;return{...t,toasts:t.toasts.map(o=>o.id===i||i===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+s}))}}},Au=[],kI={toasts:[],pausedAt:void 0,settings:{toastLimit:uN}},In={},bI=(t,e=sg)=>{In[e]=RI(In[e]||kI,t),Au.forEach(([n,r])=>{n===e&&r(In[e])})},NI=t=>Object.keys(In).forEach(e=>bI(t,e)),cN=t=>Object.keys(In).find(e=>In[e].toasts.some(n=>n.id===t)),lh=(t=sg)=>e=>{bI(e,t)},hN={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},dN=(t={},e=sg)=>{let[n,r]=N.useState(In[e]||kI),i=N.useRef(In[e]);N.useEffect(()=>(i.current!==In[e]&&r(In[e]),Au.push([e,r]),()=>{let o=Au.findIndex(([a])=>a===e);o>-1&&Au.splice(o,1)}),[e]);let s=n.toasts.map(o=>{var a,l,c;return{...t,...t[o.type],...o,removeDelay:o.removeDelay||((a=t[o.type])==null?void 0:a.removeDelay)||(t==null?void 0:t.removeDelay),duration:o.duration||((l=t[o.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||hN[o.type],style:{...t.style,...(c=t[o.type])==null?void 0:c.style,...o.style}}});return{...n,toasts:s}},fN=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||lN()}),tl=t=>(e,n)=>{let r=fN(e,t,n);return lh(r.toasterId||cN(r.id))({type:2,toast:r}),r.id},ze=(t,e)=>tl("blank")(t,e);ze.error=tl("error");ze.success=tl("success");ze.loading=tl("loading");ze.custom=tl("custom");ze.dismiss=(t,e)=>{let n={type:3,toastId:t};e?lh(e)(n):NI(n)};ze.dismissAll=t=>ze.dismiss(void 0,t);ze.remove=(t,e)=>{let n={type:4,toastId:t};e?lh(e)(n):NI(n)};ze.removeAll=t=>ze.remove(void 0,t);ze.promise=(t,e,n)=>{let r=ze.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let s=e.success?pc(e.success,i):void 0;return s?ze.success(s,{id:r,...n,...n==null?void 0:n.success}):ze.dismiss(r),i}).catch(i=>{let s=e.error?pc(e.error,i):void 0;s?ze.error(s,{id:r,...n,...n==null?void 0:n.error}):ze.dismiss(r)}),t};var pN=1e3,mN=(t,e="default")=>{let{toasts:n,pausedAt:r}=dN(t,e),i=N.useRef(new Map).current,s=N.useCallback((d,p=pN)=>{if(i.has(d))return;let g=setTimeout(()=>{i.delete(d),o({type:4,toastId:d})},p);i.set(d,g)},[]);N.useEffect(()=>{if(r)return;let d=Date.now(),p=n.map(g=>{if(g.duration===1/0)return;let y=(g.duration||0)+g.pauseDuration-(d-g.createdAt);if(y<0){g.visible&&ze.dismiss(g.id);return}return setTimeout(()=>ze.dismiss(g.id,e),y)});return()=>{p.forEach(g=>g&&clearTimeout(g))}},[n,r,e]);let o=N.useCallback(lh(e),[e]),a=N.useCallback(()=>{o({type:5,time:Date.now()})},[o]),l=N.useCallback((d,p)=>{o({type:1,toast:{id:d,height:p}})},[o]),c=N.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),h=N.useCallback((d,p)=>{let{reverseOrder:g=!1,gutter:y=8,defaultPosition:I}=p||{},P=n.filter(E=>(E.position||I)===(d.position||I)&&E.height),w=P.findIndex(E=>E.id===d.id),_=P.filter((E,R)=>R<w&&E.visible).length;return P.filter(E=>E.visible).slice(...g?[_+1]:[0,_]).reduce((E,R)=>E+(R.height||0)+y,0)},[n]);return N.useEffect(()=>{n.forEach(d=>{if(d.dismissed)s(d.id,d.removeDelay);else{let p=i.get(d.id);p&&(clearTimeout(p),i.delete(d.id))}})},[n,s]),{toasts:n,handlers:{updateHeight:l,startPause:a,endPause:c,calculateOffset:h}}},gN=or`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,yN=or`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,vN=or`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,_N=ai("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${gN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${yN} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${vN} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,wN=or`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,EN=ai("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${wN} 1s linear infinite;
`,TN=or`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,SN=or`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,IN=ai("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${TN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${SN} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,xN=ai("div")`
  position: absolute;
`,AN=ai("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,PN=or`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,CN=ai("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${PN} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,RN=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?N.createElement(CN,null,e):e:n==="blank"?null:N.createElement(AN,null,N.createElement(EN,{...r}),n!=="loading"&&N.createElement(xN,null,n==="error"?N.createElement(_N,{...r}):N.createElement(IN,{...r})))},kN=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,bN=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,NN="0%{opacity:0;} 100%{opacity:1;}",DN="0%{opacity:1;} 100%{opacity:0;}",VN=ai("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,LN=ai("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,ON=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=CI()?[NN,DN]:[kN(n),bN(n)];return{animation:e?`${or(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${or(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},MN=N.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?ON(t.position||e||"top-center",t.visible):{opacity:0},s=N.createElement(RN,{toast:t}),o=N.createElement(LN,{...t.ariaProps},pc(t.message,t));return N.createElement(VN,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):N.createElement(N.Fragment,null,s,o))});oN(N.createElement);var FN=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let s=N.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(t,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return N.createElement("div",{ref:s,className:e,style:n},i)},jN=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:CI()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},UN=ah`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,tu=16,$N=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,toasterId:s,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:c}=mN(n,s);return N.createElement("div",{"data-rht-toaster":s||"",style:{position:"fixed",zIndex:9999,top:tu,left:tu,right:tu,bottom:tu,pointerEvents:"none",...o},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(h=>{let d=h.position||e,p=c.calculateOffset(h,{reverseOrder:t,gutter:r,defaultPosition:e}),g=jN(d,p);return N.createElement(FN,{id:h.id,key:h.id,onHeightUpdate:c.updateHeight,className:h.visible?UN:"",style:g},h.type==="custom"?pc(h.message,h):i?i(h):N.createElement(MN,{toast:h,position:d}))}))},bd=ze,t0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},BN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},VI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),r.push(n[h],n[d],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(DI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):BN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new zN;const p=s<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),d!==64){const y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class zN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WN=function(t){const e=DI(t);return VI.encodeByteArray(e,!0)},mc=function(t){return WN(t).replace(/\./g,"")},LI=function(t){try{return VI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=()=>HN().__FIREBASE_DEFAULTS__,qN=()=>{if(typeof process>"u"||typeof t0>"u")return;const t=t0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},GN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&LI(t[1]);return e&&JSON.parse(e)},uh=()=>{try{return KN()||qN()||GN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},OI=t=>{var e,n;return(n=(e=uh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},QN=t=>{const e=OI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},MI=()=>{var t;return(t=uh())===null||t===void 0?void 0:t.config},FI=t=>{var e;return(e=uh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[mc(JSON.stringify(n)),mc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function ZN(){var t;const e=(t=uh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rD(){const t=vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function iD(){return!ZN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sD(){try{return typeof indexedDB=="object"}catch{return!1}}function oD(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD="FirebaseError";class pr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=aD,Object.setPrototypeOf(this,pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nl.prototype.create)}}class nl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?lD(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new pr(i,a,r)}}function lD(t,e){return t.replace(uD,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const uD=/\{\$([^}]+)}/g;function cD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(n0(s)&&n0(o)){if(!gc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function n0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hD(t,e){const n=new dD(t,e);return n.subscribe.bind(n)}class dD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");fD(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Nd),i.error===void 0&&(i.error=Nd),i.complete===void 0&&(i.complete=Nd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Nd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t){return t&&t._delegate?t._delegate:t}class Fi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new YN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gD(e))try{this.getOrInitializeService({instanceIdentifier:_i})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=_i){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_i){return this.instances.has(e)}getOptions(e=_i){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_i){return this.component?this.component.multipleInstances?e:_i:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mD(t){return t===_i?void 0:t}function gD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const vD={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},_D=ae.INFO,wD={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},ED=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=wD[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let og=class{constructor(e){this.name=e,this._logLevel=_D,this._logHandler=ED,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}};const TD=(t,e)=>e.some(n=>t instanceof n);let r0,i0;function SD(){return r0||(r0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ID(){return i0||(i0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jI=new WeakMap,up=new WeakMap,UI=new WeakMap,Dd=new WeakMap,ag=new WeakMap;function xD(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Wr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&jI.set(n,t)}).catch(()=>{}),ag.set(e,t),e}function AD(t){if(up.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});up.set(t,e)}let cp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return up.get(t);if(e==="objectStoreNames")return t.objectStoreNames||UI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function PD(t){cp=t(cp)}function CD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Vd(this),e,...n);return UI.set(r,e.sort?e.sort():[e]),Wr(r)}:ID().includes(t)?function(...e){return t.apply(Vd(this),e),Wr(jI.get(this))}:function(...e){return Wr(t.apply(Vd(this),e))}}function RD(t){return typeof t=="function"?CD(t):(t instanceof IDBTransaction&&AD(t),TD(t,SD())?new Proxy(t,cp):t)}function Wr(t){if(t instanceof IDBRequest)return xD(t);if(Dd.has(t))return Dd.get(t);const e=RD(t);return e!==t&&(Dd.set(t,e),ag.set(e,t)),e}const Vd=t=>ag.get(t);function kD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Wr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Wr(o.result),l.oldVersion,l.newVersion,Wr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const bD=["get","getKey","getAll","getAllKeys","count"],ND=["put","add","delete","clear"],Ld=new Map;function s0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ld.get(e))return Ld.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=ND.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||bD.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Ld.set(e,s),s}PD(t=>({...t,get:(e,n,r)=>s0(e,n)||t.get(e,n,r),has:(e,n)=>!!s0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VD(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function VD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hp="@firebase/app",o0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar=new og("@firebase/app"),LD="@firebase/app-compat",OD="@firebase/analytics-compat",MD="@firebase/analytics",FD="@firebase/app-check-compat",jD="@firebase/app-check",UD="@firebase/auth",$D="@firebase/auth-compat",BD="@firebase/database",zD="@firebase/data-connect",WD="@firebase/database-compat",HD="@firebase/functions",KD="@firebase/functions-compat",qD="@firebase/installations",GD="@firebase/installations-compat",QD="@firebase/messaging",YD="@firebase/messaging-compat",XD="@firebase/performance",JD="@firebase/performance-compat",ZD="@firebase/remote-config",eV="@firebase/remote-config-compat",tV="@firebase/storage",nV="@firebase/storage-compat",rV="@firebase/firestore",iV="@firebase/vertexai-preview",sV="@firebase/firestore-compat",oV="firebase",aV="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="[DEFAULT]",lV={[hp]:"fire-core",[LD]:"fire-core-compat",[MD]:"fire-analytics",[OD]:"fire-analytics-compat",[jD]:"fire-app-check",[FD]:"fire-app-check-compat",[UD]:"fire-auth",[$D]:"fire-auth-compat",[BD]:"fire-rtdb",[zD]:"fire-data-connect",[WD]:"fire-rtdb-compat",[HD]:"fire-fn",[KD]:"fire-fn-compat",[qD]:"fire-iid",[GD]:"fire-iid-compat",[QD]:"fire-fcm",[YD]:"fire-fcm-compat",[XD]:"fire-perf",[JD]:"fire-perf-compat",[ZD]:"fire-rc",[eV]:"fire-rc-compat",[tV]:"fire-gcs",[nV]:"fire-gcs-compat",[rV]:"fire-fst",[sV]:"fire-fst-compat",[iV]:"fire-vertex","fire-js":"fire-js",[oV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=new Map,uV=new Map,fp=new Map;function a0(t,e){try{t.container.addComponent(e)}catch(n){ar.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Hs(t){const e=t.name;if(fp.has(e))return ar.debug(`There were multiple attempts to register component ${e}.`),!1;fp.set(e,t);for(const n of yc.values())a0(n,t);for(const n of uV.values())a0(n,t);return!0}function lg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Yn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hr=new nl("app","Firebase",cV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=aV;function $I(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:dp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Hr.create("bad-app-name",{appName:String(i)});if(n||(n=MI()),!n)throw Hr.create("no-options");const s=yc.get(i);if(s){if(gc(n,s.options)&&gc(r,s.config))return s;throw Hr.create("duplicate-app",{appName:i})}const o=new yD(i);for(const l of fp.values())o.addComponent(l);const a=new hV(n,r,o);return yc.set(i,a),a}function BI(t=dp){const e=yc.get(t);if(!e&&t===dp&&MI())return $I();if(!e)throw Hr.create("no-app",{appName:t});return e}function Kr(t,e,n){var r;let i=(r=lV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ar.warn(a.join(" "));return}Hs(new Fi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV="firebase-heartbeat-database",fV=1,Va="firebase-heartbeat-store";let Od=null;function zI(){return Od||(Od=kD(dV,fV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Va)}catch(n){console.warn(n)}}}}).catch(t=>{throw Hr.create("idb-open",{originalErrorMessage:t.message})})),Od}async function pV(t){try{const n=(await zI()).transaction(Va),r=await n.objectStore(Va).get(WI(t));return await n.done,r}catch(e){if(e instanceof pr)ar.warn(e.message);else{const n=Hr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ar.warn(n.message)}}}async function l0(t,e){try{const r=(await zI()).transaction(Va,"readwrite");await r.objectStore(Va).put(e,WI(t)),await r.done}catch(n){if(n instanceof pr)ar.warn(n.message);else{const r=Hr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ar.warn(r.message)}}}function WI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV=1024,gV=30*24*60*60*1e3;class yV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _V(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=u0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=gV}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ar.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=u0(),{heartbeatsToSend:r,unsentEntries:i}=vV(this._heartbeatsCache.heartbeats),s=mc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ar.warn(n),""}}}function u0(){return new Date().toISOString().substring(0,10)}function vV(t,e=mV){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),c0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),c0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _V{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sD()?oD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await pV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return l0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return l0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function c0(t){return mc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wV(t){Hs(new Fi("platform-logger",e=>new DD(e),"PRIVATE")),Hs(new Fi("heartbeat",e=>new yV(e),"PRIVATE")),Kr(hp,o0,t),Kr(hp,o0,"esm2017"),Kr("fire-js","")}wV("");var EV="firebase",TV="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kr(EV,TV,"app");var h0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ki,HI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,v){function S(){}S.prototype=v.prototype,x.D=v.prototype,x.prototype=new S,x.prototype.constructor=x,x.C=function(A,k,b){for(var C=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)C[Y-2]=arguments[Y];return v.prototype[k].apply(A,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,v,S){S||(S=0);var A=Array(16);if(typeof v=="string")for(var k=0;16>k;++k)A[k]=v.charCodeAt(S++)|v.charCodeAt(S++)<<8|v.charCodeAt(S++)<<16|v.charCodeAt(S++)<<24;else for(k=0;16>k;++k)A[k]=v[S++]|v[S++]<<8|v[S++]<<16|v[S++]<<24;v=x.g[0],S=x.g[1],k=x.g[2];var b=x.g[3],C=v+(b^S&(k^b))+A[0]+3614090360&4294967295;v=S+(C<<7&4294967295|C>>>25),C=b+(k^v&(S^k))+A[1]+3905402710&4294967295,b=v+(C<<12&4294967295|C>>>20),C=k+(S^b&(v^S))+A[2]+606105819&4294967295,k=b+(C<<17&4294967295|C>>>15),C=S+(v^k&(b^v))+A[3]+3250441966&4294967295,S=k+(C<<22&4294967295|C>>>10),C=v+(b^S&(k^b))+A[4]+4118548399&4294967295,v=S+(C<<7&4294967295|C>>>25),C=b+(k^v&(S^k))+A[5]+1200080426&4294967295,b=v+(C<<12&4294967295|C>>>20),C=k+(S^b&(v^S))+A[6]+2821735955&4294967295,k=b+(C<<17&4294967295|C>>>15),C=S+(v^k&(b^v))+A[7]+4249261313&4294967295,S=k+(C<<22&4294967295|C>>>10),C=v+(b^S&(k^b))+A[8]+1770035416&4294967295,v=S+(C<<7&4294967295|C>>>25),C=b+(k^v&(S^k))+A[9]+2336552879&4294967295,b=v+(C<<12&4294967295|C>>>20),C=k+(S^b&(v^S))+A[10]+4294925233&4294967295,k=b+(C<<17&4294967295|C>>>15),C=S+(v^k&(b^v))+A[11]+2304563134&4294967295,S=k+(C<<22&4294967295|C>>>10),C=v+(b^S&(k^b))+A[12]+1804603682&4294967295,v=S+(C<<7&4294967295|C>>>25),C=b+(k^v&(S^k))+A[13]+4254626195&4294967295,b=v+(C<<12&4294967295|C>>>20),C=k+(S^b&(v^S))+A[14]+2792965006&4294967295,k=b+(C<<17&4294967295|C>>>15),C=S+(v^k&(b^v))+A[15]+1236535329&4294967295,S=k+(C<<22&4294967295|C>>>10),C=v+(k^b&(S^k))+A[1]+4129170786&4294967295,v=S+(C<<5&4294967295|C>>>27),C=b+(S^k&(v^S))+A[6]+3225465664&4294967295,b=v+(C<<9&4294967295|C>>>23),C=k+(v^S&(b^v))+A[11]+643717713&4294967295,k=b+(C<<14&4294967295|C>>>18),C=S+(b^v&(k^b))+A[0]+3921069994&4294967295,S=k+(C<<20&4294967295|C>>>12),C=v+(k^b&(S^k))+A[5]+3593408605&4294967295,v=S+(C<<5&4294967295|C>>>27),C=b+(S^k&(v^S))+A[10]+38016083&4294967295,b=v+(C<<9&4294967295|C>>>23),C=k+(v^S&(b^v))+A[15]+3634488961&4294967295,k=b+(C<<14&4294967295|C>>>18),C=S+(b^v&(k^b))+A[4]+3889429448&4294967295,S=k+(C<<20&4294967295|C>>>12),C=v+(k^b&(S^k))+A[9]+568446438&4294967295,v=S+(C<<5&4294967295|C>>>27),C=b+(S^k&(v^S))+A[14]+3275163606&4294967295,b=v+(C<<9&4294967295|C>>>23),C=k+(v^S&(b^v))+A[3]+4107603335&4294967295,k=b+(C<<14&4294967295|C>>>18),C=S+(b^v&(k^b))+A[8]+1163531501&4294967295,S=k+(C<<20&4294967295|C>>>12),C=v+(k^b&(S^k))+A[13]+2850285829&4294967295,v=S+(C<<5&4294967295|C>>>27),C=b+(S^k&(v^S))+A[2]+4243563512&4294967295,b=v+(C<<9&4294967295|C>>>23),C=k+(v^S&(b^v))+A[7]+1735328473&4294967295,k=b+(C<<14&4294967295|C>>>18),C=S+(b^v&(k^b))+A[12]+2368359562&4294967295,S=k+(C<<20&4294967295|C>>>12),C=v+(S^k^b)+A[5]+4294588738&4294967295,v=S+(C<<4&4294967295|C>>>28),C=b+(v^S^k)+A[8]+2272392833&4294967295,b=v+(C<<11&4294967295|C>>>21),C=k+(b^v^S)+A[11]+1839030562&4294967295,k=b+(C<<16&4294967295|C>>>16),C=S+(k^b^v)+A[14]+4259657740&4294967295,S=k+(C<<23&4294967295|C>>>9),C=v+(S^k^b)+A[1]+2763975236&4294967295,v=S+(C<<4&4294967295|C>>>28),C=b+(v^S^k)+A[4]+1272893353&4294967295,b=v+(C<<11&4294967295|C>>>21),C=k+(b^v^S)+A[7]+4139469664&4294967295,k=b+(C<<16&4294967295|C>>>16),C=S+(k^b^v)+A[10]+3200236656&4294967295,S=k+(C<<23&4294967295|C>>>9),C=v+(S^k^b)+A[13]+681279174&4294967295,v=S+(C<<4&4294967295|C>>>28),C=b+(v^S^k)+A[0]+3936430074&4294967295,b=v+(C<<11&4294967295|C>>>21),C=k+(b^v^S)+A[3]+3572445317&4294967295,k=b+(C<<16&4294967295|C>>>16),C=S+(k^b^v)+A[6]+76029189&4294967295,S=k+(C<<23&4294967295|C>>>9),C=v+(S^k^b)+A[9]+3654602809&4294967295,v=S+(C<<4&4294967295|C>>>28),C=b+(v^S^k)+A[12]+3873151461&4294967295,b=v+(C<<11&4294967295|C>>>21),C=k+(b^v^S)+A[15]+530742520&4294967295,k=b+(C<<16&4294967295|C>>>16),C=S+(k^b^v)+A[2]+3299628645&4294967295,S=k+(C<<23&4294967295|C>>>9),C=v+(k^(S|~b))+A[0]+4096336452&4294967295,v=S+(C<<6&4294967295|C>>>26),C=b+(S^(v|~k))+A[7]+1126891415&4294967295,b=v+(C<<10&4294967295|C>>>22),C=k+(v^(b|~S))+A[14]+2878612391&4294967295,k=b+(C<<15&4294967295|C>>>17),C=S+(b^(k|~v))+A[5]+4237533241&4294967295,S=k+(C<<21&4294967295|C>>>11),C=v+(k^(S|~b))+A[12]+1700485571&4294967295,v=S+(C<<6&4294967295|C>>>26),C=b+(S^(v|~k))+A[3]+2399980690&4294967295,b=v+(C<<10&4294967295|C>>>22),C=k+(v^(b|~S))+A[10]+4293915773&4294967295,k=b+(C<<15&4294967295|C>>>17),C=S+(b^(k|~v))+A[1]+2240044497&4294967295,S=k+(C<<21&4294967295|C>>>11),C=v+(k^(S|~b))+A[8]+1873313359&4294967295,v=S+(C<<6&4294967295|C>>>26),C=b+(S^(v|~k))+A[15]+4264355552&4294967295,b=v+(C<<10&4294967295|C>>>22),C=k+(v^(b|~S))+A[6]+2734768916&4294967295,k=b+(C<<15&4294967295|C>>>17),C=S+(b^(k|~v))+A[13]+1309151649&4294967295,S=k+(C<<21&4294967295|C>>>11),C=v+(k^(S|~b))+A[4]+4149444226&4294967295,v=S+(C<<6&4294967295|C>>>26),C=b+(S^(v|~k))+A[11]+3174756917&4294967295,b=v+(C<<10&4294967295|C>>>22),C=k+(v^(b|~S))+A[2]+718787259&4294967295,k=b+(C<<15&4294967295|C>>>17),C=S+(b^(k|~v))+A[9]+3951481745&4294967295,x.g[0]=x.g[0]+v&4294967295,x.g[1]=x.g[1]+(k+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+k&4294967295,x.g[3]=x.g[3]+b&4294967295}r.prototype.u=function(x,v){v===void 0&&(v=x.length);for(var S=v-this.blockSize,A=this.B,k=this.h,b=0;b<v;){if(k==0)for(;b<=S;)i(this,x,b),b+=this.blockSize;if(typeof x=="string"){for(;b<v;)if(A[k++]=x.charCodeAt(b++),k==this.blockSize){i(this,A),k=0;break}}else for(;b<v;)if(A[k++]=x[b++],k==this.blockSize){i(this,A),k=0;break}}this.h=k,this.o+=v},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var v=1;v<x.length-8;++v)x[v]=0;var S=8*this.o;for(v=x.length-8;v<x.length;++v)x[v]=S&255,S/=256;for(this.u(x),x=Array(16),v=S=0;4>v;++v)for(var A=0;32>A;A+=8)x[S++]=this.g[v]>>>A&255;return x};function s(x,v){var S=a;return Object.prototype.hasOwnProperty.call(S,x)?S[x]:S[x]=v(x)}function o(x,v){this.h=v;for(var S=[],A=!0,k=x.length-1;0<=k;k--){var b=x[k]|0;A&&b==v||(S[k]=b,A=!1)}this.g=S}var a={};function l(x){return-128<=x&&128>x?s(x,function(v){return new o([v|0],0>v?-1:0)}):new o([x|0],0>x?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return d;if(0>x)return P(c(-x));for(var v=[],S=1,A=0;x>=S;A++)v[A]=x/S|0,S*=4294967296;return new o(v,0)}function h(x,v){if(x.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(x.charAt(0)=="-")return P(h(x.substring(1),v));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(v,8)),A=d,k=0;k<x.length;k+=8){var b=Math.min(8,x.length-k),C=parseInt(x.substring(k,k+b),v);8>b?(b=c(Math.pow(v,b)),A=A.j(b).add(c(C))):(A=A.j(S),A=A.add(c(C)))}return A}var d=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(I(this))return-P(this).m();for(var x=0,v=1,S=0;S<this.g.length;S++){var A=this.i(S);x+=(0<=A?A:4294967296+A)*v,v*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(y(this))return"0";if(I(this))return"-"+P(this).toString(x);for(var v=c(Math.pow(x,6)),S=this,A="";;){var k=R(S,v).g;S=w(S,k.j(v));var b=((0<S.g.length?S.g[0]:S.h)>>>0).toString(x);if(S=k,y(S))return b+A;for(;6>b.length;)b="0"+b;A=b+A}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function y(x){if(x.h!=0)return!1;for(var v=0;v<x.g.length;v++)if(x.g[v]!=0)return!1;return!0}function I(x){return x.h==-1}t.l=function(x){return x=w(this,x),I(x)?-1:y(x)?0:1};function P(x){for(var v=x.g.length,S=[],A=0;A<v;A++)S[A]=~x.g[A];return new o(S,~x.h).add(p)}t.abs=function(){return I(this)?P(this):this},t.add=function(x){for(var v=Math.max(this.g.length,x.g.length),S=[],A=0,k=0;k<=v;k++){var b=A+(this.i(k)&65535)+(x.i(k)&65535),C=(b>>>16)+(this.i(k)>>>16)+(x.i(k)>>>16);A=C>>>16,b&=65535,C&=65535,S[k]=C<<16|b}return new o(S,S[S.length-1]&-2147483648?-1:0)};function w(x,v){return x.add(P(v))}t.j=function(x){if(y(this)||y(x))return d;if(I(this))return I(x)?P(this).j(P(x)):P(P(this).j(x));if(I(x))return P(this.j(P(x)));if(0>this.l(g)&&0>x.l(g))return c(this.m()*x.m());for(var v=this.g.length+x.g.length,S=[],A=0;A<2*v;A++)S[A]=0;for(A=0;A<this.g.length;A++)for(var k=0;k<x.g.length;k++){var b=this.i(A)>>>16,C=this.i(A)&65535,Y=x.i(k)>>>16,de=x.i(k)&65535;S[2*A+2*k]+=C*de,_(S,2*A+2*k),S[2*A+2*k+1]+=b*de,_(S,2*A+2*k+1),S[2*A+2*k+1]+=C*Y,_(S,2*A+2*k+1),S[2*A+2*k+2]+=b*Y,_(S,2*A+2*k+2)}for(A=0;A<v;A++)S[A]=S[2*A+1]<<16|S[2*A];for(A=v;A<2*v;A++)S[A]=0;return new o(S,0)};function _(x,v){for(;(x[v]&65535)!=x[v];)x[v+1]+=x[v]>>>16,x[v]&=65535,v++}function E(x,v){this.g=x,this.h=v}function R(x,v){if(y(v))throw Error("division by zero");if(y(x))return new E(d,d);if(I(x))return v=R(P(x),v),new E(P(v.g),P(v.h));if(I(v))return v=R(x,P(v)),new E(P(v.g),v.h);if(30<x.g.length){if(I(x)||I(v))throw Error("slowDivide_ only works with positive integers.");for(var S=p,A=v;0>=A.l(x);)S=V(S),A=V(A);var k=M(S,1),b=M(A,1);for(A=M(A,2),S=M(S,2);!y(A);){var C=b.add(A);0>=C.l(x)&&(k=k.add(S),b=C),A=M(A,1),S=M(S,1)}return v=w(x,k.j(v)),new E(k,v)}for(k=d;0<=x.l(v);){for(S=Math.max(1,Math.floor(x.m()/v.m())),A=Math.ceil(Math.log(S)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),b=c(S),C=b.j(v);I(C)||0<C.l(x);)S-=A,b=c(S),C=b.j(v);y(b)&&(b=p),k=k.add(b),x=w(x,C)}return new E(k,x)}t.A=function(x){return R(this,x).h},t.and=function(x){for(var v=Math.max(this.g.length,x.g.length),S=[],A=0;A<v;A++)S[A]=this.i(A)&x.i(A);return new o(S,this.h&x.h)},t.or=function(x){for(var v=Math.max(this.g.length,x.g.length),S=[],A=0;A<v;A++)S[A]=this.i(A)|x.i(A);return new o(S,this.h|x.h)},t.xor=function(x){for(var v=Math.max(this.g.length,x.g.length),S=[],A=0;A<v;A++)S[A]=this.i(A)^x.i(A);return new o(S,this.h^x.h)};function V(x){for(var v=x.g.length+1,S=[],A=0;A<v;A++)S[A]=x.i(A)<<1|x.i(A-1)>>>31;return new o(S,x.h)}function M(x,v){var S=v>>5;v%=32;for(var A=x.g.length-S,k=[],b=0;b<A;b++)k[b]=0<v?x.i(b+S)>>>v|x.i(b+S+1)<<32-v:x.i(b+S);return new o(k,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,HI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,ki=o}).apply(typeof h0<"u"?h0:typeof self<"u"?self:typeof window<"u"?window:{});var nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var KI,Wo,qI,Pu,pp,GI,QI,YI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof nu=="object"&&nu];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var L=u[T];if(!(L in m))break e;m=m[L]}u=u[u.length-1],T=m[u],f=f(T),f!=T&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,T=!1,L={next:function(){if(!T&&m<u.length){var O=m++;return{value:f(O,u[O]),done:!1}}return T=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,m){return u.call.apply(u.bind,arguments)}function d(u,f,m){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,T),u.apply(f,L)}}return function(){return u.apply(f,arguments)}}function p(u,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function g(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var T=m.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function y(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(T,L,O){for(var B=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)B[ge-2]=arguments[ge];return f.prototype[L].apply(T,B)}}function I(u){const f=u.length;if(0<f){const m=Array(f);for(let T=0;T<f;T++)m[T]=u[T];return m}return[]}function P(u,f){for(let m=1;m<arguments.length;m++){const T=arguments[m];if(l(T)){const L=u.length||0,O=T.length||0;u.length=L+O;for(let B=0;B<O;B++)u[L+B]=T[B]}else u.push(T)}}class w{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function _(u){return/^[\s\xa0]*$/.test(u)}function E(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function R(u){return R[" "](u),u}R[" "]=function(){};var V=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function M(u,f,m){for(const T in u)f.call(m,u[T],T,u)}function x(u,f){for(const m in u)f.call(void 0,u[m],m,u)}function v(u){const f={};for(const m in u)f[m]=u[m];return f}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,f){let m,T;for(let L=1;L<arguments.length;L++){T=arguments[L];for(m in T)u[m]=T[m];for(let O=0;O<S.length;O++)m=S[O],Object.prototype.hasOwnProperty.call(T,m)&&(u[m]=T[m])}}function k(u){var f=1;u=u.split(":");const m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function b(u){a.setTimeout(()=>{throw u},0)}function C(){var u=q;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Y{constructor(){this.h=this.g=null}add(f,m){const T=de.get();T.set(f,m),this.h?this.h.next=T:this.g=T,this.h=T}}var de=new w(()=>new Re,u=>u.reset());class Re{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,$=!1,q=new Y,Q=()=>{const u=a.Promise.resolve(void 0);ne=()=>{u.then(re)}};var re=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(m){b(m)}var f=de;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}$=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var Kt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function qt(u,f){if(me.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(V){e:{try{R(f.nodeName);var L=!0;break e}catch{}L=!1}L||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:On[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&qt.aa.h.call(this)}}y(qt,me);var On={2:"touch",3:"pen",4:"mouse"};qt.prototype.h=function(){qt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Mn="closure_listenable_"+(1e6*Math.random()|0),WP=0;function HP(u,f,m,T,L){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!T,this.ha=L,this.key=++WP,this.da=this.fa=!1}function wl(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function El(u){this.src=u,this.g={},this.h=0}El.prototype.add=function(u,f,m,T,L){var O=u.toString();u=this.g[O],u||(u=this.g[O]=[],this.h++);var B=Oh(u,f,T,L);return-1<B?(f=u[B],m||(f.fa=!1)):(f=new HP(f,this.src,O,!!T,L),f.fa=m,u.push(f)),f};function Lh(u,f){var m=f.type;if(m in u.g){var T=u.g[m],L=Array.prototype.indexOf.call(T,f,void 0),O;(O=0<=L)&&Array.prototype.splice.call(T,L,1),O&&(wl(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function Oh(u,f,m,T){for(var L=0;L<u.length;++L){var O=u[L];if(!O.da&&O.listener==f&&O.capture==!!m&&O.ha==T)return L}return-1}var Mh="closure_lm_"+(1e6*Math.random()|0),Fh={};function Oy(u,f,m,T,L){if(Array.isArray(f)){for(var O=0;O<f.length;O++)Oy(u,f[O],m,T,L);return null}return m=jy(m),u&&u[Mn]?u.K(f,m,c(T)?!!T.capture:!1,L):KP(u,f,m,!1,T,L)}function KP(u,f,m,T,L,O){if(!f)throw Error("Invalid event type");var B=c(L)?!!L.capture:!!L,ge=Uh(u);if(ge||(u[Mh]=ge=new El(u)),m=ge.add(f,m,T,B,O),m.proxy)return m;if(T=qP(),m.proxy=T,T.src=u,T.listener=m,u.addEventListener)Kt||(L=B),L===void 0&&(L=!1),u.addEventListener(f.toString(),T,L);else if(u.attachEvent)u.attachEvent(Fy(f.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return m}function qP(){function u(m){return f.call(u.src,u.listener,m)}const f=GP;return u}function My(u,f,m,T,L){if(Array.isArray(f))for(var O=0;O<f.length;O++)My(u,f[O],m,T,L);else T=c(T)?!!T.capture:!!T,m=jy(m),u&&u[Mn]?(u=u.i,f=String(f).toString(),f in u.g&&(O=u.g[f],m=Oh(O,m,T,L),-1<m&&(wl(O[m]),Array.prototype.splice.call(O,m,1),O.length==0&&(delete u.g[f],u.h--)))):u&&(u=Uh(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Oh(f,m,T,L)),(m=-1<u?f[u]:null)&&jh(m))}function jh(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Mn])Lh(f.i,u);else{var m=u.type,T=u.proxy;f.removeEventListener?f.removeEventListener(m,T,u.capture):f.detachEvent?f.detachEvent(Fy(m),T):f.addListener&&f.removeListener&&f.removeListener(T),(m=Uh(f))?(Lh(m,u),m.h==0&&(m.src=null,f[Mh]=null)):wl(u)}}}function Fy(u){return u in Fh?Fh[u]:Fh[u]="on"+u}function GP(u,f){if(u.da)u=!0;else{f=new qt(f,this);var m=u.listener,T=u.ha||u.src;u.fa&&jh(u),u=m.call(T,f)}return u}function Uh(u){return u=u[Mh],u instanceof El?u:null}var $h="__closure_events_fn_"+(1e9*Math.random()>>>0);function jy(u){return typeof u=="function"?u:(u[$h]||(u[$h]=function(f){return u.handleEvent(f)}),u[$h])}function st(){oe.call(this),this.i=new El(this),this.M=this,this.F=null}y(st,oe),st.prototype[Mn]=!0,st.prototype.removeEventListener=function(u,f,m,T){My(this,u,f,m,T)};function _t(u,f){var m,T=u.F;if(T)for(m=[];T;T=T.F)m.push(T);if(u=u.M,T=f.type||f,typeof f=="string")f=new me(f,u);else if(f instanceof me)f.target=f.target||u;else{var L=f;f=new me(T,u),A(f,L)}if(L=!0,m)for(var O=m.length-1;0<=O;O--){var B=f.g=m[O];L=Tl(B,T,!0,f)&&L}if(B=f.g=u,L=Tl(B,T,!0,f)&&L,L=Tl(B,T,!1,f)&&L,m)for(O=0;O<m.length;O++)B=f.g=m[O],L=Tl(B,T,!1,f)&&L}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],T=0;T<m.length;T++)wl(m[T]);delete u.g[f],u.h--}}this.F=null},st.prototype.K=function(u,f,m,T){return this.i.add(String(u),f,!1,m,T)},st.prototype.L=function(u,f,m,T){return this.i.add(String(u),f,!0,m,T)};function Tl(u,f,m,T){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var L=!0,O=0;O<f.length;++O){var B=f[O];if(B&&!B.da&&B.capture==m){var ge=B.listener,Ye=B.ha||B.src;B.fa&&Lh(u.i,B),L=ge.call(Ye,T)!==!1&&L}}return L&&!T.defaultPrevented}function Uy(u,f,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function $y(u){u.g=Uy(()=>{u.g=null,u.i&&(u.i=!1,$y(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class QP extends oe{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:$y(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function go(u){oe.call(this),this.h=u,this.g={}}y(go,oe);var By=[];function zy(u){M(u.g,function(f,m){this.g.hasOwnProperty(m)&&jh(f)},u),u.g={}}go.prototype.N=function(){go.aa.N.call(this),zy(this)},go.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bh=a.JSON.stringify,YP=a.JSON.parse,XP=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function zh(){}zh.prototype.h=null;function Wy(u){return u.h||(u.h=u.i())}function Hy(){}var yo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wh(){me.call(this,"d")}y(Wh,me);function Hh(){me.call(this,"c")}y(Hh,me);var hi={},Ky=null;function Sl(){return Ky=Ky||new st}hi.La="serverreachability";function qy(u){me.call(this,hi.La,u)}y(qy,me);function vo(u){const f=Sl();_t(f,new qy(f))}hi.STAT_EVENT="statevent";function Gy(u,f){me.call(this,hi.STAT_EVENT,u),this.stat=f}y(Gy,me);function wt(u){const f=Sl();_t(f,new Gy(f,u))}hi.Ma="timingevent";function Qy(u,f){me.call(this,hi.Ma,u),this.size=f}y(Qy,me);function _o(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function wo(){this.g=!0}wo.prototype.xa=function(){this.g=!1};function JP(u,f,m,T,L,O){u.info(function(){if(u.g)if(O)for(var B="",ge=O.split("&"),Ye=0;Ye<ge.length;Ye++){var ce=ge[Ye].split("=");if(1<ce.length){var ot=ce[0];ce=ce[1];var at=ot.split("_");B=2<=at.length&&at[1]=="type"?B+(ot+"="+ce+"&"):B+(ot+"=redacted&")}}else B=null;else B=O;return"XMLHTTP REQ ("+T+") [attempt "+L+"]: "+f+`
`+m+`
`+B})}function ZP(u,f,m,T,L,O,B){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+L+"]: "+f+`
`+m+`
`+O+" "+B})}function Qi(u,f,m,T){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+tC(u,m)+(T?" "+T:"")})}function eC(u,f){u.info(function(){return"TIMEOUT: "+f})}wo.prototype.info=function(){};function tC(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var T=m[u];if(!(2>T.length)){var L=T[1];if(Array.isArray(L)&&!(1>L.length)){var O=L[0];if(O!="noop"&&O!="stop"&&O!="close")for(var B=1;B<L.length;B++)L[B]=""}}}}return Bh(m)}catch{return f}}var Il={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kh;function xl(){}y(xl,zh),xl.prototype.g=function(){return new XMLHttpRequest},xl.prototype.i=function(){return{}},Kh=new xl;function mr(u,f,m,T){this.j=u,this.i=f,this.l=m,this.R=T||1,this.U=new go(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xy}function Xy(){this.i=null,this.g="",this.h=!1}var Jy={},qh={};function Gh(u,f,m){u.L=1,u.v=Rl(Fn(f)),u.m=m,u.P=!0,Zy(u,null)}function Zy(u,f){u.F=Date.now(),Al(u),u.A=Fn(u.v);var m=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),fv(m.i,"t",T),u.C=0,m=u.j.J,u.h=new Xy,u.g=bv(u.j,m?f:null,!u.m),0<u.O&&(u.M=new QP(p(u.Y,u,u.g),u.O)),f=u.U,m=u.g,T=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(By[0]=L.toString()),L=By);for(var O=0;O<L.length;O++){var B=Oy(m,L[O],T||f.handleEvent,!1,f.h||f);if(!B)break;f.g[B.key]=B}f=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),vo(),JP(u.i,u.u,u.A,u.l,u.R,u.m)}mr.prototype.ca=function(u){u=u.target;const f=this.M;f&&jn(u)==3?f.j():this.Y(u)},mr.prototype.Y=function(u){try{if(u==this.g)e:{const at=jn(this.g);var f=this.g.Ba();const Ji=this.g.Z();if(!(3>at)&&(at!=3||this.g&&(this.h.h||this.g.oa()||wv(this.g)))){this.J||at!=4||f==7||(f==8||0>=Ji?vo(3):vo(2)),Qh(this);var m=this.g.Z();this.X=m;t:if(ev(this)){var T=wv(this.g);u="";var L=T.length,O=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){di(this),Eo(this);var B="";break t}this.h.i=new a.TextDecoder}for(f=0;f<L;f++)this.h.h=!0,u+=this.h.i.decode(T[f],{stream:!(O&&f==L-1)});T.length=0,this.h.g+=u,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=m==200,ZP(this.i,this.u,this.A,this.l,this.R,at,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ge,Ye=this.g;if((ge=Ye.g?Ye.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(ge)){var ce=ge;break t}}ce=null}if(m=ce)Qi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yh(this,m);else{this.o=!1,this.s=3,wt(12),di(this),Eo(this);break e}}if(this.P){m=!0;let rn;for(;!this.J&&this.C<B.length;)if(rn=nC(this,B),rn==qh){at==4&&(this.s=4,wt(14),m=!1),Qi(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==Jy){this.s=4,wt(15),Qi(this.i,this.l,B,"[Invalid Chunk]"),m=!1;break}else Qi(this.i,this.l,rn,null),Yh(this,rn);if(ev(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||B.length!=0||this.h.h||(this.s=1,wt(16),m=!1),this.o=this.o&&m,!m)Qi(this.i,this.l,B,"[Invalid Chunked Response]"),di(this),Eo(this);else if(0<B.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),nd(ot),ot.M=!0,wt(11))}}else Qi(this.i,this.l,B,null),Yh(this,B);at==4&&di(this),this.o&&!this.J&&(at==4?Pv(this.j,this):(this.o=!1,Al(this)))}else _C(this.g),m==400&&0<B.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),di(this),Eo(this)}}}catch{}finally{}};function ev(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function nC(u,f){var m=u.C,T=f.indexOf(`
`,m);return T==-1?qh:(m=Number(f.substring(m,T)),isNaN(m)?Jy:(T+=1,T+m>f.length?qh:(f=f.slice(T,T+m),u.C=T+m,f)))}mr.prototype.cancel=function(){this.J=!0,di(this)};function Al(u){u.S=Date.now()+u.I,tv(u,u.I)}function tv(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=_o(p(u.ba,u),f)}function Qh(u){u.B&&(a.clearTimeout(u.B),u.B=null)}mr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(eC(this.i,this.A),this.L!=2&&(vo(),wt(17)),di(this),this.s=2,Eo(this)):tv(this,this.S-u)};function Eo(u){u.j.G==0||u.J||Pv(u.j,u)}function di(u){Qh(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,zy(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Yh(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||Xh(m.h,u))){if(!u.K&&Xh(m.h,u)&&m.G==3){try{var T=m.Da.g.parse(f)}catch{T=null}if(Array.isArray(T)&&T.length==3){var L=T;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Ll(m),Dl(m);else break e;td(m),wt(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=_o(p(m.Za,m),6e3));if(1>=iv(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else pi(m,11)}else if((u.K||m.g==u)&&Ll(m),!_(f))for(L=m.Da.g.parse(f),f=0;f<L.length;f++){let ce=L[f];if(m.T=ce[0],ce=ce[1],m.G==2)if(ce[0]=="c"){m.K=ce[1],m.ia=ce[2];const ot=ce[3];ot!=null&&(m.la=ot,m.j.info("VER="+m.la));const at=ce[4];at!=null&&(m.Aa=at,m.j.info("SVER="+m.Aa));const Ji=ce[5];Ji!=null&&typeof Ji=="number"&&0<Ji&&(T=1.5*Ji,m.L=T,m.j.info("backChannelRequestTimeoutMs_="+T)),T=m;const rn=u.g;if(rn){const Ml=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ml){var O=T.h;O.g||Ml.indexOf("spdy")==-1&&Ml.indexOf("quic")==-1&&Ml.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Jh(O,O.h),O.h=null))}if(T.D){const rd=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;rd&&(T.ya=rd,_e(T.I,T.D,rd))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),T=m;var B=u;if(T.qa=kv(T,T.J?T.ia:null,T.W),B.K){sv(T.h,B);var ge=B,Ye=T.L;Ye&&(ge.I=Ye),ge.B&&(Qh(ge),Al(ge)),T.g=B}else xv(T);0<m.i.length&&Vl(m)}else ce[0]!="stop"&&ce[0]!="close"||pi(m,7);else m.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?pi(m,7):ed(m):ce[0]!="noop"&&m.l&&m.l.ta(ce),m.v=0)}}vo(4)}catch{}}var rC=class{constructor(u,f){this.g=u,this.map=f}};function nv(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rv(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function iv(u){return u.h?1:u.g?u.g.size:0}function Xh(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Jh(u,f){u.g?u.g.add(f):u.h=f}function sv(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}nv.prototype.cancel=function(){if(this.i=ov(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ov(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const m of u.g.values())f=f.concat(m.D);return f}return I(u.i)}function iC(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],m=u.length,T=0;T<m;T++)f.push(u[T]);return f}f=[],m=0;for(T in u)f[m++]=u[T];return f}function sC(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(const T in u)f[m++]=T;return f}}}function av(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=sC(u),T=iC(u),L=T.length,O=0;O<L;O++)f.call(void 0,T[O],m&&m[O],u)}var lv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oC(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var T=u[m].indexOf("="),L=null;if(0<=T){var O=u[m].substring(0,T);L=u[m].substring(T+1)}else O=u[m];f(O,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function fi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof fi){this.h=u.h,Pl(this,u.j),this.o=u.o,this.g=u.g,Cl(this,u.s),this.l=u.l;var f=u.i,m=new Io;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),uv(this,m),this.m=u.m}else u&&(f=String(u).match(lv))?(this.h=!1,Pl(this,f[1]||"",!0),this.o=To(f[2]||""),this.g=To(f[3]||"",!0),Cl(this,f[4]),this.l=To(f[5]||"",!0),uv(this,f[6]||"",!0),this.m=To(f[7]||"")):(this.h=!1,this.i=new Io(null,this.h))}fi.prototype.toString=function(){var u=[],f=this.j;f&&u.push(So(f,cv,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(So(f,cv,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(So(m,m.charAt(0)=="/"?uC:lC,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",So(m,hC)),u.join("")};function Fn(u){return new fi(u)}function Pl(u,f,m){u.j=m?To(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Cl(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function uv(u,f,m){f instanceof Io?(u.i=f,dC(u.i,u.h)):(m||(f=So(f,cC)),u.i=new Io(f,u.h))}function _e(u,f,m){u.i.set(f,m)}function Rl(u){return _e(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function To(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function So(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,aC),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function aC(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var cv=/[#\/\?@]/g,lC=/[#\?:]/g,uC=/[#\?]/g,cC=/[#\?@]/g,hC=/#/g;function Io(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function gr(u){u.g||(u.g=new Map,u.h=0,u.i&&oC(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=Io.prototype,t.add=function(u,f){gr(this),this.i=null,u=Yi(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function hv(u,f){gr(u),f=Yi(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function dv(u,f){return gr(u),f=Yi(u,f),u.g.has(f)}t.forEach=function(u,f){gr(this),this.g.forEach(function(m,T){m.forEach(function(L){u.call(f,L,T,this)},this)},this)},t.na=function(){gr(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let T=0;T<f.length;T++){const L=u[T];for(let O=0;O<L.length;O++)m.push(f[T])}return m},t.V=function(u){gr(this);let f=[];if(typeof u=="string")dv(this,u)&&(f=f.concat(this.g.get(Yi(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},t.set=function(u,f){return gr(this),this.i=null,u=Yi(this,u),dv(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function fv(u,f,m){hv(u,f),0<m.length&&(u.i=null,u.g.set(Yi(u,f),I(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var T=f[m];const O=encodeURIComponent(String(T)),B=this.V(T);for(T=0;T<B.length;T++){var L=O;B[T]!==""&&(L+="="+encodeURIComponent(String(B[T]))),u.push(L)}}return this.i=u.join("&")};function Yi(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function dC(u,f){f&&!u.j&&(gr(u),u.i=null,u.g.forEach(function(m,T){var L=T.toLowerCase();T!=L&&(hv(this,T),fv(this,L,m))},u)),u.j=f}function fC(u,f){const m=new wo;if(a.Image){const T=new Image;T.onload=g(yr,m,"TestLoadImage: loaded",!0,f,T),T.onerror=g(yr,m,"TestLoadImage: error",!1,f,T),T.onabort=g(yr,m,"TestLoadImage: abort",!1,f,T),T.ontimeout=g(yr,m,"TestLoadImage: timeout",!1,f,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else f(!1)}function pC(u,f){const m=new wo,T=new AbortController,L=setTimeout(()=>{T.abort(),yr(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:T.signal}).then(O=>{clearTimeout(L),O.ok?yr(m,"TestPingServer: ok",!0,f):yr(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),yr(m,"TestPingServer: error",!1,f)})}function yr(u,f,m,T,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),T(m)}catch{}}function mC(){this.g=new XP}function gC(u,f,m){const T=m||"";try{av(u,function(L,O){let B=L;c(L)&&(B=Bh(L)),f.push(T+O+"="+encodeURIComponent(B))})}catch(L){throw f.push(T+"type="+encodeURIComponent("_badmap")),L}}function kl(u){this.l=u.Ub||null,this.j=u.eb||!1}y(kl,zh),kl.prototype.g=function(){return new bl(this.l,this.j)},kl.prototype.i=function(u){return function(){return u}}({});function bl(u,f){st.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(bl,st),t=bl.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Ao(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xo(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ao(this)),this.g&&(this.readyState=3,Ao(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pv(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function pv(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?xo(this):Ao(this),this.readyState==3&&pv(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,xo(this))},t.Qa=function(u){this.g&&(this.response=u,xo(this))},t.ga=function(){this.g&&xo(this)};function xo(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ao(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function Ao(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(bl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function mv(u){let f="";return M(u,function(m,T){f+=T,f+=":",f+=m,f+=`\r
`}),f}function Zh(u,f,m){e:{for(T in m){var T=!1;break e}T=!0}T||(m=mv(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):_e(u,f,m))}function ke(u){st.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(ke,st);var yC=/^https?$/i,vC=["POST","PUT"];t=ke.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,m,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kh.g(),this.v=this.o?Wy(this.o):Wy(Kh),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(O){gv(this,O);return}if(u=m||"",m=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var L in T)m.set(L,T[L]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const O of T.keys())m.set(O,T.get(O));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(m.keys()).find(O=>O.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(vC,f,void 0))||T||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,B]of m)this.g.setRequestHeader(O,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_v(this),this.u=!0,this.g.send(u),this.u=!1}catch(O){gv(this,O)}};function gv(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,yv(u),Nl(u)}function yv(u){u.A||(u.A=!0,_t(u,"complete"),_t(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,_t(this,"complete"),_t(this,"abort"),Nl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nl(this,!0)),ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?vv(this):this.bb())},t.bb=function(){vv(this)};function vv(u){if(u.h&&typeof o<"u"&&(!u.v[1]||jn(u)!=4||u.Z()!=2)){if(u.u&&jn(u)==4)Uy(u.Ea,0,u);else if(_t(u,"readystatechange"),jn(u)==4){u.h=!1;try{const B=u.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var T;if(T=B===0){var L=String(u.D).match(lv)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),T=!yC.test(L?L.toLowerCase():"")}m=T}if(m)_t(u,"complete"),_t(u,"success");else{u.m=6;try{var O=2<jn(u)?u.g.statusText:""}catch{O=""}u.l=O+" ["+u.Z()+"]",yv(u)}}finally{Nl(u)}}}}function Nl(u,f){if(u.g){_v(u);const m=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||_t(u,"ready");try{m.onreadystatechange=T}catch{}}}function _v(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function jn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),YP(f)}};function wv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function _C(u){const f={};u=(u.g&&2<=jn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(_(u[T]))continue;var m=k(u[T]);const L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const O=f[L]||[];f[L]=O,O.push(m)}x(f,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Po(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function Ev(u){this.Aa=0,this.i=[],this.j=new wo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Po("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Po("baseRetryDelayMs",5e3,u),this.cb=Po("retryDelaySeedMs",1e4,u),this.Wa=Po("forwardChannelMaxRetries",2,u),this.wa=Po("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new nv(u&&u.concurrentRequestLimit),this.Da=new mC,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ev.prototype,t.la=8,t.G=1,t.connect=function(u,f,m,T){wt(0),this.W=u,this.H=f||{},m&&T!==void 0&&(this.H.OSID=m,this.H.OAID=T),this.F=this.X,this.I=kv(this,null,this.W),Vl(this)};function ed(u){if(Tv(u),u.G==3){var f=u.U++,m=Fn(u.I);if(_e(m,"SID",u.K),_e(m,"RID",f),_e(m,"TYPE","terminate"),Co(u,m),f=new mr(u,u.j,f),f.L=2,f.v=Rl(Fn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=bv(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Al(f)}Rv(u)}function Dl(u){u.g&&(nd(u),u.g.cancel(),u.g=null)}function Tv(u){Dl(u),u.u&&(a.clearTimeout(u.u),u.u=null),Ll(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Vl(u){if(!rv(u.h)&&!u.s){u.s=!0;var f=u.Ga;ne||Q(),$||(ne(),$=!0),q.add(f,u),u.B=0}}function wC(u,f){return iv(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=_o(p(u.Ga,u,f),Cv(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new mr(this,this.j,u);let O=this.o;if(this.S&&(O?(O=v(O),A(O,this.S)):O=this.S),this.m!==null||this.O||(L.H=O,O=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var T=this.i[m];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(f+=T,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Iv(this,L,f),m=Fn(this.I),_e(m,"RID",u),_e(m,"CVER",22),this.D&&_e(m,"X-HTTP-Session-Id",this.D),Co(this,m),O&&(this.O?f="headers="+encodeURIComponent(String(mv(O)))+"&"+f:this.m&&Zh(m,this.m,O)),Jh(this.h,L),this.Ua&&_e(m,"TYPE","init"),this.P?(_e(m,"$req",f),_e(m,"SID","null"),L.T=!0,Gh(L,m,null)):Gh(L,m,f),this.G=2}}else this.G==3&&(u?Sv(this,u):this.i.length==0||rv(this.h)||Sv(this))};function Sv(u,f){var m;f?m=f.l:m=u.U++;const T=Fn(u.I);_e(T,"SID",u.K),_e(T,"RID",m),_e(T,"AID",u.T),Co(u,T),u.m&&u.o&&Zh(T,u.m,u.o),m=new mr(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Iv(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Jh(u.h,m),Gh(m,T,f)}function Co(u,f){u.H&&M(u.H,function(m,T){_e(f,T,m)}),u.l&&av({},function(m,T){_e(f,T,m)})}function Iv(u,f,m){m=Math.min(u.i.length,m);var T=u.l?p(u.l.Na,u.l,u):null;e:{var L=u.i;let O=-1;for(;;){const B=["count="+m];O==-1?0<m?(O=L[0].g,B.push("ofs="+O)):O=0:B.push("ofs="+O);let ge=!0;for(let Ye=0;Ye<m;Ye++){let ce=L[Ye].g;const ot=L[Ye].map;if(ce-=O,0>ce)O=Math.max(0,L[Ye].g-100),ge=!1;else try{gC(ot,B,"req"+ce+"_")}catch{T&&T(ot)}}if(ge){T=B.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,T}function xv(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;ne||Q(),$||(ne(),$=!0),q.add(f,u),u.v=0}}function td(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=_o(p(u.Fa,u),Cv(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Av(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=_o(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),Dl(this),Av(this))};function nd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Av(u){u.g=new mr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Fn(u.qa);_e(f,"RID","rpc"),_e(f,"SID",u.K),_e(f,"AID",u.T),_e(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&_e(f,"TO",u.ja),_e(f,"TYPE","xmlhttp"),Co(u,f),u.m&&u.o&&Zh(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Rl(Fn(f)),m.m=null,m.P=!0,Zy(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Dl(this),td(this),wt(19))};function Ll(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Pv(u,f){var m=null;if(u.g==f){Ll(u),nd(u),u.g=null;var T=2}else if(Xh(u.h,f))m=f.D,sv(u.h,f),T=1;else return;if(u.G!=0){if(f.o)if(T==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var L=u.B;T=Sl(),_t(T,new Qy(T,m)),Vl(u)}else xv(u);else if(L=f.s,L==3||L==0&&0<f.X||!(T==1&&wC(u,f)||T==2&&td(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),L){case 1:pi(u,5);break;case 4:pi(u,10);break;case 3:pi(u,6);break;default:pi(u,2)}}}function Cv(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function pi(u,f){if(u.j.info("Error code "+f),f==2){var m=p(u.fb,u),T=u.Xa;const L=!T;T=new fi(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Pl(T,"https"),Rl(T),L?fC(T.toString(),m):pC(T.toString(),m)}else wt(2);u.G=0,u.l&&u.l.sa(f),Rv(u),Tv(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Rv(u){if(u.G=0,u.ka=[],u.l){const f=ov(u.h);(f.length!=0||u.i.length!=0)&&(P(u.ka,f),P(u.ka,u.i),u.h.i.length=0,I(u.i),u.i.length=0),u.l.ra()}}function kv(u,f,m){var T=m instanceof fi?Fn(m):new fi(m);if(T.g!="")f&&(T.g=f+"."+T.g),Cl(T,T.s);else{var L=a.location;T=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;var O=new fi(null);T&&Pl(O,T),f&&(O.g=f),L&&Cl(O,L),m&&(O.l=m),T=O}return m=u.D,f=u.ya,m&&f&&_e(T,m,f),_e(T,"VER",u.la),Co(u,T),T}function bv(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new ke(new kl({eb:m})):new ke(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nv(){}t=Nv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ol(){}Ol.prototype.g=function(u,f){return new Ot(u,f)};function Ot(u,f){st.call(this),this.g=new Ev(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!_(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!_(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new Xi(this)}y(Ot,st),Ot.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ot.prototype.close=function(){ed(this.g)},Ot.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Bh(u),u=m);f.i.push(new rC(f.Ya++,u)),f.G==3&&Vl(f)},Ot.prototype.N=function(){this.g.l=null,delete this.j,ed(this.g),delete this.g,Ot.aa.N.call(this)};function Dv(u){Wh.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}y(Dv,Wh);function Vv(){Hh.call(this),this.status=1}y(Vv,Hh);function Xi(u){this.g=u}y(Xi,Nv),Xi.prototype.ua=function(){_t(this.g,"a")},Xi.prototype.ta=function(u){_t(this.g,new Dv(u))},Xi.prototype.sa=function(u){_t(this.g,new Vv)},Xi.prototype.ra=function(){_t(this.g,"b")},Ol.prototype.createWebChannel=Ol.prototype.g,Ot.prototype.send=Ot.prototype.o,Ot.prototype.open=Ot.prototype.m,Ot.prototype.close=Ot.prototype.close,YI=function(){return new Ol},QI=function(){return Sl()},GI=hi,pp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Il.NO_ERROR=0,Il.TIMEOUT=8,Il.HTTP_ERROR=6,Pu=Il,Yy.COMPLETE="complete",qI=Yy,Hy.EventType=yo,yo.OPEN="a",yo.CLOSE="b",yo.ERROR="c",yo.MESSAGE="d",st.prototype.listen=st.prototype.K,Wo=Hy,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,KI=ke}).apply(typeof nu<"u"?nu:typeof self<"u"?self:typeof window<"u"?window:{});const d0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji=new og("@firebase/firestore");function Mo(){return ji.logLevel}function K(t,...e){if(ji.logLevel<=ae.DEBUG){const n=e.map(ug);ji.debug(`Firestore (${lo}): ${t}`,...n)}}function lr(t,...e){if(ji.logLevel<=ae.ERROR){const n=e.map(ug);ji.error(`Firestore (${lo}): ${t}`,...n)}}function Ks(t,...e){if(ji.logLevel<=ae.WARN){const n=e.map(ug);ji.warn(`Firestore (${lo}): ${t}`,...n)}}function ug(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${lo}) INTERNAL ASSERTION FAILED: `+t;throw lr(e),new Error(e)}function pe(t,e){t||Z()}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends pr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dt.UNAUTHENTICATED))}shutdown(){}}class IV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class xV{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pe(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new tr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new tr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string"),new XI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string"),new dt(e)}}class AV{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class PV{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new AV(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class CV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RV{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){pe(this.o===void 0);const r=s=>{s.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pe(typeof n.token=="string"),this.R=n.token,new CV(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=kV(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function qs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return He.fromMillis(Date.now())}static fromDate(e){return He.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new He(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new He(0,0))}static max(){return new ee(new He(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(),r===void 0?r=e.length-n:r>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return La.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof La?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ee extends La{construct(e,n,r){return new Ee(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ee(n)}static emptyPath(){return new Ee([])}}const bV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class et extends La{construct(e,n,r){return new et(e,n,r)}static isValidIdentifier(e){return bV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new et(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new W(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new W(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new W(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new W(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new et(n)}static emptyPath(){return new et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(Ee.fromString(e))}static fromName(e){return new G(Ee.fromString(e).popFirst(5))}static empty(){return new G(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new Ee(e.slice()))}}function NV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new He(n+1,0):new He(n,r));return new Yr(i,G.empty(),e)}function DV(t){return new Yr(t.readTime,t.key,-1)}class Yr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Yr(ee.min(),G.empty(),-1)}static max(){return new Yr(ee.max(),G.empty(),-1)}}function VV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function il(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==LV)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(i=>i?j.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new j((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new j((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function MV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}cg.oe=-1;function ch(t){return t==null}function vc(t){return t===0&&1/t==-1/0}function FV(t){return typeof t=="number"&&Number.isInteger(t)&&!vc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ki(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ZI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e,n){this.comparator=e,this.root=n||Ze.EMPTY}insert(e,n){return new Ce(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ze.BLACK,null,null))}remove(e){return new Ce(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ze.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ru(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ru(this.root,e,this.comparator,!1)}getReverseIterator(){return new ru(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ru(this.root,e,this.comparator,!0)}}class ru{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ze{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ze.RED,this.left=i??Ze.EMPTY,this.right=s??Ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ze(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ze.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ze.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}Ze.EMPTY=null,Ze.RED=!0,Ze.BLACK=!1;Ze.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ze(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.comparator=e,this.data=new Ce(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new p0(this.data.getIterator())}getIteratorFrom(e){return new p0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new nt(this.comparator);return n.data=e,n}}class p0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.fields=e,e.sort(et.comparator)}static empty(){return new Ut([])}unionWith(e){let n=new nt(et.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ut(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ex("Invalid base64 string: "+s):s}}(e);return new it(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new it(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}it.EMPTY_BYTE_STRING=new it("");const jV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xr(t){if(pe(!!t),typeof t=="string"){let e=0;const n=jV.exec(t);if(pe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ve(t.seconds),nanos:Ve(t.nanos)}}function Ve(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ui(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function dg(t){const e=t.mapValue.fields.__previous_value__;return hg(e)?dg(e):e}function Oa(t){const e=Xr(t.mapValue.fields.__local_write_time__.timestampValue);return new He(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ma{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ma("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ma&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu={mapValue:{}};function $i(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hg(t)?4:BV(t)?9007199254740991:$V(t)?10:11:Z()}function Nn(t,e){if(t===e)return!0;const n=$i(t);if(n!==$i(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oa(t).isEqual(Oa(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Xr(i.timestampValue),a=Xr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ui(i.bytesValue).isEqual(Ui(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ve(i.geoPointValue.latitude)===Ve(s.geoPointValue.latitude)&&Ve(i.geoPointValue.longitude)===Ve(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ve(i.integerValue)===Ve(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ve(i.doubleValue),a=Ve(s.doubleValue);return o===a?vc(o)===vc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return qs(t.arrayValue.values||[],e.arrayValue.values||[],Nn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(f0(o)!==f0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Nn(o[l],a[l])))return!1;return!0}(t,e);default:return Z()}}function Fa(t,e){return(t.values||[]).find(n=>Nn(n,e))!==void 0}function Gs(t,e){if(t===e)return 0;const n=$i(t),r=$i(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ve(s.integerValue||s.doubleValue),l=Ve(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return m0(t.timestampValue,e.timestampValue);case 4:return m0(Oa(t),Oa(e));case 5:return he(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ui(s),l=Ui(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=he(a[c],l[c]);if(h!==0)return h}return he(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=he(Ve(s.latitude),Ve(o.latitude));return a!==0?a:he(Ve(s.longitude),Ve(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return g0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},p=o.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,y=(l=p.value)===null||l===void 0?void 0:l.arrayValue,I=he(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0);return I!==0?I:g0(g,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===iu.mapValue&&o===iu.mapValue)return 0;if(s===iu.mapValue)return 1;if(o===iu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=he(l[d],h[d]);if(p!==0)return p;const g=Gs(a[l[d]],c[h[d]]);if(g!==0)return g}return he(l.length,h.length)}(t.mapValue,e.mapValue);default:throw Z()}}function m0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=Xr(t),r=Xr(e),i=he(n.seconds,r.seconds);return i!==0?i:he(n.nanos,r.nanos)}function g0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Gs(n[i],r[i]);if(s)return s}return he(n.length,r.length)}function Qs(t){return mp(t)}function mp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Xr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ui(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=mp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${mp(n.fields[o])}`;return i+"}"}(t.mapValue):Z()}function y0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function gp(t){return!!t&&"integerValue"in t}function fg(t){return!!t&&"arrayValue"in t}function v0(t){return!!t&&"nullValue"in t}function _0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Cu(t){return!!t&&"mapValue"in t}function $V(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ia(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ki(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ia(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ia(t.arrayValue.values[n]);return e}return Object.assign({},t)}function BV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.value=e}static empty(){return new bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Cu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ia(n)}setAll(e){let n=et.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ia(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Cu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Nn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Cu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ki(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new bt(ia(this.value))}}function tx(t){const e=[];return Ki(t.fields,(n,r)=>{const i=new et([n]);if(Cu(r)){const s=tx(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ut(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new pt(e,0,ee.min(),ee.min(),ee.min(),bt.empty(),0)}static newFoundDocument(e,n,r,i){return new pt(e,1,n,ee.min(),r,i,0)}static newNoDocument(e,n){return new pt(e,2,n,ee.min(),ee.min(),bt.empty(),0)}static newUnknownDocument(e,n){return new pt(e,3,n,ee.min(),ee.min(),bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,n){this.position=e,this.inclusive=n}}function w0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=Gs(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function E0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Nn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n="asc"){this.field=e,this.dir=n}}function zV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{}class Ue extends nx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new HV(e,n,r):n==="array-contains"?new GV(e,r):n==="in"?new QV(e,r):n==="not-in"?new YV(e,r):n==="array-contains-any"?new XV(e,r):new Ue(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new KV(e,r):new qV(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Gs(n,this.value)):n!==null&&$i(this.value)===$i(n)&&this.matchesComparison(Gs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yn extends nx{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new yn(e,n)}matches(e){return rx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function rx(t){return t.op==="and"}function ix(t){return WV(t)&&rx(t)}function WV(t){for(const e of t.filters)if(e instanceof yn)return!1;return!0}function yp(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+Qs(t.value);if(ix(t))return t.filters.map(e=>yp(e)).join(",");{const e=t.filters.map(n=>yp(n)).join(",");return`${t.op}(${e})`}}function sx(t,e){return t instanceof Ue?function(r,i){return i instanceof Ue&&r.op===i.op&&r.field.isEqual(i.field)&&Nn(r.value,i.value)}(t,e):t instanceof yn?function(r,i){return i instanceof yn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&sx(o,i.filters[a]),!0):!1}(t,e):void Z()}function ox(t){return t instanceof Ue?function(n){return`${n.field.canonicalString()} ${n.op} ${Qs(n.value)}`}(t):t instanceof yn?function(n){return n.op.toString()+" {"+n.getFilters().map(ox).join(" ,")+"}"}(t):"Filter"}class HV extends Ue{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class KV extends Ue{constructor(e,n){super(e,"in",n),this.keys=ax("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class qV extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=ax("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ax(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class GV extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fg(n)&&Fa(n.arrayValue,this.value)}}class QV extends Ue{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fa(this.value.arrayValue,n)}}class YV extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Fa(this.value.arrayValue,n)}}class XV extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Fa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function T0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new JV(t,e,n,r,i,s,o)}function pg(t){const e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>yp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ch(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Qs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Qs(r)).join(",")),e.ue=n}return e.ue}function mg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!zV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!E0(t.startAt,e.startAt)&&E0(t.endAt,e.endAt)}function vp(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ZV(t,e,n,r,i,s,o,a){return new ol(t,e,n,r,i,s,o,a)}function hh(t){return new ol(t)}function S0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function lx(t){return t.collectionGroup!==null}function sa(t){const e=te(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new nt(et.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new wc(s,r))}),n.has(et.keyField().canonicalString())||e.ce.push(new wc(et.keyField(),r))}return e.ce}function Cn(t){const e=te(t);return e.le||(e.le=eL(e,sa(t))),e.le}function eL(t,e){if(t.limitType==="F")return T0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new wc(i.field,s)});const n=t.endAt?new _c(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new _c(t.startAt.position,t.startAt.inclusive):null;return T0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function _p(t,e){const n=t.filters.concat([e]);return new ol(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function wp(t,e,n){return new ol(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dh(t,e){return mg(Cn(t),Cn(e))&&t.limitType===e.limitType}function ux(t){return`${pg(Cn(t))}|lt:${t.limitType}`}function ss(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>ox(i)).join(", ")}]`),ch(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Qs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Qs(i)).join(",")),`Target(${r})`}(Cn(t))}; limitType=${t.limitType})`}function fh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):G.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of sa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=w0(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,sa(r),i)||r.endAt&&!function(o,a,l){const c=w0(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,sa(r),i))}(t,e)}function tL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function cx(t){return(e,n)=>{let r=!1;for(const i of sa(t)){const s=nL(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function nL(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Gs(l,c):Z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ki(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return ZI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=new Ce(G.comparator);function ur(){return rL}const hx=new Ce(G.comparator);function Ho(...t){let e=hx;for(const n of t)e=e.insert(n.key,n);return e}function dx(t){let e=hx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ii(){return oa()}function fx(){return oa()}function oa(){return new uo(t=>t.toString(),(t,e)=>t.isEqual(e))}const iL=new Ce(G.comparator),sL=new nt(G.comparator);function se(...t){let e=sL;for(const n of t)e=e.add(n);return e}const oL=new nt(he);function aL(){return oL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vc(e)?"-0":e}}function px(t){return{integerValue:""+t}}function lL(t,e){return FV(e)?px(e):gg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(){this._=void 0}}function uL(t,e,n){return t instanceof Ec?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&hg(s)&&(s=dg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ja?gx(t,e):t instanceof Ua?yx(t,e):function(i,s){const o=mx(i,s),a=I0(o)+I0(i.Pe);return gp(o)&&gp(i.Pe)?px(a):gg(i.serializer,a)}(t,e)}function cL(t,e,n){return t instanceof ja?gx(t,e):t instanceof Ua?yx(t,e):n}function mx(t,e){return t instanceof Tc?function(r){return gp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ec extends ph{}class ja extends ph{constructor(e){super(),this.elements=e}}function gx(t,e){const n=vx(e);for(const r of t.elements)n.some(i=>Nn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ua extends ph{constructor(e){super(),this.elements=e}}function yx(t,e){let n=vx(e);for(const r of t.elements)n=n.filter(i=>!Nn(i,r));return{arrayValue:{values:n}}}class Tc extends ph{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function I0(t){return Ve(t.integerValue||t.doubleValue)}function vx(t){return fg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function hL(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ja&&i instanceof ja||r instanceof Ua&&i instanceof Ua?qs(r.elements,i.elements,Nn):r instanceof Tc&&i instanceof Tc?Nn(r.Pe,i.Pe):r instanceof Ec&&i instanceof Ec}(t.transform,e.transform)}class dL{constructor(e,n){this.version=e,this.transformResults=n}}class fn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fn}static exists(e){return new fn(void 0,e)}static updateTime(e){return new fn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ru(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class mh{}function _x(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ex(t.key,fn.none()):new al(t.key,t.data,fn.none());{const n=t.data,r=bt.empty();let i=new nt(et.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new li(t.key,r,new Ut(i.toArray()),fn.none())}}function fL(t,e,n){t instanceof al?function(i,s,o){const a=i.value.clone(),l=A0(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof li?function(i,s,o){if(!Ru(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=A0(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(wx(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function aa(t,e,n,r){return t instanceof al?function(s,o,a,l){if(!Ru(s.precondition,o))return a;const c=s.value.clone(),h=P0(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof li?function(s,o,a,l){if(!Ru(s.precondition,o))return a;const c=P0(s.fieldTransforms,l,o),h=o.data;return h.setAll(wx(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Ru(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function pL(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=mx(r.transform,i||null);s!=null&&(n===null&&(n=bt.empty()),n.set(r.field,s))}return n||null}function x0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&qs(r,i,(s,o)=>hL(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class al extends mh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class li extends mh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function wx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function A0(t,e,n){const r=new Map;pe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,cL(o,a,n[i]))}return r}function P0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,uL(s,o,e))}return r}class Ex extends mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mL extends mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&fL(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=aa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=aa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=fx();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=_x(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&qs(this.mutations,e.mutations,(n,r)=>x0(n,r))&&qs(this.baseMutations,e.baseMutations,(n,r)=>x0(n,r))}}class yg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){pe(e.mutations.length===r.length);let i=function(){return iL}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new yg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me,le;function _L(t){switch(t){default:return Z();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function Tx(t){if(t===void 0)return lr("GRPC error has no .code"),F.UNKNOWN;switch(t){case Me.OK:return F.OK;case Me.CANCELLED:return F.CANCELLED;case Me.UNKNOWN:return F.UNKNOWN;case Me.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Me.INTERNAL:return F.INTERNAL;case Me.UNAVAILABLE:return F.UNAVAILABLE;case Me.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Me.NOT_FOUND:return F.NOT_FOUND;case Me.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Me.ABORTED:return F.ABORTED;case Me.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Me.DATA_LOSS:return F.DATA_LOSS;default:return Z()}}(le=Me||(Me={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=new ki([4294967295,4294967295],0);function C0(t){const e=wL().encode(t),n=new HI;return n.update(e),new Uint8Array(n.digest())}function R0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ki([n,r],0),new ki([i,s],0)]}class vg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ko(`Invalid padding: ${n}`);if(r<0)throw new Ko(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ko(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ko(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ki.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ki.fromNumber(r)));return i.compare(EL)===1&&(i=new ki([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=C0(e),[r,i]=R0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new vg(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=C0(e),[r,i]=R0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ko extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ll.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new gh(ee.min(),i,new Ce(he),ur(),se())}}class ll{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ll(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class Sx{constructor(e,n){this.targetId=e,this.me=n}}class Ix{constructor(e,n,r=it.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class k0{constructor(){this.fe=0,this.ge=N0(),this.pe=it.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),n=se(),r=se();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Z()}}),new ll(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=N0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class TL{constructor(e){this.Le=e,this.Be=new Map,this.ke=ur(),this.qe=b0(),this.Qe=new Ce(he)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(vp(s))if(r===0){const o=new G(s.path);this.Ue(n,o,pt.newNoDocument(o,ee.min()))}else pe(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ui(r).toUint8Array()}catch(l){if(l instanceof ex)return Ks("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new vg(o,i,s)}catch(l){return Ks(l instanceof Ko?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&vp(a.target)){const l=new G(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,pt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=se();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new gh(e,n,this.Qe,this.ke,r);return this.ke=ur(),this.qe=b0(),this.Qe=new Ce(he),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new k0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new nt(he),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new k0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function b0(){return new Ce(G.comparator)}function N0(){return new Ce(G.comparator)}const SL={asc:"ASCENDING",desc:"DESCENDING"},IL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xL={and:"AND",or:"OR"};class AL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ep(t,e){return t.useProto3Json||ch(e)?e:{value:e}}function Sc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function PL(t,e){return Sc(t,e.toTimestamp())}function Rn(t){return pe(!!t),ee.fromTimestamp(function(n){const r=Xr(n);return new He(r.seconds,r.nanos)}(t))}function _g(t,e){return Tp(t,e).canonicalString()}function Tp(t,e){const n=function(i){return new Ee(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Ax(t){const e=Ee.fromString(t);return pe(bx(e)),e}function Sp(t,e){return _g(t.databaseId,e.path)}function Md(t,e){const n=Ax(e);if(n.get(1)!==t.databaseId.projectId)throw new W(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(Cx(n))}function Px(t,e){return _g(t.databaseId,e)}function CL(t){const e=Ax(t);return e.length===4?Ee.emptyPath():Cx(e)}function Ip(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Cx(t){return pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function D0(t,e,n){return{name:Sp(t,e),fields:n.value.mapValue.fields}}function RL(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(pe(h===void 0||typeof h=="string"),it.fromBase64String(h||"")):(pe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),it.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:Tx(c.code);return new W(h,c.message||"")}(o);n=new Ix(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Md(t,r.document.name),s=Rn(r.document.updateTime),o=r.document.createTime?Rn(r.document.createTime):ee.min(),a=new bt({mapValue:{fields:r.document.fields}}),l=pt.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new ku(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Md(t,r.document),s=r.readTime?Rn(r.readTime):ee.min(),o=pt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ku([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Md(t,r.document),s=r.removedTargetIds||[];n=new ku([],s,i,null)}else{if(!("filter"in e))return Z();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new vL(i,s),a=r.targetId;n=new Sx(a,o)}}return n}function kL(t,e){let n;if(e instanceof al)n={update:D0(t,e.key,e.value)};else if(e instanceof Ex)n={delete:Sp(t,e.key)};else if(e instanceof li)n={update:D0(t,e.key,e.data),updateMask:jL(e.fieldMask)};else{if(!(e instanceof mL))return Z();n={verify:Sp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Ec)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ja)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ua)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Tc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:PL(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z()}(t,e.precondition)),n}function bL(t,e){return t&&t.length>0?(pe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Rn(i.updateTime):Rn(s);return o.isEqual(ee.min())&&(o=Rn(s)),new dL(o,i.transformResults||[])}(n,e))):[]}function NL(t,e){return{documents:[Px(t,e.path)]}}function DL(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Px(t,i);const s=function(c){if(c.length!==0)return kx(yn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:os(p.field),direction:OL(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ep(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function VL(t){let e=CL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){pe(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const p=Rx(d);return p instanceof yn&&ix(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(y){return new wc(as(y.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,ch(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,g=d.values||[];return new _c(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,g=d.values||[];return new _c(g,p)}(n.endAt)),ZV(e,i,o,s,a,"F",l,c)}function LL(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Rx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=as(n.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=as(n.unaryFilter.field);return Ue.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=as(n.unaryFilter.field);return Ue.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=as(n.unaryFilter.field);return Ue.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return Ue.create(as(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return yn.create(n.compositeFilter.filters.map(r=>Rx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function OL(t){return SL[t]}function ML(t){return IL[t]}function FL(t){return xL[t]}function os(t){return{fieldPath:t.canonicalString()}}function as(t){return et.fromServerFormat(t.fieldPath)}function kx(t){return t instanceof Ue?function(n){if(n.op==="=="){if(_0(n.value))return{unaryFilter:{field:os(n.field),op:"IS_NAN"}};if(v0(n.value))return{unaryFilter:{field:os(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_0(n.value))return{unaryFilter:{field:os(n.field),op:"IS_NOT_NAN"}};if(v0(n.value))return{unaryFilter:{field:os(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:os(n.field),op:ML(n.op),value:n.value}}}(t):t instanceof yn?function(n){const r=n.getFilters().map(i=>kx(i));return r.length===1?r[0]:{compositeFilter:{op:FL(n.op),filters:r}}}(t):Z()}function jL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,n,r,i,s=ee.min(),o=ee.min(),a=it.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e){this.ct=e}}function $L(t){const e=VL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?wp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(){this.un=new zL}addToCollectionParentIndex(e,n){return this.un.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(Yr.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(Yr.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class zL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new nt(Ee.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new nt(Ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ys(0)}static kn(){return new Ys(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(){this.changes=new uo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&aa(r.mutation,i,Ut.empty(),He.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const i=Ii();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ho();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ii();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ur();const o=oa(),a=function(){return oa()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof li)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),aa(h.mutation,c,h.mutation.getFieldMask(),He.now())):o.set(c.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new HL(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=oa();let i=new Ce((o,a)=>o-a),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Ut.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||se()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=fx();h.forEach(p=>{if(!s.has(p)){const g=_x(n.get(p),r.get(p));g!==null&&d.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):lx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):j.resolve(Ii());let a=-1,l=s;return o.next(c=>j.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,se())).next(h=>({batchId:a,changes:dx(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=Ho();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ho();return this.indexManager.getCollectionParents(e,s).next(a=>j.forEach(a,l=>{const c=function(d,p){return new ol(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,pt.newInvalidDocument(h)))});let a=Ho();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&aa(h.mutation,c,Ut.empty(),He.now()),fh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return j.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Rn(i.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:$L(i.bundledQuery),readTime:Rn(i.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(){this.overlays=new Ce(G.comparator),this.Ir=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ii();return j.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const i=Ii(),s=n.length+1,o=new G(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return j.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ce((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Ii(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Ii(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return j.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new yL(n,r));let s=this.Ir.get(n);s===void 0&&(s=se(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(){this.Tr=new nt(qe.Er),this.dr=new nt(qe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new qe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new qe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new G(new Ee([])),r=new qe(n,e),i=new qe(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new G(new Ee([])),r=new qe(n,e),i=new qe(n,e+1);let s=se();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new qe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class qe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return G.comparator(e.key,n.key)||he(e.wr,n.wr)}static Ar(e,n){return he(e.wr,n.wr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new nt(qe.Er)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new gL(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new qe(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new qe(n,0),i=new qe(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new nt(he);return n.forEach(i=>{const s=new qe(i,0),o=new qe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),j.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;G.isDocumentKey(s)||(s=s.child(""));const o=new qe(new G(s),0);let a=new nt(he);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),j.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){pe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return j.forEach(n.mutations,i=>{const s=new qe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new qe(n,0),i=this.br.firstAfterOrEqual(r);return j.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e){this.Mr=e,this.docs=function(){return new Ce(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():pt.newInvalidDocument(n))}getEntries(e,n){let r=ur();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():pt.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ur();const o=n.path,a=new G(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||VV(DV(h),r)<=0||(i.has(h.key)||fh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Z()}Or(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new JL(this)}getSize(e){return j.resolve(this.size)}}class JL extends WL{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e){this.persistence=e,this.Nr=new uo(n=>pg(n),mg),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new wg,this.targetCount=0,this.kr=Ys.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),j.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ys(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Kn(n),j.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),j.waitFor(s).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,n){this.qr={},this.overlays={},this.Qr=new cg(0),this.Kr=!1,this.Kr=!0,this.$r=new QL,this.referenceDelegate=e(this),this.Ur=new ZL(this),this.indexManager=new BL,this.remoteDocumentCache=function(i){return new XL(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new UL(n),this.Gr=new qL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new GL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new YL(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const i=new tO(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return j.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class tO extends OV{constructor(e){super(),this.currentSequenceNumber=e}}class Eg{constructor(e){this.persistence=e,this.Jr=new wg,this.Yr=null}static Zr(e){return new Eg(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),j.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,r=>{const i=G.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return j.or([()=>j.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=se(),i=se();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Tg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return iD()?8:MV(vt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new nO;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Mo()<=ae.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",ss(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):(Mo()<=ae.DEBUG&&K("QueryEngine","Query:",ss(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Mo()<=ae.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",ss(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cn(n))):j.resolve())}Yi(e,n){if(S0(n))return j.resolve(null);let r=Cn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=wp(n,null,"F"),r=Cn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=se(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,wp(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return S0(n)||i.isEqual(ee.min())?j.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?j.resolve(null):(Mo()<=ae.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ss(n)),this.rs(e,o,n,NV(i,-1)).next(a=>a))})}ts(e,n){let r=new nt(cx(e));return n.forEach((i,s)=>{fh(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Mo()<=ae.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",ss(n)),this.Ji.getDocumentsMatchingQuery(e,n,Yr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ce(he),this._s=new uo(s=>pg(s),mg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KL(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function sO(t,e,n,r){return new iO(t,e,n,r)}async function Nx(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=se();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function oO(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let g=j.resolve();return p.forEach(y=>{g=g.next(()=>h.getEntry(l,y)).next(I=>{const P=c.docVersions.get(y);pe(P!==null),I.version.compareTo(P)<0&&(d.applyToRemoteDocument(I,c),I.isValidDocument()&&(I.setReadTime(c.commitVersion),h.addEntry(I)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=se();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Dx(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function aO(t,e){const n=te(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(it.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(d,g),function(I,P,w){return I.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,g,h)&&a.push(n.Ur.updateTargetData(s,g))});let l=ur(),c=se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(lO(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(ee.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return j.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function lO(t,e,n){let r=se(),i=se();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ur();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ee.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):K("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function uO(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function cO(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,j.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Dr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function xp(t,e,n){const r=te(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!sl(o))throw o;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function V0(t,e,n){const r=te(t);let i=ee.min(),s=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=te(l),p=d._s.get(h);return p!==void 0?j.resolve(d.os.get(p)):d.Ur.getTargetData(c,h)}(r,o,Cn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ee.min(),n?s:se())).next(a=>(hO(r,tL(e),a),{documents:a,Ts:s})))}function hO(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class L0{constructor(){this.activeTargetIds=aL()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dO{constructor(){this.so=new L0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new L0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let su=null;function Fd(){return su===null?su=function(){return 268435456+Math.round(2147483648*Math.random())}():su++,"0x"+su.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct="WebChannelConnection";class gO extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Fd(),l=this.xo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(h=>(K("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Ks("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+lo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=pO[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Fd();return new Promise((o,a)=>{const l=new KI;l.setWithCredentials(!0),l.listenOnce(qI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Pu.NO_ERROR:const h=l.getResponseJson();K(ct,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Pu.TIMEOUT:K(ct,`RPC '${e}' ${s} timed out`),a(new W(F.DEADLINE_EXCEEDED,"Request time out"));break;case Pu.HTTP_ERROR:const d=l.getStatus();if(K(ct,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const y=function(P){const w=P.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(w)>=0?w:F.UNKNOWN}(g.status);a(new W(y,g.message))}else a(new W(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new W(F.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{K(ct,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);K(ct,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Fd(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=YI(),a=QI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");K(ct,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let p=!1,g=!1;const y=new mO({Io:P=>{g?K(ct,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(p||(K(ct,`Opening RPC '${e}' stream ${i} transport.`),d.open(),p=!0),K(ct,`RPC '${e}' stream ${i} sending:`,P),d.send(P))},To:()=>d.close()}),I=(P,w,_)=>{P.listen(w,E=>{try{_(E)}catch(R){setTimeout(()=>{throw R},0)}})};return I(d,Wo.EventType.OPEN,()=>{g||(K(ct,`RPC '${e}' stream ${i} transport opened.`),y.yo())}),I(d,Wo.EventType.CLOSE,()=>{g||(g=!0,K(ct,`RPC '${e}' stream ${i} transport closed`),y.So())}),I(d,Wo.EventType.ERROR,P=>{g||(g=!0,Ks(ct,`RPC '${e}' stream ${i} transport errored:`,P),y.So(new W(F.UNAVAILABLE,"The operation could not be completed")))}),I(d,Wo.EventType.MESSAGE,P=>{var w;if(!g){const _=P.data[0];pe(!!_);const E=_,R=E.error||((w=E[0])===null||w===void 0?void 0:w.error);if(R){K(ct,`RPC '${e}' stream ${i} received error:`,R);const V=R.status;let M=function(S){const A=Me[S];if(A!==void 0)return Tx(A)}(V),x=R.message;M===void 0&&(M=F.INTERNAL,x="Unknown error status: "+V+" with message "+R.message),g=!0,y.So(new W(M,x)),d.close()}else K(ct,`RPC '${e}' stream ${i} received:`,_),y.bo(_)}}),I(a,GI.STAT_EVENT,P=>{P.stat===pp.PROXY?K(ct,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===pp.NOPROXY&&K(ct,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function jd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(t){return new AL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Vx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(lr(n.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new W(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yO extends Lx{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=RL(this.serializer,e),r=function(s){if(!("targetChange"in s))return ee.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?Rn(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Ip(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=vp(l)?{documents:NL(s,l)}:{query:DL(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=xx(s,o.resumeToken);const c=Ep(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ee.min())>0){a.readTime=Sc(s,o.snapshotVersion.toTimestamp());const c=Ep(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=LL(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Ip(this.serializer),n.removeTarget=e,this.a_(n)}}class vO extends Lx{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return pe(!!e.streamToken),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=bL(e.writeResults,e.commitTime),r=Rn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Ip(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>kL(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new W(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Tp(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(F.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Tp(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class wO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(lr(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{qi(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=te(l);c.L_.add(4),await ul(c),c.q_.set("Unknown"),c.L_.delete(4),await vh(c)}(this))})}),this.q_=new wO(r,i)}}async function vh(t){if(qi(t))for(const e of t.B_)await e(!0)}async function ul(t){for(const e of t.B_)await e(!1)}function Ox(t,e){const n=te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Ag(n)?xg(n):co(n).r_()&&Ig(n,e))}function Sg(t,e){const n=te(t),r=co(n);n.N_.delete(e),r.r_()&&Mx(n,e),n.N_.size===0&&(r.r_()?r.o_():qi(n)&&n.q_.set("Unknown"))}function Ig(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}co(t).A_(e)}function Mx(t,e){t.Q_.xe(e),co(t).R_(e)}function xg(t){t.Q_=new TL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),co(t).start(),t.q_.v_()}function Ag(t){return qi(t)&&!co(t).n_()&&t.N_.size>0}function qi(t){return te(t).L_.size===0}function Fx(t){t.Q_=void 0}async function TO(t){t.q_.set("Online")}async function SO(t){t.N_.forEach((e,n)=>{Ig(t,e)})}async function IO(t,e){Fx(t),Ag(t)?(t.q_.M_(e),xg(t)):t.q_.set("Unknown")}async function xO(t,e,n){if(t.q_.set("Online"),e instanceof Ix&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ic(t,r)}else if(e instanceof ku?t.Q_.Ke(e):e instanceof Sx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{const r=await Dx(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(it.EMPTY_BYTE_STRING,h.snapshotVersion)),Mx(s,l);const d=new Dr(h.target,l,c,h.sequenceNumber);Ig(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){K("RemoteStore","Failed to raise snapshot:",r),await Ic(t,r)}}async function Ic(t,e,n){if(!sl(e))throw e;t.L_.add(1),await ul(t),t.q_.set("Offline"),n||(n=()=>Dx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await vh(t)})}function jx(t,e){return e().catch(n=>Ic(t,n,e))}async function _h(t){const e=te(t),n=Jr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;AO(e);)try{const i=await uO(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,PO(e,i)}catch(i){await Ic(e,i)}Ux(e)&&$x(e)}function AO(t){return qi(t)&&t.O_.length<10}function PO(t,e){t.O_.push(e);const n=Jr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Ux(t){return qi(t)&&!Jr(t).n_()&&t.O_.length>0}function $x(t){Jr(t).start()}async function CO(t){Jr(t).p_()}async function RO(t){const e=Jr(t);for(const n of t.O_)e.m_(n.mutations)}async function kO(t,e,n){const r=t.O_.shift(),i=yg.from(r,e,n);await jx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await _h(t)}async function bO(t,e){e&&Jr(t).V_&&await async function(r,i){if(function(o){return _L(o)&&o!==F.ABORTED}(i.code)){const s=r.O_.shift();Jr(r).s_(),await jx(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await _h(r)}}(t,e),Ux(t)&&$x(t)}async function M0(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const r=qi(n);n.L_.add(3),await ul(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await vh(n)}async function NO(t,e){const n=te(t);e?(n.L_.delete(2),await vh(n)):e||(n.L_.add(2),await ul(n),n.q_.set("Unknown"))}function co(t){return t.K_||(t.K_=function(n,r,i){const s=te(n);return s.w_(),new yO(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:TO.bind(null,t),Ro:SO.bind(null,t),mo:IO.bind(null,t),d_:xO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Ag(t)?xg(t):t.q_.set("Unknown")):(await t.K_.stop(),Fx(t))})),t.K_}function Jr(t){return t.U_||(t.U_=function(n,r,i){const s=te(n);return s.w_(),new vO(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:CO.bind(null,t),mo:bO.bind(null,t),f_:RO.bind(null,t),g_:kO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await _h(t)):(await t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Pg(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cg(t,e){if(lr("AsyncQueue",`${e}: ${t}`),sl(t))return new W(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=Ho(),this.sortedSet=new Ce(this.comparator)}static emptySet(e){return new Ds(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ds)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ds;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(){this.W_=new Ce(G.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Xs{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Xs(e,n,Ds.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class VO{constructor(){this.queries=j0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=te(n),s=i.queries;i.queries=j0(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new W(F.ABORTED,"Firestore shutting down"))}}function j0(){return new uo(t=>ux(t),dh)}async function Rg(t,e){const n=te(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new DO,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Cg(o,`Initialization of query '${ss(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&bg(n)}async function kg(t,e){const n=te(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function LO(t,e){const n=te(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&bg(n)}function OO(t,e,n){const r=te(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function bg(t){t.Y_.forEach(e=>{e.next()})}var Ap,U0;(U0=Ap||(Ap={})).ea="default",U0.Cache="cache";class Ng{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Xs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Xs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ap.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e){this.key=e}}class zx{constructor(e){this.key=e}}class MO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=cx(e),this.Ra=new Ds(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new F0,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const p=i.get(h),g=fh(this.query,d)?d:null,y=!!p&&this.mutatedKeys.has(p.key),I=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let P=!1;p&&g?p.data.isEqual(g.data)?y!==I&&(r.track({type:3,doc:g}),P=!0):this.ga(p,g)||(r.track({type:2,doc:g}),P=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),P=!0):p&&!g&&(r.track({type:1,doc:p}),P=!0,(l||c)&&(a=!0)),P&&(g?(o=o.add(g),s=I?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(g,y){const I=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return I(g)-I(y)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Xs(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new F0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new zx(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Bx(r))}),n}ba(e){this.Ta=e.Ts,this.da=se();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Xs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class FO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class jO{constructor(e){this.key=e,this.va=!1}}class UO{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new uo(a=>ux(a),dh),this.Ma=new Map,this.xa=new Set,this.Oa=new Ce(G.comparator),this.Na=new Map,this.La=new wg,this.Ba={},this.ka=new Map,this.qa=Ys.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function $O(t,e,n=!0){const r=Qx(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Wx(r,e,n,!0),i}async function BO(t,e){const n=Qx(t);await Wx(n,e,!0,!1)}async function Wx(t,e,n,r){const i=await cO(t.localStore,Cn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await zO(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Ox(t.remoteStore,i),a}async function zO(t,e,n,r,i){t.Ka=(d,p,g)=>async function(I,P,w,_){let E=P.view.ma(w);E.ns&&(E=await V0(I.localStore,P.query,!1).then(({documents:x})=>P.view.ma(x,E)));const R=_&&_.targetChanges.get(P.targetId),V=_&&_.targetMismatches.get(P.targetId)!=null,M=P.view.applyChanges(E,I.isPrimaryClient,R,V);return B0(I,P.targetId,M.wa),M.snapshot}(t,d,p,g);const s=await V0(t.localStore,e,!0),o=new MO(e,s.Ts),a=o.ma(s.documents),l=ll.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);B0(t,n,c.wa);const h=new FO(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function WO(t,e,n){const r=te(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!dh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await xp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Sg(r.remoteStore,i.targetId),Pp(r,i.targetId)}).catch(il)):(Pp(r,i.targetId),await xp(r.localStore,i.targetId,!0))}async function HO(t,e){const n=te(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Sg(n.remoteStore,r.targetId))}async function KO(t,e,n){const r=ZO(t);try{const i=await function(o,a){const l=te(o),c=He.now(),h=a.reduce((g,y)=>g.add(y.key),se());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=ur(),I=se();return l.cs.getEntries(g,h).next(P=>{y=P,y.forEach((w,_)=>{_.isValidDocument()||(I=I.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,y)).next(P=>{d=P;const w=[];for(const _ of a){const E=pL(_,d.get(_.key).overlayedDocument);E!=null&&w.push(new li(_.key,E,tx(E.value.mapValue),fn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,w,a)}).next(P=>{p=P;const w=P.applyToLocalDocumentSet(d,I);return l.documentOverlayCache.saveOverlays(g,P.batchId,w)})}).then(()=>({batchId:p.batchId,changes:dx(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ce(he)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await cl(r,i.changes),await _h(r.remoteStore)}catch(i){const s=Cg(i,"Failed to persist write");n.reject(s)}}async function Hx(t,e){const n=te(t);try{const r=await aO(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?pe(o.va):i.removedDocuments.size>0&&(pe(o.va),o.va=!1))}),await cl(n,r,e)}catch(r){await il(r)}}function $0(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=te(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.j_)p.Z_(a)&&(c=!0)}),c&&bg(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qO(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ce(G.comparator);o=o.insert(s,pt.newNoDocument(s,ee.min()));const a=se().add(s),l=new gh(ee.min(),new Map,new Ce(he),o,a);await Hx(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Dg(r)}else await xp(r.localStore,e,!1).then(()=>Pp(r,e,n)).catch(il)}async function GO(t,e){const n=te(t),r=e.batch.batchId;try{const i=await oO(n.localStore,e);qx(n,r,null),Kx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await cl(n,i)}catch(i){await il(i)}}async function QO(t,e,n){const r=te(t);try{const i=await function(o,a){const l=te(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(pe(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);qx(r,e,n),Kx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await cl(r,i)}catch(i){await il(i)}}function Kx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function qx(t,e,n){const r=te(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Pp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Gx(t,r)})}function Gx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Sg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Dg(t))}function B0(t,e,n){for(const r of n)r instanceof Bx?(t.La.addReference(r.key,e),YO(t,r)):r instanceof zx?(K("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Gx(t,r.key)):Z()}function YO(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(K("SyncEngine","New document in limbo: "+n),t.xa.add(r),Dg(t))}function Dg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new G(Ee.fromString(e)),r=t.qa.next();t.Na.set(r,new jO(n)),t.Oa=t.Oa.insert(n,r),Ox(t.remoteStore,new Dr(Cn(hh(n.path)),r,"TargetPurposeLimboResolution",cg.oe))}}async function cl(t,e,n){const r=te(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=Tg.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const h=te(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>j.forEach(c,p=>j.forEach(p.$i,g=>h.persistence.referenceDelegate.addReference(d,p.targetId,g)).next(()=>j.forEach(p.Ui,g=>h.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))}catch(d){if(!sl(d))throw d;K("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const g=h.os.get(p),y=g.snapshotVersion,I=g.withLastLimboFreeSnapshotVersion(y);h.os=h.os.insert(p,I)}}}(r.localStore,s))}async function XO(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const r=await Nx(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new W(F.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await cl(n,r.hs)}}function JO(t,e){const n=te(t),r=n.Na.get(e);if(r&&r.va)return se().add(r.key);{let i=se();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function Qx(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qO.bind(null,e),e.Ca.d_=LO.bind(null,e.eventManager),e.Ca.$a=OO.bind(null,e.eventManager),e}function ZO(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QO.bind(null,e),e}class xc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return sO(this.persistence,new rO,e.initialUser,this.serializer)}Ga(e){return new eO(Eg.Zr,this.serializer)}Wa(e){return new dO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xc.provider={build:()=>new xc};class Cp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XO.bind(null,this.syncEngine),await NO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new VO}()}createDatastore(e){const n=yh(e.databaseInfo.databaseId),r=function(s){return new gO(s)}(e.databaseInfo);return function(s,o,a,l){return new _O(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new EO(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>$0(this.syncEngine,n,0),function(){return O0.D()?new O0:new fO}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const d=new UO(i,s,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=te(i);K("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await ul(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Cp.provider={build:()=>new Cp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=dt.UNAUTHENTICATED,this.clientId=JI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{K("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Cg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ud(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Nx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function z0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await t2(t);K("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>M0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>M0(e.remoteStore,i)),t._onlineComponents=e}async function t2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ud(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ks("Error using user provided cache. Falling back to memory cache: "+n),await Ud(t,new xc)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await Ud(t,new xc);return t._offlineComponents}async function Yx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await z0(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await z0(t,new Cp))),t._onlineComponents}function n2(t){return Yx(t).then(e=>e.syncEngine)}async function Ac(t){const e=await Yx(t),n=e.eventManager;return n.onListen=$O.bind(null,e.syncEngine),n.onUnlisten=WO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=BO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=HO.bind(null,e.syncEngine),n}function r2(t,e,n={}){const r=new tr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Vg({next:p=>{h.Za(),o.enqueueAndForget(()=>kg(s,d));const g=p.docs.has(a);!g&&p.fromCache?c.reject(new W(F.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?c.reject(new W(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new Ng(hh(a.path),h,{includeMetadataChanges:!0,_a:!0});return Rg(s,d)}(await Ac(t),t.asyncQueue,e,n,r)),r.promise}function i2(t,e,n={}){const r=new tr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Vg({next:p=>{h.Za(),o.enqueueAndForget(()=>kg(s,d)),p.fromCache&&l.source==="server"?c.reject(new W(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new Ng(a,h,{includeMetadataChanges:!0,_a:!0});return Rg(s,d)}(await Ac(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(t,e,n){if(!n)throw new W(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function s2(t,e,n,r){if(e===!0&&r===!0)throw new W(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function H0(t){if(!G.isDocumentKey(t))throw new W(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function K0(t){if(G.isDocumentKey(t))throw new W(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function Bt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wh(t);throw new W(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}s2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Eh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new q0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new q0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new SV;switch(r.type){case"firstParty":return new PV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=W0.get(n);r&&(K("ComponentProvider","Removing Datastore"),W0.delete(n),r.terminate())}(this),Promise.resolve()}}function o2(t,e,n,r={}){var i;const s=(t=Bt(t,Eh))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ks("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=dt.MOCK_USER;else{a=XN(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new W(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new dt(c)}t._authCredentials=new IV(new XI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gi(this.firestore,e,this._query)}}class gt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gt(this.firestore,e,this._key)}}class qr extends Gi{constructor(e,n,r){super(e,n,hh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new G(e))}withConverter(e){return new qr(this.firestore,e,this._path)}}function ui(t,e,...n){if(t=Ke(t),Jx("collection","path",e),t instanceof Eh){const r=Ee.fromString(e,...n);return K0(r),new qr(t,null,r)}{if(!(t instanceof gt||t instanceof qr))throw new W(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return K0(r),new qr(t.firestore,null,r)}}function be(t,e,...n){if(t=Ke(t),arguments.length===1&&(e=JI.newId()),Jx("doc","path",e),t instanceof Eh){const r=Ee.fromString(e,...n);return H0(r),new gt(t,null,new G(r))}{if(!(t instanceof gt||t instanceof qr))throw new W(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return H0(r),new gt(t.firestore,t instanceof qr?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Vx(this,"async_queue_retry"),this.Vu=()=>{const r=jd();r&&K("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=jd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=jd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new tr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!sl(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw lr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Pg.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Z()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Q0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Zr extends Eh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new G0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new G0(e),this._firestoreClient=void 0,await e}}}function a2(t,e){const n=typeof t=="object"?t:BI(),r=typeof t=="string"?t:"(default)",i=lg(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=QN("firestore");s&&o2(i,...s)}return i}function Th(t){if(t._terminated)throw new W(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||l2(t),t._firestoreClient}function l2(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new UV(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Xx(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new e2(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Js(it.fromBase64String(e))}catch(n){throw new W(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Js(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=/^__.*__$/;class c2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new li(e,this.data,this.fieldMask,n,this.fieldTransforms):new al(e,this.data,n,this.fieldTransforms)}}class Zx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new li(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function e1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class Fg{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Fg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Pc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(e1(this.Cu)&&u2.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class h2{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yh(e)}Qu(e,n,r,i=!1){return new Fg({Cu:e,methodName:n,qu:r,path:et.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ih(t){const e=t._freezeSettings(),n=yh(t._databaseId);return new h2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function t1(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);jg("Data must be an object, but it was:",o,r);const a=n1(r,o);let l,c;if(s.merge)l=new Ut(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=Rp(e,d,n);if(!o.contains(p))throw new W(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);i1(h,p)||h.push(p)}l=new Ut(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new c2(new bt(a),l,c)}class xh extends Lg{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xh}}function d2(t,e,n,r){const i=t.Qu(1,e,n);jg("Data must be an object, but it was:",i,r);const s=[],o=bt.empty();Ki(r,(l,c)=>{const h=Ug(e,l,n);c=Ke(c);const d=i.Nu(h);if(c instanceof xh)s.push(h);else{const p=hl(c,d);p!=null&&(s.push(h),o.set(h,p))}});const a=new Ut(s);return new Zx(o,a,i.fieldTransforms)}function f2(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[Rp(e,r,n)],l=[i];if(s.length%2!=0)throw new W(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Rp(e,s[p])),l.push(s[p+1]);const c=[],h=bt.empty();for(let p=a.length-1;p>=0;--p)if(!i1(c,a[p])){const g=a[p];let y=l[p];y=Ke(y);const I=o.Nu(g);if(y instanceof xh)c.push(g);else{const P=hl(y,I);P!=null&&(c.push(g),h.set(g,P))}}const d=new Ut(c);return new Zx(h,d,o.fieldTransforms)}function p2(t,e,n,r=!1){return hl(n,t.Qu(r?4:3,e))}function hl(t,e){if(r1(t=Ke(t)))return jg("Unsupported field value:",e,t),n1(t,e);if(t instanceof Lg)return function(r,i){if(!e1(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=hl(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return lL(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=He.fromDate(r);return{timestampValue:Sc(i.serializer,s)}}if(r instanceof He){const s=new He(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Sc(i.serializer,s)}}if(r instanceof Og)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Js)return{bytesValue:xx(i.serializer,r._byteString)};if(r instanceof gt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:_g(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Mg)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return gg(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${wh(r)}`)}(t,e)}function n1(t,e){const n={};return ZI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ki(t,(r,i)=>{const s=hl(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function r1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof He||t instanceof Og||t instanceof Js||t instanceof gt||t instanceof Lg||t instanceof Mg)}function jg(t,e,n){if(!r1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=wh(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Rp(t,e,n){if((e=Ke(e))instanceof Sh)return e._internalPath;if(typeof e=="string")return Ug(t,e);throw Pc("Field path arguments must be of type string or ",t,!1,void 0,n)}const m2=new RegExp("[~\\*/\\[\\]]");function Ug(t,e,n){if(e.search(m2)>=0)throw Pc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Sh(...e.split("."))._internalPath}catch{throw Pc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Pc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new W(F.INVALID_ARGUMENT,a+t+l)}function i1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new g2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($g("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class g2 extends s1{data(){return super.data()}}function $g(t,e){return typeof e=="string"?Ug(t,e):e instanceof Sh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bg{}class y2 extends Bg{}function _n(t,e,...n){let r=[];e instanceof Bg&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof zg).length,a=s.filter(l=>l instanceof Ah).length;if(o>1||o>0&&a>0)throw new W(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Ah extends y2{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ah(e,n,r)}_apply(e){const n=this._parse(e);return a1(e._query,n),new Gi(e.firestore,e.converter,_p(e._query,n))}_parse(e){const n=Ih(e.firestore);return function(s,o,a,l,c,h,d){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new W(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){X0(d,h);const g=[];for(const y of d)g.push(Y0(l,s,y));p={arrayValue:{values:g}}}else p=Y0(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||X0(d,h),p=p2(a,o,d,h==="in"||h==="not-in");return Ue.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function wn(t,e,n){const r=e,i=$g("where",t);return Ah._create(i,r,n)}class zg extends Bg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new zg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:yn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)a1(o,l),o=_p(o,l)}(e._query,n),new Gi(e.firestore,e.converter,_p(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Y0(t,e,n){if(typeof(n=Ke(n))=="string"){if(n==="")throw new W(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lx(e)&&n.indexOf("/")!==-1)throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ee.fromString(n));if(!G.isDocumentKey(r))throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return y0(t,new G(r))}if(n instanceof gt)return y0(t,n._key);throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wh(n)}.`)}function X0(t,e){if(!Array.isArray(t)||t.length===0)throw new W(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function a1(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class v2{convertValue(e,n="none"){switch($i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ui(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ki(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ve(o.doubleValue));return new Mg(s)}convertGeoPoint(e){return new Og(Ve(e.latitude),Ve(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=dg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Oa(e));default:return null}}convertTimestamp(e){const n=Xr(e);return new He(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ee.fromString(e);pe(bx(r));const i=new Ma(r.get(1),r.get(3)),s=new G(r.popFirst(5));return i.isEqual(n)||lr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class u1 extends s1{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field($g("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class bu extends u1{data(e={}){return super.data(e)}}class c1{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new qo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new bu(this._firestore,this._userDataWriter,r.key,r,new qo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new bu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new bu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:_2(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function _2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(t){t=Bt(t,gt);const e=Bt(t.firestore,Zr);return r2(Th(e),t._key).then(n=>h1(e,t,n))}class Wg extends v2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Js(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,n)}}function ht(t){t=Bt(t,Gi);const e=Bt(t.firestore,Zr),n=Th(e),r=new Wg(e);return o1(t._query),i2(n,t._query).then(i=>new c1(e,r,t,i))}function $n(t,e,n){t=Bt(t,gt);const r=Bt(t.firestore,Zr),i=l1(t.converter,e,n);return Hg(r,[t1(Ih(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,fn.none())])}function Bn(t,e,n,...r){t=Bt(t,gt);const i=Bt(t.firestore,Zr),s=Ih(i);let o;return o=typeof(e=Ke(e))=="string"||e instanceof Sh?f2(s,"updateDoc",t._key,e,n,r):d2(s,"updateDoc",t._key,e),Hg(i,[o.toMutation(t._key,fn.exists(!0))])}function w2(t,e){const n=Bt(t.firestore,Zr),r=be(t),i=l1(t.converter,e);return Hg(n,[t1(Ih(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,fn.exists(!1))]).then(()=>r)}function $d(t,...e){var n,r,i;t=Ke(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Q0(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Q0(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,h;if(t instanceof gt)c=Bt(t.firestore,Zr),h=hh(t._key.path),l={next:d=>{e[o]&&e[o](h1(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Bt(t,Gi);c=Bt(d.firestore,Zr),h=d._query;const p=new Wg(c);l={next:g=>{e[o]&&e[o](new c1(c,p,d,g))},error:e[o+1],complete:e[o+2]},o1(t._query)}return function(p,g,y,I){const P=new Vg(I),w=new Ng(g,P,y);return p.asyncQueue.enqueueAndForget(async()=>Rg(await Ac(p),w)),()=>{P.Za(),p.asyncQueue.enqueueAndForget(async()=>kg(await Ac(p),w))}}(Th(c),h,a,l)}function Hg(t,e){return function(r,i){const s=new tr;return r.asyncQueue.enqueueAndForget(async()=>KO(await n2(r),i,s)),s.promise}(Th(t),e)}function h1(t,e,n){const r=n.docs.get(e._key),i=new Wg(t);return new u1(t,i,e._key,r,new qo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){lo=i})(ao),Hs(new Fi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Zr(new xV(r.getProvider("auth-internal")),new RV(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new W(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ma(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Kr(d0,"4.7.3",e),Kr(d0,"4.7.3","esm2017")})();function Kg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function d1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const E2=d1,f1=new nl("auth","Firebase",d1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new og("@firebase/auth");function T2(t,...e){Cc.logLevel<=ae.WARN&&Cc.warn(`Auth (${ao}): ${t}`,...e)}function Nu(t,...e){Cc.logLevel<=ae.ERROR&&Cc.error(`Auth (${ao}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t,...e){throw Gg(t,...e)}function pn(t,...e){return Gg(t,...e)}function qg(t,e,n){const r=Object.assign(Object.assign({},E2()),{[e]:n});return new nl("auth","Firebase",r).create(e,{appName:t.name})}function bi(t){return qg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function S2(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Dn(t,"argument-error"),qg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Gg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return f1.create(t,...e)}function J(t,e,...n){if(!t)throw Gg(e,...n)}function Xn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nu(e),new Error(e)}function cr(t,e){t||Xn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function I2(){return Z0()==="http:"||Z0()==="https:"}function Z0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(I2()||tD()||"connection"in navigator)?navigator.onLine:!0}function A2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n){this.shortDelay=e,this.longDelay=n,cr(n>e,"Short delay should be less than long delay!"),this.isMobile=JN()||nD()}get(){return x2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(t,e){cr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=new dl(3e4,6e4);function Yg(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ho(t,e,n,r,i={}){return m1(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=rl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return eD()||(c.referrerPolicy="no-referrer"),p1.fetch()(g1(t,t.config.apiHost,n,a),c)})}async function m1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},P2),e);try{const i=new k2(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ou(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ou(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ou(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ou(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw qg(t,h,c);Dn(t,h)}}catch(i){if(i instanceof pr)throw i;Dn(t,"network-request-failed",{message:String(i)})}}async function R2(t,e,n,r,i={}){const s=await ho(t,e,n,r,i);return"mfaPendingCredential"in s&&Dn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function g1(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Qg(t.config,i):`${t.config.apiScheme}://${i}`}class k2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(pn(this.auth,"network-request-failed")),C2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ou(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=pn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b2(t,e){return ho(t,"POST","/v1/accounts:delete",e)}async function y1(t,e){return ho(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function N2(t,e=!1){const n=Ke(t),r=await n.getIdToken(e),i=Xg(r);J(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:la(Bd(i.auth_time)),issuedAtTime:la(Bd(i.iat)),expirationTime:la(Bd(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Bd(t){return Number(t)*1e3}function Xg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Nu("JWT malformed, contained fewer than 3 sections"),null;try{const i=LI(n);return i?JSON.parse(i):(Nu("Failed to decode base64 JWT payload"),null)}catch(i){return Nu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function ew(t){const e=Xg(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $a(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof pr&&D2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function D2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=la(this.lastLoginAt),this.creationTime=la(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await $a(t,y1(n,{idToken:r}));J(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?v1(s.providerUserInfo):[],a=O2(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new bp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function L2(t){const e=Ke(t);await Rc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function O2(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function v1(t){return t.map(e=>{var{providerId:n}=e,r=Kg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M2(t,e){const n=await m1(t,{},async()=>{const r=rl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=g1(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",p1.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function F2(t,e){return ho(t,"POST","/v2/accounts:revokeToken",Yg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ew(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=ew(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await M2(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Vs;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(J(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(J(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vs,this.toJSON())}_performRefresh(){return Xn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Jn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Kg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new V2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new bp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await $a(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return N2(this,e)}reload(){return L2(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Jn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Rc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yn(this.auth.app))return Promise.reject(bi(this.auth));const e=await this.getIdToken();return await $a(this,b2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,I=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:E,emailVerified:R,isAnonymous:V,providerData:M,stsTokenManager:x}=n;J(E&&x,e,"internal-error");const v=Vs.fromJSON(this.name,x);J(typeof E=="string",e,"internal-error"),_r(d,e.name),_r(p,e.name),J(typeof R=="boolean",e,"internal-error"),J(typeof V=="boolean",e,"internal-error"),_r(g,e.name),_r(y,e.name),_r(I,e.name),_r(P,e.name),_r(w,e.name),_r(_,e.name);const S=new Jn({uid:E,auth:e,email:p,emailVerified:R,displayName:d,isAnonymous:V,photoURL:y,phoneNumber:g,tenantId:I,stsTokenManager:v,createdAt:w,lastLoginAt:_});return M&&Array.isArray(M)&&(S.providerData=M.map(A=>Object.assign({},A))),P&&(S._redirectEventId=P),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Vs;i.updateFromServerResponse(n);const s=new Jn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Rc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];J(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?v1(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Vs;a.updateFromIdToken(r);const l=new Jn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new bp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw=new Map;function Zn(t){cr(t instanceof Function,"Expected a class definition");let e=tw.get(t);return e?(cr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,tw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_1.type="NONE";const nw=_1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(t,e,n){return`firebase:${t}:${e}:${n}`}class Ls{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Du(this.userKey,i.apiKey,s),this.fullPersistenceKey=Du("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Jn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ls(Zn(nw),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Zn(nw);const o=Du(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=Jn._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ls(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ls(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(S1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(w1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(x1(e))return"Blackberry";if(A1(e))return"Webos";if(E1(e))return"Safari";if((e.includes("chrome/")||T1(e))&&!e.includes("edge/"))return"Chrome";if(I1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function w1(t=vt()){return/firefox\//i.test(t)}function E1(t=vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function T1(t=vt()){return/crios\//i.test(t)}function S1(t=vt()){return/iemobile/i.test(t)}function I1(t=vt()){return/android/i.test(t)}function x1(t=vt()){return/blackberry/i.test(t)}function A1(t=vt()){return/webos/i.test(t)}function Jg(t=vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function j2(t=vt()){var e;return Jg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function U2(){return rD()&&document.documentMode===10}function P1(t=vt()){return Jg(t)||I1(t)||A1(t)||x1(t)||/windows phone/i.test(t)||S1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(t,e=[]){let n;switch(t){case"Browser":n=rw(vt());break;case"Worker":n=`${rw(vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ao}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B2(t,e={}){return ho(t,"GET","/v2/passwordPolicy",Yg(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=6;class W2{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:z2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iw(this),this.idTokenSubscription=new iw(this),this.beforeStateQueue=new $2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=f1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ls.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await y1(this,{idToken:e}),r=await Jn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Yn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=A2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yn(this.app))return Promise.reject(bi(this));const n=e?Ke(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yn(this.app)?Promise.reject(bi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yn(this.app)?Promise.reject(bi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await B2(this),n=new W2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new nl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await F2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Zn(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await Ls.create(this,[Zn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=C1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&T2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ph(t){return Ke(t)}class iw{constructor(e){this.auth=e,this.observer=null,this.addObserver=hD(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function K2(t){Zg=t}function q2(t){return Zg.loadJS(t)}function G2(){return Zg.gapiScript}function Q2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(t,e){const n=lg(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(gc(s,e??{}))return i;Dn(i,"already-initialized")}return n.initialize({options:e})}function X2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function J2(t,e,n){const r=Ph(t);J(r._canInitEmulator,r,"emulator-config-failed"),J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=R1(e),{host:o,port:a}=Z2(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),eM()}function R1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Z2(t){const e=R1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:sw(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:sw(o)}}}function sw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function eM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xn("not implemented")}_getIdTokenResponse(e){return Xn("not implemented")}_linkToIdToken(e,n){return Xn("not implemented")}_getReauthenticationResolver(e){return Xn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Os(t,e){return R2(t,"POST","/v1/accounts:signInWithIdp",Yg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM="http://localhost";class Bi extends k1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Bi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Dn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Kg(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Bi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Os(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Os(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Os(e,n)}buildRequest(){const e={requestUri:tM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=rl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends ey{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends fl{constructor(){super("facebook.com")}static credential(e){return Bi._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pr.credential(e.oauthAccessToken)}catch{return null}}}Pr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Pr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn extends fl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Bi._fromParams({providerId:qn.PROVIDER_ID,signInMethod:qn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return qn.credentialFromTaggedObject(e)}static credentialFromError(e){return qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return qn.credential(n,r)}catch{return null}}}qn.GOOGLE_SIGN_IN_METHOD="google.com";qn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends fl{constructor(){super("github.com")}static credential(e){return Bi._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cr.credential(e.oauthAccessToken)}catch{return null}}}Cr.GITHUB_SIGN_IN_METHOD="github.com";Cr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends fl{constructor(){super("twitter.com")}static credential(e,n){return Bi._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Rr.credential(n,r)}catch{return null}}}Rr.TWITTER_SIGN_IN_METHOD="twitter.com";Rr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Jn._fromIdTokenResponse(e,r,i),o=ow(r);return new Zs({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=ow(r);return new Zs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function ow(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc extends pr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,kc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new kc(e,n,r,i)}}function b1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?kc._fromErrorAndOperation(t,s,e,r):s})}async function nM(t,e,n=!1){const r=await $a(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Zs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(t,e,n=!1){const{auth:r}=t;if(Yn(r.app))return Promise.reject(bi(r));const i="reauthenticate";try{const s=await $a(t,b1(r,i,e,t),n);J(s.idToken,r,"internal-error");const o=Xg(s.idToken);J(o,r,"internal-error");const{sub:a}=o;return J(t.uid===a,r,"user-mismatch"),Zs._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Dn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iM(t,e,n=!1){if(Yn(t.app))return Promise.reject(bi(t));const r="signIn",i=await b1(t,r,e),s=await Zs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(t,e){return Ke(t).setPersistence(e)}function oM(t,e,n,r){return Ke(t).onIdTokenChanged(e,n,r)}function aM(t,e,n){return Ke(t).beforeAuthStateChanged(e,n)}function lM(t,e,n,r){return Ke(t).onAuthStateChanged(e,n,r)}function uM(t){return Ke(t).signOut()}const bc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bc,"1"),this.storage.removeItem(bc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM=1e3,hM=10;class D1 extends N1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=P1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);U2()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,hM):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},cM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}D1.type="LOCAL";const V1=D1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1 extends N1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}L1.type="SESSION";const O1=L1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Ch(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await dM(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ch.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=ty("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(){return window}function pM(t){kn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(){return typeof kn().WorkerGlobalScope<"u"&&typeof kn().importScripts=="function"}async function mM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function yM(){return M1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="firebaseLocalStorageDb",vM=1,Nc="firebaseLocalStorage",j1="fbase_key";class pl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Rh(t,e){return t.transaction([Nc],e?"readwrite":"readonly").objectStore(Nc)}function _M(){const t=indexedDB.deleteDatabase(F1);return new pl(t).toPromise()}function Np(){const t=indexedDB.open(F1,vM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Nc,{keyPath:j1})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Nc)?e(r):(r.close(),await _M(),e(await Np()))})})}async function aw(t,e,n){const r=Rh(t,!0).put({[j1]:e,value:n});return new pl(r).toPromise()}async function wM(t,e){const n=Rh(t,!1).get(e),r=await new pl(n).toPromise();return r===void 0?null:r.value}function lw(t,e){const n=Rh(t,!0).delete(e);return new pl(n).toPromise()}const EM=800,TM=3;class U1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Np(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>TM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return M1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ch._getInstance(yM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await mM(),!this.activeServiceWorker)return;this.sender=new fM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Np();return await aw(e,bc,"1"),await lw(e,bc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>aw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>wM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>lw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Rh(i,!1).getAll();return new pl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),EM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}U1.type="LOCAL";const SM=U1;new dl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(t,e){return e?Zn(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny extends k1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Os(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Os(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Os(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function IM(t){return iM(t.auth,new ny(t),t.bypassAuthState)}function xM(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),rM(n,new ny(t),t.bypassAuthState)}async function AM(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),nM(n,new ny(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return IM;case"linkViaPopup":case"linkViaRedirect":return AM;case"reauthViaPopup":case"reauthViaRedirect":return xM;default:Dn(this.auth,"internal-error")}}resolve(e){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=new dl(2e3,1e4);async function CM(t,e,n){if(Yn(t.app))return Promise.reject(pn(t,"operation-not-supported-in-this-environment"));const r=Ph(t);S2(t,e,ey);const i=$1(r,n);return new xi(r,"signInViaPopup",e,i).executeNotNull()}class xi extends B1{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,xi.currentPopupAction&&xi.currentPopupAction.cancel(),xi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){cr(this.filter.length===1,"Popup operations only handle one event");const e=ty();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(pn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,PM.get())};e()}}xi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM="pendingRedirect",Vu=new Map;class kM extends B1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Vu.get(this.auth._key());if(!e){try{const r=await bM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Vu.set(this.auth._key(),e)}return this.bypassAuthState||Vu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bM(t,e){const n=VM(e),r=DM(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function NM(t,e){Vu.set(t._key(),e)}function DM(t){return Zn(t._redirectPersistence)}function VM(t){return Du(RM,t.config.apiKey,t.name)}async function LM(t,e,n=!1){if(Yn(t.app))return Promise.reject(bi(t));const r=Ph(t),i=$1(r,e),o=await new kM(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM=10*60*1e3;class MM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!z1(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(pn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=OM&&this.cachedEventUids.clear(),this.cachedEventUids.has(uw(e))}saveEventToCache(e){this.cachedEventUids.add(uw(e)),this.lastProcessedEventTime=Date.now()}}function uw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function z1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function FM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return z1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jM(t,e={}){return ho(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$M=/^https?/;async function BM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await jM(t);for(const n of e)try{if(zM(n))return}catch{}Dn(t,"unauthorized-domain")}function zM(t){const e=kp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!$M.test(n))return!1;if(UM.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=new dl(3e4,6e4);function cw(){const t=kn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function HM(t){return new Promise((e,n)=>{var r,i,s;function o(){cw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cw(),n(pn(t,"network-request-failed"))},timeout:WM.get()})}if(!((i=(r=kn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=kn().gapi)===null||s===void 0)&&s.load)o();else{const a=Q2("iframefcb");return kn()[a]=()=>{gapi.load?o():n(pn(t,"network-request-failed"))},q2(`${G2()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Lu=null,e})}let Lu=null;function KM(t){return Lu=Lu||HM(t),Lu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM=new dl(5e3,15e3),GM="__/auth/iframe",QM="emulator/auth/iframe",YM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JM(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Qg(e,QM):`https://${t.config.authDomain}/${GM}`,r={apiKey:e.apiKey,appName:t.name,v:ao},i=XM.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${rl(r).slice(1)}`}async function ZM(t){const e=await KM(t),n=kn().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:JM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YM,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=pn(t,"network-request-failed"),a=kn().setTimeout(()=>{s(o)},qM.get());function l(){kn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tF=500,nF=600,rF="_blank",iF="http://localhost";class hw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sF(t,e,n,r=tF,i=nF){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},eF),{width:r.toString(),height:i.toString(),top:s,left:o}),c=vt().toLowerCase();n&&(a=T1(c)?rF:n),w1(c)&&(e=e||iF,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[g,y])=>`${p}${g}=${y},`,"");if(j2(c)&&a!=="_self")return oF(e||"",a),new hw(null);const d=window.open(e||"",a,h);J(d,t,"popup-blocked");try{d.focus()}catch{}return new hw(d)}function oF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF="__/auth/handler",lF="emulator/auth/handler",uF=encodeURIComponent("fac");async function dw(t,e,n,r,i,s){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ao,eventId:i};if(e instanceof ey){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",cD(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof fl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${uF}=${encodeURIComponent(l)}`:"";return`${cF(t)}?${rl(a).slice(1)}${c}`}function cF({config:t}){return t.emulator?Qg(t,lF):`https://${t.authDomain}/${aF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="webStorageSupport";class hF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=O1,this._completeRedirectFn=LM,this._overrideRedirectResult=NM}async _openPopup(e,n,r,i){var s;cr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await dw(e,n,r,kp(),i);return sF(e,o,ty())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await dw(e,n,r,kp(),i);return pM(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(cr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await ZM(e),r=new MM(e);return n.register("authEvent",i=>(J(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(zd,{type:zd},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[zd];o!==void 0&&n(!!o),Dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=BM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return P1()||E1()||Jg()}}const dF=hF;var fw="@firebase/auth",pw="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mF(t){Hs(new Fi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:C1(t)},c=new H2(r,i,s,l);return X2(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Hs(new Fi("auth-internal",e=>{const n=Ph(e.getProvider("auth").getImmediate());return(r=>new fF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kr(fw,pw,pF(t)),Kr(fw,pw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gF=5*60,yF=FI("authIdTokenMaxAge")||gF;let mw=null;const vF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>yF)return;const i=n==null?void 0:n.token;mw!==i&&(mw=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function _F(t=BI()){const e=lg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Y2(t,{popupRedirectResolver:dF,persistence:[SM,V1,O1]}),r=FI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=vF(s.toString());aM(n,o,()=>o(n.currentUser)),oM(n,a=>o(a))}}const i=OI("auth");return i&&J2(n,`http://${i}`),n}function wF(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}K2({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=pn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",wF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mF("Browser");const W1=$I(firebaseConfig),Rt=a2(W1),Ou=_F(W1);sM(Ou,V1).catch(t=>{console.error("Firebase Persistence Error:",t)});const gw=ui(Rt,"messages"),es=ui(Rt,"users"),zn=ui(Rt,"teachers"),ts=ui(Rt,"requests"),yw=ui(Rt,"bookings"),au=ui(Rt,"transactions"),lu=ui(Rt,"homeworks"),Ct=t=>Array.isArray(t)?t.map(e=>Ct(e)):t!==null&&typeof t=="object"?Object.entries(t).reduce((e,[n,r])=>(e[n]=r===void 0?null:Ct(r),e),{}):t,H1={async getUser(t){try{const e=be(es,t),n=await J0(e);return n.exists()?n.data():null}catch(e){throw console.error(`Error in getUser(${t}):`,e),e}},async createUser(t){try{const e={...t,walletBalance:t.walletBalance??0,currency:t.currency??"EUR"};await $n(be(es,t.id),Ct(e))}catch(e){throw console.error(`Error in createUser(${t.id}):`,e),e}},async updateUser(t,e){try{await Bn(be(es,t),Ct(e))}catch(n){throw console.error(`Error in updateUser(${t}):`,n),n}},async getWallet(t){try{const e=await this.getUser(t);return{balance:(e==null?void 0:e.walletBalance)??0,currency:(e==null?void 0:e.currency)??"EUR"}}catch(e){return console.error(`Error in getWallet(${t}):`,e),{balance:0,currency:"EUR"}}},async addFunds(t,e,n="stripe"){try{const r=await this.getUser(t);if(r){const i=(r.walletBalance||0)+e;await this.updateUser(t,{walletBalance:i});const s=`tx_${Date.now()}_${t.substring(0,5)}`,o={id:s,type:"deposit",description:`Recarga de saldo (${n==="mercadopago"?"MercadoPago":"Stripe"})`,amount:e,timestamp:Date.now(),fromId:"system",toId:t};await $n(be(Rt,"transactions",s),Ct(o))}}catch(r){throw console.error(`Error in addFunds(${t}):`,r),r}},async getTransactions(t){try{const e=_n(au,wn("fromId","==",t)),n=_n(au,wn("toId","==",t)),[r,i]=await Promise.all([ht(e),ht(n)]),s=[...r.docs,...i.docs].map(a=>a.data());return Array.from(new Map(s.map(a=>[a.id,a])).values()).sort((a,l)=>l.timestamp-a.timestamp)}catch(e){return console.error(`Error in getTransactions(${t}):`,e),[]}},async processPayment(t,e,n){try{const r=await this.getUser(t),i=await this.getTeacherById(e);if(!r||(r.walletBalance||0)<n)return{success:!1,message:"Saldo insuficiente"};if(!i)return{success:!1,message:"Profesor no encontrado"};await this.updateUser(t,{walletBalance:(r.walletBalance||0)-n});const s=i.commissionRate||.5,o=n*s;await Bn(be(zn,e),{earnings:(i.earnings||0)+o,classesGiven:(i.classesGiven||0)+4});const a=`pay_${Date.now()}_${t.substring(0,5)}`,l={id:a,type:"payment_sent",description:`Mensualidad pagada a ${i.name}`,amount:-n,timestamp:Date.now(),fromId:t,toId:e};await $n(be(Rt,"transactions",a),Ct(l));const c={id:`${a}_t`,type:"payment_received",description:`Mensualidad recibida de ${r.name}`,amount:o,timestamp:Date.now(),fromId:t,toId:e};return await $n(be(Rt,"transactions",`${a}_t`),Ct(c)),{success:!0,message:"Pago realizado correctamente"}}catch(r){return console.error("Error in processPayment:",r),{success:!1,message:"Error interno al procesar el pago"}}},async getTeachers(){try{return(await ht(zn)).docs.map(e=>e.data())}catch(t){return console.error("Error in getTeachers:",t),[]}},async getTeacherById(t){try{const e=be(zn,t),n=await J0(e);return n.exists()?n.data():null}catch(e){return console.error(`Error in getTeacherById(${t}):`,e),null}},async createTeacherProfile(t){try{await $n(be(zn,t.id),Ct(t))}catch(e){throw console.error(`Error in createTeacherProfile(${t.id}):`,e),e}},async updateTeacher(t,e){try{await Bn(be(zn,t),Ct(e))}catch(n){throw console.error(`Error in updateTeacher(${t}):`,n),n}},async createRequest(t){try{await $n(be(ts,t.id),Ct(t))}catch(e){throw console.error(`Error in createRequest(${t.id}):`,e),e}},async getRequestsForStudent(t){try{const e=_n(ts,wn("studentId","==",t));return(await ht(e)).docs.map(r=>r.data())}catch(e){return console.error(`Error in getRequestsForStudent(${t}):`,e),[]}},async getRequestsForTeacher(t){try{const e=_n(ts,wn("teacherId","==",t));return(await ht(e)).docs.map(r=>r.data())}catch(e){return console.error(`Error in getRequestsForTeacher(${t}):`,e),[]}},async updateRequestStatus(t,e){try{await Bn(be(ts,t),{status:e})}catch(n){throw console.error(`Error in updateRequestStatus(${t}):`,n),n}},async createBooking(t){try{await $n(be(yw,t.id),Ct(t))}catch(e){throw console.error(`Error in createBooking(${t.id}):`,e),e}},async getBookingsForUser(t,e){try{const r=_n(yw,wn(e==="student"?"studentId":"teacherId","==",t));return(await ht(r)).docs.map(s=>s.data())}catch(n){return console.error(`Error in getBookingsForUser(${t}):`,n),[]}},async getTeacherAvailability(t){try{return["10:00","11:00","16:00","17:00"]}catch(e){return console.error(`Error in getTeacherAvailability(${t}):`,e),[]}},async updateTeacherAvailability(t,e){try{await Bn(be(zn,t),{availability:e})}catch(n){throw console.error(`Error in updateTeacherAvailability(${t}):`,n),n}},async createHomework(t){try{await $n(be(lu,t.id),Ct(t))}catch(e){throw console.error(`Error in createHomework(${t.id}):`,e),e}},async getHomeworksForStudent(t){try{const e=_n(lu,wn("studentId","==",t));return(await ht(e)).docs.map(r=>r.data()).sort((r,i)=>i.assignedAt-r.assignedAt)}catch(e){return console.error(`Error in getHomeworksForStudent(${t}):`,e),[]}},async getHomeworksForTeacher(t){try{const e=_n(lu,wn("teacherId","==",t));return(await ht(e)).docs.map(r=>r.data()).sort((r,i)=>i.assignedAt-r.assignedAt)}catch(e){return console.error(`Error in getHomeworksForTeacher(${t}):`,e),[]}},async updateHomeworkStatus(t,e){try{await Bn(be(lu,t),{status:e,completedAt:e==="completed"?Date.now():null})}catch(n){throw console.error(`Error in updateHomeworkStatus(${t}):`,n),n}},subscribeToChat(t,e,n){const r=[t,e].sort().join("_"),i=_n(gw,wn("chatId","==",r));return $d(i,s=>{const o=s.docs.map(a=>({id:a.id,...a.data()})).sort((a,l)=>a.timestamp-l.timestamp);n(o)},s=>{console.warn("Chat subscription error:",s)})},async sendMessage(t){try{const e={...t,chatId:[t.studentId,t.teacherId].sort().join("_")};await w2(gw,Ct(e))}catch(e){throw console.error("Error in sendMessage:",e),e}},async getPublicProfile(t){try{const e=await this.getTeacherById(t);if(e)return{name:e.name,bio:e.description,image:e.image,elo:e.elo};const n=await this.getUser(t);return n?{name:n.name,bio:"Estudiante",image:n.photoURL||"https://via.placeholder.com/150",elo:0}:null}catch(e){return console.error(`Error in getPublicProfile(${t}):`,e),null}},async updateRoom(t,e){try{await $n(be(Rt,"rooms",t),Ct(e),{merge:!0})}catch(n){throw console.error(`Error in updateRoom(${t}):`,n),n}},async updateChatMessages(t){try{const e=be(Rt,"chats",t);await Bn(e,{updatedAt:Date.now()})}catch(e){throw console.error(`Error in updateChatMessages(${t}):`,e),e}},subscribeToRoom(t,e){const n=be(Rt,"rooms",t);return $d(n,r=>{r.exists()&&e(r.data())},r=>{console.error(`Room subscription error (${t}):`,r)})},async getRequestStatus(t,e){try{const n=_n(ts,wn("studentId","==",t),wn("teacherId","==",e)),r=await ht(n);return r.empty?null:r.docs[0].data().status}catch(n){return console.error("Error in getRequestStatus:",n),null}},async getAllUsers(){try{return(await ht(es)).docs.map(e=>e.data())}catch(t){return console.error("Error in getAllUsers:",t),[]}},async getAllTeachers(){try{return(await ht(zn)).docs.map(e=>e.data())}catch(t){return console.error("Error in getAllTeachers:",t),[]}},async getAllTransactions(){try{return(await ht(au)).docs.map(e=>e.data())}catch(t){return console.error("Error in getAllTransactions:",t),[]}},async verifyTeacher(t,e){try{await Bn(be(zn,t),{isVerified:e})}catch(n){throw console.error(`Error in verifyTeacher(${t}):`,n),n}},async banUser(t,e){try{await Bn(be(es,t),{status:e?"banned":"active"})}catch(n){throw console.error(`Error in banUser(${t}):`,n),n}},async getPlatformStats(){try{const[t,e,n,r]=await Promise.all([ht(es),ht(zn),ht(ts),ht(au)]),i=r.docs.map(s=>s.data()).filter(s=>s.type==="payment_received").reduce((s,o)=>s+(o.amount||0),0);return{users:t.size,teachers:e.size,requests:n.size,revenue:i}}catch{return{users:0,teachers:0,requests:0,revenue:0}}},subscribeToCollection(t,e){const n=_n(ui(Rt,t));return $d(n,r=>{const i=r.docs.map(s=>({id:s.id,...s.data()}));e(i)},r=>{console.error(`Collection subscription error (${t}):`,r)})},async isAdmin(t){try{const e=await this.getUser(t),n=["andreslgumuzio@gmail.com"];return(e==null?void 0:e.role)==="admin"||(e!=null&&e.email?n.includes(e.email):!1)}catch(e){return console.error(`Error in isAdmin(${t}):`,e),!1}},async getLiveKitToken(t,e,n){try{return console.warn("Using MOCK LiveKit Token. Video/Audio will not work securely without a backend."),"ey_MOCK_TOKEN_FOR_MVP_PURPOSES_ONLY_ey"}catch(r){return console.error("Error getting LiveKit token:",r),""}}};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),K1=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>N.createElement("svg",{ref:l,...TF,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:K1("lucide",i),...a},[...o.map(([c,h])=>N.createElement(c,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=(t,e)=>{const n=N.forwardRef(({className:r,...i},s)=>N.createElement(SF,{ref:s,iconNode:e,className:K1(`lucide-${EF(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=Ln("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=Ln("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=Ln("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=Ln("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=Ln("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=Ln("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=Ln("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=Ln("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=Ln("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=Ln("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),X=t=>typeof t=="string",Fo=()=>{let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n},_w=t=>t==null?"":""+t,bF=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},NF=/###/g,ww=t=>t&&t.indexOf("###")>-1?t.replace(NF,"."):t,Ew=t=>!t||X(t),ua=(t,e,n)=>{const r=X(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(Ew(t))return{};const s=ww(r[i]);!t[s]&&n&&(t[s]=new n),Object.prototype.hasOwnProperty.call(t,s)?t=t[s]:t={},++i}return Ew(t)?{}:{obj:t,k:ww(r[i])}},Tw=(t,e,n)=>{const{obj:r,k:i}=ua(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let s=e[e.length-1],o=e.slice(0,e.length-1),a=ua(t,o,Object);for(;a.obj===void 0&&o.length;)s=`${o[o.length-1]}.${s}`,o=o.slice(0,o.length-1),a=ua(t,o,Object),a!=null&&a.obj&&typeof a.obj[`${a.k}.${s}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${s}`]=n},DF=(t,e,n,r)=>{const{obj:i,k:s}=ua(t,e,Object);i[s]=i[s]||[],i[s].push(n)},Dc=(t,e)=>{const{obj:n,k:r}=ua(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},VF=(t,e,n)=>{const r=Dc(t,n);return r!==void 0?r:Dc(e,n)},G1=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?X(t[r])||t[r]instanceof String||X(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):G1(t[r],e[r],n):t[r]=e[r]);return t},ns=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var LF={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const OF=t=>X(t)?t.replace(/[&<>"'\/]/g,e=>LF[e]):t;class MF{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const FF=[" ",",","?","!",";"],jF=new MF(20),UF=(t,e,n)=>{e=e||"",n=n||"";const r=FF.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const i=jF.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let s=!i.test(t);if(!s){const o=t.indexOf(n);o>0&&!i.test(t.substring(0,o))&&(s=!0)}return s},Dp=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let i=t;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let o,a="";for(let l=s;l<r.length;++l)if(l!==s&&(a+=n),a+=r[l],o=i[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;s+=l-s+1;break}i=o}return i},Ba=t=>t==null?void 0:t.replace("_","-"),$F={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var n,r;(r=(n=console==null?void 0:console[t])==null?void 0:n.apply)==null||r.call(n,console,e)}};class Vc{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||$F,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(X(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new Vc(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Vc(this.logger,e)}}var xn=new Vc;class kh{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,s])=>{for(let o=0;o<s;o++)i(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,s])=>{for(let o=0;o<s;o++)i.apply(i,[e,...n])})}}class Sw extends kh{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,i={}){var c,h;const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],r&&(Array.isArray(r)?a.push(...r):X(r)&&s?a.push(...r.split(s)):a.push(r)));const l=Dc(this.data,a);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=a[0],n=a[1],r=a.slice(2).join(".")),l||!o||!X(r)?l:Dp((h=(c=this.data)==null?void 0:c[e])==null?void 0:h[n],r,s)}addResource(e,n,r,i,s={silent:!1}){const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=[e,n];r&&(a=a.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(a=e.split("."),i=n,n=a[1]),this.addNamespaces(n),Tw(this.data,a,i),s.silent||this.emit("added",e,n,r,i)}addResources(e,n,r,i={silent:!1}){for(const s in r)(X(r[s])||Array.isArray(r[s]))&&this.addResource(e,n,s,r[s],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,s,o={silent:!1,skipCopy:!1}){let a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),i=r,r=n,n=a[1]),this.addNamespaces(n);let l=Dc(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?G1(l,r,s):l={...l,...r},Tw(this.data,a,l),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var Q1={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(s=>{var o;e=((o=this.processors[s])==null?void 0:o.process(e,n,r,i))??e}),e}};const Y1=Symbol("i18next/PATH_KEY");function BF(){const t=[],e=Object.create(null);let n;return e.get=(r,i)=>{var s;return(s=n==null?void 0:n.revoke)==null||s.call(n),i===Y1?t:(t.push(i),n=Proxy.revocable(r,e),n.proxy)},Proxy.revocable(Object.create(null),e).proxy}function Vp(t,e){const{[Y1]:n}=t(BF());return n.join((e==null?void 0:e.keySeparator)??".")}const Iw={},Wd=t=>!X(t)&&typeof t!="boolean"&&typeof t!="number";class Lc extends kh{constructor(e,n={}){super(),bF(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=xn.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};if(e==null)return!1;const i=this.resolve(e,r);if((i==null?void 0:i.res)===void 0)return!1;const s=Wd(i.res);return!(r.returnObjects===!1&&s)}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!UF(e,r,i);if(o&&!a){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:X(s)?[s]:s};const c=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(c[0])>-1)&&(s=c.shift()),e=c.join(i)}return{key:e,namespaces:X(s)?[s]:s}}translate(e,n,r){let i=typeof n=="object"?{...n}:n;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=Vp(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const s=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:a,namespaces:l}=this.extractFromKey(e[e.length-1],i),c=l[l.length-1];let h=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;h===void 0&&(h=":");const d=i.lng||this.language,p=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((d==null?void 0:d.toLowerCase())==="cimode")return p?s?{res:`${c}${h}${a}`,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(i)}:`${c}${h}${a}`:s?{res:a,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(i)}:a;const g=this.resolve(e,i);let y=g==null?void 0:g.res;const I=(g==null?void 0:g.usedKey)||a,P=(g==null?void 0:g.exactUsedKey)||a,w=["[object Number]","[object Function]","[object RegExp]"],_=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,E=!this.i18nFormat||this.i18nFormat.handleAsObject,R=i.count!==void 0&&!X(i.count),V=Lc.hasDefaultValue(i),M=R?this.pluralResolver.getSuffix(d,i.count,i):"",x=i.ordinal&&R?this.pluralResolver.getSuffix(d,i.count,{ordinal:!1}):"",v=R&&!i.ordinal&&i.count===0,S=v&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${M}`]||i[`defaultValue${x}`]||i.defaultValue;let A=y;E&&!y&&V&&(A=S);const k=Wd(A),b=Object.prototype.toString.apply(A);if(E&&A&&k&&w.indexOf(b)<0&&!(X(_)&&Array.isArray(A))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const C=this.options.returnedObjectHandler?this.options.returnedObjectHandler(I,A,{...i,ns:l}):`key '${a} (${this.language})' returned an object instead of string.`;return s?(g.res=C,g.usedParams=this.getUsedParamsDetails(i),g):C}if(o){const C=Array.isArray(A),Y=C?[]:{},de=C?P:I;for(const Re in A)if(Object.prototype.hasOwnProperty.call(A,Re)){const ne=`${de}${o}${Re}`;V&&!y?Y[Re]=this.translate(ne,{...i,defaultValue:Wd(S)?S[Re]:void 0,joinArrays:!1,ns:l}):Y[Re]=this.translate(ne,{...i,joinArrays:!1,ns:l}),Y[Re]===ne&&(Y[Re]=A[Re])}y=Y}}else if(E&&X(_)&&Array.isArray(y))y=y.join(_),y&&(y=this.extendTranslation(y,e,i,r));else{let C=!1,Y=!1;!this.isValidLookup(y)&&V&&(C=!0,y=S),this.isValidLookup(y)||(Y=!0,y=a);const Re=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Y?void 0:y,ne=V&&S!==y&&this.options.updateMissing;if(Y||C||ne){if(this.logger.log(ne?"updateKey":"missingKey",d,c,a,ne?S:y),o){const re=this.resolve(a,{...i,keySeparator:!1});re&&re.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let $=[];const q=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&q&&q[0])for(let re=0;re<q.length;re++)$.push(q[re]);else this.options.saveMissingTo==="all"?$=this.languageUtils.toResolveHierarchy(i.lng||this.language):$.push(i.lng||this.language);const Q=(re,oe,me)=>{var qt;const Kt=V&&me!==y?me:Re;this.options.missingKeyHandler?this.options.missingKeyHandler(re,c,oe,Kt,ne,i):(qt=this.backendConnector)!=null&&qt.saveMissing&&this.backendConnector.saveMissing(re,c,oe,Kt,ne,i),this.emit("missingKey",re,c,oe,y)};this.options.saveMissing&&(this.options.saveMissingPlurals&&R?$.forEach(re=>{const oe=this.pluralResolver.getSuffixes(re,i);v&&i[`defaultValue${this.options.pluralSeparator}zero`]&&oe.indexOf(`${this.options.pluralSeparator}zero`)<0&&oe.push(`${this.options.pluralSeparator}zero`),oe.forEach(me=>{Q([re],a+me,i[`defaultValue${me}`]||S)})}):Q($,a,S))}y=this.extendTranslation(y,e,i,g,r),Y&&y===a&&this.options.appendNamespaceToMissingKey&&(y=`${c}${h}${a}`),(Y||C)&&this.options.parseMissingKeyHandler&&(y=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}${h}${a}`:a,C?y:void 0,i))}return s?(g.res=y,g.usedParams=this.getUsedParamsDetails(i),g):y}extendTranslation(e,n,r,i,s){var l,c;if((l=this.i18nFormat)!=null&&l.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const h=X(e)&&(((c=r==null?void 0:r.interpolation)==null?void 0:c.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(h){const g=e.match(this.interpolator.nestingRegexp);d=g&&g.length}let p=r.replace&&!X(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),e=this.interpolator.interpolate(e,p,r.lng||this.language||i.usedLng,r),h){const g=e.match(this.interpolator.nestingRegexp),y=g&&g.length;d<y&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...g)=>(s==null?void 0:s[0])===g[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${n[0]}`),null):this.translate(...g,n),r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,a=X(o)?[o]:o;return e!=null&&(a!=null&&a.length)&&r.applyPostProcessor!==!1&&(e=Q1.handle(a,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,i,s,o,a;return X(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const c=this.extractFromKey(l,n),h=c.key;i=h;let d=c.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const p=n.count!==void 0&&!X(n.count),g=p&&!n.ordinal&&n.count===0,y=n.context!==void 0&&(X(n.context)||typeof n.context=="number")&&n.context!=="",I=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);d.forEach(P=>{var w,_;this.isValidLookup(r)||(a=P,!Iw[`${I[0]}-${P}`]&&((w=this.utils)!=null&&w.hasLoadedNamespace)&&!((_=this.utils)!=null&&_.hasLoadedNamespace(a))&&(Iw[`${I[0]}-${P}`]=!0,this.logger.warn(`key "${i}" for languages "${I.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),I.forEach(E=>{var M;if(this.isValidLookup(r))return;o=E;const R=[h];if((M=this.i18nFormat)!=null&&M.addLookupKeys)this.i18nFormat.addLookupKeys(R,h,E,P,n);else{let x;p&&(x=this.pluralResolver.getSuffix(E,n.count,n));const v=`${this.options.pluralSeparator}zero`,S=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(n.ordinal&&x.indexOf(S)===0&&R.push(h+x.replace(S,this.options.pluralSeparator)),R.push(h+x),g&&R.push(h+v)),y){const A=`${h}${this.options.contextSeparator||"_"}${n.context}`;R.push(A),p&&(n.ordinal&&x.indexOf(S)===0&&R.push(A+x.replace(S,this.options.pluralSeparator)),R.push(A+x),g&&R.push(A+v))}}let V;for(;V=R.pop();)this.isValidLookup(r)||(s=V,r=this.getResource(E,P,V,n))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,i={}){var s;return(s=this.i18nFormat)!=null&&s.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!X(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of n)delete i[s]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class xw{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=xn.create("languageUtils")}getScriptPartFromCode(e){if(e=Ba(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Ba(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(X(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return n=i;const s=this.getLanguagePartFromCode(r);if(this.isSupportedCode(s))return n=s;n=this.options.supportedLngs.find(o=>{if(o===s)return o;if(!(o.indexOf("-")<0&&s.indexOf("-")<0)&&(o.indexOf("-")>0&&s.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===s||o.indexOf(s)===0&&s.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),X(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),i=[],s=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return X(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):X(e)&&s(this.formatLanguageCode(e)),r.forEach(o=>{i.indexOf(o)<0&&s(this.formatLanguageCode(o))}),i}}const Aw={zero:0,one:1,two:2,few:3,many:4,other:5},Pw={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class zF{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=xn.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=Ba(e==="dev"?"en":e),i=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let o;try{o=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Pw;if(!e.match(/-|_/))return Pw;const l=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(l,n)}return this.pluralRulesCache[s]=o,o}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((i,s)=>Aw[i]-Aw[s]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,n,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const Cw=(t,e,n,r=".",i=!0)=>{let s=VF(t,e,n);return!s&&i&&X(n)&&(s=Dp(t,n,r),s===void 0&&(s=Dp(e,n,r))),s},Hd=t=>t.replace(/\$/g,"$$$$");class Rw{constructor(e={}){var n;this.logger=xn.create("interpolator"),this.options=e,this.format=((n=e==null?void 0:e.interpolation)==null?void 0:n.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:o,suffix:a,suffixEscaped:l,formatSeparator:c,unescapeSuffix:h,unescapePrefix:d,nestingPrefix:p,nestingPrefixEscaped:g,nestingSuffix:y,nestingSuffixEscaped:I,nestingOptionsSeparator:P,maxReplaces:w,alwaysFormat:_}=e.interpolation;this.escape=n!==void 0?n:OF,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?ns(s):o||"{{",this.suffix=a?ns(a):l||"}}",this.formatSeparator=c||",",this.unescapePrefix=h?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":h||"",this.nestingPrefix=p?ns(p):g||ns("$t("),this.nestingSuffix=y?ns(y):I||ns(")"),this.nestingOptionsSeparator=P||",",this.maxReplaces=w||1e3,this.alwaysFormat=_!==void 0?_:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,n,r,i){var g;let s,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=y=>{if(y.indexOf(this.formatSeparator)<0){const _=Cw(n,l,y,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(_,void 0,r,{...i,...n,interpolationkey:y}):_}const I=y.split(this.formatSeparator),P=I.shift().trim(),w=I.join(this.formatSeparator).trim();return this.format(Cw(n,l,P,this.options.keySeparator,this.options.ignoreJSONStructure),w,r,{...i,...n,interpolationkey:P})};this.resetRegExp();const h=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,d=((g=i==null?void 0:i.interpolation)==null?void 0:g.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:y=>Hd(y)},{regex:this.regexp,safeValue:y=>this.escapeValue?Hd(this.escape(y)):Hd(y)}].forEach(y=>{for(a=0;s=y.regex.exec(e);){const I=s[1].trim();if(o=c(I),o===void 0)if(typeof h=="function"){const w=h(e,s,i);o=X(w)?w:""}else if(i&&Object.prototype.hasOwnProperty.call(i,I))o="";else if(d){o=s[0];continue}else this.logger.warn(`missed to pass in variable ${I} for interpolating ${e}`),o="";else!X(o)&&!this.useRawValueToEscape&&(o=_w(o));const P=y.safeValue(o);if(e=e.replace(s[0],P),d?(y.regex.lastIndex+=o.length,y.regex.lastIndex-=s[0].length):y.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n,r={}){let i,s,o;const a=(l,c)=>{const h=this.nestingOptionsSeparator;if(l.indexOf(h)<0)return l;const d=l.split(new RegExp(`${h}[ ]*{`));let p=`{${d[1]}`;l=d[0],p=this.interpolate(p,o);const g=p.match(/'/g),y=p.match(/"/g);(((g==null?void 0:g.length)??0)%2===0&&!y||y.length%2!==0)&&(p=p.replace(/'/g,'"'));try{o=JSON.parse(p),c&&(o={...c,...o})}catch(I){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,I),`${l}${h}${p}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l};for(;i=this.nestingRegexp.exec(e);){let l=[];o={...r},o=o.replace&&!X(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const c=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(c!==-1&&(l=i[1].slice(c).split(this.formatSeparator).map(h=>h.trim()).filter(Boolean),i[1]=i[1].slice(0,c)),s=n(a.call(this,i[1].trim(),o),o),s&&i[0]===e&&!X(s))return s;X(s)||(s=_w(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),l.length&&(s=l.reduce((h,d)=>this.format(h,d,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}const WF=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(o=>{if(o){const[a,...l]=o.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,""),h=a.trim();n[h]||(n[h]=c),c==="false"&&(n[h]=!1),c==="true"&&(n[h]=!0),isNaN(c)||(n[h]=parseInt(c,10))}})}return{formatName:e,formatOptions:n}},kw=t=>{const e={};return(n,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const o=r+JSON.stringify(s);let a=e[o];return a||(a=t(Ba(r),i),e[o]=a),a(n)}},HF=t=>(e,n,r)=>t(Ba(n),r)(e);class KF{constructor(e={}){this.logger=xn.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?kw:HF;this.formats={number:r((i,s)=>{const o=new Intl.NumberFormat(i,{...s});return a=>o.format(a)}),currency:r((i,s)=>{const o=new Intl.NumberFormat(i,{...s,style:"currency"});return a=>o.format(a)}),datetime:r((i,s)=>{const o=new Intl.DateTimeFormat(i,{...s});return a=>o.format(a)}),relativetime:r((i,s)=>{const o=new Intl.RelativeTimeFormat(i,{...s});return a=>o.format(a,s.range||"day")}),list:r((i,s)=>{const o=new Intl.ListFormat(i,{...s});return a=>o.format(a)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=kw(n)}format(e,n,r,i={}){const s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(a=>a.indexOf(")")>-1)){const a=s.findIndex(l=>l.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,a)].join(this.formatSeparator)}return s.reduce((a,l)=>{var d;const{formatName:c,formatOptions:h}=WF(l);if(this.formats[c]){let p=a;try{const g=((d=i==null?void 0:i.formatParams)==null?void 0:d[i.interpolationkey])||{},y=g.locale||g.lng||i.locale||i.lng||r;p=this.formats[c](a,y,{...h,...i,...g})}catch(g){this.logger.warn(g)}return p}else this.logger.warn(`there was no format function for ${c}`);return a},e)}}const qF=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class GF extends kh{constructor(e,n,r,i={}){var s,o;super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=xn.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(o=(s=this.backend)==null?void 0:s.init)==null||o.call(s,r,i.backend,i)}queueLoad(e,n,r,i){const s={},o={},a={},l={};return e.forEach(c=>{let h=!0;n.forEach(d=>{const p=`${c}|${d}`;!r.reload&&this.store.hasResourceBundle(c,d)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?o[p]===void 0&&(o[p]=!0):(this.state[p]=1,h=!1,o[p]===void 0&&(o[p]=!0),s[p]===void 0&&(s[p]=!0),l[d]===void 0&&(l[d]=!0)))}),h||(a[c]=!0)}),(Object.keys(s).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const i=e.split("|"),s=i[0],o=i[1];n&&this.emit("failedLoading",s,o,n),!n&&r&&this.store.addResourceBundle(s,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const a={};this.queue.forEach(l=>{DF(l.loaded,[s],o),qF(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{a[c]||(a[c]={});const h=l.loaded[c];h.length&&h.forEach(d=>{a[c][d]===void 0&&(a[c][d]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r,i=0,s=this.retryTimeout,o){if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:s,callback:o});return}this.readingCalls++;const a=(c,h)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(c&&h&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,s*2,o)},s);return}o(c,h)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const c=l(e,n);c&&typeof c.then=="function"?c.then(h=>a(null,h)).catch(a):a(null,c)}catch(c){a(c)}return}return l(e,n,a)}prepareLoading(e,n,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();X(e)&&(e=this.languageUtils.toResolveHierarchy(e)),X(n)&&(n=[n]);const s=this.queueLoad(e,n,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${s} for language ${i} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${s} for language ${i}`,a),this.loaded(e,o,a)})}saveMissing(e,n,r,i,s,o={},a=()=>{}){var l,c,h,d,p;if((c=(l=this.services)==null?void 0:l.utils)!=null&&c.hasLoadedNamespace&&!((d=(h=this.services)==null?void 0:h.utils)!=null&&d.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((p=this.backend)!=null&&p.create){const g={...o,isUpdate:s},y=this.backend.create.bind(this.backend);if(y.length<6)try{let I;y.length===5?I=y(e,n,r,i,g):I=y(e,n,r,i),I&&typeof I.then=="function"?I.then(P=>a(null,P)).catch(a):a(null,I)}catch(I){a(I)}else y(e,n,r,i,a,g)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}const Kd=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),X(t[1])&&(e.defaultValue=t[1]),X(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),bw=t=>{var e,n;return X(t.ns)&&(t.ns=[t.ns]),X(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),X(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((n=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:n.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},uu=()=>{},QF=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};let Nw=!1;const YF=t=>{var e,n,r,i,s,o,a,l,c;return!!(((r=(n=(e=t==null?void 0:t.modules)==null?void 0:e.backend)==null?void 0:n.name)==null?void 0:r.indexOf("Locize"))>0||((a=(o=(s=(i=t==null?void 0:t.modules)==null?void 0:i.backend)==null?void 0:s.constructor)==null?void 0:o.name)==null?void 0:a.indexOf("Locize"))>0||(c=(l=t==null?void 0:t.options)==null?void 0:l.backend)!=null&&c.backends&&t.options.backend.backends.some(h=>{var d,p,g;return((d=h==null?void 0:h.name)==null?void 0:d.indexOf("Locize"))>0||((g=(p=h==null?void 0:h.constructor)==null?void 0:p.name)==null?void 0:g.indexOf("Locize"))>0}))};class ca extends kh{constructor(e={},n){if(super(),this.options=bw(e),this.services={},this.logger=xn,this.modules={external:[]},QF(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(X(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=Kd();this.options={...r,...this.options,...bw(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=r.overloadTranslationOptionHandler),this.options.showSupportNotice!==!1&&!YF(this)&&!Nw&&(typeof console<"u"&&typeof console.info<"u"&&console.info(" i18next is maintained with support from Locize  consider powering your project with managed localization (AI, CDN, integrations): https://locize.com "),Nw=!0);const i=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?xn.init(i(this.modules.logger),this.options):xn.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:c=KF;const h=new xw(this.options);this.store=new Sw(this.options.resources,this.options);const d=this.services;d.logger=xn,d.resourceStore=this.store,d.languageUtils=h,d.pluralResolver=new zF(h,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),c&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(d.formatter=i(c),d.formatter.init&&d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new Rw(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new GF(i(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",(g,...y)=>{this.emit(g,...y)}),this.modules.languageDetector&&(d.languageDetector=i(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=i(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new Lc(this.services,this.options),this.translator.on("*",(g,...y)=>{this.emit(g,...y)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,n||(n=uu),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=(...h)=>this.store[c](...h)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=(...h)=>(this.store[c](...h),this)});const a=Fo(),l=()=>{const c=(h,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(d),n(h,d)};if(this.languages&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initAsync?l():setTimeout(l,0),a}loadResources(e,n=uu){var s,o;let r=n;const i=X(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const a=[],l=c=>{if(!c||c==="cimode")return;this.services.languageUtils.toResolveHierarchy(c).forEach(d=>{d!=="cimode"&&a.indexOf(d)<0&&a.push(d)})};i?l(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(h=>l(h)),(o=(s=this.options.preload)==null?void 0:s.forEach)==null||o.call(s,c=>l(c)),this.services.backendConnector.load(a,this.options.ns,c=>{!c&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(c)})}else r(null)}reloadResources(e,n,r){const i=Fo();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=uu),this.services.backendConnector.reload(e,n,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Q1.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=Fo();this.emit("languageChanging",e);const i=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},s=(a,l)=>{l?this.isLanguageChangingTo===e&&(i(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,r.resolve((...c)=>this.t(...c)),n&&n(a,(...c)=>this.t(...c))},o=a=>{var h,d;!e&&!a&&this.services.languageDetector&&(a=[]);const l=X(a)?a:a&&a[0],c=this.store.hasLanguageSomeTranslations(l)?l:this.services.languageUtils.getBestMatchFromCodes(X(a)?[a]:a);c&&(this.language||i(c),this.translator.language||this.translator.changeLanguage(c),(d=(h=this.services.languageDetector)==null?void 0:h.cacheUserLanguage)==null||d.call(h,c)),this.loadResources(c,p=>{s(p,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),r}getFixedT(e,n,r){const i=(s,o,...a)=>{let l;typeof o!="object"?l=this.options.overloadTranslationOptionHandler([s,o].concat(a)):l={...o},l.lng=l.lng||i.lng,l.lngs=l.lngs||i.lngs,l.ns=l.ns||i.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||i.keyPrefix);const c=this.options.keySeparator||".";let h;return l.keyPrefix&&Array.isArray(s)?h=s.map(d=>(typeof d=="function"&&(d=Vp(d,{...this.options,...o})),`${l.keyPrefix}${c}${d}`)):(typeof s=="function"&&(s=Vp(s,{...this.options,...o})),h=l.keyPrefix?`${l.keyPrefix}${c}${s}`:s),this.t(h,l)};return X(e)?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(...e){var n;return(n=this.translator)==null?void 0:n.translate(...e)}exists(...e){var n;return(n=this.translator)==null?void 0:n.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const c=this.services.backendConnector.state[`${a}|${l}`];return c===-1||c===0||c===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!i||o(s,e)))}loadNamespaces(e,n){const r=Fo();return this.options.ns?(X(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Fo();X(e)&&(e=[e]);const i=this.options.preload||[],s=e.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return s.length?(this.options.preload=i.concat(s),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){var i,s;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const o=new Intl.Locale(e);if(o&&o.getTextInfo){const a=o.getTextInfo();if(a&&a.direction)return a.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((s=this.services)==null?void 0:s.languageUtils)||new xw(Kd());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){const r=new ca(e,n);return r.createInstance=ca.createInstance,r}cloneInstance(e={},n=uu){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new ca(i);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(a=>{s[a]=this[a]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const a=Object.keys(this.store.data).reduce((l,c)=>(l[c]={...this.store.data[c]},l[c]=Object.keys(l[c]).reduce((h,d)=>(h[d]={...l[c][d]},h),l[c]),l),{});s.store=new Sw(a,i),s.services.resourceStore=s.store}if(e.interpolation){const l={...Kd().interpolation,...this.options.interpolation,...e.interpolation},c={...i,interpolation:l};s.services.interpolator=new Rw(c)}return s.translator=new Lc(s.services,i),s.translator.on("*",(a,...l)=>{s.emit(a,...l)}),s.init(i,n),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Pt=ca.createInstance();Pt.createInstance;Pt.dir;Pt.init;Pt.loadResources;Pt.reloadResources;Pt.use;Pt.changeLanguage;Pt.getFixedT;Pt.t;Pt.exists;Pt.setDefaultNamespace;Pt.hasLoadedNamespace;Pt.loadNamespaces;Pt.loadLanguages;const XF=(t,e,n,r)=>{var s,o,a,l;const i=[n,{code:e,...r||{}}];if((o=(s=t==null?void 0:t.services)==null?void 0:s.logger)!=null&&o.forward)return t.services.logger.forward(i,"warn","react-i18next::",!0);zi(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(l=(a=t==null?void 0:t.services)==null?void 0:a.logger)!=null&&l.warn?t.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},Dw={},X1=(t,e,n,r)=>{zi(n)&&Dw[n]||(zi(n)&&(Dw[n]=new Date),XF(t,e,n,r))},J1=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},Lp=(t,e,n)=>{t.loadNamespaces(e,J1(t,n))},Vw=(t,e,n,r)=>{if(zi(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return Lp(t,n,r);n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,J1(t,r))},JF=(t,e,n={})=>!e.languages||!e.languages.length?(X1(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,i)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,t))return!1}}),zi=t=>typeof t=="string",ZF=t=>typeof t=="object"&&t!==null,ej=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,tj={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},nj=t=>tj[t],rj=t=>t.replace(ej,nj);let Op={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:rj,transDefaultProps:void 0};const ij=(t={})=>{Op={...Op,...t}},sj=()=>Op;let Z1;const oj=t=>{Z1=t},aj=()=>Z1,lj={type:"3rdParty",init(t){ij(t.options.react),oj(t)}},uj=N.createContext();class cj{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var eA={exports:{}},tA={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eo=N;function hj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dj=typeof Object.is=="function"?Object.is:hj,fj=eo.useState,pj=eo.useEffect,mj=eo.useLayoutEffect,gj=eo.useDebugValue;function yj(t,e){var n=e(),r=fj({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return mj(function(){i.value=n,i.getSnapshot=e,qd(i)&&s({inst:i})},[t,n,e]),pj(function(){return qd(i)&&s({inst:i}),t(function(){qd(i)&&s({inst:i})})},[t]),gj(n),n}function qd(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dj(t,n)}catch{return!0}}function vj(t,e){return e()}var _j=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?vj:yj;tA.useSyncExternalStore=eo.useSyncExternalStore!==void 0?eo.useSyncExternalStore:_j;eA.exports=tA;var wj=eA.exports;const Ej=(t,e)=>zi(e)?e:ZF(e)&&zi(e.defaultValue)?e.defaultValue:Array.isArray(t)?t[t.length-1]:t,Tj={t:Ej,ready:!1},Sj=()=>()=>{},nA=(t,e={})=>{var S,A,k;const{i18n:n}=e,{i18n:r,defaultNS:i}=N.useContext(uj)||{},s=n||r||aj();s&&!s.reportNamespaces&&(s.reportNamespaces=new cj),s||X1(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const o=N.useMemo(()=>{var b;return{...sj(),...(b=s==null?void 0:s.options)==null?void 0:b.react,...e}},[s,e]),{useSuspense:a,keyPrefix:l}=o,c=i||((S=s==null?void 0:s.options)==null?void 0:S.defaultNS),h=zi(c)?[c]:c||["translation"],d=N.useMemo(()=>h,h);(k=(A=s==null?void 0:s.reportNamespaces)==null?void 0:A.addUsedNamespaces)==null||k.call(A,d);const p=N.useRef(0),g=N.useCallback(b=>{if(!s)return Sj;const{bindI18n:C,bindI18nStore:Y}=o,de=()=>{p.current+=1,b()};return C&&s.on(C,de),Y&&s.store.on(Y,de),()=>{C&&C.split(" ").forEach(Re=>s.off(Re,de)),Y&&Y.split(" ").forEach(Re=>s.store.off(Re,de))}},[s,o]),y=N.useRef(),I=N.useCallback(()=>{if(!s)return Tj;const b=!!(s.isInitialized||s.initializedStoreOnce)&&d.every($=>JF($,s,o)),C=e.lng||s.language,Y=p.current,de=y.current;if(de&&de.ready===b&&de.lng===C&&de.keyPrefix===l&&de.revision===Y)return de;const ne={t:s.getFixedT(C,o.nsMode==="fallback"?d:d[0],l),ready:b,lng:C,keyPrefix:l,revision:Y};return y.current=ne,ne},[s,d,l,o,e.lng]),[P,w]=N.useState(0),{t:_,ready:E}=wj.useSyncExternalStore(g,I,I);N.useEffect(()=>{if(s&&!E&&!a){const b=()=>w(C=>C+1);e.lng?Vw(s,e.lng,d,b):Lp(s,d,b)}},[s,e.lng,d,E,a,P]);const R=s||{},V=N.useRef(null),M=N.useRef(),x=b=>{const C=Object.getOwnPropertyDescriptors(b);C.__original&&delete C.__original;const Y=Object.create(Object.getPrototypeOf(b),C);if(!Object.prototype.hasOwnProperty.call(Y,"__original"))try{Object.defineProperty(Y,"__original",{value:b,writable:!1,enumerable:!1,configurable:!1})}catch{}return Y},v=N.useMemo(()=>{const b=R,C=b==null?void 0:b.language;let Y=b;b&&(V.current&&V.current.__original===b?M.current!==C?(Y=x(b),V.current=Y,M.current=C):Y=V.current:(Y=x(b),V.current=Y,M.current=C));const de=[_,Y,E];return de.t=_,de.i18n=Y,de.ready=E,de},[_,R,E,R.resolvedLanguage,R.language,R.languages]);if(s&&a&&!E)throw new Promise(b=>{const C=()=>b();e.lng?Vw(s,e.lng,d,C):Lp(s,d,C)});return v},Lw=({className:t="w-10 h-10"})=>D.jsx("div",{className:`${t} flex items-center justify-center text-gold`,children:D.jsx(xF,{size:"100%",strokeWidth:1.5})}),Ij=({onMenuClick:t})=>{const{t:e}=nA(),n=fr(),{userRole:r,isAuthenticated:i,currentUserId:s}=_l(),o=a=>n.pathname===a;return n.pathname.includes("/classroom/")||n.pathname.includes("/room/")?null:D.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-[#161512] border-t border-white/10 pb-safe z-50",children:[D.jsxs("div",{className:"flex justify-around items-center h-16",children:[D.jsxs(Kn,{to:"/",className:`flex flex-col items-center justify-center w-full h-full space-y-1 ${o("/")?"text-gold":"text-white/40 hover:text-white/80"}`,children:[D.jsx(AF,{size:20}),D.jsx("span",{className:"text-[10px] font-medium",children:"Jugar"})]}),i&&D.jsxs(Kn,{to:`/classroom/${s}`,className:`flex flex-col items-center justify-center w-full h-full space-y-1 ${o(`/classroom/${s}`)?"text-gold":"text-white/40 hover:text-white/80"}`,children:[D.jsx(IF,{size:20}),D.jsx("span",{className:"text-[10px] font-medium",children:"Aprender"})]}),i&&D.jsxs(Kn,{to:r==="teacher"?"/dashboard":"/student-dashboard",className:`flex flex-col items-center justify-center w-full h-full space-y-1 ${o("/dashboard")||o("/student-dashboard")?"text-gold":"text-white/40 hover:text-white/80"}`,children:[D.jsx(q1,{size:20}),D.jsx("span",{className:"text-[10px] font-medium",children:"Panel"})]}),i?D.jsxs(Kn,{to:"/profile",className:`flex flex-col items-center justify-center w-full h-full space-y-1 ${o("/profile")?"text-gold":"text-white/40 hover:text-white/80"}`,children:[D.jsx(Es,{size:20}),D.jsx("span",{className:"text-[10px] font-medium",children:"Perfil"})]}):D.jsxs("button",{onClick:t,className:"flex flex-col items-center justify-center w-full h-full space-y-1 text-white/40 hover:text-white/80",children:[D.jsx(Es,{size:20}),D.jsx("span",{className:"text-[10px] font-medium",children:"Login"})]}),D.jsxs("button",{onClick:t,className:"flex flex-col items-center justify-center w-full h-full space-y-1 text-white/40 hover:text-white/80",children:[D.jsx(CF,{size:20}),D.jsx("span",{className:"text-[10px] font-medium",children:"Men"})]})]}),D.jsx("div",{className:"h-safe-area-bottom w-full bg-[#161512]"})]})},xj=()=>{var y,I,P,w,_;const t=_l(),{userRole:e,logout:n}=t;el();const r=fr(),{t:i,i18n:s}=nA(),[o,a]=N.useState(!1),[l,c]=N.useState(!1),[h,d]=N.useState(!1);N.useEffect(()=>{const E=()=>{a(window.scrollY>20)};return window.addEventListener("scroll",E),()=>window.removeEventListener("scroll",E)},[]),N.useEffect(()=>{c(!1)},[r]);const p=async()=>{d(!0);try{await(t==null?void 0:t.loginWithGoogle())}catch{d(!1)}},g=async E=>{d(!0);try{await(t==null?void 0:t.loginAsTest(E)),c(!1)}catch{}finally{d(!1)}};return r.pathname.includes("/classroom/")||r.pathname.includes("/room/"),D.jsxs(D.Fragment,{children:[D.jsx("nav",{className:`fixed top-0 left-0 right-0 h-16 z-[100] transition-all duration-500 border-b ${o||l?"bg-dark-bg/95 backdrop-blur-xl border-white/5 shadow-2xl":"bg-transparent border-transparent"}`,children:D.jsxs("div",{className:"h-full px-6 flex items-center justify-between relative z-[101]",children:[D.jsxs(Kn,{to:"/",className:"flex items-center gap-2 group transition-opacity hover:opacity-80","aria-label":"Home",children:[D.jsx(Lw,{className:"w-8 h-8 text-gold drop-shadow-[0_0_8px_rgba(212,175,55,0.3)]"}),D.jsxs("h1",{className:"font-bold text-xl tracking-tighter text-white",children:["TOP",D.jsx("span",{className:"text-gold font-light",children:"CHESS"})]})]}),D.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[D.jsxs("button",{onClick:()=>{const E=s.language==="es"?"en":"es";s.changeLanguage(E)},className:"text-xs font-bold text-white/70 hover:text-gold transition-colors uppercase tracking-widest flex items-center gap-1",children:[D.jsx(vw,{size:14}),s.language==="es"?"ES":"EN"]}),D.jsx("div",{className:"w-px h-4 bg-white/10 mx-2"}),t!=null&&t.isAuthenticated?D.jsx("div",{className:"flex items-center gap-4",children:D.jsxs("button",{onClick:()=>c(!l),className:"relative w-10 h-10 flex items-center justify-center rounded-full bg-white/5 border border-white/10 hover:bg-white/10 transition-all",children:[(y=t.currentUser)!=null&&y.photoURL&&t.currentUser.photoURL.startsWith("http")?D.jsx("img",{src:t.currentUser.photoURL,alt:"Profile",className:"w-8 h-8 rounded-full object-cover"}):D.jsx(Es,{size:18,className:"text-gold"}),e==="teacher"&&D.jsx("span",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-gold rounded-full flex items-center justify-center text-[8px] font-bold text-black border border-black",children:"T"})]})}):D.jsxs("div",{className:"flex gap-2",children:[D.jsx("button",{onClick:p,disabled:h,className:"px-6 py-2 rounded-xl bg-white text-black font-bold hover:bg-gold transition-all duration-300 text-xs uppercase tracking-widest shadow-lg shadow-white/5 disabled:opacity-50 disabled:cursor-wait",children:h?"...":i("nav.login")}),D.jsx("button",{onClick:()=>g("student"),disabled:h,className:"px-4 py-2 rounded-xl bg-blue-500/10 text-blue-400 border border-blue-500/20 font-bold text-[10px] uppercase tracking-widest hover:bg-blue-500/20 transition-all disabled:opacity-50",children:i("nav.test_student")}),D.jsx("button",{onClick:()=>g("teacher"),disabled:h,className:"px-4 py-2 rounded-xl bg-gold/10 text-gold border border-gold/20 font-bold text-[10px] uppercase tracking-widest hover:bg-gold/20 transition-all disabled:opacity-50",children:i("nav.test_teacher")})]})]}),D.jsxs("div",{className:"md:hidden flex items-center gap-4",children:[D.jsxs("button",{onClick:()=>{const E=s.language==="es"?"en":"es";s.changeLanguage(E)},className:"text-xs font-bold text-white/70 hover:text-gold transition-colors uppercase tracking-widest flex items-center gap-1",children:[D.jsx(vw,{size:14}),s.language==="es"?"ES":"EN"]}),D.jsxs("button",{onClick:()=>c(!l),className:"relative w-10 h-10 flex items-center justify-center rounded-full bg-white/5 border border-white/10 hover:bg-white/10 transition-all",children:[t!=null&&t.isAuthenticated&&((I=t.currentUser)!=null&&I.photoURL)&&t.currentUser.photoURL.startsWith("http")?D.jsx("img",{src:t.currentUser.photoURL,alt:"Profile",className:"w-8 h-8 rounded-full object-cover"}):D.jsx(Es,{size:18,className:"text-gold"}),(t==null?void 0:t.isAuthenticated)&&e==="teacher"&&D.jsx("span",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-gold rounded-full flex items-center justify-center text-[8px] font-bold text-black border border-black",children:"T"})]})]})]})}),l&&pI.createPortal(D.jsxs("div",{className:`fixed inset-0 z-[99] bg-dark-bg/95 backdrop-blur-xl transition-transform duration-300 ease-out ${l?"translate-x-0":"translate-x-full"}`,children:[D.jsx("div",{className:"absolute top-0 right-0 p-6 z-[101]",children:D.jsx("button",{onClick:()=>c(!1),className:"w-10 h-10 flex items-center justify-center rounded-full bg-white/5 border border-white/10 hover:bg-white/10 transition-all text-white",children:D.jsx(kF,{size:20})})}),D.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6",children:[D.jsx("div",{className:"flex flex-col items-center gap-6 mb-8",children:D.jsxs(Kn,{to:"/",className:"flex items-center gap-2 group transition-opacity hover:opacity-80","aria-label":"Home",children:[D.jsx(Lw,{className:"w-12 h-12 text-gold drop-shadow-[0_0_8px_rgba(212,175,55,0.3)]"}),D.jsxs("h1",{className:"font-bold text-3xl tracking-tighter text-white",children:["TOP",D.jsx("span",{className:"text-gold font-light",children:"CHESS"})]})]})}),t!=null&&t.isAuthenticated?D.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[D.jsxs("div",{className:"flex items-center gap-4 mb-8 bg-white/5 p-4 rounded-2xl border border-white/5",children:[(P=t.currentUser)!=null&&P.photoURL&&t.currentUser.photoURL.startsWith("http")?D.jsx("img",{src:t.currentUser.photoURL,alt:"Profile",className:"w-12 h-12 rounded-lg object-cover border border-white/10"}):D.jsx("div",{className:"w-12 h-12 rounded-lg bg-white/10 flex items-center justify-center border border-white/10",children:D.jsx(Es,{size:20,className:"text-gold"})}),D.jsxs("div",{children:[D.jsx("p",{className:"text-white font-bold text-sm truncate max-w-[140px]",children:(w=t.currentUser)==null?void 0:w.displayName}),D.jsx("p",{className:"text-gold text-[10px] font-mono uppercase tracking-widest",children:e})]})]}),e==="teacher"&&D.jsxs(Kn,{to:"/dashboard",onClick:()=>c(!1),className:"flex items-center gap-4 px-4 py-3 rounded-xl text-white/80 hover:text-white hover:bg-white/5 transition-all text-sm font-bold uppercase tracking-wider",children:[D.jsx(q1,{size:18,className:"text-gold/70"}),i("nav.panel")]}),((_=t.currentUser)==null?void 0:_.email)==="andreslgumuzio@gmail.com"&&D.jsxs(Kn,{to:"/admin",onClick:()=>c(!1),className:"flex items-center gap-4 px-4 py-3 rounded-xl text-white/80 hover:text-white hover:bg-white/5 transition-all text-sm font-bold uppercase tracking-wider",children:[D.jsx(RF,{size:18,className:"text-red-400"}),i("nav.admin")]}),D.jsxs(Kn,{to:"/profile",onClick:()=>c(!1),className:"flex items-center gap-4 px-4 py-3 rounded-xl text-white/80 hover:text-white hover:bg-white/5 transition-all text-sm font-bold uppercase tracking-wider",children:[D.jsx(Es,{size:18,className:"text-blue-400"}),i("nav.profile")]}),D.jsxs("button",{onClick:()=>{n(),c(!1)},className:"flex items-center gap-4 px-4 py-3 rounded-xl text-red-500/80 hover:text-red-500 hover:bg-red-500/10 transition-all text-sm font-bold uppercase tracking-wider mt-4",children:[D.jsx(PF,{size:18}),i("nav.logout")]})]}):D.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[D.jsxs("button",{onClick:p,disabled:h,className:"w-full py-3 rounded-xl bg-white text-black font-bold hover:bg-gold transition-all duration-300 text-xs uppercase tracking-widest shadow-lg shadow-white/5 disabled:opacity-50 flex justify-center items-center gap-2",children:[h&&D.jsx("div",{className:"w-3 h-3 border-2 border-black/30 border-t-black rounded-full animate-spin"}),h?"Iniciando...":i("nav.login")]}),D.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[D.jsx("button",{onClick:()=>g("student"),disabled:h,className:"w-full py-2.5 rounded-xl bg-blue-500/10 text-blue-400 border border-blue-500/20 font-bold text-[10px] uppercase tracking-widest disabled:opacity-50",children:i("nav.test_student")}),D.jsx("button",{onClick:()=>g("teacher"),disabled:h,className:"w-full py-2.5 rounded-xl bg-gold/10 text-gold border border-gold/20 font-bold text-[10px] uppercase tracking-widest disabled:opacity-50",children:i("nav.test_teacher")})]})]})]})]}),document.body),D.jsx(Ij,{onMenuClick:()=>c(!0)})]})},ry=N.createContext({});function iy(t){const e=N.useRef(null);return e.current===null&&(e.current=t()),e.current}const rA=typeof window<"u",iA=rA?N.useLayoutEffect:N.useEffect,bh=N.createContext(null);function sy(t,e){t.indexOf(e)===-1&&t.push(e)}function Oc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Vn=(t,e,n)=>n>e?e:n<t?t:n;let oy=()=>{};const hr={},sA=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function oA(t){return typeof t=="object"&&t!==null}const aA=t=>/^0[^.\s]+$/u.test(t);function ay(t){let e;return()=>(e===void 0&&(e=t()),e)}const en=t=>t,Aj=(t,e)=>n=>e(t(n)),ml=(...t)=>t.reduce(Aj),za=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class ly{constructor(){this.subscriptions=[]}add(e){return sy(this.subscriptions,e),()=>Oc(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const mn=t=>t*1e3,Jt=t=>t/1e3;function lA(t,e){return e?t*(1e3/e):0}const uA=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Pj=1e-7,Cj=12;function Rj(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=uA(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>Pj&&++a<Cj);return o}function gl(t,e,n,r){if(t===e&&n===r)return en;const i=s=>Rj(s,0,1,t,n);return s=>s===0||s===1?s:uA(i(s),e,r)}const cA=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,hA=t=>e=>1-t(1-e),dA=gl(.33,1.53,.69,.99),uy=hA(dA),fA=cA(uy),pA=t=>(t*=2)<1?.5*uy(t):.5*(2-Math.pow(2,-10*(t-1))),cy=t=>1-Math.sin(Math.acos(t)),mA=hA(cy),gA=cA(cy),kj=gl(.42,0,1,1),bj=gl(0,0,.58,1),yA=gl(.42,0,.58,1),Nj=t=>Array.isArray(t)&&typeof t[0]!="number",vA=t=>Array.isArray(t)&&typeof t[0]=="number",Dj={linear:en,easeIn:kj,easeInOut:yA,easeOut:bj,circIn:cy,circInOut:gA,circOut:mA,backIn:uy,backInOut:fA,backOut:dA,anticipate:pA},Vj=t=>typeof t=="string",Ow=t=>{if(vA(t)){oy(t.length===4);const[e,n,r,i]=t;return gl(e,n,r,i)}else if(Vj(t))return Dj[t];return t},cu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Lj(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(h){o.has(h)&&(c.schedule(h),t()),h(a)}const c={schedule:(h,d=!1,p=!1)=>{const y=p&&i?n:r;return d&&o.add(h),y.has(h)||y.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(a=h,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),n.clear(),i=!1,s&&(s=!1,c.process(h))}};return c}const Oj=40;function _A(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=cu.reduce((E,R)=>(E[R]=Lj(s),E),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:h,update:d,preRender:p,render:g,postRender:y}=o,I=()=>{const E=hr.useManualTiming?i.timestamp:performance.now();n=!1,hr.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(E-i.timestamp,Oj),1)),i.timestamp=E,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),h.process(i),d.process(i),p.process(i),g.process(i),y.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(I))},P=()=>{n=!0,r=!0,i.isProcessing||t(I)};return{schedule:cu.reduce((E,R)=>{const V=o[R];return E[R]=(M,x=!1,v=!1)=>(n||P(),V.schedule(M,x,v)),E},{}),cancel:E=>{for(let R=0;R<cu.length;R++)o[cu[R]].cancel(E)},state:i,steps:o}}const{schedule:ve,cancel:ei,state:Je,steps:Gd}=_A(typeof requestAnimationFrame<"u"?requestAnimationFrame:en,!0);let Mu;function Mj(){Mu=void 0}const Tt={now:()=>(Mu===void 0&&Tt.set(Je.isProcessing||hr.useManualTiming?Je.timestamp:performance.now()),Mu),set:t=>{Mu=t,queueMicrotask(Mj)}},wA=t=>e=>typeof e=="string"&&e.startsWith(t),EA=wA("--"),Fj=wA("var(--"),hy=t=>Fj(t)?jj.test(t.split("/*")[0].trim()):!1,jj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Mw(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const fo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Wa={...fo,transform:t=>Vn(0,1,t)},hu={...fo,default:1},ha=t=>Math.round(t*1e5)/1e5,dy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Uj(t){return t==null}const $j=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,fy=(t,e)=>n=>!!(typeof n=="string"&&$j.test(n)&&n.startsWith(t)||e&&!Uj(n)&&Object.prototype.hasOwnProperty.call(n,e)),TA=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(dy);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Bj=t=>Vn(0,255,t),Qd={...fo,transform:t=>Math.round(Bj(t))},Ai={test:fy("rgb","red"),parse:TA("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Qd.transform(t)+", "+Qd.transform(e)+", "+Qd.transform(n)+", "+ha(Wa.transform(r))+")"};function zj(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Mp={test:fy("#"),parse:zj,transform:Ai.transform},yl=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),wr=yl("deg"),bn=yl("%"),H=yl("px"),Wj=yl("vh"),Hj=yl("vw"),Fw={...bn,parse:t=>bn.parse(t)/100,transform:t=>bn.transform(t*100)},Ts={test:fy("hsl","hue"),parse:TA("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+bn.transform(ha(e))+", "+bn.transform(ha(n))+", "+ha(Wa.transform(r))+")"},Fe={test:t=>Ai.test(t)||Mp.test(t)||Ts.test(t),parse:t=>Ai.test(t)?Ai.parse(t):Ts.test(t)?Ts.parse(t):Mp.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ai.transform(t):Ts.transform(t),getAnimatableNone:t=>{const e=Fe.parse(t);return e.alpha=0,Fe.transform(e)}},Kj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function qj(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(dy))==null?void 0:e.length)||0)+(((n=t.match(Kj))==null?void 0:n.length)||0)>0}const SA="number",IA="color",Gj="var",Qj="var(",jw="${}",Yj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ha(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(Yj,l=>(Fe.test(l)?(r.color.push(s),i.push(IA),n.push(Fe.parse(l))):l.startsWith(Qj)?(r.var.push(s),i.push(Gj),n.push(l)):(r.number.push(s),i.push(SA),n.push(parseFloat(l))),++s,jw)).split(jw);return{values:n,split:a,indexes:r,types:i}}function xA(t){return Ha(t).values}function AA(t){const{split:e,types:n}=Ha(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===SA?s+=ha(i[o]):a===IA?s+=Fe.transform(i[o]):s+=i[o]}return s}}const Xj=t=>typeof t=="number"?0:Fe.test(t)?Fe.getAnimatableNone(t):t;function Jj(t){const e=xA(t);return AA(t)(e.map(Xj))}const ti={test:qj,parse:xA,createTransformer:AA,getAnimatableNone:Jj};function Yd(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Zj({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Yd(l,a,t+1/3),s=Yd(l,a,t),o=Yd(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Mc(t,e){return n=>n>0?e:t}const xe=(t,e,n)=>t+(e-t)*n,Xd=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},eU=[Mp,Ai,Ts],tU=t=>eU.find(e=>e.test(t));function Uw(t){const e=tU(t);if(!e)return!1;let n=e.parse(t);return e===Ts&&(n=Zj(n)),n}const $w=(t,e)=>{const n=Uw(t),r=Uw(e);if(!n||!r)return Mc(t,e);const i={...n};return s=>(i.red=Xd(n.red,r.red,s),i.green=Xd(n.green,r.green,s),i.blue=Xd(n.blue,r.blue,s),i.alpha=xe(n.alpha,r.alpha,s),Ai.transform(i))},Fp=new Set(["none","hidden"]);function nU(t,e){return Fp.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function rU(t,e){return n=>xe(t,e,n)}function py(t){return typeof t=="number"?rU:typeof t=="string"?hy(t)?Mc:Fe.test(t)?$w:oU:Array.isArray(t)?PA:typeof t=="object"?Fe.test(t)?$w:iU:Mc}function PA(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>py(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function iU(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=py(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function sU(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const oU=(t,e)=>{const n=ti.createTransformer(e),r=Ha(t),i=Ha(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Fp.has(t)&&!i.values.length||Fp.has(e)&&!r.values.length?nU(t,e):ml(PA(sU(r,i),i.values),n):Mc(t,e)};function CA(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?xe(t,e,n):py(t)(t,e)}const aU=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>ve.update(e,n),stop:()=>ei(e),now:()=>Je.isProcessing?Je.timestamp:Tt.now()}},RA=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Fc=2e4;function my(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Fc;)e+=n,r=t.next(e);return e>=Fc?1/0:e}function lU(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(my(r),Fc);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:Jt(i)}}const uU=5;function kA(t,e,n){const r=Math.max(e-uU,0);return lA(n-t(r),e-r)}const Ne={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Jd=.001;function cU({duration:t=Ne.duration,bounce:e=Ne.bounce,velocity:n=Ne.velocity,mass:r=Ne.mass}){let i,s,o=1-e;o=Vn(Ne.minDamping,Ne.maxDamping,o),t=Vn(Ne.minDuration,Ne.maxDuration,Jt(t)),o<1?(i=c=>{const h=c*o,d=h*t,p=h-n,g=jp(c,o),y=Math.exp(-d);return Jd-p/g*y},s=c=>{const d=c*o*t,p=d*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,y=Math.exp(-d),I=jp(Math.pow(c,2),o);return(-i(c)+Jd>0?-1:1)*((p-g)*y)/I}):(i=c=>{const h=Math.exp(-c*t),d=(c-n)*t+1;return-Jd+h*d},s=c=>{const h=Math.exp(-c*t),d=(n-c)*(t*t);return h*d});const a=5/t,l=dU(i,s,a);if(t=mn(t),isNaN(l))return{stiffness:Ne.stiffness,damping:Ne.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const hU=12;function dU(t,e,n){let r=n;for(let i=1;i<hU;i++)r=r-t(r)/e(r);return r}function jp(t,e){return t*Math.sqrt(1-e*e)}const fU=["duration","bounce"],pU=["stiffness","damping","mass"];function Bw(t,e){return e.some(n=>t[n]!==void 0)}function mU(t){let e={velocity:Ne.velocity,stiffness:Ne.stiffness,damping:Ne.damping,mass:Ne.mass,isResolvedFromDuration:!1,...t};if(!Bw(t,pU)&&Bw(t,fU))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Vn(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Ne.mass,stiffness:i,damping:s}}else{const n=cU(t);e={...e,...n,mass:Ne.mass},e.isResolvedFromDuration=!0}return e}function jc(t=Ne.visualDuration,e=Ne.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:h,duration:d,velocity:p,isResolvedFromDuration:g}=mU({...n,velocity:-Jt(n.velocity||0)}),y=p||0,I=c/(2*Math.sqrt(l*h)),P=o-s,w=Jt(Math.sqrt(l/h)),_=Math.abs(P)<5;r||(r=_?Ne.restSpeed.granular:Ne.restSpeed.default),i||(i=_?Ne.restDelta.granular:Ne.restDelta.default);let E;if(I<1){const V=jp(w,I);E=M=>{const x=Math.exp(-I*w*M);return o-x*((y+I*w*P)/V*Math.sin(V*M)+P*Math.cos(V*M))}}else if(I===1)E=V=>o-Math.exp(-w*V)*(P+(y+w*P)*V);else{const V=w*Math.sqrt(I*I-1);E=M=>{const x=Math.exp(-I*w*M),v=Math.min(V*M,300);return o-x*((y+I*w*P)*Math.sinh(v)+V*P*Math.cosh(v))/V}}const R={calculatedDuration:g&&d||null,next:V=>{const M=E(V);if(g)a.done=V>=d;else{let x=V===0?y:0;I<1&&(x=V===0?mn(y):kA(E,V,M));const v=Math.abs(x)<=r,S=Math.abs(o-M)<=i;a.done=v&&S}return a.value=a.done?o:M,a},toString:()=>{const V=Math.min(my(R),Fc),M=RA(x=>R.next(V*x).value,V,30);return V+"ms "+M},toTransition:()=>{}};return R}jc.applyToOptions=t=>{const e=lU(t,100,jc);return t.ease=e.ease,t.duration=mn(e.duration),t.type="keyframes",t};function Up({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const d=t[0],p={done:!1,value:d},g=v=>a!==void 0&&v<a||l!==void 0&&v>l,y=v=>a===void 0?l:l===void 0||Math.abs(a-v)<Math.abs(l-v)?a:l;let I=n*e;const P=d+I,w=o===void 0?P:o(P);w!==P&&(I=w-d);const _=v=>-I*Math.exp(-v/r),E=v=>w+_(v),R=v=>{const S=_(v),A=E(v);p.done=Math.abs(S)<=c,p.value=p.done?w:A};let V,M;const x=v=>{g(p.value)&&(V=v,M=jc({keyframes:[p.value,y(p.value)],velocity:kA(E,v,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:h}))};return x(0),{calculatedDuration:null,next:v=>{let S=!1;return!M&&V===void 0&&(S=!0,R(v),x(v)),V!==void 0&&v>=V?M.next(v-V):(!S&&R(v),p)}}}function gU(t,e,n){const r=[],i=n||hr.mix||CA,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||en:e;a=ml(l,a)}r.push(a)}return r}function yU(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(oy(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=gU(e,r,i),l=a.length,c=h=>{if(o&&h<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(h<t[d+1]);d++);const p=za(t[d],t[d+1],h);return a[d](p)};return n?h=>c(Vn(t[0],t[s-1],h)):c}function vU(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=za(0,e,r);t.push(xe(n,1,i))}}function _U(t){const e=[0];return vU(e,t.length-1),e}function wU(t,e){return t.map(n=>n*e)}function EU(t,e){return t.map(()=>e||yA).splice(0,t.length-1)}function da({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Nj(r)?r.map(Ow):Ow(r),s={done:!1,value:e[0]},o=wU(n&&n.length===e.length?n:_U(e),t),a=yU(o,e,{ease:Array.isArray(i)?i:EU(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const TU=t=>t!==null;function gy(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(TU),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const SU={decay:Up,inertia:Up,tween:da,keyframes:da,spring:jc};function bA(t){typeof t.type=="string"&&(t.type=SU[t.type])}class yy{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const IU=t=>t/100;class vy extends yy{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Tt.now()&&this.tick(Tt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;bA(e);const{type:n=da,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||da;l!==da&&typeof a[0]!="number"&&(this.mixKeyframes=ml(IU,CA(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=my(c));const{calculatedDuration:h}=c;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:h,repeat:d,repeatType:p,repeatDelay:g,type:y,onUpdate:I,finalKeyframe:P}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const w=this.currentTime-c*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?w<0:w>i;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let E=this.currentTime,R=r;if(d){const v=Math.min(this.currentTime,i)/a;let S=Math.floor(v),A=v%1;!A&&v>=1&&(A=1),A===1&&S--,S=Math.min(S,d+1),!!(S%2)&&(p==="reverse"?(A=1-A,g&&(A-=g/a)):p==="mirror"&&(R=o)),E=Vn(0,1,A)*a}const V=_?{done:!1,value:h[0]}:R.next(E);s&&(V.value=s(V.value));let{done:M}=V;!_&&l!==null&&(M=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const x=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return x&&y!==Up&&(V.value=gy(h,this.options,P,this.speed)),I&&I(V.value),x&&this.finish(),V}then(e,n){return this.finished.then(e,n)}get duration(){return Jt(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Jt(e)}get time(){return Jt(this.currentTime)}set time(e){var n;e=mn(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Tt.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Jt(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=aU,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Tt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function xU(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Pi=t=>t*180/Math.PI,$p=t=>{const e=Pi(Math.atan2(t[1],t[0]));return Bp(e)},AU={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:$p,rotateZ:$p,skewX:t=>Pi(Math.atan(t[1])),skewY:t=>Pi(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Bp=t=>(t=t%360,t<0&&(t+=360),t),zw=$p,Ww=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Hw=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),PU={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Ww,scaleY:Hw,scale:t=>(Ww(t)+Hw(t))/2,rotateX:t=>Bp(Pi(Math.atan2(t[6],t[5]))),rotateY:t=>Bp(Pi(Math.atan2(-t[2],t[0]))),rotateZ:zw,rotate:zw,skewX:t=>Pi(Math.atan(t[4])),skewY:t=>Pi(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function zp(t){return t.includes("scale")?1:0}function Wp(t,e){if(!t||t==="none")return zp(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=PU,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=AU,i=a}if(!i)return zp(e);const s=r[e],o=i[1].split(",").map(RU);return typeof s=="function"?s(o):o[s]}const CU=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Wp(n,e)};function RU(t){return parseFloat(t.trim())}const po=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],mo=new Set(po),Kw=t=>t===fo||t===H,kU=new Set(["x","y","z"]),bU=po.filter(t=>!kU.has(t));function NU(t){const e=[];return bU.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Vr={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Wp(e,"x"),y:(t,{transform:e})=>Wp(e,"y")};Vr.translateX=Vr.x;Vr.translateY=Vr.y;const Ni=new Set;let Hp=!1,Kp=!1,qp=!1;function NA(){if(Kp){const t=Array.from(Ni).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=NU(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Kp=!1,Hp=!1,Ni.forEach(t=>t.complete(qp)),Ni.clear()}function DA(){Ni.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Kp=!0)})}function DU(){qp=!0,DA(),NA(),qp=!1}class _y{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Ni.add(this),Hp||(Hp=!0,ve.read(DA),ve.resolveKeyframes(NA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}xU(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ni.delete(this)}cancel(){this.state==="scheduled"&&(Ni.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const VU=t=>t.startsWith("--");function LU(t,e,n){VU(e)?t.style.setProperty(e,n):t.style[e]=n}const OU=ay(()=>window.ScrollTimeline!==void 0),MU={};function FU(t,e){const n=ay(t);return()=>MU[e]??n()}const VA=FU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Go=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,qw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Go([0,.65,.55,1]),circOut:Go([.55,0,1,.45]),backIn:Go([.31,.01,.66,-.59]),backOut:Go([.33,1.53,.69,.99])};function LA(t,e){if(t)return typeof t=="function"?VA()?RA(t,e):"ease-out":vA(t)?Go(t):Array.isArray(t)?t.map(n=>LA(n,e)||qw.easeOut):qw[t]}function jU(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const h={[e]:n};l&&(h.offset=l);const d=LA(a,i);Array.isArray(d)&&(h.easing=d);const p={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(p.pseudoElement=c),t.animate(h,p)}function OA(t){return typeof t=="function"&&"applyToOptions"in t}function UU({type:t,...e}){return OA(t)&&VA()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class MA extends yy{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,oy(typeof e.type!="string");const c=UU(e);this.animation=jU(n,r,i,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=gy(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(h):LU(n,r,h),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,r,i;const e=(n=this.options)==null?void 0:n.element;!this.isPseudoElement&&(e!=null&&e.isConnected)&&((i=(r=this.animation).commitStyles)==null||i.call(r))}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Jt(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Jt(e)}get time(){return Jt(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=mn(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&OU()?(this.animation.timeline=e,en):n(this)}}const FA={anticipate:pA,backInOut:fA,circInOut:gA};function $U(t){return t in FA}function BU(t){typeof t.ease=="string"&&$U(t.ease)&&(t.ease=FA[t.ease])}const Zd=10;class zU extends MA{constructor(e){BU(e),bA(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new vy({...o,autoplay:!1}),l=Math.max(Zd,Tt.now()-this.startTime),c=Vn(0,Zd,l-Zd);n.setWithVelocity(a.sample(Math.max(0,l-c)).value,a.sample(l).value,c),a.stop()}}const Gw=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ti.test(t)||t==="0")&&!t.startsWith("url("));function WU(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function HU(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=Gw(i,e),a=Gw(s,e);return!o||!a?!1:WU(t)||(n==="spring"||OA(n))&&r}function Gp(t){t.duration=0,t.type="keyframes"}const KU=new Set(["opacity","clipPath","filter","transform"]),qU=ay(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function GU(t){var h;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((h=e==null?void 0:e.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return qU()&&n&&KU.has(n)&&(n!=="transform"||!c)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const QU=40;class YU extends yy{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:h,...d}){var y;super(),this.stop=()=>{var I,P;this._animation&&(this._animation.stop(),(I=this.stopTimeline)==null||I.call(this)),(P=this.keyframeResolver)==null||P.cancel()},this.createdAt=Tt.now();const p={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:h,...d},g=(h==null?void 0:h.KeyframeResolver)||_y;this.keyframeResolver=new g(a,(I,P,w)=>this.onKeyframesResolved(I,P,p,!w),l,c,h),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(e,n,r,i){var P,w;this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:h}=r;this.resolvedAt=Tt.now(),HU(e,s,o,a)||((hr.instantAnimations||!l)&&(h==null||h(gy(e,r,n))),e[0]=e[e.length-1],Gp(r),r.repeat=0);const p={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>QU?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},g=!c&&GU(p),y=(w=(P=p.motionValue)==null?void 0:P.owner)==null?void 0:w.current,I=g?new zU({...p,element:y}):new vy(p);I.finished.then(()=>{this.notifyFinished()}).catch(en),this.pendingTimeline&&(this.stopTimeline=I.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=I}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),DU()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function jA(t,e,n,r=0,i=1){const s=Array.from(t).sort((c,h)=>c.sortNodePosition(h)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}const XU=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function JU(t){const e=XU.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function UA(t,e,n=1){const[r,i]=JU(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return sA(o)?parseFloat(o):o}return hy(i)?UA(i,e,n+1):i}const ZU={type:"spring",stiffness:500,damping:25,restSpeed:10},e4=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),t4={type:"keyframes",duration:.8},n4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},r4=(t,{keyframes:e})=>e.length>2?t4:mo.has(t)?t.startsWith("scale")?e4(e[1]):ZU:n4,i4=t=>t!==null;function s4(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(i4),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}function $A(t,e){if(t!=null&&t.inherit&&e){const{inherit:n,...r}=t;return{...e,...r}}return t}function wy(t,e){const n=(t==null?void 0:t[e])??(t==null?void 0:t.default)??t;return n!==t?$A(n,t):n}function o4({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}const Ey=(t,e,n,r={},i,s)=>o=>{const a=wy(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-mn(l);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};o4(a)||Object.assign(h,r4(t,h)),h.duration&&(h.duration=mn(h.duration)),h.repeatDelay&&(h.repeatDelay=mn(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(Gp(h),h.delay===0&&(d=!0)),(hr.instantAnimations||hr.skipAnimations||i!=null&&i.shouldSkipAnimations)&&(d=!0,Gp(h),h.delay=0),h.allowFlatten=!a.type&&!a.ease,d&&!s&&e.get()!==void 0){const p=s4(h.keyframes,a);if(p!==void 0){ve.update(()=>{h.onUpdate(p),h.onComplete()});return}}return a.isSync?new vy(h):new YU(h)};function Qw(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Ty(t,e,n,r){if(typeof e=="function"){const[i,s]=Qw(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=Qw(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function Ms(t,e,n){const r=t.getProps();return Ty(r,e,n!==void 0?n:r.custom,t)}const BA=new Set(["width","height","top","left","right","bottom",...po]),Yw=30,a4=t=>!isNaN(parseFloat(t));class l4{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Tt.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Tt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=a4(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new ly);const r=this.events[e].add(n);return e==="change"?()=>{r(),ve.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Tt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Yw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Yw);return lA(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function to(t,e){return new l4(t,e)}const Qp=t=>Array.isArray(t);function u4(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,to(n))}function c4(t){return Qp(t)?t[t.length-1]||0:t}function h4(t,e){const n=Ms(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=c4(s[o]);u4(t,o,a)}}const mt=t=>!!(t&&t.getVelocity);function d4(t){return!!(mt(t)&&t.add)}function Yp(t,e){const n=t.getValue("willChange");if(d4(n))return n.add(e);if(!n&&hr.WillChange){const r=new hr.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function Sy(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const f4="framerAppearId",zA="data-"+Sy(f4);function WA(t){return t.props[zA]}function p4({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function HA(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s,transitionEnd:o,...a}=e;const l=t.getDefaultTransition();s=s?$A(s,l):l;const c=s==null?void 0:s.reduceMotion;r&&(s=r);const h=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const p in a){const g=t.getValue(p,t.latestValues[p]??null),y=a[p];if(y===void 0||d&&p4(d,p))continue;const I={delay:n,...wy(s||{},p)},P=g.get();if(P!==void 0&&!g.isAnimating&&!Array.isArray(y)&&y===P&&!I.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const R=WA(t);if(R){const V=window.MotionHandoffAnimation(R,p,ve);V!==null&&(I.startTime=V,w=!0)}}Yp(t,p);const _=c??t.shouldReduceMotion;g.start(Ey(p,g,y,_&&BA.has(p)?{type:!1}:I,t,w));const E=g.animation;E&&h.push(E)}if(o){const p=()=>ve.update(()=>{o&&h4(t,o)});h.length?Promise.all(h).then(p):p()}return h}function Xp(t,e,n={}){var l;const r=Ms(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(HA(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:p}=i;return m4(t,e,c,h,d,p,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,h]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>h())}else return Promise.all([s(),o(n.delay)])}function m4(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(Xp(l,e,{...o,delay:n+(typeof r=="function"?0:r)+jA(t.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function g4(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Xp(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Xp(t,e,n);else{const i=typeof e=="function"?Ms(t,e,n.custom):e;r=Promise.all(HA(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const y4={test:t=>t==="auto",parse:t=>t},KA=t=>e=>e.test(t),qA=[fo,H,bn,wr,Hj,Wj,y4],Xw=t=>qA.find(KA(t));function v4(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||aA(t):!0}const _4=new Set(["brightness","contrast","saturate","opacity"]);function w4(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(dy)||[];if(!r)return t;const i=n.replace(r,"");let s=_4.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const E4=/\b([a-z-]*)\(.*?\)/gu,Jp={...ti,getAnimatableNone:t=>{const e=t.match(E4);return e?e.map(w4).join(" "):t}},Jw={...fo,transform:Math.round},T4={rotate:wr,rotateX:wr,rotateY:wr,rotateZ:wr,scale:hu,scaleX:hu,scaleY:hu,scaleZ:hu,skew:wr,skewX:wr,skewY:wr,distance:H,translateX:H,translateY:H,translateZ:H,x:H,y:H,z:H,perspective:H,transformPerspective:H,opacity:Wa,originX:Fw,originY:Fw,originZ:H},Iy={borderWidth:H,borderTopWidth:H,borderRightWidth:H,borderBottomWidth:H,borderLeftWidth:H,borderRadius:H,borderTopLeftRadius:H,borderTopRightRadius:H,borderBottomRightRadius:H,borderBottomLeftRadius:H,width:H,maxWidth:H,height:H,maxHeight:H,top:H,right:H,bottom:H,left:H,inset:H,insetBlock:H,insetBlockStart:H,insetBlockEnd:H,insetInline:H,insetInlineStart:H,insetInlineEnd:H,padding:H,paddingTop:H,paddingRight:H,paddingBottom:H,paddingLeft:H,paddingBlock:H,paddingBlockStart:H,paddingBlockEnd:H,paddingInline:H,paddingInlineStart:H,paddingInlineEnd:H,margin:H,marginTop:H,marginRight:H,marginBottom:H,marginLeft:H,marginBlock:H,marginBlockStart:H,marginBlockEnd:H,marginInline:H,marginInlineStart:H,marginInlineEnd:H,fontSize:H,backgroundPositionX:H,backgroundPositionY:H,...T4,zIndex:Jw,fillOpacity:Wa,strokeOpacity:Wa,numOctaves:Jw},S4={...Iy,color:Fe,backgroundColor:Fe,outlineColor:Fe,fill:Fe,stroke:Fe,borderColor:Fe,borderTopColor:Fe,borderRightColor:Fe,borderBottomColor:Fe,borderLeftColor:Fe,filter:Jp,WebkitFilter:Jp},GA=t=>S4[t];function QA(t,e){let n=GA(t);return n!==Jp&&(n=ti),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const I4=new Set(["auto","none","0"]);function x4(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!I4.has(s)&&Ha(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=QA(n,i)}class A4 extends _y{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let d=e[h];if(typeof d=="string"&&(d=d.trim(),hy(d))){const p=UA(d,n.current);p!==void 0&&(e[h]=p),h===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!BA.has(r)||e.length!==2)return;const[i,s]=e,o=Xw(i),a=Xw(s),l=Mw(i),c=Mw(s);if(l!==c&&Vr[r]){this.needsMeasurement=!0;return}if(o!==a)if(Kw(o)&&Kw(a))for(let h=0;h<e.length;h++){const d=e[h];typeof d=="string"&&(e[h]=parseFloat(d))}else Vr[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||v4(e[i]))&&r.push(i);r.length&&x4(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Vr[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Vr[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const P4=new Set(["opacity","clipPath","filter","transform"]);function YA(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t).filter(r=>r!=null)}const XA=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Zp(t){return oA(t)&&"offsetHeight"in t}const{schedule:xy}=_A(queueMicrotask,!1),an={x:!1,y:!1};function JA(){return an.x||an.y}function C4(t){return t==="x"||t==="y"?an[t]?null:(an[t]=!0,()=>{an[t]=!1}):an.x||an.y?null:(an.x=an.y=!0,()=>{an.x=an.y=!1})}function ZA(t,e){const n=YA(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function R4(t){return!(t.pointerType==="touch"||JA())}function k4(t,e,n={}){const[r,i,s]=ZA(t,n);return r.forEach(o=>{let a=!1,l=!1,c;const h=()=>{o.removeEventListener("pointerleave",y)},d=P=>{c&&(c(P),c=void 0),h()},p=P=>{a=!1,window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",p),l&&(l=!1,d(P))},g=()=>{a=!0,window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",p,i)},y=P=>{if(P.pointerType!=="touch"){if(a){l=!0;return}d(P)}},I=P=>{if(!R4(P))return;l=!1;const w=e(o,P);typeof w=="function"&&(c=w,o.addEventListener("pointerleave",y,i))};o.addEventListener("pointerenter",I,i),o.addEventListener("pointerdown",g,i)}),s}const eP=(t,e)=>e?t===e?!0:eP(t,e.parentElement):!1,Ay=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,b4=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function N4(t){return b4.has(t.tagName)||t.isContentEditable===!0}const D4=new Set(["INPUT","SELECT","TEXTAREA"]);function V4(t){return D4.has(t.tagName)||t.isContentEditable===!0}const Fu=new WeakSet;function Zw(t){return e=>{e.key==="Enter"&&t(e)}}function ef(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const L4=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Zw(()=>{if(Fu.has(n))return;ef(n,"down");const i=Zw(()=>{ef(n,"up")}),s=()=>ef(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function eE(t){return Ay(t)&&!JA()}const tE=new WeakSet;function O4(t,e,n={}){const[r,i,s]=ZA(t,n),o=a=>{const l=a.currentTarget;if(!eE(a)||tE.has(a))return;Fu.add(l),n.stopPropagation&&tE.add(a);const c=e(l,a),h=(g,y)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",p),Fu.has(l)&&Fu.delete(l),eE(g)&&typeof c=="function"&&c(g,{success:y})},d=g=>{h(g,l===window||l===document||n.useGlobalTarget||eP(l,g.target))},p=g=>{h(g,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",p,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),Zp(a)&&(a.addEventListener("focus",c=>L4(c,i)),!N4(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function Py(t){return oA(t)&&"ownerSVGElement"in t}const ju=new WeakMap;let Er;const tP=(t,e,n)=>(r,i)=>i&&i[0]?i[0][t+"Size"]:Py(r)&&"getBBox"in r?r.getBBox()[e]:r[n],M4=tP("inline","width","offsetWidth"),F4=tP("block","height","offsetHeight");function j4({target:t,borderBoxSize:e}){var n;(n=ju.get(t))==null||n.forEach(r=>{r(t,{get width(){return M4(t,e)},get height(){return F4(t,e)}})})}function U4(t){t.forEach(j4)}function $4(){typeof ResizeObserver>"u"||(Er=new ResizeObserver(U4))}function B4(t,e){Er||$4();const n=YA(t);return n.forEach(r=>{let i=ju.get(r);i||(i=new Set,ju.set(r,i)),i.add(e),Er==null||Er.observe(r)}),()=>{n.forEach(r=>{const i=ju.get(r);i==null||i.delete(e),i!=null&&i.size||Er==null||Er.unobserve(r)})}}const Uu=new Set;let Ss;function z4(){Ss=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};Uu.forEach(e=>e(t))},window.addEventListener("resize",Ss)}function W4(t){return Uu.add(t),Ss||z4(),()=>{Uu.delete(t),!Uu.size&&typeof Ss=="function"&&(window.removeEventListener("resize",Ss),Ss=void 0)}}function nE(t,e){return typeof t=="function"?W4(t):B4(t,e)}function H4(t){return Py(t)&&t.tagName==="svg"}const K4=[...qA,Fe,ti],q4=t=>K4.find(KA(t)),rE=()=>({translate:0,scale:1,origin:0,originPoint:0}),Is=()=>({x:rE(),y:rE()}),iE=()=>({min:0,max:0}),$e=()=>({x:iE(),y:iE()}),G4=new WeakMap;function Nh(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Ka(t){return typeof t=="string"||Array.isArray(t)}const Cy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ry=["initial",...Cy];function Dh(t){return Nh(t.animate)||Ry.some(e=>Ka(t[e]))}function nP(t){return!!(Dh(t)||t.variants)}function Q4(t,e,n){for(const r in e){const i=e[r],s=n[r];if(mt(i))t.addValue(r,i);else if(mt(s))t.addValue(r,to(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,to(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const em={current:null},rP={current:!1},Y4=typeof window<"u";function X4(){if(rP.current=!0,!!Y4)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>em.current=t.matches;t.addEventListener("change",e),e()}else em.current=!1}const sE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Uc={};function iP(t){Uc=t}function J4(){return Uc}class Z4{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,skipAnimations:s,blockInitialAnimation:o,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=_y,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Tt.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,ve.render(this.render,!1,!0))};const{latestValues:c,renderState:h}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.skipAnimationsConfig=s,this.options=l,this.blockInitialAnimation=!!o,this.isControllingVariants=Dh(n),this.isVariantNode=nP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in p){const y=p[g];c[g]!==void 0&&mt(y)&&y.set(c[g])}}mount(e){var n,r;if(this.hasBeenMounted)for(const i in this.initialValues)(n=this.values.get(i))==null||n.jump(this.initialValues[i]),this.latestValues[i]=this.initialValues[i];this.current=e,G4.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,s)=>this.bindToMotionValue(s,i)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(rP.current||X4(),this.shouldReduceMotion=em.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var e;this.projection&&this.projection.unmount(),ei(this.notifyUpdate),ei(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),n.accelerate&&P4.has(e)&&this.current instanceof HTMLElement){const{factory:o,keyframes:a,times:l,ease:c,duration:h}=n.accelerate,d=new MA({element:this.current,name:e,keyframes:a,times:l,ease:c,duration:mn(h)}),p=o(d);this.valueSubscriptions.set(e,()=>{p(),d.cancel()});return}const r=mo.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ve.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;typeof window<"u"&&window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Uc){const n=Uc[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):$e()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<sE.length;r++){const i=sE[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=Q4(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=to(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(sA(r)||aA(r))?r=parseFloat(r):!q4(r)&&ti.test(n)&&(r=QA(e,n)),this.setBaseTarget(e,mt(r)?r.get():r)),mt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Ty(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!mt(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new ly),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){xy.render(this.render)}}class sP extends Z4{constructor(){super(...arguments),this.KeyframeResolver=A4}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const r=e.style;return r?r[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;mt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class ci{constructor(e){this.isMounted=!1,this.node=e}update(){}}function oP({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function e$({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function t$(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function tf(t){return t===void 0||t===1}function tm({scale:t,scaleX:e,scaleY:n}){return!tf(t)||!tf(e)||!tf(n)}function wi(t){return tm(t)||aP(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function aP(t){return oE(t.x)||oE(t.y)}function oE(t){return t&&t!=="0%"}function $c(t,e,n){const r=t-n,i=e*r;return n+i}function aE(t,e,n,r,i){return i!==void 0&&(t=$c(t,i,r)),$c(t,n,r)+e}function nm(t,e=0,n=1,r,i){t.min=aE(t.min,e,n,r,i),t.max=aE(t.max,e,n,r,i)}function lP(t,{x:e,y:n}){nm(t.x,e.translate,e.scale,e.originPoint),nm(t.y,n.translate,n.scale,n.originPoint)}const lE=.999999999999,uE=1.0000000000001;function n$(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&As(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,lP(t,o)),r&&wi(s.latestValues)&&As(t,s.latestValues))}e.x<uE&&e.x>lE&&(e.x=1),e.y<uE&&e.y>lE&&(e.y=1)}function xs(t,e){t.min=t.min+e,t.max=t.max+e}function cE(t,e,n,r,i=.5){const s=xe(t.min,t.max,i);nm(t,e,n,s,r)}function As(t,e){cE(t.x,e.x,e.scaleX,e.scale,e.originX),cE(t.y,e.y,e.scaleY,e.scale,e.originY)}function uP(t,e){return oP(t$(t.getBoundingClientRect(),e))}function r$(t,e,n){const r=uP(t,n),{scroll:i}=e;return i&&(xs(r.x,i.offset.x),xs(r.y,i.offset.y)),r}const i$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},s$=po.length;function o$(t,e,n){let r="",i=!0;for(let s=0;s<s$;s++){const o=po[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number")l=a===(o.startsWith("scale")?1:0);else{const c=parseFloat(a);l=o.startsWith("scale")?c===1:c===0}if(!l||n){const c=XA(a,Iy[o]);if(!l){i=!1;const h=i$[o]||o;r+=`${h}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function ky(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(mo.has(l)){o=!0;continue}else if(EA(l)){i[l]=c;continue}else{const h=XA(c,Iy[l]);l.startsWith("origin")?(a=!0,s[l]=h):r[l]=h}}if(e.transform||(o||n?r.transform=o$(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:h=0}=s;r.transformOrigin=`${l} ${c} ${h}`}}function cP(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function hE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const jo={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(H.test(t))t=parseFloat(t);else return t;const n=hE(t,e.target.x),r=hE(t,e.target.y);return`${n}% ${r}%`}},a$={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=ti.parse(t);if(i.length>5)return r;const s=ti.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=xe(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}},rm={borderRadius:{...jo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:jo,borderTopRightRadius:jo,borderBottomLeftRadius:jo,borderBottomRightRadius:jo,boxShadow:a$};function hP(t,{layout:e,layoutId:n}){return mo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!rm[t]||t==="opacity")}function by(t,e,n){var o;const r=t.style,i=e==null?void 0:e.style,s={};if(!r)return s;for(const a in r)(mt(r[a])||i&&mt(i[a])||hP(a,t)||((o=n==null?void 0:n.getValue(a))==null?void 0:o.liveStyle)!==void 0)&&(s[a]=r[a]);return s}function l$(t){return window.getComputedStyle(t)}class u$ extends sP{constructor(){super(...arguments),this.type="html",this.renderInstance=cP}readValueFromInstance(e,n){var r;if(mo.has(n))return(r=this.projection)!=null&&r.isProjecting?zp(n):CU(e,n);{const i=l$(e),s=(EA(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return uP(e,n)}build(e,n,r){ky(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return by(e,n,r)}}const c$={offset:"stroke-dashoffset",array:"stroke-dasharray"},h$={offset:"strokeDashoffset",array:"strokeDasharray"};function d$(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?c$:h$;t[s.offset]=`${-r}`,t[s.array]=`${e} ${n}`}const f$=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function dP(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,c,h){if(ky(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:p}=t;d.transform&&(p.transform=d.transform,delete d.transform),(p.transform||d.transformOrigin)&&(p.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),p.transform&&(p.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete d.transformBox);for(const g of f$)d[g]!==void 0&&(p[g]=d[g],delete d[g]);e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&d$(d,i,s,o,!1)}const fP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),pP=t=>typeof t=="string"&&t.toLowerCase()==="svg";function p$(t,e,n,r){cP(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(fP.has(i)?i:Sy(i),e.attrs[i])}function mP(t,e,n){const r=by(t,e,n);for(const i in t)if(mt(t[i])||mt(e[i])){const s=po.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}class m$ extends sP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=$e}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(mo.has(n)){const r=GA(n);return r&&r.default||0}return n=fP.has(n)?n:Sy(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return mP(e,n,r)}build(e,n,r){dP(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){p$(e,n,r,i)}mount(e){this.isSVGTag=pP(e.tagName),super.mount(e)}}const g$=Ry.length;function gP(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?gP(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<g$;n++){const r=Ry[n],i=t.props[r];(Ka(i)||i===!1)&&(e[r]=i)}return e}function yP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const y$=[...Cy].reverse(),v$=Cy.length;function _$(t){return e=>Promise.all(e.map(({animation:n,options:r})=>g4(t,n,r)))}function w$(t){let e=_$(t),n=dE(),r=!0;const i=l=>(c,h)=>{var p;const d=Ms(t,h,l==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);if(d){const{transition:g,transitionEnd:y,...I}=d;c={...c,...I,...y}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,h=gP(t.parent)||{},d=[],p=new Set;let g={},y=1/0;for(let P=0;P<v$;P++){const w=y$[P],_=n[w],E=c[w]!==void 0?c[w]:h[w],R=Ka(E),V=w===l?_.isActive:null;V===!1&&(y=P);let M=E===h[w]&&E!==c[w]&&R;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),_.protectedKeys={...g},!_.isActive&&V===null||!E&&!_.prevProp||Nh(E)||typeof E=="boolean")continue;if(w==="exit"&&_.isActive&&V!==!0){_.prevResolvedValues&&(g={...g,..._.prevResolvedValues});continue}const x=E$(_.prevProp,E);let v=x||w===l&&_.isActive&&!M&&R||P>y&&R,S=!1;const A=Array.isArray(E)?E:[E];let k=A.reduce(i(w),{});V===!1&&(k={});const{prevResolvedValues:b={}}=_,C={...b,...k},Y=ne=>{v=!0,p.has(ne)&&(S=!0,p.delete(ne)),_.needsAnimating[ne]=!0;const $=t.getValue(ne);$&&($.liveStyle=!1)};for(const ne in C){const $=k[ne],q=b[ne];if(g.hasOwnProperty(ne))continue;let Q=!1;Qp($)&&Qp(q)?Q=!yP($,q):Q=$!==q,Q?$!=null?Y(ne):p.add(ne):$!==void 0&&p.has(ne)?Y(ne):_.protectedKeys[ne]=!0}_.prevProp=E,_.prevResolvedValues=k,_.isActive&&(g={...g,...k}),r&&t.blockInitialAnimation&&(v=!1);const de=M&&x;v&&(!de||S)&&d.push(...A.map(ne=>{const $={type:w};if(typeof ne=="string"&&r&&!de&&t.manuallyAnimateOnMount&&t.parent){const{parent:q}=t,Q=Ms(q,ne);if(q.enteringChildren&&Q){const{delayChildren:re}=Q.transition||{};$.delay=jA(q.enteringChildren,t,re)}}return{animation:ne,options:$}}))}if(p.size){const P={};if(typeof c.initial!="boolean"){const w=Ms(t,Array.isArray(c.initial)?c.initial[0]:c.initial);w&&w.transition&&(P.transition=w.transition)}p.forEach(w=>{const _=t.getBaseTarget(w),E=t.getValue(w);E&&(E.liveStyle=!0),P[w]=_??null}),d.push({animation:P})}let I=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(I=!1),r=!1,I?e(d):Promise.resolve()}function a(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=t.variantChildren)==null||d.forEach(p=>{var g;return(g=p.animationState)==null?void 0:g.setActive(l,c)}),n[l].isActive=c;const h=o(l);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=dE()}}}function E$(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!yP(e,t):!1}function mi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function dE(){return{animate:mi(!0),whileInView:mi(),whileHover:mi(),whileTap:mi(),whileDrag:mi(),whileFocus:mi(),exit:mi()}}function fE(t,e){t.min=e.min,t.max=e.max}function on(t,e){fE(t.x,e.x),fE(t.y,e.y)}function pE(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const vP=1e-4,T$=1-vP,S$=1+vP,_P=.01,I$=0-_P,x$=0+_P;function St(t){return t.max-t.min}function A$(t,e,n){return Math.abs(t-e)<=n}function mE(t,e,n,r=.5){t.origin=r,t.originPoint=xe(e.min,e.max,t.origin),t.scale=St(n)/St(e),t.translate=xe(n.min,n.max,t.origin)-t.originPoint,(t.scale>=T$&&t.scale<=S$||isNaN(t.scale))&&(t.scale=1),(t.translate>=I$&&t.translate<=x$||isNaN(t.translate))&&(t.translate=0)}function fa(t,e,n,r){mE(t.x,e.x,n.x,r?r.originX:void 0),mE(t.y,e.y,n.y,r?r.originY:void 0)}function gE(t,e,n){t.min=n.min+e.min,t.max=t.min+St(e)}function P$(t,e,n){gE(t.x,e.x,n.x),gE(t.y,e.y,n.y)}function yE(t,e,n){t.min=e.min-n.min,t.max=t.min+St(e)}function Bc(t,e,n){yE(t.x,e.x,n.x),yE(t.y,e.y,n.y)}function vE(t,e,n,r,i){return t-=e,t=$c(t,1/n,r),i!==void 0&&(t=$c(t,1/i,r)),t}function C$(t,e=0,n=1,r=.5,i,s=t,o=t){if(bn.test(e)&&(e=parseFloat(e),e=xe(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=xe(s.min,s.max,r);t===s&&(a-=e),t.min=vE(t.min,e,n,a,i),t.max=vE(t.max,e,n,a,i)}function _E(t,e,[n,r,i],s,o){C$(t,e[n],e[r],e[i],e.scale,s,o)}const R$=["x","scaleX","originX"],k$=["y","scaleY","originY"];function wE(t,e,n,r){_E(t.x,e,R$,n?n.x:void 0,r?r.x:void 0),_E(t.y,e,k$,n?n.y:void 0,r?r.y:void 0)}function EE(t){return t.translate===0&&t.scale===1}function wP(t){return EE(t.x)&&EE(t.y)}function TE(t,e){return t.min===e.min&&t.max===e.max}function b$(t,e){return TE(t.x,e.x)&&TE(t.y,e.y)}function SE(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function EP(t,e){return SE(t.x,e.x)&&SE(t.y,e.y)}function IE(t){return St(t.x)/St(t.y)}function xE(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function Tn(t){return[t("x"),t("y")]}function N$(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:d,rotateY:p,skewX:g,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),h&&(r+=`rotate(${h}deg) `),d&&(r+=`rotateX(${d}deg) `),p&&(r+=`rotateY(${p}deg) `),g&&(r+=`skewX(${g}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const TP=["TopLeft","TopRight","BottomLeft","BottomRight"],D$=TP.length,AE=t=>typeof t=="string"?parseFloat(t):t,PE=t=>typeof t=="number"||H.test(t);function V$(t,e,n,r,i,s){i?(t.opacity=xe(0,n.opacity??1,L$(r)),t.opacityExit=xe(e.opacity??1,0,O$(r))):s&&(t.opacity=xe(e.opacity??1,n.opacity??1,r));for(let o=0;o<D$;o++){const a=`border${TP[o]}Radius`;let l=CE(e,a),c=CE(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||PE(l)===PE(c)?(t[a]=Math.max(xe(AE(l),AE(c),r),0),(bn.test(c)||bn.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=xe(e.rotate||0,n.rotate||0,r))}function CE(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const L$=SP(0,.5,mA),O$=SP(.5,.95,en);function SP(t,e,n){return r=>r<t?0:r>e?1:n(za(t,e,r))}function M$(t,e,n){const r=mt(t)?t:to(t);return r.start(Ey("",r,e,n)),r.animation}function qa(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const F$=(t,e)=>t.depth-e.depth;class j${constructor(){this.children=[],this.isDirty=!1}add(e){sy(this.children,e),this.isDirty=!0}remove(e){Oc(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(F$),this.isDirty=!1,this.children.forEach(e)}}function U$(t,e){const n=Tt.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(ei(r),t(s-e))};return ve.setup(r,!0),()=>ei(r)}function $u(t){return mt(t)?t.get():t}class $${constructor(){this.members=[]}add(e){sy(this.members,e);for(let n=this.members.length-1;n>=0;n--){const r=this.members[n];if(r===e||r===this.lead||r===this.prevLead)continue;const i=r.instance;i&&i.isConnected===!1&&r.isPresent!==!1&&!r.snapshot&&Oc(this.members,r)}e.scheduleRender()}remove(e){if(Oc(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i],o=s.instance;if(s.isPresent!==!1&&(!o||o.isConnected!==!1)){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const i=r.options.layoutDependency,s=e.options.layoutDependency;if(!(i!==void 0&&s!==void 0&&i===s)){const l=r.instance;l&&l.isConnected===!1&&!r.snapshot||(e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:a}=e.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Bu={hasAnimatedSinceResize:!0,hasEverUpdated:!1},nf=["","X","Y","Z"],B$=1e3;let z$=0;function rf(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function IP(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=WA(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ve,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&IP(r)}function xP({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=z$++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(K$),this.nodes.forEach(Y$),this.nodes.forEach(X$),this.nodes.forEach(q$)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new j$)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new ly),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=Py(o)&&!H4(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let h,d=0;const p=()=>this.root.updateBlockedByResize=!1;ve.read(()=>{d=window.innerWidth}),t(o,()=>{const g=window.innerWidth;g!==d&&(d=g,this.root.updateBlockedByResize=!0,h&&h(),h=U$(p,250),Bu.hasAnimatedSinceResize&&(Bu.hasAnimatedSinceResize=!1,this.nodes.forEach(bE)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:d,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||c.getDefaultTransition()||nB,{onLayoutAnimationStart:I,onLayoutAnimationComplete:P}=c.getProps(),w=!this.targetLayout||!EP(this.targetLayout,g),_=!d&&p;if(this.options.layoutRoot||this.resumeFrom||_||d&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...wy(y,"layout"),onPlay:I,onComplete:P};(c.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(h,_)}else d||bE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ei(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(J$),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&IP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(RE);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(kE);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Q$),this.nodes.forEach(W$),this.nodes.forEach(H$)):this.nodes.forEach(kE),this.clearAllSnapshots();const a=Tt.now();Je.delta=Vn(0,1e3/60,a-Je.timestamp),Je.timestamp=a,Je.isProcessing=!0,Gd.update.process(Je),Gd.preRender.process(Je),Gd.render.process(Je),Je.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,xy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(G$),this.sharedNodes.forEach(Z$)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ve.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ve.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!St(this.snapshot.measuredBox.x)&&!St(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=$e(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!wP(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||wi(this.latestValues)||h)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),rB(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return $e();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(iB))){const{scroll:h}=this.root;h&&(xs(a.x,h.offset.x),xs(a.y,h.offset.y))}return a}removeElementScroll(o){var l;const a=$e();if(on(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:d,options:p}=h;h!==this.root&&d&&p.layoutScroll&&(d.wasRoot&&on(a,o),xs(a.x,d.offset.x),xs(a.y,d.offset.y))}return a}applyTransform(o,a=!1){const l=$e();on(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&As(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),wi(h.latestValues)&&As(l,h.latestValues)}return wi(this.latestValues)&&As(l,this.latestValues),l}removeTransform(o){const a=$e();on(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!wi(c.latestValues))continue;tm(c.latestValues)&&c.updateSnapshot();const h=$e(),d=c.measurePageBox();on(h,d),wE(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return wi(this.latestValues)&&wE(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Je.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var g;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:d}=this.options;if(!this.layout||!(h||d))return;this.resolvedRelativeTargetAt=Je.timestamp;const p=this.getClosestProjectingParent();p&&this.linkedParentVersion!==p.layoutVersion&&!p.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(p&&p.layout?this.createRelativeTarget(p,this.layout.layoutBox,p.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=$e(),this.targetWithTransforms=$e()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),P$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):on(this.target,this.layout.layoutBox),lP(this.target,this.targetDelta)):on(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?this.createRelativeTarget(p,this.target,p.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||tm(this.parent.latestValues)||aP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,l){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$e(),this.relativeTargetOrigin=$e(),Bc(this.relativeTargetOrigin,a,l),on(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var y;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Je.timestamp&&(l=!1),l)return;const{layout:c,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||h))return;on(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,p=this.treeScale.y;n$(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=$e());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(pE(this.prevProjectionDelta.x,this.projectionDelta.x),pE(this.prevProjectionDelta.y,this.projectionDelta.y)),fa(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==p||!xE(this.projectionDelta.x,this.prevProjectionDelta.x)||!xE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Is(),this.projectionDelta=Is(),this.projectionDeltaWithTransform=Is()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},d=Is();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=$e(),g=l?l.source:void 0,y=this.layout?this.layout.source:void 0,I=g!==y,P=this.getStack(),w=!P||P.members.length<=1,_=!!(I&&!w&&this.options.crossfade===!0&&!this.path.some(tB));this.animationProgress=0;let E;this.mixTargetDelta=R=>{const V=R/1e3;NE(d.x,o.x,V),NE(d.y,o.y,V),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Bc(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),eB(this.relativeTarget,this.relativeTargetOrigin,p,V),E&&b$(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=$e()),on(E,this.relativeTarget)),I&&(this.animationValues=h,V$(h,c,this.latestValues,V,_,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=V},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(ei(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ve.update(()=>{Bu.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=to(0)),this.currentAnimation=M$(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(B$),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&AP(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||$e();const d=St(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const p=St(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}on(a,l),As(a,h),fa(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new $$),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&rf("z",o,c,this.animationValues);for(let h=0;h<nf.length;h++)rf(`rotate${nf[h]}`,o,c,this.animationValues),rf(`skew${nf[h]}`,o,c,this.animationValues);o.render();for(const h in c)o.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=$u(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=$u(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!wi(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=c.animationValues||c.latestValues;this.applyTransformsToTarget();let d=N$(this.projectionDeltaWithTransform,this.treeScale,h);l&&(d=l(h,d)),o.transform=d;const{x:p,y:g}=this.projectionDelta;o.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,c.animationValues?o.opacity=c===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=c===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const y in rm){if(h[y]===void 0)continue;const{correct:I,applyTo:P,isCSSVariable:w}=rm[y],_=d==="none"?h[y]:I(h[y],c);if(P){const E=P.length;for(let R=0;R<E;R++)o[P[R]]=_}else w?this.options.visualElement.renderState.vars[y]=_:o[y]=_}this.options.layoutId&&(o.pointerEvents=c===this?$u(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(RE),this.root.sharedNodes.clear()}}}function W$(t){t.updateLayout()}function H$(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?Tn(d=>{const p=o?e.measuredBox[d]:e.layoutBox[d],g=St(p);p.min=r[d].min,p.max=p.min+g}):AP(s,e.layoutBox,r)&&Tn(d=>{const p=o?e.measuredBox[d]:e.layoutBox[d],g=St(r[d]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+g)});const a=Is();fa(a,r,e.layoutBox);const l=Is();o?fa(l,t.applyTransform(i,!0),e.measuredBox):fa(l,r,e.layoutBox);const c=!wP(a);let h=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:g}=d;if(p&&g){const y=$e();Bc(y,e.layoutBox,p.layoutBox);const I=$e();Bc(I,r,g.layoutBox),EP(y,I)||(h=!0),d.options.layoutRoot&&(t.relativeTarget=I,t.relativeTargetOrigin=y,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function K$(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function q$(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function G$(t){t.clearSnapshot()}function RE(t){t.clearMeasurements()}function kE(t){t.isLayoutDirty=!1}function Q$(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function bE(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Y$(t){t.resolveTargetDelta()}function X$(t){t.calcProjection()}function J$(t){t.resetSkewAndRotation()}function Z$(t){t.removeLeadSnapshot()}function NE(t,e,n){t.translate=xe(e.translate,0,n),t.scale=xe(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function DE(t,e,n,r){t.min=xe(e.min,n.min,r),t.max=xe(e.max,n.max,r)}function eB(t,e,n,r){DE(t.x,e.x,n.x,r),DE(t.y,e.y,n.y,r)}function tB(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const nB={duration:.45,ease:[.4,0,.1,1]},VE=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),LE=VE("applewebkit/")&&!VE("chrome/")?Math.round:en;function OE(t){t.min=LE(t.min),t.max=LE(t.max)}function rB(t){OE(t.x),OE(t.y)}function AP(t,e,n){return t==="position"||t==="preserve-aspect"&&!A$(IE(e),IE(n),.2)}function iB(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const sB=xP({attachResizeListener:(t,e)=>qa(t,"resize",e),measureScroll:()=>{var t,e;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),sf={current:void 0},PP=xP({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!sf.current){const t=new sB({});t.mount(window),t.setOptions({layoutScroll:!0}),sf.current=t}return sf.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Ny=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function ME(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function oB(...t){return e=>{let n=!1;const r=t.map(i=>{const s=ME(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():ME(t[i],null)}}}}function aB(...t){return N.useCallback(oB(...t),t)}class lB extends N.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const r=n.offsetParent,i=Zp(r)&&r.offsetWidth||0,s=Zp(r)&&r.offsetHeight||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=i-o.width-o.left,o.bottom=s-o.height-o.top}return null}componentDidUpdate(){}render(){return this.props.children}}function uB({children:t,isPresent:e,anchorX:n,anchorY:r,root:i,pop:s}){var p;const o=N.useId(),a=N.useRef(null),l=N.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:c}=N.useContext(Ny),h=((p=t.props)==null?void 0:p.ref)??(t==null?void 0:t.ref),d=aB(a,h);return N.useInsertionEffect(()=>{const{width:g,height:y,top:I,left:P,right:w,bottom:_}=l.current;if(e||s===!1||!a.current||!g||!y)return;const E=n==="left"?`left: ${P}`:`right: ${w}`,R=r==="bottom"?`bottom: ${_}`:`top: ${I}`;a.current.dataset.motionPopId=o;const V=document.createElement("style");c&&(V.nonce=c);const M=i??document.head;return M.appendChild(V),V.sheet&&V.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${y}px !important;
            ${E}px !important;
            ${R}px !important;
          }
        `),()=>{M.contains(V)&&M.removeChild(V)}},[e]),D.jsx(lB,{isPresent:e,childRef:a,sizeRef:l,pop:s,children:s===!1?t:N.cloneElement(t,{ref:d})})}const cB=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,anchorY:l,root:c})=>{const h=iy(hB),d=N.useId();let p=!0,g=N.useMemo(()=>(p=!1,{id:d,initial:e,isPresent:n,custom:i,onExitComplete:y=>{h.set(y,!0);for(const I of h.values())if(!I)return;r&&r()},register:y=>(h.set(y,!1),()=>h.delete(y))}),[n,h,r]);return s&&p&&(g={...g}),N.useMemo(()=>{h.forEach((y,I)=>h.set(I,!1))},[n]),N.useEffect(()=>{!n&&!h.size&&r&&r()},[n]),t=D.jsx(uB,{pop:o==="popLayout",isPresent:n,anchorX:a,anchorY:l,root:c,children:t}),D.jsx(bh.Provider,{value:g,children:t})};function hB(){return new Map}function CP(t=!0){const e=N.useContext(bh);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=N.useId();N.useEffect(()=>{if(t)return i(s)},[t]);const o=N.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const du=t=>t.key||"";function FE(t){const e=[];return N.Children.forEach(t,n=>{N.isValidElement(n)&&e.push(n)}),e}const dB=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",anchorY:l="top",root:c})=>{const[h,d]=CP(o),p=N.useMemo(()=>FE(t),[t]),g=o&&!h?[]:p.map(du),y=N.useRef(!0),I=N.useRef(p),P=iy(()=>new Map),w=N.useRef(new Set),[_,E]=N.useState(p),[R,V]=N.useState(p);iA(()=>{y.current=!1,I.current=p;for(let v=0;v<R.length;v++){const S=du(R[v]);g.includes(S)?(P.delete(S),w.current.delete(S)):P.get(S)!==!0&&P.set(S,!1)}},[R,g.length,g.join("-")]);const M=[];if(p!==_){let v=[...p];for(let S=0;S<R.length;S++){const A=R[S],k=du(A);g.includes(k)||(v.splice(S,0,A),M.push(A))}return s==="wait"&&M.length&&(v=M),V(FE(v)),E(p),null}const{forceRender:x}=N.useContext(ry);return D.jsx(D.Fragment,{children:R.map(v=>{const S=du(v),A=o&&!h?!1:p===R||g.includes(S),k=()=>{if(w.current.has(S))return;if(w.current.add(S),P.has(S))P.set(S,!0);else return;let b=!0;P.forEach(C=>{C||(b=!1)}),b&&(x==null||x(),V(I.current),o&&(d==null||d()),r&&r())};return D.jsx(cB,{isPresent:A,initial:!y.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:c,onExitComplete:A?void 0:k,anchorX:a,anchorY:l,children:v},S)})})},RP=N.createContext({strict:!1}),jE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let UE=!1;function fB(){if(UE)return;const t={};for(const e in jE)t[e]={isEnabled:n=>jE[e].some(r=>!!n[r])};iP(t),UE=!0}function kP(){return fB(),J4()}function pB(t){const e=kP();for(const n in t)e[n]={...e[n],...t[n]};iP(e)}const mB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function zc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||mB.has(t)}let bP=t=>!zc(t);function gB(t){typeof t=="function"&&(bP=e=>e.startsWith("on")?!zc(e):t(e))}try{gB(require("@emotion/is-prop-valid").default)}catch{}function yB(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(bP(i)||n===!0&&zc(i)||!e&&!zc(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const Vh=N.createContext({});function vB(t,e){if(Dh(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Ka(n)?n:void 0,animate:Ka(r)?r:void 0}}return t.inherit!==!1?e:{}}function _B(t){const{initial:e,animate:n}=vB(t,N.useContext(Vh));return N.useMemo(()=>({initial:e,animate:n}),[$E(e),$E(n)])}function $E(t){return Array.isArray(t)?t.join(" "):t}const Dy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function NP(t,e,n){for(const r in e)!mt(e[r])&&!hP(r,n)&&(t[r]=e[r])}function wB({transformTemplate:t},e){return N.useMemo(()=>{const n=Dy();return ky(n,e,t),Object.assign({},n.vars,n.style)},[e])}function EB(t,e){const n=t.style||{},r={};return NP(r,n,t),Object.assign(r,wB(t,e)),r}function TB(t,e){const n={},r=EB(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const DP=()=>({...Dy(),attrs:{}});function SB(t,e,n,r){const i=N.useMemo(()=>{const s=DP();return dP(s,e,pP(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};NP(s,t.style,t),i.style={...s,...i.style}}return i}const IB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Vy(t){return typeof t!="string"||t.includes("-")?!1:!!(IB.indexOf(t)>-1||/[A-Z]/u.test(t))}function xB(t,e,n,{latestValues:r},i,s=!1,o){const l=(o??Vy(t)?SB:TB)(e,r,i,t),c=yB(e,typeof t=="string",s),h=t!==N.Fragment?{...c,...l,ref:n}:{},{children:d}=e,p=N.useMemo(()=>mt(d)?d.get():d,[d]);return N.createElement(t,{...h,children:p})}function AB({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:PB(n,r,i,t),renderState:e()}}function PB(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=$u(s[p]);let{initial:o,animate:a}=t;const l=Dh(t),c=nP(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?a:o;if(d&&typeof d!="boolean"&&!Nh(d)){const p=Array.isArray(d)?d:[d];for(let g=0;g<p.length;g++){const y=Ty(t,p[g]);if(y){const{transitionEnd:I,transition:P,...w}=y;for(const _ in w){let E=w[_];if(Array.isArray(E)){const R=h?E.length-1:0;E=E[R]}E!==null&&(i[_]=E)}for(const _ in I)i[_]=I[_]}}}return i}const VP=t=>(e,n)=>{const r=N.useContext(Vh),i=N.useContext(bh),s=()=>AB(t,e,r,i);return n?s():iy(s)},CB=VP({scrapeMotionValuesFromProps:by,createRenderState:Dy}),RB=VP({scrapeMotionValuesFromProps:mP,createRenderState:DP}),kB=Symbol.for("motionComponentSymbol");function bB(t,e,n){const r=N.useRef(n);N.useInsertionEffect(()=>{r.current=n});const i=N.useRef(null);return N.useCallback(s=>{var a;s&&((a=t.onMount)==null||a.call(t,s)),e&&(s?e.mount(s):e.unmount());const o=r.current;if(typeof o=="function")if(s){const l=o(s);typeof l=="function"&&(i.current=l)}else i.current?(i.current(),i.current=null):o(s);else o&&(o.current=s)},[e])}const LP=N.createContext({});function ls(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function NB(t,e,n,r,i,s){var E,R;const{visualElement:o}=N.useContext(Vh),a=N.useContext(RP),l=N.useContext(bh),c=N.useContext(Ny),h=c.reducedMotion,d=c.skipAnimations,p=N.useRef(null),g=N.useRef(!1);r=r||a.renderer,!p.current&&r&&(p.current=r(t,{visualState:e,parent:o,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:h,skipAnimations:d,isSVG:s}),g.current&&p.current&&(p.current.manuallyAnimateOnMount=!0));const y=p.current,I=N.useContext(LP);y&&!y.projection&&i&&(y.type==="html"||y.type==="svg")&&DB(p.current,n,i,I);const P=N.useRef(!1);N.useInsertionEffect(()=>{y&&P.current&&y.update(n,l)});const w=n[zA],_=N.useRef(!!w&&!((E=window.MotionHandoffIsComplete)!=null&&E.call(window,w))&&((R=window.MotionHasOptimisedAnimation)==null?void 0:R.call(window,w)));return iA(()=>{g.current=!0,y&&(P.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),_.current&&y.animationState&&y.animationState.animateChanges())}),N.useEffect(()=>{y&&(!_.current&&y.animationState&&y.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var V;(V=window.MotionHandoffMarkAsComplete)==null||V.call(window,w)}),_.current=!1),y.enteringChildren=void 0)}),y}function DB(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:OP(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&ls(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:l,layoutRoot:c})}function OP(t){if(t)return t.options.allowProjection!==!1?t.projection:OP(t.parent)}function of(t,{forwardMotionProps:e=!1,type:n}={},r,i){r&&pB(r);const s=n?n==="svg":Vy(t),o=s?RB:CB;function a(c,h){let d;const p={...N.useContext(Ny),...c,layoutId:VB(c)},{isStatic:g}=p,y=_B(c),I=o(c,g);if(!g&&rA){LB();const P=OB(p);d=P.MeasureLayout,y.visualElement=NB(t,I,p,i,P.ProjectionNode,s)}return D.jsxs(Vh.Provider,{value:y,children:[d&&y.visualElement?D.jsx(d,{visualElement:y.visualElement,...p}):null,xB(t,c,bB(I,y.visualElement,h),I,g,e,s)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const l=N.forwardRef(a);return l[kB]=t,l}function VB({layoutId:t}){const e=N.useContext(ry).id;return e&&t!==void 0?e+"-"+t:t}function LB(t,e){N.useContext(RP).strict}function OB(t){const e=kP(),{drag:n,layout:r}=e;if(!n&&!r)return{};const i={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(t)||r!=null&&r.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function MB(t,e){if(typeof Proxy>"u")return of;const n=new Map,r=(s,o)=>of(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,of(o,void 0,t,e)),n.get(o))})}const FB=(t,e)=>e.isSVG??Vy(t)?new m$(e):new u$(e,{allowProjection:t!==N.Fragment});class jB extends ci{constructor(e){super(e),e.animationState||(e.animationState=w$(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Nh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let UB=0;class $B extends ci{constructor(){super(...arguments),this.id=UB++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const BB={animation:{Feature:jB},exit:{Feature:$B}};function vl(t){return{point:{x:t.pageX,y:t.pageY}}}const zB=t=>e=>Ay(e)&&t(e,vl(e));function pa(t,e,n,r){return qa(t,e,zB(n),r)}const MP=({current:t})=>t?t.ownerDocument.defaultView:null,BE=(t,e)=>Math.abs(t-e);function WB(t,e){const n=BE(t.x,e.x),r=BE(t.y,e.y);return Math.sqrt(n**2+r**2)}const zE=new Set(["auto","scroll"]);class FP{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3,element:a}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=g=>{this.handleScroll(g.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=lf(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,I=WB(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!I)return;const{point:P}=g,{timestamp:w}=Je;this.history.push({...P,timestamp:w});const{onStart:_,onMove:E}=this.handlers;y||(_&&_(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=af(y,this.transformPagePoint),ve.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:I,onSessionEnd:P,resumeAnimation:w}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=lf(g.type==="pointercancel"?this.lastMoveEventInfo:af(y,this.transformPagePoint),this.history);this.startEvent&&I&&I(g,_),P&&P(g,_)},!Ay(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=vl(e),c=af(l,this.transformPagePoint),{point:h}=c,{timestamp:d}=Je;this.history=[{...h,timestamp:d}];const{onSessionStart:p}=n;p&&p(e,lf(c,this.history)),this.removeListeners=ml(pa(this.contextWindow,"pointermove",this.handlePointerMove),pa(this.contextWindow,"pointerup",this.handlePointerUp),pa(this.contextWindow,"pointercancel",this.handlePointerUp)),a&&this.startScrollTracking(a)}startScrollTracking(e){let n=e.parentElement;for(;n;){const r=getComputedStyle(n);(zE.has(r.overflowX)||zE.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const r=e===window,i=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},s={x:i.x-n.x,y:i.y-n.y};s.x===0&&s.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=s.x,this.lastMoveEventInfo.point.y+=s.y):this.history.length>0&&(this.history[0].x-=s.x,this.history[0].y-=s.y),this.scrollPositions.set(e,i),ve.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),ei(this.updatePoint)}}function af(t,e){return e?{point:e(t.point)}:t}function WE(t,e){return{x:t.x-e.x,y:t.y-e.y}}function lf({point:t},e){return{point:t,delta:WE(t,jP(e)),offset:WE(t,HB(e)),velocity:KB(e,.1)}}function HB(t){return t[0]}function jP(t){return t[t.length-1]}function KB(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=jP(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>mn(e)));)n--;if(!r)return{x:0,y:0};r===t[0]&&t.length>2&&i.timestamp-r.timestamp>mn(e)*2&&(r=t[1]);const s=Jt(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function qB(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?xe(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?xe(n,t,r.max):Math.min(t,n)),t}function HE(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function GB(t,{top:e,left:n,bottom:r,right:i}){return{x:HE(t.x,n,i),y:HE(t.y,e,r)}}function KE(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function QB(t,e){return{x:KE(t.x,e.x),y:KE(t.y,e.y)}}function YB(t,e){let n=.5;const r=St(t),i=St(e);return i>r?n=za(e.min,e.max-r,t.min):r>i&&(n=za(t.min,t.max-i,e.min)),Vn(0,1,n)}function XB(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const im=.35;function JB(t=im){return t===!1?t=0:t===!0&&(t=im),{x:qE(t,"left","right"),y:qE(t,"top","bottom")}}function qE(t,e,n){return{min:GE(t,e),max:GE(t,n)}}function GE(t,e){return typeof t=="number"?t:t[e]||0}const ZB=new WeakMap;class e3{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=$e(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=d=>{n&&this.snapToCursor(vl(d).point),this.stopAnimation()},o=(d,p)=>{const{drag:g,dragPropagation:y,onDragStart:I}=this.getProps();if(g&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=C4(g),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Tn(w=>{let _=this.getAxisMotionValue(w).get()||0;if(bn.test(_)){const{projection:E}=this.visualElement;if(E&&E.layout){const R=E.layout.layoutBox[w];R&&(_=St(R)*(parseFloat(_)/100))}}this.originPoint[w]=_}),I&&ve.update(()=>I(d,p),!1,!0),Yp(this.visualElement,"transform");const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},a=(d,p)=>{this.latestPointerEvent=d,this.latestPanInfo=p;const{dragPropagation:g,dragDirectionLock:y,onDirectionLock:I,onDrag:P}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:w}=p;if(y&&this.currentDirection===null){this.currentDirection=n3(w),this.currentDirection!==null&&I&&I(this.currentDirection);return}this.updateAxis("x",p.point,w),this.updateAxis("y",p.point,w),this.visualElement.render(),P&&ve.update(()=>P(d,p),!1,!0)},l=(d,p)=>{this.latestPointerEvent=d,this.latestPanInfo=p,this.stop(d,p),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>{const{dragSnapToOrigin:d}=this.getProps();(d||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:h}=this.getProps();this.panSession=new FP(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:MP(this.visualElement),element:this.visualElement.current})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&ve.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!fu(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=qB(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&ls(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=GB(r.layoutBox,e):this.constraints=!1,this.elastic=JB(n),i!==this.constraints&&!ls(e)&&r&&this.constraints&&!this.hasMutatedConstraints&&Tn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=XB(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ls(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=r$(r,i.root,this.visualElement.getTransformPagePoint());let o=QB(i.layout.layoutBox,s);if(n){const a=n(e$(o));this.hasMutatedConstraints=!!a,a&&(o=oP(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Tn(h=>{if(!fu(h,n,this.currentDirection))return;let d=l&&l[h]||{};o&&(d={min:0,max:0});const p=i?200:1e6,g=i?40:1e7,y={type:"inertia",velocity:r?e[h]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(h,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Yp(this.visualElement,e),r.start(Ey(e,r,0,n,this.visualElement,!1))}stopAnimation(){Tn(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Tn(n=>{const{drag:r}=this.getProps();if(!fu(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n],l=s.get()||0;s.set(e[n]-xe(o,a,.5)+l)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ls(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Tn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=YB({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),Tn(o=>{if(!fu(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(xe(l,c,i[o]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;ZB.set(this.visualElement,this);const e=this.visualElement.current,n=pa(e,"pointerdown",c=>{const{drag:h,dragListener:d=!0}=this.getProps(),p=c.target,g=p!==e&&V4(p);h&&d&&!g&&this.start(c)});let r;const i=()=>{const{dragConstraints:c}=this.getProps();ls(c)&&c.current&&(this.constraints=this.resolveRefConstraints(),r||(r=t3(e,c.current,()=>this.scalePositionWithinConstraints())))},{projection:s}=this.visualElement,o=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),ve.read(i);const a=qa(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:h})=>{this.isDragging&&h&&(Tn(d=>{const p=this.getAxisMotionValue(d);p&&(this.originPoint[d]+=c[d].translate,p.set(p.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),l&&l(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=im,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function QE(t){let e=!0;return()=>{if(e){e=!1;return}t()}}function t3(t,e,n){const r=nE(t,QE(n)),i=nE(e,QE(n));return()=>{r(),i()}}function fu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function n3(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class r3 extends ci{constructor(e){super(e),this.removeGroupControls=en,this.removeListeners=en,this.controls=new e3(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||en}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const uf=t=>(e,n)=>{t&&ve.update(()=>t(e,n),!1,!0)};class i3 extends ci{constructor(){super(...arguments),this.removePointerDownListener=en}onPointerDown(e){this.session=new FP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:MP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:uf(e),onStart:uf(n),onMove:uf(r),onEnd:(s,o)=>{delete this.session,i&&ve.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=pa(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let cf=!1;class s3 extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),cf&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Bu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,e.layoutDependency!==n&&o.setOptions({...o.options,layoutDependency:n}),cf=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||ve.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),xy.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;cf=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function UP(t){const[e,n]=CP(),r=N.useContext(ry);return D.jsx(s3,{...t,layoutGroup:r,switchLayoutGroup:N.useContext(LP),isPresent:e,safeToRemove:n})}const o3={pan:{Feature:i3},drag:{Feature:r3,ProjectionNode:PP,MeasureLayout:UP}};function YE(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&ve.postRender(()=>s(e,vl(e)))}class a3 extends ci{mount(){const{current:e}=this.node;e&&(this.unmount=k4(e,(n,r)=>(YE(this.node,r,"Start"),i=>YE(this.node,i,"End"))))}unmount(){}}class l3 extends ci{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ml(qa(this.node.current,"focus",()=>this.onFocus()),qa(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function XE(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&ve.postRender(()=>s(e,vl(e)))}class u3 extends ci{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:n,propagate:r}=this.node.props;this.unmount=O4(e,(i,s)=>(XE(this.node,s,"Start"),(o,{success:a})=>XE(this.node,o,a?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:(r==null?void 0:r.tap)===!1})}unmount(){}}const sm=new WeakMap,hf=new WeakMap,c3=t=>{const e=sm.get(t.target);e&&e(t)},h3=t=>{t.forEach(c3)};function d3({root:t,...e}){const n=t||document;hf.has(n)||hf.set(n,{});const r=hf.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(h3,{root:t,...e})),r[i]}function f3(t,e,n){const r=d3(e);return sm.set(t,n),r.observe(t),()=>{sm.delete(t),r.unobserve(t)}}const p3={some:0,all:1};class m3 extends ci{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:p3[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),p=c?h:d;p&&p(l)};return f3(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(g3(e,n))&&this.startObserver()}unmount(){}}function g3({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const y3={inView:{Feature:m3},tap:{Feature:u3},focus:{Feature:l3},hover:{Feature:a3}},v3={layout:{ProjectionNode:PP,MeasureLayout:UP}},_3={...BB,...y3,...o3,...v3},w3=MB(_3,FB),E3=N.lazy(()=>Xk(()=>import("./Home-CkjZcfRq.js"),[])),T3=({children:t})=>{const[e,n]=N.useState(null),[r,i]=N.useState(null),[s,o]=N.useState(!0),[a,l]=N.useState(null);Qa.useEffect(()=>{const y=lM(Ou,async I=>{if(l(null),I){i(I);try{const P=await H1.getUser(I.uid);P?n(P.role):(console.warn("User exists in Auth but not in Firestore"),n(null))}catch(P){console.error("Error syncing user profile:",P),l("Error de conexin al cargar tu perfil. Revisa tu internet.")}}else i(null),n(null);o(!1)});return()=>y()},[]);const c=async()=>{try{const y=new qn;await CM(Ou,y)}catch(y){console.error("Login failed",y),bd.error("Error al iniciar sesin")}},h=async y=>{{bd.error("Funcin solo disponible en desarrollo");return}},d=async()=>{try{await uM(Ou),n(null),i(null),l(null),bd.success("Sesin cerrada")}catch(y){console.error("Logout failed",y)}},p=r?r.uid:"",g=!!r;return s?D.jsx(Ly,{}):D.jsx(AuthContext.Provider,{value:{userRole:e,setUserRole:n,currentUserId:p,isAuthenticated:g,currentUser:r,loginWithGoogle:c,loginAsTest:h,logout:d,loading:s,authError:a},children:t})},_l=()=>{const t=Qa.useContext(AuthContext);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},gi=({children:t})=>{const{isAuthenticated:e}=_l();return e?t:D.jsx(xI,{to:"/"})},S3=({children:t})=>{const{currentUser:e}=_l(),[n,r]=N.useState(null);return Qa.useEffect(()=>{(async()=>{if(e){const s=await H1.isAdmin(e.uid);r(s)}else r(!1)})()},[e]),n===null?D.jsx(Ly,{}):n?t:D.jsx(xI,{to:"/"})},Ly=()=>D.jsx("div",{className:"flex items-center justify-center min-h-screen bg-[#161512] text-gold",children:D.jsx("div",{className:"w-12 h-12 border-4 border-gold/30 border-t-gold rounded-full animate-spin"})}),I3=({message:t})=>D.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-[#161512] text-center px-6",children:[D.jsx("div",{className:"text-red-500 mb-4 animate-pulse",children:D.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[D.jsx("circle",{cx:"12",cy:"12",r:"10"}),D.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),D.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})}),D.jsx("h1",{className:"text-xl font-bold text-white mb-2",children:"Error de conexin"}),D.jsx("p",{className:"text-white/50 mb-6 max-w-sm",children:t}),D.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-gold text-black font-bold rounded-xl hover:bg-white transition-all uppercase tracking-widest text-xs",children:"Reintentar"})]}),x3=()=>{const t=el();return D.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center px-6",children:[D.jsx("div",{className:"text-8xl font-black text-gold/20 mb-4",children:"404"}),D.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Pgina no encontrada"}),D.jsx("p",{className:"text-white/40 mb-8 max-w-sm",children:"La pgina que buscas no existe o ha sido movida."}),D.jsx("button",{onClick:()=>t("/"),className:"px-6 py-3 bg-gold text-black font-black rounded-xl hover:bg-white transition-all",children:"Volver al inicio"})]})},Gt=({children:t})=>D.jsx(w3.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:t}),A3=()=>{const t=fr(),{isAuthenticated:e,userRole:n,loading:r,authError:i}=_l(),s=el();return Qa.useEffect(()=>{!r&&!i&&(e?n===null&&t.pathname!=="/onboarding"?s("/onboarding"):n!==null&&t.pathname==="/onboarding"&&s(n==="teacher"?"/dashboard":"/student-dashboard"):t.pathname==="/onboarding"&&s("/"))},[r,e,n,t.pathname,s,i]),i?D.jsx(I3,{message:i}):D.jsx(dB,{mode:"wait",children:D.jsxs(zb,{location:t,children:[D.jsx(Mt,{path:"/",element:D.jsx(Gt,{children:D.jsx(E3,{})})}),D.jsx(Mt,{path:"/onboarding",element:D.jsx(Gt,{children:D.jsx(Onboarding,{})})}),D.jsx(Mt,{path:"/chat/:teacherId",element:D.jsx(gi,{children:D.jsx(Gt,{children:D.jsx(Chat,{})})})}),D.jsx(Mt,{path:"/room/:teacherId",element:D.jsx(gi,{children:D.jsx(Gt,{children:D.jsx(Classroom,{})})})}),D.jsx(Mt,{path:"/classroom/:teacherId",element:D.jsx(gi,{children:D.jsx(Gt,{children:D.jsx(Classroom,{})})})}),D.jsx(Mt,{path:"/dashboard",element:D.jsx(gi,{children:D.jsx(Gt,{children:D.jsx(TeacherDashboard,{})})})}),D.jsx(Mt,{path:"/student-dashboard",element:D.jsx(gi,{children:D.jsx(Gt,{children:D.jsx(StudentDashboard,{})})})}),D.jsx(Mt,{path:"/wallet",element:D.jsx(gi,{children:D.jsx(Gt,{children:D.jsx(Wallet,{})})})}),D.jsx(Mt,{path:"/profile",element:D.jsx(gi,{children:D.jsx(Gt,{children:D.jsx(UserProfile,{})})})}),D.jsx(Mt,{path:"/admin",element:D.jsx(S3,{children:D.jsx(Gt,{children:D.jsx(AdminDashboard,{})})})}),D.jsx(Mt,{path:"/lichess-callback",element:D.jsx(Gt,{children:D.jsx(LichessCallback,{})})}),D.jsx(Mt,{path:"*",element:D.jsx(Gt,{children:D.jsx(x3,{})})})]},t.pathname)})},P3=({children:t})=>{const e=fr(),n=e.pathname.includes("/classroom/")||e.pathname.includes("/room/");return D.jsxs("div",{className:"min-h-screen bg-[#161512] text-[#bababa] font-sans",children:[!n&&D.jsx(xj,{}),D.jsx($N,{position:"top-center"}),D.jsx("main",{className:n?"":"pt-16",children:t})]})};function C3(){return D.jsx(Yb,{basename:"/TopChess",future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:D.jsx(T3,{children:D.jsx(P3,{children:D.jsx(N.Suspense,{fallback:D.jsx(Ly,{}),children:D.jsx(A3,{})})})})})}const{slice:R3,forEach:k3}=[];function b3(t){return k3.call(R3.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}function N3(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(t))}const JE=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,D3=function(t,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(e);let s=`${t}=${i}`;if(r.maxAge>0){const o=r.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(o)}`}if(r.domain){if(!JE.test(r.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${r.domain}`}if(r.path){if(!JE.test(r.path))throw new TypeError("option path is invalid");s+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(s+="; Partitioned"),s},ZE={create(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+n*60*1e3)),r&&(i.domain=r),document.cookie=D3(t,e,i)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let i=n[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(t,e){this.create(t,"",-1,e)}};var V3={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return ZE.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:r,cookieDomain:i,cookieOptions:s}=e;n&&typeof document<"u"&&ZE.create(n,t,r,i,s)}},L3={name:"querystring",lookup(t){var r;let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const o=i.substring(1).split("&");for(let a=0;a<o.length;a++){const l=o[a].indexOf("=");l>0&&o[a].substring(0,l)===e&&(n=o[a].substring(l+1))}}return n}},O3={name:"hash",lookup(t){var i;let{lookupHash:e,lookupFromHashIndex:n}=t,r;if(typeof window<"u"){const{hash:s}=window.location;if(s&&s.length>2){const o=s.substring(1);if(e){const a=o.split("&");for(let l=0;l<a.length;l++){const c=a[l].indexOf("=");c>0&&a[l].substring(0,c)===e&&(r=a[l].substring(c+1))}}if(r)return r;if(!r&&n>-1){const a=s.match(/\/([a-zA-Z-]*)/g);return Array.isArray(a)?(i=a[typeof n=="number"?n:0])==null?void 0:i.replace("/",""):void 0}}}return r}};let rs=null;const eT=()=>{if(rs!==null)return rs;try{if(rs=typeof window<"u"&&window.localStorage!==null,!rs)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{rs=!1}return rs};var M3={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&eT())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&eT()&&window.localStorage.setItem(n,t)}};let is=null;const tT=()=>{if(is!==null)return is;try{if(is=typeof window<"u"&&window.sessionStorage!==null,!is)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{is=!1}return is};var F3={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&tT())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&tT()&&window.sessionStorage.setItem(n,t)}},j3={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:i}=navigator;if(n)for(let s=0;s<n.length;s++)e.push(n[s]);r&&e.push(r),i&&e.push(i)}return e.length>0?e:void 0}},U3={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},$3={name:"path",lookup(t){var i;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(i=n[typeof e=="number"?e:0])==null?void 0:i.replace("/",""):void 0}},B3={name:"subdomain",lookup(t){var i,s;let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,r=typeof window<"u"&&((s=(i=window.location)==null?void 0:i.hostname)==null?void 0:s.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};let $P=!1;try{document.cookie,$P=!0}catch{}const BP=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];$P||BP.splice(1,1);const z3=()=>({order:BP,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class zP{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=b3(n,this.options||{},z3()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(V3),this.addDetector(L3),this.addDetector(M3),this.addDetector(F3),this.addDetector(j3),this.addDetector(U3),this.addDetector($3),this.addDetector(B3),this.addDetector(O3)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return e.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(n=n.concat(i))}}),n=n.filter(r=>r!=null&&!N3(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}zP.type="languageDetector";const W3={title:"TopChess",tagline:"Domina el Ajedrez"},H3={home:"Inicio",login:"Iniciar Sesin",test_student:"Test Alumno",test_teacher:"Test Profesor",panel:"Mi Panel",admin:"Admin",profile:"Mi Perfil",logout:"Cerrar Sesin"},K3={badge:"La Plataforma Premium de Ajedrez",title:"Domina el Tablero",subtitle:"Sin Lmites",description:"Conecta con Grandes Maestros, accede a clases en vivo y mejora tu juego con herramientas de anlisis de ltima generacin.",cta_find:"Encontrar Mentor",cta_start:"Empezar Ahora",cta_teach:"Soy Profesor",cta_dashboard:"Mi Panel"},q3={students:"Estudiantes",teachers:"Maestros",support:"Soporte",rating:"Valoracin"},G3={title:"Todo lo que necesitas",subtitle:"Herramientas profesionales para estudiantes y maestros.",classroom:{title:"Aula Virtual Avanzada",desc:"Tablero interactivo sincronizado en tiempo real, chat de voz/video y herramientas de dibujo."},analysis:{title:"Anlisis con IA",desc:"Identifica tus errores al instante con Stockfish 16 y recibe sugerencias de mejora."},payments:{title:"Pagos Globales",desc:"Gestiona tus cobros y pagos de forma segura desde cualquier parte del mundo."},community:{title:"Comunidad Activa",desc:"Participa en torneos, nete a clubes y conecta con otros apasionados del ajedrez."},cert:{title:"Certificacin",desc:"Obtn certificados de nivel al completar cursos y alcanzar metas de ELO."},verified:{title:"Profesores Verificados",desc:"Todos nuestros maestros pasan por un riguroso proceso de verificacin de identidad y nivel."}},Q3={title:"Listo para llevar tu ajedrez al",highlight:"siguiente nivel",button:"Comenzar Ahora"},Y3={back:"Volver al inicio",analyzing:"Analizando tu perfil...",searching:"Buscando el mejor mentor para tu estilo de juego.",match_title:"Match Perfecto!",match_desc:"Basado en tus objetivos, te recomendamos a:",back_btn:"Volver",connect_btn:"Conectar",login_toast:"Iniciando sesin..."},X3={login_required:"Debes iniciar sesin para encontrar un mentor"},J3={app:W3,nav:H3,hero:K3,stats:q3,features:G3,cta_footer:Q3,wizard:Y3,toasts:X3},Z3={title:"TopChess",tagline:"Master Chess"},e9={home:"Home",login:"Login",test_student:"Test Student",test_teacher:"Test Teacher",panel:"Dashboard",admin:"Admin",profile:"Profile",logout:"Logout"},t9={badge:"The Premium Chess Platform",title:"Master the Board",subtitle:"No Limits",description:"Connect with Grandmasters, access live classes, and improve your game with next-gen analysis tools.",cta_find:"Find Mentor",cta_start:"Start Now",cta_teach:"I'm a Teacher",cta_dashboard:"Dashboard"},n9={students:"Students",teachers:"Masters",support:"Support",rating:"Rating"},r9={title:"Everything you need",subtitle:"Professional tools for students and masters.",classroom:{title:"Advanced Virtual Classroom",desc:"Real-time synchronized interactive board, voice/video chat, and drawing tools."},analysis:{title:"AI Analysis",desc:"Identify mistakes instantly with Stockfish 16 and get improvement suggestions."},payments:{title:"Global Payments",desc:"Manage payments securely from anywhere in the world."},community:{title:"Active Community",desc:"Join tournaments, clubs, and connect with other chess enthusiasts."},cert:{title:"Certification",desc:"Get level certificates by completing courses and reaching ELO goals."},verified:{title:"Verified Teachers",desc:"All our masters undergo a rigorous identity and skill verification process."}},i9={title:"Ready to take your chess to the",highlight:"next level",button:"Start Now"},s9={back:"Back to Home",analyzing:"Analyzing your profile...",searching:"Searching for the best mentor for your playstyle.",match_title:"Perfect Match!",match_desc:"Based on your goals, we recommend:",back_btn:"Back",connect_btn:"Connect",login_toast:"Logging in..."},o9={login_required:"You must login to find a mentor"},a9={app:Z3,nav:e9,hero:t9,stats:n9,features:r9,cta_footer:i9,wizard:s9,toasts:o9};Pt.use(zP).use(lj).init({resources:{es:{translation:J3},en:{translation:a9}},lng:"es",fallbackLng:"es",interpolation:{escapeValue:!1}});mI(document.getElementById("root")).render(D.jsx(N.StrictMode,{children:D.jsx(C3,{})}));export{vw as G,q1 as L,_l as a,nA as b,Ln as c,H1 as f,D as j,w3 as m,N as r,el as u,bd as z};
