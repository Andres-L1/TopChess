const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-Ozvr1TYd.js","assets/sparkles-AGVICSw2.js","assets/check-M0zn_JkD.js","assets/PremiumButton-YH5PTq3r.js","assets/chevron-right-i5eVpAXG.js","assets/users-czbDiqO0.js","assets/calendar-C751NKkP.js","assets/zap-RysCgHrD.js","assets/trending-up-DDFIOgJA.js","assets/Classroom-Dn7YxA1A.js","assets/lichessService-BsrYpUv4.js","assets/Skeleton-aARwUFlu.js","assets/clock-CSr_qCFv.js","assets/activity-CAFNfbOQ.js","assets/send-43HxmPXs.js","assets/plus-BdykrtZj.js","assets/download-CjmmNqLL.js","assets/chevron-left-Cj0JQz9D.js","assets/Classroom-C8rT0oD6.css","assets/Chat-DDgXO9DH.js","assets/dollar-sign-BSueknKX.js","assets/circle-check-big-BukKsPdx.js","assets/TeacherDashboard-WQ1JUI-V.js","assets/Calendar-DF8finMA.js","assets/AreaChart-D9KmG3Vn.js","assets/StudentDashboard-DXAR7xD-.js","assets/credit-card-DX9UOeUB.js","assets/Wallet-C8PqvU3Q.js","assets/arrow-up-right-DExe-Bo4.js","assets/Onboarding-C7C0_TGh.js","assets/graduation-cap-CtPOAW4R.js","assets/AdminDashboard-BHujxIPd.js","assets/LichessCallback-DPryqb31.js","assets/ClubOffice-BBYrgzPw.js"])))=>i.map(i=>d[i]);
var LC=Object.defineProperty;var OC=(t,e,n)=>e in t?LC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Kv=(t,e,n)=>OC(t,typeof e!="symbol"?e+"":e,n);function MC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function FC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mT={exports:{}},Xc={},gT={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rl=Symbol.for("react.element"),jC=Symbol.for("react.portal"),UC=Symbol.for("react.fragment"),$C=Symbol.for("react.strict_mode"),BC=Symbol.for("react.profiler"),zC=Symbol.for("react.provider"),WC=Symbol.for("react.context"),HC=Symbol.for("react.forward_ref"),qC=Symbol.for("react.suspense"),KC=Symbol.for("react.memo"),GC=Symbol.for("react.lazy"),Gv=Symbol.iterator;function QC(t){return t===null||typeof t!="object"?null:(t=Gv&&t[Gv]||t["@@iterator"],typeof t=="function"?t:null)}var yT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vT=Object.assign,_T={};function lo(t,e,n){this.props=t,this.context=e,this.refs=_T,this.updater=n||yT}lo.prototype.isReactComponent={};lo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};lo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function wT(){}wT.prototype=lo.prototype;function gm(t,e,n){this.props=t,this.context=e,this.refs=_T,this.updater=n||yT}var ym=gm.prototype=new wT;ym.constructor=gm;vT(ym,lo.prototype);ym.isPureReactComponent=!0;var Qv=Array.isArray,ET=Object.prototype.hasOwnProperty,vm={current:null},TT={key:!0,ref:!0,__self:!0,__source:!0};function ST(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)ET.call(e,r)&&!TT.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:rl,type:t,key:s,ref:o,props:i,_owner:vm.current}}function YC(t,e){return{$$typeof:rl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _m(t){return typeof t=="object"&&t!==null&&t.$$typeof===rl}function XC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Yv=/\/+/g;function dd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?XC(""+t.key):e.toString(36)}function Eu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case rl:case jC:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+dd(o,0):r,Qv(i)?(n="",t!=null&&(n=t.replace(Yv,"$&/")+"/"),Eu(i,e,n,"",function(c){return c})):i!=null&&(_m(i)&&(i=YC(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Yv,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Qv(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+dd(s,a);o+=Eu(s,e,n,l,i)}else if(l=QC(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+dd(s,a++),o+=Eu(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Hl(t,e,n){if(t==null)return t;var r=[],i=0;return Eu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function JC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var kt={current:null},Tu={transition:null},ZC={ReactCurrentDispatcher:kt,ReactCurrentBatchConfig:Tu,ReactCurrentOwner:vm};function IT(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:Hl,forEach:function(t,e,n){Hl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Hl(t,function(){e++}),e},toArray:function(t){return Hl(t,function(e){return e})||[]},only:function(t){if(!_m(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=lo;ie.Fragment=UC;ie.Profiler=BC;ie.PureComponent=gm;ie.StrictMode=$C;ie.Suspense=qC;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZC;ie.act=IT;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=vT({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=vm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ET.call(e,l)&&!TT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:rl,type:t.type,key:i,ref:s,props:r,_owner:o}};ie.createContext=function(t){return t={$$typeof:WC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zC,_context:t},t.Consumer=t};ie.createElement=ST;ie.createFactory=function(t){var e=ST.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:HC,render:t}};ie.isValidElement=_m;ie.lazy=function(t){return{$$typeof:GC,_payload:{_status:-1,_result:t},_init:JC}};ie.memo=function(t,e){return{$$typeof:KC,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=Tu.transition;Tu.transition={};try{t()}finally{Tu.transition=e}};ie.unstable_act=IT;ie.useCallback=function(t,e){return kt.current.useCallback(t,e)};ie.useContext=function(t){return kt.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return kt.current.useDeferredValue(t)};ie.useEffect=function(t,e){return kt.current.useEffect(t,e)};ie.useId=function(){return kt.current.useId()};ie.useImperativeHandle=function(t,e,n){return kt.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return kt.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return kt.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return kt.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return kt.current.useReducer(t,e,n)};ie.useRef=function(t){return kt.current.useRef(t)};ie.useState=function(t){return kt.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return kt.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return kt.current.useTransition()};ie.version="18.3.1";gT.exports=ie;var R=gT.exports;const Ui=FC(R),eR=MC({__proto__:null,default:Ui},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tR=R,nR=Symbol.for("react.element"),rR=Symbol.for("react.fragment"),iR=Object.prototype.hasOwnProperty,sR=tR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oR={key:!0,ref:!0,__self:!0,__source:!0};function xT(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)iR.call(e,r)&&!oR.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:nR,type:t,key:s,ref:o,props:i,_owner:sR.current}}Xc.Fragment=rR;Xc.jsx=xT;Xc.jsxs=xT;mT.exports=Xc;var k=mT.exports,AT={exports:{}},Jt={},PT={exports:{}},CT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,K){var Q=$.length;$.push(K);e:for(;0<Q;){var re=Q-1>>>1,oe=$[re];if(0<i(oe,K))$[re]=K,$[Q]=oe,Q=re;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var K=$[0],Q=$.pop();if(Q!==K){$[0]=Q;e:for(var re=0,oe=$.length,ge=oe>>>1;re<ge;){var en=2*(re+1)-1,tn=$[en],Kn=en+1,Gn=$[Kn];if(0>i(tn,Q))Kn<oe&&0>i(Gn,tn)?($[re]=Gn,$[Kn]=Q,re=Kn):($[re]=tn,$[en]=Q,re=en);else if(Kn<oe&&0>i(Gn,Q))$[re]=Gn,$[Kn]=Q,re=Kn;else break e}}return K}function i($,K){var Q=$.sortIndex-K.sortIndex;return Q!==0?Q:$.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,g=!1,y=!1,I=!1,P=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E($){for(var K=n(c);K!==null;){if(K.callback===null)r(c);else if(K.startTime<=$)r(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=n(c)}}function b($){if(I=!1,E($),!y)if(n(l)!==null)y=!0,be(V);else{var K=n(c);K!==null&&ne(b,K.startTime-$)}}function V($,K){y=!1,I&&(I=!1,w(v),v=-1),g=!0;var Q=p;try{for(E(K),d=n(l);d!==null&&(!(d.expirationTime>K)||$&&!N());){var re=d.callback;if(typeof re=="function"){d.callback=null,p=d.priorityLevel;var oe=re(d.expirationTime<=K);K=t.unstable_now(),typeof oe=="function"?d.callback=oe:d===n(l)&&r(l),E(K)}else r(l);d=n(l)}if(d!==null)var ge=!0;else{var en=n(c);en!==null&&ne(b,en.startTime-K),ge=!1}return ge}finally{d=null,p=Q,g=!1}}var M=!1,x=null,v=-1,S=5,A=-1;function N(){return!(t.unstable_now()-A<S)}function D(){if(x!==null){var $=t.unstable_now();A=$;var K=!0;try{K=x(!0,$)}finally{K?C():(M=!1,x=null)}}else M=!1}var C;if(typeof _=="function")C=function(){_(D)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,de=Y.port2;Y.port1.onmessage=D,C=function(){de.postMessage(null)}}else C=function(){P(D,0)};function be($){x=$,M||(M=!0,C())}function ne($,K){v=P(function(){$(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,be(V))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var Q=p;p=K;try{return $()}finally{p=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,K){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Q=p;p=$;try{return K()}finally{p=Q}},t.unstable_scheduleCallback=function($,K,Q){var re=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?re+Q:re):Q=re,$){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=Q+oe,$={id:h++,callback:K,priorityLevel:$,startTime:Q,expirationTime:oe,sortIndex:-1},Q>re?($.sortIndex=Q,e(c,$),n(l)===null&&$===n(c)&&(I?(w(v),v=-1):I=!0,ne(b,Q-re))):($.sortIndex=oe,e(l,$),y||g||(y=!0,be(V))),$},t.unstable_shouldYield=N,t.unstable_wrapCallback=function($){var K=p;return function(){var Q=p;p=K;try{return $.apply(this,arguments)}finally{p=Q}}}})(CT);PT.exports=CT;var aR=PT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lR=R,Xt=aR;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var RT=new Set,Sa={};function Zi(t,e){Ws(t,e),Ws(t+"Capture",e)}function Ws(t,e){for(Sa[t]=e,t=0;t<e.length;t++)RT.add(e[t])}var ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tf=Object.prototype.hasOwnProperty,uR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xv={},Jv={};function cR(t){return Tf.call(Jv,t)?!0:Tf.call(Xv,t)?!1:uR.test(t)?Jv[t]=!0:(Xv[t]=!0,!1)}function hR(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function dR(t,e,n,r){if(e===null||typeof e>"u"||hR(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ut[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ut[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ut[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ut[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ut[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ut[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ut[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ut[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ut[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var wm=/[\-:]([a-z])/g;function Em(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wm,Em);ut[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wm,Em);ut[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wm,Em);ut[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ut[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});ut.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ut[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Tm(t,e,n,r){var i=ut.hasOwnProperty(e)?ut[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dR(e,n,i,r)&&(n=null),r||i===null?cR(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var wr=lR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ql=Symbol.for("react.element"),ms=Symbol.for("react.portal"),gs=Symbol.for("react.fragment"),Sm=Symbol.for("react.strict_mode"),Sf=Symbol.for("react.profiler"),kT=Symbol.for("react.provider"),bT=Symbol.for("react.context"),Im=Symbol.for("react.forward_ref"),If=Symbol.for("react.suspense"),xf=Symbol.for("react.suspense_list"),xm=Symbol.for("react.memo"),Nr=Symbol.for("react.lazy"),NT=Symbol.for("react.offscreen"),Zv=Symbol.iterator;function Mo(t){return t===null||typeof t!="object"?null:(t=Zv&&t[Zv]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,fd;function Go(t){if(fd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fd=e&&e[1]||""}return`
`+fd+t}var pd=!1;function md(t,e){if(!t||pd)return"";pd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{pd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Go(t):""}function fR(t){switch(t.tag){case 5:return Go(t.type);case 16:return Go("Lazy");case 13:return Go("Suspense");case 19:return Go("SuspenseList");case 0:case 2:case 15:return t=md(t.type,!1),t;case 11:return t=md(t.type.render,!1),t;case 1:return t=md(t.type,!0),t;default:return""}}function Af(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case gs:return"Fragment";case ms:return"Portal";case Sf:return"Profiler";case Sm:return"StrictMode";case If:return"Suspense";case xf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case bT:return(t.displayName||"Context")+".Consumer";case kT:return(t._context.displayName||"Context")+".Provider";case Im:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xm:return e=t.displayName||null,e!==null?e:Af(t.type)||"Memo";case Nr:e=t._payload,t=t._init;try{return Af(t(e))}catch{}}return null}function pR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Af(e);case 8:return e===Sm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function si(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function DT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function mR(t){var e=DT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Kl(t){t._valueTracker||(t._valueTracker=mR(t))}function VT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=DT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Yu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pf(t,e){var n=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function e_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=si(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function LT(t,e){e=e.checked,e!=null&&Tm(t,"checked",e,!1)}function Cf(t,e){LT(t,e);var n=si(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Rf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Rf(t,e.type,si(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function t_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Rf(t,e,n){(e!=="number"||Yu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Qo=Array.isArray;function Ds(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+si(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function kf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function n_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Qo(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:si(n)}}function OT(t,e){var n=si(e.value),r=si(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function r_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function MT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?MT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gl,FT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gl=Gl||document.createElement("div"),Gl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ia(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ra={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gR=["Webkit","ms","Moz","O"];Object.keys(ra).forEach(function(t){gR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ra[e]=ra[t]})});function jT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ra.hasOwnProperty(t)&&ra[t]?(""+e).trim():e+"px"}function UT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=jT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var yR=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nf(t,e){if(e){if(yR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Df(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vf=null;function Am(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Lf=null,Vs=null,Ls=null;function i_(t){if(t=ol(t)){if(typeof Lf!="function")throw Error(U(280));var e=t.stateNode;e&&(e=nh(e),Lf(t.stateNode,t.type,e))}}function $T(t){Vs?Ls?Ls.push(t):Ls=[t]:Vs=t}function BT(){if(Vs){var t=Vs,e=Ls;if(Ls=Vs=null,i_(t),e)for(t=0;t<e.length;t++)i_(e[t])}}function zT(t,e){return t(e)}function WT(){}var gd=!1;function HT(t,e,n){if(gd)return t(e,n);gd=!0;try{return zT(t,e,n)}finally{gd=!1,(Vs!==null||Ls!==null)&&(WT(),BT())}}function xa(t,e){var n=t.stateNode;if(n===null)return null;var r=nh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Of=!1;if(ur)try{var Fo={};Object.defineProperty(Fo,"passive",{get:function(){Of=!0}}),window.addEventListener("test",Fo,Fo),window.removeEventListener("test",Fo,Fo)}catch{Of=!1}function vR(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var ia=!1,Xu=null,Ju=!1,Mf=null,_R={onError:function(t){ia=!0,Xu=t}};function wR(t,e,n,r,i,s,o,a,l){ia=!1,Xu=null,vR.apply(_R,arguments)}function ER(t,e,n,r,i,s,o,a,l){if(wR.apply(this,arguments),ia){if(ia){var c=Xu;ia=!1,Xu=null}else throw Error(U(198));Ju||(Ju=!0,Mf=c)}}function es(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function qT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function s_(t){if(es(t)!==t)throw Error(U(188))}function TR(t){var e=t.alternate;if(!e){if(e=es(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return s_(i),t;if(s===r)return s_(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function KT(t){return t=TR(t),t!==null?GT(t):null}function GT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=GT(t);if(e!==null)return e;t=t.sibling}return null}var QT=Xt.unstable_scheduleCallback,o_=Xt.unstable_cancelCallback,SR=Xt.unstable_shouldYield,IR=Xt.unstable_requestPaint,Me=Xt.unstable_now,xR=Xt.unstable_getCurrentPriorityLevel,Pm=Xt.unstable_ImmediatePriority,YT=Xt.unstable_UserBlockingPriority,Zu=Xt.unstable_NormalPriority,AR=Xt.unstable_LowPriority,XT=Xt.unstable_IdlePriority,Jc=null,Ln=null;function PR(t){if(Ln&&typeof Ln.onCommitFiberRoot=="function")try{Ln.onCommitFiberRoot(Jc,t,void 0,(t.current.flags&128)===128)}catch{}}var wn=Math.clz32?Math.clz32:kR,CR=Math.log,RR=Math.LN2;function kR(t){return t>>>=0,t===0?32:31-(CR(t)/RR|0)|0}var Ql=64,Yl=4194304;function Yo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ec(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Yo(a):(s&=o,s!==0&&(r=Yo(s)))}else o=n&~i,o!==0?r=Yo(o):s!==0&&(r=Yo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-wn(e),i=1<<n,r|=t[n],e&=~i;return r}function bR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function NR(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-wn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=bR(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Ff(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function JT(){var t=Ql;return Ql<<=1,!(Ql&4194240)&&(Ql=64),t}function yd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function il(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wn(e),t[e]=n}function DR(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-wn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Cm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-wn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var me=0;function ZT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var eS,Rm,tS,nS,rS,jf=!1,Xl=[],qr=null,Kr=null,Gr=null,Aa=new Map,Pa=new Map,Vr=[],VR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function a_(t,e){switch(t){case"focusin":case"focusout":qr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Gr=null;break;case"pointerover":case"pointerout":Aa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pa.delete(e.pointerId)}}function jo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ol(e),e!==null&&Rm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function LR(t,e,n,r,i){switch(e){case"focusin":return qr=jo(qr,t,e,n,r,i),!0;case"dragenter":return Kr=jo(Kr,t,e,n,r,i),!0;case"mouseover":return Gr=jo(Gr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Aa.set(s,jo(Aa.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pa.set(s,jo(Pa.get(s)||null,t,e,n,r,i)),!0}return!1}function iS(t){var e=Ci(t.target);if(e!==null){var n=es(e);if(n!==null){if(e=n.tag,e===13){if(e=qT(n),e!==null){t.blockedOn=e,rS(t.priority,function(){tS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Su(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Uf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Vf=r,n.target.dispatchEvent(r),Vf=null}else return e=ol(n),e!==null&&Rm(e),t.blockedOn=n,!1;e.shift()}return!0}function l_(t,e,n){Su(t)&&n.delete(e)}function OR(){jf=!1,qr!==null&&Su(qr)&&(qr=null),Kr!==null&&Su(Kr)&&(Kr=null),Gr!==null&&Su(Gr)&&(Gr=null),Aa.forEach(l_),Pa.forEach(l_)}function Uo(t,e){t.blockedOn===e&&(t.blockedOn=null,jf||(jf=!0,Xt.unstable_scheduleCallback(Xt.unstable_NormalPriority,OR)))}function Ca(t){function e(i){return Uo(i,t)}if(0<Xl.length){Uo(Xl[0],t);for(var n=1;n<Xl.length;n++){var r=Xl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(qr!==null&&Uo(qr,t),Kr!==null&&Uo(Kr,t),Gr!==null&&Uo(Gr,t),Aa.forEach(e),Pa.forEach(e),n=0;n<Vr.length;n++)r=Vr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Vr.length&&(n=Vr[0],n.blockedOn===null);)iS(n),n.blockedOn===null&&Vr.shift()}var Os=wr.ReactCurrentBatchConfig,tc=!0;function MR(t,e,n,r){var i=me,s=Os.transition;Os.transition=null;try{me=1,km(t,e,n,r)}finally{me=i,Os.transition=s}}function FR(t,e,n,r){var i=me,s=Os.transition;Os.transition=null;try{me=4,km(t,e,n,r)}finally{me=i,Os.transition=s}}function km(t,e,n,r){if(tc){var i=Uf(t,e,n,r);if(i===null)Pd(t,e,r,nc,n),a_(t,r);else if(LR(i,t,e,n,r))r.stopPropagation();else if(a_(t,r),e&4&&-1<VR.indexOf(t)){for(;i!==null;){var s=ol(i);if(s!==null&&eS(s),s=Uf(t,e,n,r),s===null&&Pd(t,e,r,nc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Pd(t,e,r,null,n)}}var nc=null;function Uf(t,e,n,r){if(nc=null,t=Am(r),t=Ci(t),t!==null)if(e=es(t),e===null)t=null;else if(n=e.tag,n===13){if(t=qT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return nc=t,null}function sS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xR()){case Pm:return 1;case YT:return 4;case Zu:case AR:return 16;case XT:return 536870912;default:return 16}default:return 16}}var $r=null,bm=null,Iu=null;function oS(){if(Iu)return Iu;var t,e=bm,n=e.length,r,i="value"in $r?$r.value:$r.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Iu=i.slice(t,1<r?1-r:void 0)}function xu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Jl(){return!0}function u_(){return!1}function Zt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Jl:u_,this.isPropagationStopped=u_,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Jl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Jl)},persist:function(){},isPersistent:Jl}),e}var uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nm=Zt(uo),sl=Re({},uo,{view:0,detail:0}),jR=Zt(sl),vd,_d,$o,Zc=Re({},sl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$o&&($o&&t.type==="mousemove"?(vd=t.screenX-$o.screenX,_d=t.screenY-$o.screenY):_d=vd=0,$o=t),vd)},movementY:function(t){return"movementY"in t?t.movementY:_d}}),c_=Zt(Zc),UR=Re({},Zc,{dataTransfer:0}),$R=Zt(UR),BR=Re({},sl,{relatedTarget:0}),wd=Zt(BR),zR=Re({},uo,{animationName:0,elapsedTime:0,pseudoElement:0}),WR=Zt(zR),HR=Re({},uo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qR=Zt(HR),KR=Re({},uo,{data:0}),h_=Zt(KR),GR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=YR[t])?!!e[t]:!1}function Dm(){return XR}var JR=Re({},sl,{key:function(t){if(t.key){var e=GR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?QR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dm,charCode:function(t){return t.type==="keypress"?xu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ZR=Zt(JR),ek=Re({},Zc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),d_=Zt(ek),tk=Re({},sl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dm}),nk=Zt(tk),rk=Re({},uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),ik=Zt(rk),sk=Re({},Zc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ok=Zt(sk),ak=[9,13,27,32],Vm=ur&&"CompositionEvent"in window,sa=null;ur&&"documentMode"in document&&(sa=document.documentMode);var lk=ur&&"TextEvent"in window&&!sa,aS=ur&&(!Vm||sa&&8<sa&&11>=sa),f_=" ",p_=!1;function lS(t,e){switch(t){case"keyup":return ak.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ys=!1;function uk(t,e){switch(t){case"compositionend":return uS(e);case"keypress":return e.which!==32?null:(p_=!0,f_);case"textInput":return t=e.data,t===f_&&p_?null:t;default:return null}}function ck(t,e){if(ys)return t==="compositionend"||!Vm&&lS(t,e)?(t=oS(),Iu=bm=$r=null,ys=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return aS&&e.locale!=="ko"?null:e.data;default:return null}}var hk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function m_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!hk[t.type]:e==="textarea"}function cS(t,e,n,r){$T(r),e=rc(e,"onChange"),0<e.length&&(n=new Nm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var oa=null,Ra=null;function dk(t){ES(t,0)}function eh(t){var e=ws(t);if(VT(e))return t}function fk(t,e){if(t==="change")return e}var hS=!1;if(ur){var Ed;if(ur){var Td="oninput"in document;if(!Td){var g_=document.createElement("div");g_.setAttribute("oninput","return;"),Td=typeof g_.oninput=="function"}Ed=Td}else Ed=!1;hS=Ed&&(!document.documentMode||9<document.documentMode)}function y_(){oa&&(oa.detachEvent("onpropertychange",dS),Ra=oa=null)}function dS(t){if(t.propertyName==="value"&&eh(Ra)){var e=[];cS(e,Ra,t,Am(t)),HT(dk,e)}}function pk(t,e,n){t==="focusin"?(y_(),oa=e,Ra=n,oa.attachEvent("onpropertychange",dS)):t==="focusout"&&y_()}function mk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return eh(Ra)}function gk(t,e){if(t==="click")return eh(e)}function yk(t,e){if(t==="input"||t==="change")return eh(e)}function vk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xn=typeof Object.is=="function"?Object.is:vk;function ka(t,e){if(xn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Tf.call(e,i)||!xn(t[i],e[i]))return!1}return!0}function v_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function __(t,e){var n=v_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=v_(n)}}function fS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function pS(){for(var t=window,e=Yu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Yu(t.document)}return e}function Lm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _k(t){var e=pS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&fS(n.ownerDocument.documentElement,n)){if(r!==null&&Lm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=__(n,s);var o=__(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var wk=ur&&"documentMode"in document&&11>=document.documentMode,vs=null,$f=null,aa=null,Bf=!1;function w_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Bf||vs==null||vs!==Yu(r)||(r=vs,"selectionStart"in r&&Lm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),aa&&ka(aa,r)||(aa=r,r=rc($f,"onSelect"),0<r.length&&(e=new Nm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=vs)))}function Zl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _s={animationend:Zl("Animation","AnimationEnd"),animationiteration:Zl("Animation","AnimationIteration"),animationstart:Zl("Animation","AnimationStart"),transitionend:Zl("Transition","TransitionEnd")},Sd={},mS={};ur&&(mS=document.createElement("div").style,"AnimationEvent"in window||(delete _s.animationend.animation,delete _s.animationiteration.animation,delete _s.animationstart.animation),"TransitionEvent"in window||delete _s.transitionend.transition);function th(t){if(Sd[t])return Sd[t];if(!_s[t])return t;var e=_s[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in mS)return Sd[t]=e[n];return t}var gS=th("animationend"),yS=th("animationiteration"),vS=th("animationstart"),_S=th("transitionend"),wS=new Map,E_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function di(t,e){wS.set(t,e),Zi(e,[t])}for(var Id=0;Id<E_.length;Id++){var xd=E_[Id],Ek=xd.toLowerCase(),Tk=xd[0].toUpperCase()+xd.slice(1);di(Ek,"on"+Tk)}di(gS,"onAnimationEnd");di(yS,"onAnimationIteration");di(vS,"onAnimationStart");di("dblclick","onDoubleClick");di("focusin","onFocus");di("focusout","onBlur");di(_S,"onTransitionEnd");Ws("onMouseEnter",["mouseout","mouseover"]);Ws("onMouseLeave",["mouseout","mouseover"]);Ws("onPointerEnter",["pointerout","pointerover"]);Ws("onPointerLeave",["pointerout","pointerover"]);Zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xo));function T_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ER(r,e,void 0,t),t.currentTarget=null}function ES(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;T_(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;T_(i,a,c),s=l}}}if(Ju)throw t=Mf,Ju=!1,Mf=null,t}function Te(t,e){var n=e[Kf];n===void 0&&(n=e[Kf]=new Set);var r=t+"__bubble";n.has(r)||(TS(e,t,2,!1),n.add(r))}function Ad(t,e,n){var r=0;e&&(r|=4),TS(n,t,r,e)}var eu="_reactListening"+Math.random().toString(36).slice(2);function ba(t){if(!t[eu]){t[eu]=!0,RT.forEach(function(n){n!=="selectionchange"&&(Sk.has(n)||Ad(n,!1,t),Ad(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[eu]||(e[eu]=!0,Ad("selectionchange",!1,e))}}function TS(t,e,n,r){switch(sS(e)){case 1:var i=MR;break;case 4:i=FR;break;default:i=km}n=i.bind(null,e,n,t),i=void 0,!Of||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Pd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ci(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}HT(function(){var c=s,h=Am(n),d=[];e:{var p=wS.get(t);if(p!==void 0){var g=Nm,y=t;switch(t){case"keypress":if(xu(n)===0)break e;case"keydown":case"keyup":g=ZR;break;case"focusin":y="focus",g=wd;break;case"focusout":y="blur",g=wd;break;case"beforeblur":case"afterblur":g=wd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=c_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=$R;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=nk;break;case gS:case yS:case vS:g=WR;break;case _S:g=ik;break;case"scroll":g=jR;break;case"wheel":g=ok;break;case"copy":case"cut":case"paste":g=qR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=d_}var I=(e&4)!==0,P=!I&&t==="scroll",w=I?p!==null?p+"Capture":null:p;I=[];for(var _=c,E;_!==null;){E=_;var b=E.stateNode;if(E.tag===5&&b!==null&&(E=b,w!==null&&(b=xa(_,w),b!=null&&I.push(Na(_,b,E)))),P)break;_=_.return}0<I.length&&(p=new g(p,y,null,n,h),d.push({event:p,listeners:I}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Vf&&(y=n.relatedTarget||n.fromElement)&&(Ci(y)||y[cr]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=c,y=y?Ci(y):null,y!==null&&(P=es(y),y!==P||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=c),g!==y)){if(I=c_,b="onMouseLeave",w="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(I=d_,b="onPointerLeave",w="onPointerEnter",_="pointer"),P=g==null?p:ws(g),E=y==null?p:ws(y),p=new I(b,_+"leave",g,n,h),p.target=P,p.relatedTarget=E,b=null,Ci(h)===c&&(I=new I(w,_+"enter",y,n,h),I.target=E,I.relatedTarget=P,b=I),P=b,g&&y)t:{for(I=g,w=y,_=0,E=I;E;E=as(E))_++;for(E=0,b=w;b;b=as(b))E++;for(;0<_-E;)I=as(I),_--;for(;0<E-_;)w=as(w),E--;for(;_--;){if(I===w||w!==null&&I===w.alternate)break t;I=as(I),w=as(w)}I=null}else I=null;g!==null&&S_(d,p,g,I,!1),y!==null&&P!==null&&S_(d,P,y,I,!0)}}e:{if(p=c?ws(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var V=fk;else if(m_(p))if(hS)V=yk;else{V=mk;var M=pk}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(V=gk);if(V&&(V=V(t,c))){cS(d,V,n,h);break e}M&&M(t,p,c),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&Rf(p,"number",p.value)}switch(M=c?ws(c):window,t){case"focusin":(m_(M)||M.contentEditable==="true")&&(vs=M,$f=c,aa=null);break;case"focusout":aa=$f=vs=null;break;case"mousedown":Bf=!0;break;case"contextmenu":case"mouseup":case"dragend":Bf=!1,w_(d,n,h);break;case"selectionchange":if(wk)break;case"keydown":case"keyup":w_(d,n,h)}var x;if(Vm)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else ys?lS(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(aS&&n.locale!=="ko"&&(ys||v!=="onCompositionStart"?v==="onCompositionEnd"&&ys&&(x=oS()):($r=h,bm="value"in $r?$r.value:$r.textContent,ys=!0)),M=rc(c,v),0<M.length&&(v=new h_(v,t,null,n,h),d.push({event:v,listeners:M}),x?v.data=x:(x=uS(n),x!==null&&(v.data=x)))),(x=lk?uk(t,n):ck(t,n))&&(c=rc(c,"onBeforeInput"),0<c.length&&(h=new h_("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=x))}ES(d,e)})}function Na(t,e,n){return{instance:t,listener:e,currentTarget:n}}function rc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=xa(t,n),s!=null&&r.unshift(Na(t,s,i)),s=xa(t,e),s!=null&&r.push(Na(t,s,i))),t=t.return}return r}function as(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function S_(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=xa(n,s),l!=null&&o.unshift(Na(n,l,a))):i||(l=xa(n,s),l!=null&&o.push(Na(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Ik=/\r\n?/g,xk=/\u0000|\uFFFD/g;function I_(t){return(typeof t=="string"?t:""+t).replace(Ik,`
`).replace(xk,"")}function tu(t,e,n){if(e=I_(e),I_(t)!==e&&n)throw Error(U(425))}function ic(){}var zf=null,Wf=null;function Hf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qf=typeof setTimeout=="function"?setTimeout:void 0,Ak=typeof clearTimeout=="function"?clearTimeout:void 0,x_=typeof Promise=="function"?Promise:void 0,Pk=typeof queueMicrotask=="function"?queueMicrotask:typeof x_<"u"?function(t){return x_.resolve(null).then(t).catch(Ck)}:qf;function Ck(t){setTimeout(function(){throw t})}function Cd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ca(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ca(e)}function Qr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function A_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var co=Math.random().toString(36).slice(2),Nn="__reactFiber$"+co,Da="__reactProps$"+co,cr="__reactContainer$"+co,Kf="__reactEvents$"+co,Rk="__reactListeners$"+co,kk="__reactHandles$"+co;function Ci(t){var e=t[Nn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[cr]||n[Nn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=A_(t);t!==null;){if(n=t[Nn])return n;t=A_(t)}return e}t=n,n=t.parentNode}return null}function ol(t){return t=t[Nn]||t[cr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ws(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function nh(t){return t[Da]||null}var Gf=[],Es=-1;function fi(t){return{current:t}}function Ie(t){0>Es||(t.current=Gf[Es],Gf[Es]=null,Es--)}function _e(t,e){Es++,Gf[Es]=t.current,t.current=e}var oi={},Tt=fi(oi),Mt=fi(!1),$i=oi;function Hs(t,e){var n=t.type.contextTypes;if(!n)return oi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ft(t){return t=t.childContextTypes,t!=null}function sc(){Ie(Mt),Ie(Tt)}function P_(t,e,n){if(Tt.current!==oi)throw Error(U(168));_e(Tt,e),_e(Mt,n)}function SS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,pR(t)||"Unknown",i));return Re({},n,r)}function oc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||oi,$i=Tt.current,_e(Tt,t),_e(Mt,Mt.current),!0}function C_(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=SS(t,e,$i),r.__reactInternalMemoizedMergedChildContext=t,Ie(Mt),Ie(Tt),_e(Tt,t)):Ie(Mt),_e(Mt,n)}var er=null,rh=!1,Rd=!1;function IS(t){er===null?er=[t]:er.push(t)}function bk(t){rh=!0,IS(t)}function pi(){if(!Rd&&er!==null){Rd=!0;var t=0,e=me;try{var n=er;for(me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}er=null,rh=!1}catch(i){throw er!==null&&(er=er.slice(t+1)),QT(Pm,pi),i}finally{me=e,Rd=!1}}return null}var Ts=[],Ss=0,ac=null,lc=0,nn=[],rn=0,Bi=null,nr=1,rr="";function Ii(t,e){Ts[Ss++]=lc,Ts[Ss++]=ac,ac=t,lc=e}function xS(t,e,n){nn[rn++]=nr,nn[rn++]=rr,nn[rn++]=Bi,Bi=t;var r=nr;t=rr;var i=32-wn(r)-1;r&=~(1<<i),n+=1;var s=32-wn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,nr=1<<32-wn(e)+i|n<<i|r,rr=s+t}else nr=1<<s|n<<i|r,rr=t}function Om(t){t.return!==null&&(Ii(t,1),xS(t,1,0))}function Mm(t){for(;t===ac;)ac=Ts[--Ss],Ts[Ss]=null,lc=Ts[--Ss],Ts[Ss]=null;for(;t===Bi;)Bi=nn[--rn],nn[rn]=null,rr=nn[--rn],nn[rn]=null,nr=nn[--rn],nn[rn]=null}var Yt=null,Gt=null,xe=!1,_n=null;function AS(t,e){var n=sn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function R_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Yt=t,Gt=Qr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Yt=t,Gt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Bi!==null?{id:nr,overflow:rr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=sn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Yt=t,Gt=null,!0):!1;default:return!1}}function Qf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Yf(t){if(xe){var e=Gt;if(e){var n=e;if(!R_(t,e)){if(Qf(t))throw Error(U(418));e=Qr(n.nextSibling);var r=Yt;e&&R_(t,e)?AS(r,n):(t.flags=t.flags&-4097|2,xe=!1,Yt=t)}}else{if(Qf(t))throw Error(U(418));t.flags=t.flags&-4097|2,xe=!1,Yt=t}}}function k_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Yt=t}function nu(t){if(t!==Yt)return!1;if(!xe)return k_(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Hf(t.type,t.memoizedProps)),e&&(e=Gt)){if(Qf(t))throw PS(),Error(U(418));for(;e;)AS(t,e),e=Qr(e.nextSibling)}if(k_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Gt=Qr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Gt=null}}else Gt=Yt?Qr(t.stateNode.nextSibling):null;return!0}function PS(){for(var t=Gt;t;)t=Qr(t.nextSibling)}function qs(){Gt=Yt=null,xe=!1}function Fm(t){_n===null?_n=[t]:_n.push(t)}var Nk=wr.ReactCurrentBatchConfig;function Bo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function ru(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function b_(t){var e=t._init;return e(t._payload)}function CS(t){function e(w,_){if(t){var E=w.deletions;E===null?(w.deletions=[_],w.flags|=16):E.push(_)}}function n(w,_){if(!t)return null;for(;_!==null;)e(w,_),_=_.sibling;return null}function r(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function i(w,_){return w=Zr(w,_),w.index=0,w.sibling=null,w}function s(w,_,E){return w.index=E,t?(E=w.alternate,E!==null?(E=E.index,E<_?(w.flags|=2,_):E):(w.flags|=2,_)):(w.flags|=1048576,_)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,_,E,b){return _===null||_.tag!==6?(_=Od(E,w.mode,b),_.return=w,_):(_=i(_,E),_.return=w,_)}function l(w,_,E,b){var V=E.type;return V===gs?h(w,_,E.props.children,b,E.key):_!==null&&(_.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Nr&&b_(V)===_.type)?(b=i(_,E.props),b.ref=Bo(w,_,E),b.return=w,b):(b=Nu(E.type,E.key,E.props,null,w.mode,b),b.ref=Bo(w,_,E),b.return=w,b)}function c(w,_,E,b){return _===null||_.tag!==4||_.stateNode.containerInfo!==E.containerInfo||_.stateNode.implementation!==E.implementation?(_=Md(E,w.mode,b),_.return=w,_):(_=i(_,E.children||[]),_.return=w,_)}function h(w,_,E,b,V){return _===null||_.tag!==7?(_=Oi(E,w.mode,b,V),_.return=w,_):(_=i(_,E),_.return=w,_)}function d(w,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Od(""+_,w.mode,E),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ql:return E=Nu(_.type,_.key,_.props,null,w.mode,E),E.ref=Bo(w,null,_),E.return=w,E;case ms:return _=Md(_,w.mode,E),_.return=w,_;case Nr:var b=_._init;return d(w,b(_._payload),E)}if(Qo(_)||Mo(_))return _=Oi(_,w.mode,E,null),_.return=w,_;ru(w,_)}return null}function p(w,_,E,b){var V=_!==null?_.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return V!==null?null:a(w,_,""+E,b);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ql:return E.key===V?l(w,_,E,b):null;case ms:return E.key===V?c(w,_,E,b):null;case Nr:return V=E._init,p(w,_,V(E._payload),b)}if(Qo(E)||Mo(E))return V!==null?null:h(w,_,E,b,null);ru(w,E)}return null}function g(w,_,E,b,V){if(typeof b=="string"&&b!==""||typeof b=="number")return w=w.get(E)||null,a(_,w,""+b,V);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ql:return w=w.get(b.key===null?E:b.key)||null,l(_,w,b,V);case ms:return w=w.get(b.key===null?E:b.key)||null,c(_,w,b,V);case Nr:var M=b._init;return g(w,_,E,M(b._payload),V)}if(Qo(b)||Mo(b))return w=w.get(E)||null,h(_,w,b,V,null);ru(_,b)}return null}function y(w,_,E,b){for(var V=null,M=null,x=_,v=_=0,S=null;x!==null&&v<E.length;v++){x.index>v?(S=x,x=null):S=x.sibling;var A=p(w,x,E[v],b);if(A===null){x===null&&(x=S);break}t&&x&&A.alternate===null&&e(w,x),_=s(A,_,v),M===null?V=A:M.sibling=A,M=A,x=S}if(v===E.length)return n(w,x),xe&&Ii(w,v),V;if(x===null){for(;v<E.length;v++)x=d(w,E[v],b),x!==null&&(_=s(x,_,v),M===null?V=x:M.sibling=x,M=x);return xe&&Ii(w,v),V}for(x=r(w,x);v<E.length;v++)S=g(x,w,v,E[v],b),S!==null&&(t&&S.alternate!==null&&x.delete(S.key===null?v:S.key),_=s(S,_,v),M===null?V=S:M.sibling=S,M=S);return t&&x.forEach(function(N){return e(w,N)}),xe&&Ii(w,v),V}function I(w,_,E,b){var V=Mo(E);if(typeof V!="function")throw Error(U(150));if(E=V.call(E),E==null)throw Error(U(151));for(var M=V=null,x=_,v=_=0,S=null,A=E.next();x!==null&&!A.done;v++,A=E.next()){x.index>v?(S=x,x=null):S=x.sibling;var N=p(w,x,A.value,b);if(N===null){x===null&&(x=S);break}t&&x&&N.alternate===null&&e(w,x),_=s(N,_,v),M===null?V=N:M.sibling=N,M=N,x=S}if(A.done)return n(w,x),xe&&Ii(w,v),V;if(x===null){for(;!A.done;v++,A=E.next())A=d(w,A.value,b),A!==null&&(_=s(A,_,v),M===null?V=A:M.sibling=A,M=A);return xe&&Ii(w,v),V}for(x=r(w,x);!A.done;v++,A=E.next())A=g(x,w,v,A.value,b),A!==null&&(t&&A.alternate!==null&&x.delete(A.key===null?v:A.key),_=s(A,_,v),M===null?V=A:M.sibling=A,M=A);return t&&x.forEach(function(D){return e(w,D)}),xe&&Ii(w,v),V}function P(w,_,E,b){if(typeof E=="object"&&E!==null&&E.type===gs&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case ql:e:{for(var V=E.key,M=_;M!==null;){if(M.key===V){if(V=E.type,V===gs){if(M.tag===7){n(w,M.sibling),_=i(M,E.props.children),_.return=w,w=_;break e}}else if(M.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Nr&&b_(V)===M.type){n(w,M.sibling),_=i(M,E.props),_.ref=Bo(w,M,E),_.return=w,w=_;break e}n(w,M);break}else e(w,M);M=M.sibling}E.type===gs?(_=Oi(E.props.children,w.mode,b,E.key),_.return=w,w=_):(b=Nu(E.type,E.key,E.props,null,w.mode,b),b.ref=Bo(w,_,E),b.return=w,w=b)}return o(w);case ms:e:{for(M=E.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===E.containerInfo&&_.stateNode.implementation===E.implementation){n(w,_.sibling),_=i(_,E.children||[]),_.return=w,w=_;break e}else{n(w,_);break}else e(w,_);_=_.sibling}_=Md(E,w.mode,b),_.return=w,w=_}return o(w);case Nr:return M=E._init,P(w,_,M(E._payload),b)}if(Qo(E))return y(w,_,E,b);if(Mo(E))return I(w,_,E,b);ru(w,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,_!==null&&_.tag===6?(n(w,_.sibling),_=i(_,E),_.return=w,w=_):(n(w,_),_=Od(E,w.mode,b),_.return=w,w=_),o(w)):n(w,_)}return P}var Ks=CS(!0),RS=CS(!1),uc=fi(null),cc=null,Is=null,jm=null;function Um(){jm=Is=cc=null}function $m(t){var e=uc.current;Ie(uc),t._currentValue=e}function Xf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ms(t,e){cc=t,jm=Is=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ot=!0),t.firstContext=null)}function un(t){var e=t._currentValue;if(jm!==t)if(t={context:t,memoizedValue:e,next:null},Is===null){if(cc===null)throw Error(U(308));Is=t,cc.dependencies={lanes:0,firstContext:t}}else Is=Is.next=t;return e}var Ri=null;function Bm(t){Ri===null?Ri=[t]:Ri.push(t)}function kS(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Bm(e)):(n.next=i.next,i.next=n),e.interleaved=n,hr(t,r)}function hr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Dr=!1;function zm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function lr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ue&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,hr(t,n)}return i=r.interleaved,i===null?(e.next=e,Bm(r)):(e.next=i.next,i.next=e),r.interleaved=e,hr(t,n)}function Au(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Cm(t,n)}}function N_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hc(t,e,n,r){var i=t.updateQueue;Dr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,I=a;switch(p=e,g=n,I.tag){case 1:if(y=I.payload,typeof y=="function"){d=y.call(g,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=I.payload,p=typeof y=="function"?y.call(g,d,p):y,p==null)break e;d=Re({},d,p);break e;case 2:Dr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,l=d):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Wi|=o,t.lanes=o,t.memoizedState=d}}function D_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var al={},On=fi(al),Va=fi(al),La=fi(al);function ki(t){if(t===al)throw Error(U(174));return t}function Wm(t,e){switch(_e(La,e),_e(Va,t),_e(On,al),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:bf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=bf(e,t)}Ie(On),_e(On,e)}function Gs(){Ie(On),Ie(Va),Ie(La)}function NS(t){ki(La.current);var e=ki(On.current),n=bf(e,t.type);e!==n&&(_e(Va,t),_e(On,n))}function Hm(t){Va.current===t&&(Ie(On),Ie(Va))}var Ae=fi(0);function dc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kd=[];function qm(){for(var t=0;t<kd.length;t++)kd[t]._workInProgressVersionPrimary=null;kd.length=0}var Pu=wr.ReactCurrentDispatcher,bd=wr.ReactCurrentBatchConfig,zi=0,Ce=null,He=null,Xe=null,fc=!1,la=!1,Oa=0,Dk=0;function pt(){throw Error(U(321))}function Km(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!xn(t[n],e[n]))return!1;return!0}function Gm(t,e,n,r,i,s){if(zi=s,Ce=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pu.current=t===null||t.memoizedState===null?Mk:Fk,t=n(r,i),la){s=0;do{if(la=!1,Oa=0,25<=s)throw Error(U(301));s+=1,Xe=He=null,e.updateQueue=null,Pu.current=jk,t=n(r,i)}while(la)}if(Pu.current=pc,e=He!==null&&He.next!==null,zi=0,Xe=He=Ce=null,fc=!1,e)throw Error(U(300));return t}function Qm(){var t=Oa!==0;return Oa=0,t}function Rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Ce.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function cn(){if(He===null){var t=Ce.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Xe===null?Ce.memoizedState:Xe.next;if(e!==null)Xe=e,He=t;else{if(t===null)throw Error(U(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Xe===null?Ce.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function Ma(t,e){return typeof e=="function"?e(t):e}function Nd(t){var e=cn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=He,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((zi&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Ce.lanes|=h,Wi|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,xn(r,e.memoizedState)||(Ot=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ce.lanes|=s,Wi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Dd(t){var e=cn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);xn(s,e.memoizedState)||(Ot=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function DS(){}function VS(t,e){var n=Ce,r=cn(),i=e(),s=!xn(r.memoizedState,i);if(s&&(r.memoizedState=i,Ot=!0),r=r.queue,Ym(MS.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,Fa(9,OS.bind(null,n,r,i,e),void 0,null),Je===null)throw Error(U(349));zi&30||LS(n,e,i)}return i}function LS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ce.updateQueue,e===null?(e={lastEffect:null,stores:null},Ce.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function OS(t,e,n,r){e.value=n,e.getSnapshot=r,FS(e)&&jS(t)}function MS(t,e,n){return n(function(){FS(e)&&jS(t)})}function FS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xn(t,n)}catch{return!0}}function jS(t){var e=hr(t,1);e!==null&&En(e,t,1,-1)}function V_(t){var e=Rn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:t},e.queue=t,t=t.dispatch=Ok.bind(null,Ce,t),[e.memoizedState,t]}function Fa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ce.updateQueue,e===null?(e={lastEffect:null,stores:null},Ce.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function US(){return cn().memoizedState}function Cu(t,e,n,r){var i=Rn();Ce.flags|=t,i.memoizedState=Fa(1|e,n,void 0,r===void 0?null:r)}function ih(t,e,n,r){var i=cn();r=r===void 0?null:r;var s=void 0;if(He!==null){var o=He.memoizedState;if(s=o.destroy,r!==null&&Km(r,o.deps)){i.memoizedState=Fa(e,n,s,r);return}}Ce.flags|=t,i.memoizedState=Fa(1|e,n,s,r)}function L_(t,e){return Cu(8390656,8,t,e)}function Ym(t,e){return ih(2048,8,t,e)}function $S(t,e){return ih(4,2,t,e)}function BS(t,e){return ih(4,4,t,e)}function zS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function WS(t,e,n){return n=n!=null?n.concat([t]):null,ih(4,4,zS.bind(null,e,t),n)}function Xm(){}function HS(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Km(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function qS(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Km(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function KS(t,e,n){return zi&21?(xn(n,e)||(n=JT(),Ce.lanes|=n,Wi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ot=!0),t.memoizedState=n)}function Vk(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var r=bd.transition;bd.transition={};try{t(!1),e()}finally{me=n,bd.transition=r}}function GS(){return cn().memoizedState}function Lk(t,e,n){var r=Jr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},QS(t))YS(e,n);else if(n=kS(t,e,n,r),n!==null){var i=Rt();En(n,t,r,i),XS(n,e,r)}}function Ok(t,e,n){var r=Jr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(QS(t))YS(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,xn(a,o)){var l=e.interleaved;l===null?(i.next=i,Bm(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=kS(t,e,i,r),n!==null&&(i=Rt(),En(n,t,r,i),XS(n,e,r))}}function QS(t){var e=t.alternate;return t===Ce||e!==null&&e===Ce}function YS(t,e){la=fc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function XS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Cm(t,n)}}var pc={readContext:un,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},Mk={readContext:un,useCallback:function(t,e){return Rn().memoizedState=[t,e===void 0?null:e],t},useContext:un,useEffect:L_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Cu(4194308,4,zS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Cu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Cu(4,2,t,e)},useMemo:function(t,e){var n=Rn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Lk.bind(null,Ce,t),[r.memoizedState,t]},useRef:function(t){var e=Rn();return t={current:t},e.memoizedState=t},useState:V_,useDebugValue:Xm,useDeferredValue:function(t){return Rn().memoizedState=t},useTransition:function(){var t=V_(!1),e=t[0];return t=Vk.bind(null,t[1]),Rn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ce,i=Rn();if(xe){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Je===null)throw Error(U(349));zi&30||LS(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,L_(MS.bind(null,r,s,t),[t]),r.flags|=2048,Fa(9,OS.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Rn(),e=Je.identifierPrefix;if(xe){var n=rr,r=nr;n=(r&~(1<<32-wn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Oa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Dk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Fk={readContext:un,useCallback:HS,useContext:un,useEffect:Ym,useImperativeHandle:WS,useInsertionEffect:$S,useLayoutEffect:BS,useMemo:qS,useReducer:Nd,useRef:US,useState:function(){return Nd(Ma)},useDebugValue:Xm,useDeferredValue:function(t){var e=cn();return KS(e,He.memoizedState,t)},useTransition:function(){var t=Nd(Ma)[0],e=cn().memoizedState;return[t,e]},useMutableSource:DS,useSyncExternalStore:VS,useId:GS,unstable_isNewReconciler:!1},jk={readContext:un,useCallback:HS,useContext:un,useEffect:Ym,useImperativeHandle:WS,useInsertionEffect:$S,useLayoutEffect:BS,useMemo:qS,useReducer:Dd,useRef:US,useState:function(){return Dd(Ma)},useDebugValue:Xm,useDeferredValue:function(t){var e=cn();return He===null?e.memoizedState=t:KS(e,He.memoizedState,t)},useTransition:function(){var t=Dd(Ma)[0],e=cn().memoizedState;return[t,e]},useMutableSource:DS,useSyncExternalStore:VS,useId:GS,unstable_isNewReconciler:!1};function yn(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Jf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sh={isMounted:function(t){return(t=t._reactInternals)?es(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Rt(),i=Jr(t),s=lr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Yr(t,s,i),e!==null&&(En(e,t,i,r),Au(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Rt(),i=Jr(t),s=lr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Yr(t,s,i),e!==null&&(En(e,t,i,r),Au(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Rt(),r=Jr(t),i=lr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Yr(t,i,r),e!==null&&(En(e,t,r,n),Au(e,t,r))}};function O_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ka(n,r)||!ka(i,s):!0}function JS(t,e,n){var r=!1,i=oi,s=e.contextType;return typeof s=="object"&&s!==null?s=un(s):(i=Ft(e)?$i:Tt.current,r=e.contextTypes,s=(r=r!=null)?Hs(t,i):oi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function M_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&sh.enqueueReplaceState(e,e.state,null)}function Zf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},zm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=un(s):(s=Ft(e)?$i:Tt.current,i.context=Hs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Jf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&sh.enqueueReplaceState(i,i.state,null),hc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Qs(t,e){try{var n="",r=e;do n+=fR(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Vd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ep(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Uk=typeof WeakMap=="function"?WeakMap:Map;function ZS(t,e,n){n=lr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){gc||(gc=!0,cp=r),ep(t,e)},n}function eI(t,e,n){n=lr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ep(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ep(t,e),typeof r!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function F_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Uk;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=eb.bind(null,t,e,n),e.then(t,t))}function j_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function U_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=lr(-1,1),e.tag=2,Yr(n,e,1))),n.lanes|=1),t)}var $k=wr.ReactCurrentOwner,Ot=!1;function At(t,e,n,r){e.child=t===null?RS(e,null,n,r):Ks(e,t.child,n,r)}function $_(t,e,n,r,i){n=n.render;var s=e.ref;return Ms(e,i),r=Gm(t,e,n,r,s,i),n=Qm(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,dr(t,e,i)):(xe&&n&&Om(e),e.flags|=1,At(t,e,r,i),e.child)}function B_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!sg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,tI(t,e,s,r,i)):(t=Nu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ka,n(o,r)&&t.ref===e.ref)return dr(t,e,i)}return e.flags|=1,t=Zr(s,r),t.ref=e.ref,t.return=e,e.child=t}function tI(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ka(s,r)&&t.ref===e.ref)if(Ot=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ot=!0);else return e.lanes=t.lanes,dr(t,e,i)}return tp(t,e,n,r,i)}function nI(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(As,Kt),Kt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(As,Kt),Kt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,_e(As,Kt),Kt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,_e(As,Kt),Kt|=r;return At(t,e,i,n),e.child}function rI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function tp(t,e,n,r,i){var s=Ft(n)?$i:Tt.current;return s=Hs(e,s),Ms(e,i),n=Gm(t,e,n,r,s,i),r=Qm(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,dr(t,e,i)):(xe&&r&&Om(e),e.flags|=1,At(t,e,n,i),e.child)}function z_(t,e,n,r,i){if(Ft(n)){var s=!0;oc(e)}else s=!1;if(Ms(e,i),e.stateNode===null)Ru(t,e),JS(e,n,r),Zf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=un(c):(c=Ft(n)?$i:Tt.current,c=Hs(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&M_(e,o,r,c),Dr=!1;var p=e.memoizedState;o.state=p,hc(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Mt.current||Dr?(typeof h=="function"&&(Jf(e,n,h,r),l=e.memoizedState),(a=Dr||O_(e,n,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,bS(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:yn(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=un(l):(l=Ft(n)?$i:Tt.current,l=Hs(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&M_(e,o,r,l),Dr=!1,p=e.memoizedState,o.state=p,hc(e,r,o,i);var y=e.memoizedState;a!==d||p!==y||Mt.current||Dr?(typeof g=="function"&&(Jf(e,n,g,r),y=e.memoizedState),(c=Dr||O_(e,n,c,r,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return np(t,e,n,r,s,i)}function np(t,e,n,r,i,s){rI(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&C_(e,n,!1),dr(t,e,s);r=e.stateNode,$k.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ks(e,t.child,null,s),e.child=Ks(e,null,a,s)):At(t,e,a,s),e.memoizedState=r.state,i&&C_(e,n,!0),e.child}function iI(t){var e=t.stateNode;e.pendingContext?P_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&P_(t,e.context,!1),Wm(t,e.containerInfo)}function W_(t,e,n,r,i){return qs(),Fm(i),e.flags|=256,At(t,e,n,r),e.child}var rp={dehydrated:null,treeContext:null,retryLane:0};function ip(t){return{baseLanes:t,cachePool:null,transitions:null}}function sI(t,e,n){var r=e.pendingProps,i=Ae.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),_e(Ae,i&1),t===null)return Yf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=lh(o,r,0,null),t=Oi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ip(n),e.memoizedState=rp,t):Jm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Bk(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Zr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Zr(a,s):(s=Oi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?ip(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=rp,r}return s=t.child,t=s.sibling,r=Zr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Jm(t,e){return e=lh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function iu(t,e,n,r){return r!==null&&Fm(r),Ks(e,t.child,null,n),t=Jm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Bk(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Vd(Error(U(422))),iu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=lh({mode:"visible",children:r.children},i,0,null),s=Oi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ks(e,t.child,null,o),e.child.memoizedState=ip(o),e.memoizedState=rp,s);if(!(e.mode&1))return iu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(U(419)),r=Vd(s,r,void 0),iu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ot||a){if(r=Je,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,hr(t,i),En(r,t,i,-1))}return ig(),r=Vd(Error(U(421))),iu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=tb.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Gt=Qr(i.nextSibling),Yt=e,xe=!0,_n=null,t!==null&&(nn[rn++]=nr,nn[rn++]=rr,nn[rn++]=Bi,nr=t.id,rr=t.overflow,Bi=e),e=Jm(e,r.children),e.flags|=4096,e)}function H_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Xf(t.return,e,n)}function Ld(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function oI(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(At(t,e,r.children,n),r=Ae.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&H_(t,n,e);else if(t.tag===19)H_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_e(Ae,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&dc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ld(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&dc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ld(e,!0,n,null,s);break;case"together":Ld(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ru(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function dr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Wi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Zr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Zr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function zk(t,e,n){switch(e.tag){case 3:iI(e),qs();break;case 5:NS(e);break;case 1:Ft(e.type)&&oc(e);break;case 4:Wm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;_e(uc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_e(Ae,Ae.current&1),e.flags|=128,null):n&e.child.childLanes?sI(t,e,n):(_e(Ae,Ae.current&1),t=dr(t,e,n),t!==null?t.sibling:null);_e(Ae,Ae.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return oI(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_e(Ae,Ae.current),r)break;return null;case 22:case 23:return e.lanes=0,nI(t,e,n)}return dr(t,e,n)}var aI,sp,lI,uI;aI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sp=function(){};lI=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ki(On.current);var s=null;switch(n){case"input":i=Pf(t,i),r=Pf(t,r),s=[];break;case"select":i=Re({},i,{value:void 0}),r=Re({},r,{value:void 0}),s=[];break;case"textarea":i=kf(t,i),r=kf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ic)}Nf(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Sa.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Sa.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Te("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};uI=function(t,e,n,r){n!==r&&(e.flags|=4)};function zo(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Wk(t,e,n){var r=e.pendingProps;switch(Mm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return Ft(e.type)&&sc(),mt(e),null;case 3:return r=e.stateNode,Gs(),Ie(Mt),Ie(Tt),qm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(nu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_n!==null&&(fp(_n),_n=null))),sp(t,e),mt(e),null;case 5:Hm(e);var i=ki(La.current);if(n=e.type,t!==null&&e.stateNode!=null)lI(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return mt(e),null}if(t=ki(On.current),nu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Nn]=e,r[Da]=s,t=(e.mode&1)!==0,n){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(i=0;i<Xo.length;i++)Te(Xo[i],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":e_(r,s),Te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Te("invalid",r);break;case"textarea":n_(r,s),Te("invalid",r)}Nf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&tu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&tu(r.textContent,a,t),i=["children",""+a]):Sa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Te("scroll",r)}switch(n){case"input":Kl(r),t_(r,s,!0);break;case"textarea":Kl(r),r_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ic)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=MT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Nn]=e,t[Da]=r,aI(t,e,!1,!1),e.stateNode=t;e:{switch(o=Df(n,r),n){case"dialog":Te("cancel",t),Te("close",t),i=r;break;case"iframe":case"object":case"embed":Te("load",t),i=r;break;case"video":case"audio":for(i=0;i<Xo.length;i++)Te(Xo[i],t);i=r;break;case"source":Te("error",t),i=r;break;case"img":case"image":case"link":Te("error",t),Te("load",t),i=r;break;case"details":Te("toggle",t),i=r;break;case"input":e_(t,r),i=Pf(t,r),Te("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Re({},r,{value:void 0}),Te("invalid",t);break;case"textarea":n_(t,r),i=kf(t,r),Te("invalid",t);break;default:i=r}Nf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?UT(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&FT(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ia(t,l):typeof l=="number"&&Ia(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Sa.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Te("scroll",t):l!=null&&Tm(t,s,l,o))}switch(n){case"input":Kl(t),t_(t,r,!1);break;case"textarea":Kl(t),r_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+si(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ds(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ds(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ic)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)uI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=ki(La.current),ki(On.current),nu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Nn]=e,(s=r.nodeValue!==n)&&(t=Yt,t!==null))switch(t.tag){case 3:tu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&tu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Nn]=e,e.stateNode=r}return mt(e),null;case 13:if(Ie(Ae),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&Gt!==null&&e.mode&1&&!(e.flags&128))PS(),qs(),e.flags|=98560,s=!1;else if(s=nu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Nn]=e}else qs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),s=!1}else _n!==null&&(fp(_n),_n=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ae.current&1?Ke===0&&(Ke=3):ig())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return Gs(),sp(t,e),t===null&&ba(e.stateNode.containerInfo),mt(e),null;case 10:return $m(e.type._context),mt(e),null;case 17:return Ft(e.type)&&sc(),mt(e),null;case 19:if(Ie(Ae),s=e.memoizedState,s===null)return mt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)zo(s,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=dc(t),o!==null){for(e.flags|=128,zo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(Ae,Ae.current&1|2),e.child}t=t.sibling}s.tail!==null&&Me()>Ys&&(e.flags|=128,r=!0,zo(s,!1),e.lanes=4194304)}else{if(!r)if(t=dc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),zo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!xe)return mt(e),null}else 2*Me()-s.renderingStartTime>Ys&&n!==1073741824&&(e.flags|=128,r=!0,zo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Me(),e.sibling=null,n=Ae.current,_e(Ae,r?n&1|2:n&1),e):(mt(e),null);case 22:case 23:return rg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Kt&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function Hk(t,e){switch(Mm(e),e.tag){case 1:return Ft(e.type)&&sc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Gs(),Ie(Mt),Ie(Tt),qm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Hm(e),null;case 13:if(Ie(Ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));qs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(Ae),null;case 4:return Gs(),null;case 10:return $m(e.type._context),null;case 22:case 23:return rg(),null;case 24:return null;default:return null}}var su=!1,vt=!1,qk=typeof WeakSet=="function"?WeakSet:Set,W=null;function xs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(t,e,r)}else n.current=null}function op(t,e,n){try{n()}catch(r){Le(t,e,r)}}var q_=!1;function Kk(t,e){if(zf=tc,t=pS(),Lm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)p=d,d=g;for(;;){if(d===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(g=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wf={focusedElem:t,selectionRange:n},tc=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var I=y.memoizedProps,P=y.memoizedState,w=e.stateNode,_=w.getSnapshotBeforeUpdate(e.elementType===e.type?I:yn(e.type,I),P);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(b){Le(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return y=q_,q_=!1,y}function ua(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&op(e,n,s)}i=i.next}while(i!==r)}}function oh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ap(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cI(t){var e=t.alternate;e!==null&&(t.alternate=null,cI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Nn],delete e[Da],delete e[Kf],delete e[Rk],delete e[kk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function hI(t){return t.tag===5||t.tag===3||t.tag===4}function K_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ic));else if(r!==4&&(t=t.child,t!==null))for(lp(t,e,n),t=t.sibling;t!==null;)lp(t,e,n),t=t.sibling}function up(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(up(t,e,n),t=t.sibling;t!==null;)up(t,e,n),t=t.sibling}var nt=null,vn=!1;function Pr(t,e,n){for(n=n.child;n!==null;)dI(t,e,n),n=n.sibling}function dI(t,e,n){if(Ln&&typeof Ln.onCommitFiberUnmount=="function")try{Ln.onCommitFiberUnmount(Jc,n)}catch{}switch(n.tag){case 5:vt||xs(n,e);case 6:var r=nt,i=vn;nt=null,Pr(t,e,n),nt=r,vn=i,nt!==null&&(vn?(t=nt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(vn?(t=nt,n=n.stateNode,t.nodeType===8?Cd(t.parentNode,n):t.nodeType===1&&Cd(t,n),Ca(t)):Cd(nt,n.stateNode));break;case 4:r=nt,i=vn,nt=n.stateNode.containerInfo,vn=!0,Pr(t,e,n),nt=r,vn=i;break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&op(n,e,o),i=i.next}while(i!==r)}Pr(t,e,n);break;case 1:if(!vt&&(xs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Le(n,e,a)}Pr(t,e,n);break;case 21:Pr(t,e,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,Pr(t,e,n),vt=r):Pr(t,e,n);break;default:Pr(t,e,n)}}function G_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new qk),e.forEach(function(r){var i=nb.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function dn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:nt=a.stateNode,vn=!1;break e;case 3:nt=a.stateNode.containerInfo,vn=!0;break e;case 4:nt=a.stateNode.containerInfo,vn=!0;break e}a=a.return}if(nt===null)throw Error(U(160));dI(s,o,i),nt=null,vn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Le(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fI(e,t),e=e.sibling}function fI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dn(e,t),Cn(t),r&4){try{ua(3,t,t.return),oh(3,t)}catch(I){Le(t,t.return,I)}try{ua(5,t,t.return)}catch(I){Le(t,t.return,I)}}break;case 1:dn(e,t),Cn(t),r&512&&n!==null&&xs(n,n.return);break;case 5:if(dn(e,t),Cn(t),r&512&&n!==null&&xs(n,n.return),t.flags&32){var i=t.stateNode;try{Ia(i,"")}catch(I){Le(t,t.return,I)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&LT(i,s),Df(a,o);var c=Df(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?UT(i,d):h==="dangerouslySetInnerHTML"?FT(i,d):h==="children"?Ia(i,d):Tm(i,h,d,c)}switch(a){case"input":Cf(i,s);break;case"textarea":OT(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Ds(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?Ds(i,!!s.multiple,s.defaultValue,!0):Ds(i,!!s.multiple,s.multiple?[]:"",!1))}i[Da]=s}catch(I){Le(t,t.return,I)}}break;case 6:if(dn(e,t),Cn(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(I){Le(t,t.return,I)}}break;case 3:if(dn(e,t),Cn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ca(e.containerInfo)}catch(I){Le(t,t.return,I)}break;case 4:dn(e,t),Cn(t);break;case 13:dn(e,t),Cn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(tg=Me())),r&4&&G_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(c=vt)||h,dn(e,t),vt=c):dn(e,t),Cn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(W=t,h=t.child;h!==null;){for(d=W=h;W!==null;){switch(p=W,g=p.child,p.tag){case 0:case 11:case 14:case 15:ua(4,p,p.return);break;case 1:xs(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(I){Le(r,n,I)}}break;case 5:xs(p,p.return);break;case 22:if(p.memoizedState!==null){Y_(d);continue}}g!==null?(g.return=p,W=g):Y_(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=jT("display",o))}catch(I){Le(t,t.return,I)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(I){Le(t,t.return,I)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:dn(e,t),Cn(t),r&4&&G_(t);break;case 21:break;default:dn(e,t),Cn(t)}}function Cn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(hI(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ia(i,""),r.flags&=-33);var s=K_(t);up(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=K_(t);lp(t,a,o);break;default:throw Error(U(161))}}catch(l){Le(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Gk(t,e,n){W=t,pI(t)}function pI(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var i=W,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||su;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||vt;a=su;var c=vt;if(su=o,(vt=l)&&!c)for(W=i;W!==null;)o=W,l=o.child,o.tag===22&&o.memoizedState!==null?X_(i):l!==null?(l.return=o,W=l):X_(i);for(;s!==null;)W=s,pI(s),s=s.sibling;W=i,su=a,vt=c}Q_(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,W=s):Q_(t)}}function Q_(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||oh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:yn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&D_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}D_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Ca(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}vt||e.flags&512&&ap(e)}catch(p){Le(e,e.return,p)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function Y_(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function X_(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{oh(4,e)}catch(l){Le(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Le(e,i,l)}}var s=e.return;try{ap(e)}catch(l){Le(e,s,l)}break;case 5:var o=e.return;try{ap(e)}catch(l){Le(e,o,l)}}}catch(l){Le(e,e.return,l)}if(e===t){W=null;break}var a=e.sibling;if(a!==null){a.return=e.return,W=a;break}W=e.return}}var Qk=Math.ceil,mc=wr.ReactCurrentDispatcher,Zm=wr.ReactCurrentOwner,an=wr.ReactCurrentBatchConfig,ue=0,Je=null,Be=null,at=0,Kt=0,As=fi(0),Ke=0,ja=null,Wi=0,ah=0,eg=0,ca=null,Vt=null,tg=0,Ys=1/0,Zn=null,gc=!1,cp=null,Xr=null,ou=!1,Br=null,yc=0,ha=0,hp=null,ku=-1,bu=0;function Rt(){return ue&6?Me():ku!==-1?ku:ku=Me()}function Jr(t){return t.mode&1?ue&2&&at!==0?at&-at:Nk.transition!==null?(bu===0&&(bu=JT()),bu):(t=me,t!==0||(t=window.event,t=t===void 0?16:sS(t.type)),t):1}function En(t,e,n,r){if(50<ha)throw ha=0,hp=null,Error(U(185));il(t,n,r),(!(ue&2)||t!==Je)&&(t===Je&&(!(ue&2)&&(ah|=n),Ke===4&&Lr(t,at)),jt(t,r),n===1&&ue===0&&!(e.mode&1)&&(Ys=Me()+500,rh&&pi()))}function jt(t,e){var n=t.callbackNode;NR(t,e);var r=ec(t,t===Je?at:0);if(r===0)n!==null&&o_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&o_(n),e===1)t.tag===0?bk(J_.bind(null,t)):IS(J_.bind(null,t)),Pk(function(){!(ue&6)&&pi()}),n=null;else{switch(ZT(r)){case 1:n=Pm;break;case 4:n=YT;break;case 16:n=Zu;break;case 536870912:n=XT;break;default:n=Zu}n=TI(n,mI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mI(t,e){if(ku=-1,bu=0,ue&6)throw Error(U(327));var n=t.callbackNode;if(Fs()&&t.callbackNode!==n)return null;var r=ec(t,t===Je?at:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=vc(t,r);else{e=r;var i=ue;ue|=2;var s=yI();(Je!==t||at!==e)&&(Zn=null,Ys=Me()+500,Li(t,e));do try{Jk();break}catch(a){gI(t,a)}while(!0);Um(),mc.current=s,ue=i,Be!==null?e=0:(Je=null,at=0,e=Ke)}if(e!==0){if(e===2&&(i=Ff(t),i!==0&&(r=i,e=dp(t,i))),e===1)throw n=ja,Li(t,0),Lr(t,r),jt(t,Me()),n;if(e===6)Lr(t,r);else{if(i=t.current.alternate,!(r&30)&&!Yk(i)&&(e=vc(t,r),e===2&&(s=Ff(t),s!==0&&(r=s,e=dp(t,s))),e===1))throw n=ja,Li(t,0),Lr(t,r),jt(t,Me()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:xi(t,Vt,Zn);break;case 3:if(Lr(t,r),(r&130023424)===r&&(e=tg+500-Me(),10<e)){if(ec(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Rt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=qf(xi.bind(null,t,Vt,Zn),e);break}xi(t,Vt,Zn);break;case 4:if(Lr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-wn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Qk(r/1960))-r,10<r){t.timeoutHandle=qf(xi.bind(null,t,Vt,Zn),r);break}xi(t,Vt,Zn);break;case 5:xi(t,Vt,Zn);break;default:throw Error(U(329))}}}return jt(t,Me()),t.callbackNode===n?mI.bind(null,t):null}function dp(t,e){var n=ca;return t.current.memoizedState.isDehydrated&&(Li(t,e).flags|=256),t=vc(t,e),t!==2&&(e=Vt,Vt=n,e!==null&&fp(e)),t}function fp(t){Vt===null?Vt=t:Vt.push.apply(Vt,t)}function Yk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!xn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Lr(t,e){for(e&=~eg,e&=~ah,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wn(e),r=1<<n;t[n]=-1,e&=~r}}function J_(t){if(ue&6)throw Error(U(327));Fs();var e=ec(t,0);if(!(e&1))return jt(t,Me()),null;var n=vc(t,e);if(t.tag!==0&&n===2){var r=Ff(t);r!==0&&(e=r,n=dp(t,r))}if(n===1)throw n=ja,Li(t,0),Lr(t,e),jt(t,Me()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xi(t,Vt,Zn),jt(t,Me()),null}function ng(t,e){var n=ue;ue|=1;try{return t(e)}finally{ue=n,ue===0&&(Ys=Me()+500,rh&&pi())}}function Hi(t){Br!==null&&Br.tag===0&&!(ue&6)&&Fs();var e=ue;ue|=1;var n=an.transition,r=me;try{if(an.transition=null,me=1,t)return t()}finally{me=r,an.transition=n,ue=e,!(ue&6)&&pi()}}function rg(){Kt=As.current,Ie(As)}function Li(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Ak(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(Mm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sc();break;case 3:Gs(),Ie(Mt),Ie(Tt),qm();break;case 5:Hm(r);break;case 4:Gs();break;case 13:Ie(Ae);break;case 19:Ie(Ae);break;case 10:$m(r.type._context);break;case 22:case 23:rg()}n=n.return}if(Je=t,Be=t=Zr(t.current,null),at=Kt=e,Ke=0,ja=null,eg=ah=Wi=0,Vt=ca=null,Ri!==null){for(e=0;e<Ri.length;e++)if(n=Ri[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ri=null}return t}function gI(t,e){do{var n=Be;try{if(Um(),Pu.current=pc,fc){for(var r=Ce.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fc=!1}if(zi=0,Xe=He=Ce=null,la=!1,Oa=0,Zm.current=null,n===null||n.return===null){Ke=1,ja=e,Be=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=at,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=j_(o);if(g!==null){g.flags&=-257,U_(g,o,a,s,e),g.mode&1&&F_(s,c,e),e=g,l=c;var y=e.updateQueue;if(y===null){var I=new Set;I.add(l),e.updateQueue=I}else y.add(l);break e}else{if(!(e&1)){F_(s,c,e),ig();break e}l=Error(U(426))}}else if(xe&&a.mode&1){var P=j_(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),U_(P,o,a,s,e),Fm(Qs(l,a));break e}}s=l=Qs(l,a),Ke!==4&&(Ke=2),ca===null?ca=[s]:ca.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=ZS(s,l,e);N_(s,w);break e;case 1:a=l;var _=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Xr===null||!Xr.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=eI(s,a,e);N_(s,b);break e}}s=s.return}while(s!==null)}_I(n)}catch(V){e=V,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function yI(){var t=mc.current;return mc.current=pc,t===null?pc:t}function ig(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Je===null||!(Wi&268435455)&&!(ah&268435455)||Lr(Je,at)}function vc(t,e){var n=ue;ue|=2;var r=yI();(Je!==t||at!==e)&&(Zn=null,Li(t,e));do try{Xk();break}catch(i){gI(t,i)}while(!0);if(Um(),ue=n,mc.current=r,Be!==null)throw Error(U(261));return Je=null,at=0,Ke}function Xk(){for(;Be!==null;)vI(Be)}function Jk(){for(;Be!==null&&!SR();)vI(Be)}function vI(t){var e=EI(t.alternate,t,Kt);t.memoizedProps=t.pendingProps,e===null?_I(t):Be=e,Zm.current=null}function _I(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Hk(n,e),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,Be=null;return}}else if(n=Wk(n,e,Kt),n!==null){Be=n;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);Ke===0&&(Ke=5)}function xi(t,e,n){var r=me,i=an.transition;try{an.transition=null,me=1,Zk(t,e,n,r)}finally{an.transition=i,me=r}return null}function Zk(t,e,n,r){do Fs();while(Br!==null);if(ue&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(DR(t,s),t===Je&&(Be=Je=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ou||(ou=!0,TI(Zu,function(){return Fs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=an.transition,an.transition=null;var o=me;me=1;var a=ue;ue|=4,Zm.current=null,Kk(t,n),fI(n,t),_k(Wf),tc=!!zf,Wf=zf=null,t.current=n,Gk(n),IR(),ue=a,me=o,an.transition=s}else t.current=n;if(ou&&(ou=!1,Br=t,yc=i),s=t.pendingLanes,s===0&&(Xr=null),PR(n.stateNode),jt(t,Me()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(gc)throw gc=!1,t=cp,cp=null,t;return yc&1&&t.tag!==0&&Fs(),s=t.pendingLanes,s&1?t===hp?ha++:(ha=0,hp=t):ha=0,pi(),null}function Fs(){if(Br!==null){var t=ZT(yc),e=an.transition,n=me;try{if(an.transition=null,me=16>t?16:t,Br===null)var r=!1;else{if(t=Br,Br=null,yc=0,ue&6)throw Error(U(331));var i=ue;for(ue|=4,W=t.current;W!==null;){var s=W,o=s.child;if(W.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(W=c;W!==null;){var h=W;switch(h.tag){case 0:case 11:case 15:ua(8,h,s)}var d=h.child;if(d!==null)d.return=h,W=d;else for(;W!==null;){h=W;var p=h.sibling,g=h.return;if(cI(h),h===c){W=null;break}if(p!==null){p.return=g,W=p;break}W=g}}}var y=s.alternate;if(y!==null){var I=y.child;if(I!==null){y.child=null;do{var P=I.sibling;I.sibling=null,I=P}while(I!==null)}}W=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,W=o;else e:for(;W!==null;){if(s=W,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ua(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,W=w;break e}W=s.return}}var _=t.current;for(W=_;W!==null;){o=W;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,W=E;else e:for(o=_;W!==null;){if(a=W,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:oh(9,a)}}catch(V){Le(a,a.return,V)}if(a===o){W=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,W=b;break e}W=a.return}}if(ue=i,pi(),Ln&&typeof Ln.onPostCommitFiberRoot=="function")try{Ln.onPostCommitFiberRoot(Jc,t)}catch{}r=!0}return r}finally{me=n,an.transition=e}}return!1}function Z_(t,e,n){e=Qs(n,e),e=ZS(t,e,1),t=Yr(t,e,1),e=Rt(),t!==null&&(il(t,1,e),jt(t,e))}function Le(t,e,n){if(t.tag===3)Z_(t,t,n);else for(;e!==null;){if(e.tag===3){Z_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xr===null||!Xr.has(r))){t=Qs(n,t),t=eI(e,t,1),e=Yr(e,t,1),t=Rt(),e!==null&&(il(e,1,t),jt(e,t));break}}e=e.return}}function eb(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Rt(),t.pingedLanes|=t.suspendedLanes&n,Je===t&&(at&n)===n&&(Ke===4||Ke===3&&(at&130023424)===at&&500>Me()-tg?Li(t,0):eg|=n),jt(t,e)}function wI(t,e){e===0&&(t.mode&1?(e=Yl,Yl<<=1,!(Yl&130023424)&&(Yl=4194304)):e=1);var n=Rt();t=hr(t,e),t!==null&&(il(t,e,n),jt(t,n))}function tb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),wI(t,n)}function nb(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),wI(t,n)}var EI;EI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mt.current)Ot=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ot=!1,zk(t,e,n);Ot=!!(t.flags&131072)}else Ot=!1,xe&&e.flags&1048576&&xS(e,lc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ru(t,e),t=e.pendingProps;var i=Hs(e,Tt.current);Ms(e,n),i=Gm(null,e,r,t,i,n);var s=Qm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ft(r)?(s=!0,oc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,zm(e),i.updater=sh,e.stateNode=i,i._reactInternals=e,Zf(e,r,t,n),e=np(null,e,r,!0,s,n)):(e.tag=0,xe&&s&&Om(e),At(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ru(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=ib(r),t=yn(r,t),i){case 0:e=tp(null,e,r,t,n);break e;case 1:e=z_(null,e,r,t,n);break e;case 11:e=$_(null,e,r,t,n);break e;case 14:e=B_(null,e,r,yn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yn(r,i),tp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yn(r,i),z_(t,e,r,i,n);case 3:e:{if(iI(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,bS(t,e),hc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Qs(Error(U(423)),e),e=W_(t,e,r,n,i);break e}else if(r!==i){i=Qs(Error(U(424)),e),e=W_(t,e,r,n,i);break e}else for(Gt=Qr(e.stateNode.containerInfo.firstChild),Yt=e,xe=!0,_n=null,n=RS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qs(),r===i){e=dr(t,e,n);break e}At(t,e,r,n)}e=e.child}return e;case 5:return NS(e),t===null&&Yf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Hf(r,i)?o=null:s!==null&&Hf(r,s)&&(e.flags|=32),rI(t,e),At(t,e,o,n),e.child;case 6:return t===null&&Yf(e),null;case 13:return sI(t,e,n);case 4:return Wm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ks(e,null,r,n):At(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yn(r,i),$_(t,e,r,i,n);case 7:return At(t,e,e.pendingProps,n),e.child;case 8:return At(t,e,e.pendingProps.children,n),e.child;case 12:return At(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,_e(uc,r._currentValue),r._currentValue=o,s!==null)if(xn(s.value,o)){if(s.children===i.children&&!Mt.current){e=dr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=lr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Xf(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Xf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}At(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ms(e,n),i=un(i),r=r(i),e.flags|=1,At(t,e,r,n),e.child;case 14:return r=e.type,i=yn(r,e.pendingProps),i=yn(r.type,i),B_(t,e,r,i,n);case 15:return tI(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yn(r,i),Ru(t,e),e.tag=1,Ft(r)?(t=!0,oc(e)):t=!1,Ms(e,n),JS(e,r,i),Zf(e,r,i,n),np(null,e,r,!0,t,n);case 19:return oI(t,e,n);case 22:return nI(t,e,n)}throw Error(U(156,e.tag))};function TI(t,e){return QT(t,e)}function rb(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(t,e,n,r){return new rb(t,e,n,r)}function sg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ib(t){if(typeof t=="function")return sg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Im)return 11;if(t===xm)return 14}return 2}function Zr(t,e){var n=t.alternate;return n===null?(n=sn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")sg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case gs:return Oi(n.children,i,s,e);case Sm:o=8,i|=8;break;case Sf:return t=sn(12,n,e,i|2),t.elementType=Sf,t.lanes=s,t;case If:return t=sn(13,n,e,i),t.elementType=If,t.lanes=s,t;case xf:return t=sn(19,n,e,i),t.elementType=xf,t.lanes=s,t;case NT:return lh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kT:o=10;break e;case bT:o=9;break e;case Im:o=11;break e;case xm:o=14;break e;case Nr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=sn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Oi(t,e,n,r){return t=sn(7,t,r,e),t.lanes=n,t}function lh(t,e,n,r){return t=sn(22,t,r,e),t.elementType=NT,t.lanes=n,t.stateNode={isHidden:!1},t}function Od(t,e,n){return t=sn(6,t,null,e),t.lanes=n,t}function Md(t,e,n){return e=sn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sb(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yd(0),this.expirationTimes=yd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function og(t,e,n,r,i,s,o,a,l){return t=new sb(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=sn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zm(s),t}function ob(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ms,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function SI(t){if(!t)return oi;t=t._reactInternals;e:{if(es(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ft(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Ft(n))return SS(t,n,e)}return e}function II(t,e,n,r,i,s,o,a,l){return t=og(n,r,!0,t,i,s,o,a,l),t.context=SI(null),n=t.current,r=Rt(),i=Jr(n),s=lr(r,i),s.callback=e??null,Yr(n,s,i),t.current.lanes=i,il(t,i,r),jt(t,r),t}function uh(t,e,n,r){var i=e.current,s=Rt(),o=Jr(i);return n=SI(n),e.context===null?e.context=n:e.pendingContext=n,e=lr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Yr(i,e,o),t!==null&&(En(t,i,o,s),Au(t,i,o)),o}function _c(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function e0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ag(t,e){e0(t,e),(t=t.alternate)&&e0(t,e)}function ab(){return null}var xI=typeof reportError=="function"?reportError:function(t){console.error(t)};function lg(t){this._internalRoot=t}ch.prototype.render=lg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));uh(t,e,null,null)};ch.prototype.unmount=lg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Hi(function(){uh(null,t,null,null)}),e[cr]=null}};function ch(t){this._internalRoot=t}ch.prototype.unstable_scheduleHydration=function(t){if(t){var e=nS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Vr.length&&e!==0&&e<Vr[n].priority;n++);Vr.splice(n,0,t),n===0&&iS(t)}};function ug(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function t0(){}function lb(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=_c(o);s.call(c)}}var o=II(e,r,t,0,null,!1,!1,"",t0);return t._reactRootContainer=o,t[cr]=o.current,ba(t.nodeType===8?t.parentNode:t),Hi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=_c(l);a.call(c)}}var l=og(t,0,!1,null,null,!1,!1,"",t0);return t._reactRootContainer=l,t[cr]=l.current,ba(t.nodeType===8?t.parentNode:t),Hi(function(){uh(e,l,n,r)}),l}function dh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=_c(o);a.call(l)}}uh(e,o,t,i)}else o=lb(n,e,t,i,r);return _c(o)}eS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Yo(e.pendingLanes);n!==0&&(Cm(e,n|1),jt(e,Me()),!(ue&6)&&(Ys=Me()+500,pi()))}break;case 13:Hi(function(){var r=hr(t,1);if(r!==null){var i=Rt();En(r,t,1,i)}}),ag(t,1)}};Rm=function(t){if(t.tag===13){var e=hr(t,134217728);if(e!==null){var n=Rt();En(e,t,134217728,n)}ag(t,134217728)}};tS=function(t){if(t.tag===13){var e=Jr(t),n=hr(t,e);if(n!==null){var r=Rt();En(n,t,e,r)}ag(t,e)}};nS=function(){return me};rS=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};Lf=function(t,e,n){switch(e){case"input":if(Cf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=nh(r);if(!i)throw Error(U(90));VT(r),Cf(r,i)}}}break;case"textarea":OT(t,n);break;case"select":e=n.value,e!=null&&Ds(t,!!n.multiple,e,!1)}};zT=ng;WT=Hi;var ub={usingClientEntryPoint:!1,Events:[ol,ws,nh,$T,BT,ng]},Wo={findFiberByHostInstance:Ci,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cb={bundleType:Wo.bundleType,version:Wo.version,rendererPackageName:Wo.rendererPackageName,rendererConfig:Wo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=KT(t),t===null?null:t.stateNode},findFiberByHostInstance:Wo.findFiberByHostInstance||ab,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!au.isDisabled&&au.supportsFiber)try{Jc=au.inject(cb),Ln=au}catch{}}Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ub;Jt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ug(e))throw Error(U(200));return ob(t,e,null,n)};Jt.createRoot=function(t,e){if(!ug(t))throw Error(U(299));var n=!1,r="",i=xI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=og(t,1,!1,null,null,n,!1,r,i),t[cr]=e.current,ba(t.nodeType===8?t.parentNode:t),new lg(e)};Jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=KT(e),t=t===null?null:t.stateNode,t};Jt.flushSync=function(t){return Hi(t)};Jt.hydrate=function(t,e,n){if(!hh(e))throw Error(U(200));return dh(null,t,e,!0,n)};Jt.hydrateRoot=function(t,e,n){if(!ug(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=xI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=II(e,null,t,1,n??null,i,!1,s,o),t[cr]=e.current,ba(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ch(e)};Jt.render=function(t,e,n){if(!hh(e))throw Error(U(200));return dh(null,t,e,!1,n)};Jt.unmountComponentAtNode=function(t){if(!hh(t))throw Error(U(40));return t._reactRootContainer?(Hi(function(){dh(null,null,t,!1,function(){t._reactRootContainer=null,t[cr]=null})}),!0):!1};Jt.unstable_batchedUpdates=ng;Jt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!hh(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return dh(t,e,n,!1,r)};Jt.version="18.3.1-next-f1338f8080-20240426";function AI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AI)}catch(t){console.error(t)}}AI(),AT.exports=Jt;var PI=AT.exports,CI,n0=PI;CI=n0.createRoot,n0.hydrateRoot;const hb="modulepreload",db=function(t){return"/TopChess/"+t},r0={},Pn=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=db(l),l in r0)return;r0[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":hb,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((p,g)=>{d.addEventListener("load",p),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ua(){return Ua=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ua.apply(this,arguments)}var zr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(zr||(zr={}));const i0="popstate";function fb(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return pp("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:wc(i)}return mb(e,n,null,t)}function Fe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pb(){return Math.random().toString(36).substr(2,8)}function s0(t,e){return{usr:t.state,key:t.key,idx:e}}function pp(t,e,n,r){return n===void 0&&(n=null),Ua({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ho(e):e,{state:n,key:e&&e.key||r||pb()})}function wc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ho(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function mb(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=zr.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Ua({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=zr.Pop;let P=h(),w=P==null?null:P-c;c=P,l&&l({action:a,location:I.location,delta:w})}function p(P,w){a=zr.Push;let _=pp(I.location,P,w);c=h()+1;let E=s0(_,c),b=I.createHref(_);try{o.pushState(E,"",b)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(b)}s&&l&&l({action:a,location:I.location,delta:1})}function g(P,w){a=zr.Replace;let _=pp(I.location,P,w);c=h();let E=s0(_,c),b=I.createHref(_);o.replaceState(E,"",b),s&&l&&l({action:a,location:I.location,delta:0})}function y(P){let w=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof P=="string"?P:wc(P);return _=_.replace(/ $/,"%20"),Fe(w,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,w)}let I={get action(){return a},get location(){return t(i,o)},listen(P){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(i0,d),l=P,()=>{i.removeEventListener(i0,d),l=null}},createHref(P){return e(i,P)},createURL:y,encodeLocation(P){let w=y(P);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:g,go(P){return o.go(P)}};return I}var o0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(o0||(o0={}));function gb(t,e,n){return n===void 0&&(n="/"),yb(t,e,n)}function yb(t,e,n,r){let i=typeof e=="string"?ho(e):e,s=hg(i.pathname||"/",n);if(s==null)return null;let o=RI(t);vb(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=kb(s);a=Pb(o[l],c)}return a}function RI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Fe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ei([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Fe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),RI(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:xb(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of kI(s.path))i(s,o,l)}),e}function kI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=kI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function vb(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Ab(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const _b=/^:[\w-]+$/,wb=3,Eb=2,Tb=1,Sb=10,Ib=-2,a0=t=>t==="*";function xb(t,e){let n=t.split("/"),r=n.length;return n.some(a0)&&(r+=Ib),e&&(r+=Eb),n.filter(i=>!a0(i)).reduce((i,s)=>i+(_b.test(s)?wb:s===""?Tb:Sb),r)}function Ab(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Pb(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=Cb({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:ei([s,d.pathname]),pathnameBase:Lb(ei([s,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(s=ei([s,d.pathnameBase]))}return o}function Cb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Rb(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:p,isOptional:g}=h;if(p==="*"){let I=a[d]||"";o=s.slice(0,s.length-I.length).replace(/(.)\/+$/,"$1")}const y=a[d];return g&&!y?c[p]=void 0:c[p]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function Rb(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),cg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function kb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function hg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const bb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nb=t=>bb.test(t);function Db(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ho(t):t,s;if(n)if(Nb(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),cg(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=l0(n.substring(1),"/"):s=l0(n,e)}else s=e;return{pathname:s,search:Ob(r),hash:Mb(i)}}function l0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Fd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Vb(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function dg(t,e){let n=Vb(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function fg(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ho(t):(i=Ua({},t),Fe(!i.pathname||!i.pathname.includes("?"),Fd("?","pathname","search",i)),Fe(!i.pathname||!i.pathname.includes("#"),Fd("#","pathname","hash",i)),Fe(!i.search||!i.search.includes("#"),Fd("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=Db(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const ei=t=>t.join("/").replace(/\/\/+/g,"/"),Lb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ob=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Mb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Fb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const bI=["post","put","patch","delete"];new Set(bI);const jb=["get",...bI];new Set(jb);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $a(){return $a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$a.apply(this,arguments)}const pg=R.createContext(null),Ub=R.createContext(null),mi=R.createContext(null),fh=R.createContext(null),Er=R.createContext({outlet:null,matches:[],isDataRoute:!1}),NI=R.createContext(null);function $b(t,e){let{relative:n}=e===void 0?{}:e;fo()||Fe(!1);let{basename:r,navigator:i}=R.useContext(mi),{hash:s,pathname:o,search:a}=VI(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ei([r,o])),i.createHref({pathname:l,search:a,hash:s})}function fo(){return R.useContext(fh)!=null}function Hn(){return fo()||Fe(!1),R.useContext(fh).location}function DI(t){R.useContext(mi).static||R.useLayoutEffect(t)}function po(){let{isDataRoute:t}=R.useContext(Er);return t?eN():Bb()}function Bb(){fo()||Fe(!1);let t=R.useContext(pg),{basename:e,future:n,navigator:r}=R.useContext(mi),{matches:i}=R.useContext(Er),{pathname:s}=Hn(),o=JSON.stringify(dg(i,n.v7_relativeSplatPath)),a=R.useRef(!1);return DI(()=>{a.current=!0}),R.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=fg(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ei([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}function Q5(){let{matches:t}=R.useContext(Er),e=t[t.length-1];return e?e.params:{}}function VI(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=R.useContext(mi),{matches:i}=R.useContext(Er),{pathname:s}=Hn(),o=JSON.stringify(dg(i,r.v7_relativeSplatPath));return R.useMemo(()=>fg(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function zb(t,e){return Wb(t,e)}function Wb(t,e,n,r){fo()||Fe(!1);let{navigator:i}=R.useContext(mi),{matches:s}=R.useContext(Er),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Hn(),h;if(e){var d;let P=typeof e=="string"?ho(e):e;l==="/"||(d=P.pathname)!=null&&d.startsWith(l)||Fe(!1),h=P}else h=c;let p=h.pathname||"/",g=p;if(l!=="/"){let P=l.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(P.length).join("/")}let y=gb(t,{pathname:g}),I=Qb(y&&y.map(P=>Object.assign({},P,{params:Object.assign({},a,P.params),pathname:ei([l,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?l:ei([l,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),s,n,r);return e&&I?R.createElement(fh.Provider,{value:{location:$a({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:zr.Pop}},I):I}function Hb(){let t=Zb(),e=Fb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:i},n):null,null)}const qb=R.createElement(Hb,null);class Kb extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(Er.Provider,{value:this.props.routeContext},R.createElement(NI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Gb(t){let{routeContext:e,match:n,children:r}=t,i=R.useContext(pg);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(Er.Provider,{value:e},r)}function Qb(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Fe(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:g}=n,y=d.route.loader&&p[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,p)=>{let g,y=!1,I=null,P=null;n&&(g=a&&d.route.id?a[d.route.id]:void 0,I=d.route.errorElement||qb,l&&(c<0&&p===0?(tN("route-fallback"),y=!0,P=null):c===p&&(y=!0,P=d.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,p+1)),_=()=>{let E;return g?E=I:y?E=P:d.route.Component?E=R.createElement(d.route.Component,null):d.route.element?E=d.route.element:E=h,R.createElement(Gb,{match:d,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:E})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?R.createElement(Kb,{location:n.location,revalidation:n.revalidation,component:I,error:g,children:_(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):_()},null)}var LI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(LI||{}),OI=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(OI||{});function Yb(t){let e=R.useContext(pg);return e||Fe(!1),e}function Xb(t){let e=R.useContext(Ub);return e||Fe(!1),e}function Jb(t){let e=R.useContext(Er);return e||Fe(!1),e}function MI(t){let e=Jb(),n=e.matches[e.matches.length-1];return n.route.id||Fe(!1),n.route.id}function Zb(){var t;let e=R.useContext(NI),n=Xb(),r=MI();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function eN(){let{router:t}=Yb(LI.UseNavigateStable),e=MI(OI.UseNavigateStable),n=R.useRef(!1);return DI(()=>{n.current=!0}),R.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,$a({fromRouteId:e},s)))},[t,e])}const u0={};function tN(t,e,n){u0[t]||(u0[t]=!0)}function nN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function FI(t){let{to:e,replace:n,state:r,relative:i}=t;fo()||Fe(!1);let{future:s,static:o}=R.useContext(mi),{matches:a}=R.useContext(Er),{pathname:l}=Hn(),c=po(),h=fg(e,dg(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(h);return R.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function Dt(t){Fe(!1)}function rN(t){let{basename:e="/",children:n=null,location:r,navigationType:i=zr.Pop,navigator:s,static:o=!1,future:a}=t;fo()&&Fe(!1);let l=e.replace(/^\/*/,"/"),c=R.useMemo(()=>({basename:l,navigator:s,static:o,future:$a({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=ho(r));let{pathname:h="/",search:d="",hash:p="",state:g=null,key:y="default"}=r,I=R.useMemo(()=>{let P=hg(h,l);return P==null?null:{location:{pathname:P,search:d,hash:p,state:g,key:y},navigationType:i}},[l,h,d,p,g,y,i]);return I==null?null:R.createElement(mi.Provider,{value:c},R.createElement(fh.Provider,{children:n,value:I}))}function iN(t){let{children:e,location:n}=t;return zb(mp(e),n)}new Promise(()=>{});function mp(t,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(t,(r,i)=>{if(!R.isValidElement(r))return;let s=[...e,i];if(r.type===R.Fragment){n.push.apply(n,mp(r.props.children,s));return}r.type!==Dt&&Fe(!1),!r.props.index||!r.props.children||Fe(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=mp(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gp(){return gp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gp.apply(this,arguments)}function sN(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function oN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function aN(t,e){return t.button===0&&(!e||e==="_self")&&!oN(t)}function yp(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function lN(t,e){let n=yp(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const uN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],cN="6";try{window.__reactRouterVersion=cN}catch{}const hN="startTransition",c0=eR[hN];function dN(t){let{basename:e,children:n,future:r,window:i}=t,s=R.useRef();s.current==null&&(s.current=fb({window:i,v5Compat:!0}));let o=s.current,[a,l]=R.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=R.useCallback(d=>{c&&c0?c0(()=>l(d)):l(d)},[l,c]);return R.useLayoutEffect(()=>o.listen(h),[o,h]),R.useEffect(()=>nN(r),[r]),R.createElement(rN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const fN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bn=R.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,p=sN(e,uN),{basename:g}=R.useContext(mi),y,I=!1;if(typeof c=="string"&&pN.test(c)&&(y=c,fN))try{let E=new URL(window.location.href),b=c.startsWith("//")?new URL(E.protocol+c):new URL(c),V=hg(b.pathname,g);b.origin===E.origin&&V!=null?c=V+b.search+b.hash:I=!0}catch{}let P=$b(c,{relative:i}),w=mN(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:d});function _(E){r&&r(E),E.defaultPrevented||w(E)}return R.createElement("a",gp({},p,{href:y||P,onClick:I||s?r:_,ref:n,target:l}))});var h0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(h0||(h0={}));var d0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(d0||(d0={}));function mN(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=po(),c=Hn(),h=VI(t,{relative:o});return R.useCallback(d=>{if(aN(d,n)){d.preventDefault();let p=r!==void 0?r:wc(c)===wc(h);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}function Y5(t){let e=R.useRef(yp(t)),n=R.useRef(!1),r=Hn(),i=R.useMemo(()=>lN(r.search,n.current?null:e.current),[r.search]),s=po(),o=R.useCallback((a,l)=>{const c=yp(typeof a=="function"?a(i):a);n.current=!0,s("?"+c,l)},[s,i]);return[i,o]}let gN={data:""},yN=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||gN},vN=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,_N=/\/\*[^]*?\*\/|  +/g,f0=/\n+/g,Or=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?Or(o,s):s+"{"+Or(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=Or(o,e?e.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Or.p?Or.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Xn={},jI=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+jI(t[n]);return e}return t},wN=(t,e,n,r,i)=>{let s=jI(t),o=Xn[s]||(Xn[s]=(l=>{let c=0,h=11;for(;c<l.length;)h=101*h+l.charCodeAt(c++)>>>0;return"go"+h})(s));if(!Xn[o]){let l=s!==t?t:(c=>{let h,d,p=[{}];for(;h=vN.exec(c.replace(_N,""));)h[4]?p.shift():h[3]?(d=h[3].replace(f0," ").trim(),p.unshift(p[0][d]=p[0][d]||{})):p[0][h[1]]=h[2].replace(f0," ").trim();return p[0]})(t);Xn[o]=Or(i?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&Xn.g?Xn.g:null;return n&&(Xn.g=Xn[o]),((l,c,h,d)=>{d?c.data=c.data.replace(d,l):c.data.indexOf(l)===-1&&(c.data=h?l+c.data:c.data+l)})(Xn[o],e,r,a),o},EN=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":Or(a,""):a===!1?"":a}return r+i+(o??"")},"");function ph(t){let e=this||{},n=t.call?t(e.p):t;return wN(n.unshift?n.raw?EN(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,yN(e.target),e.g,e.o,e.k)}let UI,vp,_p;ph.bind({g:1});let fr=ph.bind({k:1});function TN(t,e,n,r){Or.p=e,UI=t,vp=n,_p=r}function gi(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),l=a.className||i.className;n.p=Object.assign({theme:vp&&vp()},a),n.o=/ *go\d+/.test(l),a.className=ph.apply(n,r)+(l?" "+l:"");let c=t;return t[0]&&(c=a.as||t,delete a.as),_p&&c[0]&&_p(a),UI(c,a)}return i}}var SN=t=>typeof t=="function",Ec=(t,e)=>SN(t)?t(e):t,IN=(()=>{let t=0;return()=>(++t).toString()})(),$I=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),xN=20,mg="default",BI=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===e.toast.id?{...o,...e.toast}:o)};case 2:let{toast:r}=e;return BI(t,{type:t.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=e;return{...t,toasts:t.toasts.map(o=>o.id===i||i===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+s}))}}},Du=[],zI={toasts:[],pausedAt:void 0,settings:{toastLimit:xN}},Dn={},WI=(t,e=mg)=>{Dn[e]=BI(Dn[e]||zI,t),Du.forEach(([n,r])=>{n===e&&r(Dn[e])})},HI=t=>Object.keys(Dn).forEach(e=>WI(t,e)),AN=t=>Object.keys(Dn).find(e=>Dn[e].toasts.some(n=>n.id===t)),mh=(t=mg)=>e=>{WI(e,t)},PN={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},CN=(t={},e=mg)=>{let[n,r]=R.useState(Dn[e]||zI),i=R.useRef(Dn[e]);R.useEffect(()=>(i.current!==Dn[e]&&r(Dn[e]),Du.push([e,r]),()=>{let o=Du.findIndex(([a])=>a===e);o>-1&&Du.splice(o,1)}),[e]);let s=n.toasts.map(o=>{var a,l,c;return{...t,...t[o.type],...o,removeDelay:o.removeDelay||((a=t[o.type])==null?void 0:a.removeDelay)||(t==null?void 0:t.removeDelay),duration:o.duration||((l=t[o.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||PN[o.type],style:{...t.style,...(c=t[o.type])==null?void 0:c.style,...o.style}}});return{...n,toasts:s}},RN=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||IN()}),ll=t=>(e,n)=>{let r=RN(e,t,n);return mh(r.toasterId||AN(r.id))({type:2,toast:r}),r.id},qe=(t,e)=>ll("blank")(t,e);qe.error=ll("error");qe.success=ll("success");qe.loading=ll("loading");qe.custom=ll("custom");qe.dismiss=(t,e)=>{let n={type:3,toastId:t};e?mh(e)(n):HI(n)};qe.dismissAll=t=>qe.dismiss(void 0,t);qe.remove=(t,e)=>{let n={type:4,toastId:t};e?mh(e)(n):HI(n)};qe.removeAll=t=>qe.remove(void 0,t);qe.promise=(t,e,n)=>{let r=qe.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let s=e.success?Ec(e.success,i):void 0;return s?qe.success(s,{id:r,...n,...n==null?void 0:n.success}):qe.dismiss(r),i}).catch(i=>{let s=e.error?Ec(e.error,i):void 0;s?qe.error(s,{id:r,...n,...n==null?void 0:n.error}):qe.dismiss(r)}),t};var kN=1e3,bN=(t,e="default")=>{let{toasts:n,pausedAt:r}=CN(t,e),i=R.useRef(new Map).current,s=R.useCallback((d,p=kN)=>{if(i.has(d))return;let g=setTimeout(()=>{i.delete(d),o({type:4,toastId:d})},p);i.set(d,g)},[]);R.useEffect(()=>{if(r)return;let d=Date.now(),p=n.map(g=>{if(g.duration===1/0)return;let y=(g.duration||0)+g.pauseDuration-(d-g.createdAt);if(y<0){g.visible&&qe.dismiss(g.id);return}return setTimeout(()=>qe.dismiss(g.id,e),y)});return()=>{p.forEach(g=>g&&clearTimeout(g))}},[n,r,e]);let o=R.useCallback(mh(e),[e]),a=R.useCallback(()=>{o({type:5,time:Date.now()})},[o]),l=R.useCallback((d,p)=>{o({type:1,toast:{id:d,height:p}})},[o]),c=R.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),h=R.useCallback((d,p)=>{let{reverseOrder:g=!1,gutter:y=8,defaultPosition:I}=p||{},P=n.filter(E=>(E.position||I)===(d.position||I)&&E.height),w=P.findIndex(E=>E.id===d.id),_=P.filter((E,b)=>b<w&&E.visible).length;return P.filter(E=>E.visible).slice(...g?[_+1]:[0,_]).reduce((E,b)=>E+(b.height||0)+y,0)},[n]);return R.useEffect(()=>{n.forEach(d=>{if(d.dismissed)s(d.id,d.removeDelay);else{let p=i.get(d.id);p&&(clearTimeout(p),i.delete(d.id))}})},[n,s]),{toasts:n,handlers:{updateHeight:l,startPause:a,endPause:c,calculateOffset:h}}},NN=fr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,DN=fr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,VN=fr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,LN=gi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${NN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${DN} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${VN} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,ON=fr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,MN=gi("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${ON} 1s linear infinite;
`,FN=fr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,jN=fr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,UN=gi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${FN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${jN} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,$N=gi("div")`
  position: absolute;
`,BN=gi("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,zN=fr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,WN=gi("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${zN} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,HN=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?R.createElement(WN,null,e):e:n==="blank"?null:R.createElement(BN,null,R.createElement(MN,{...r}),n!=="loading"&&R.createElement($N,null,n==="error"?R.createElement(LN,{...r}):R.createElement(UN,{...r})))},qN=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,KN=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,GN="0%{opacity:0;} 100%{opacity:1;}",QN="0%{opacity:1;} 100%{opacity:0;}",YN=gi("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,XN=gi("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,JN=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=$I()?[GN,QN]:[qN(n),KN(n)];return{animation:e?`${fr(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${fr(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},ZN=R.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?JN(t.position||e||"top-center",t.visible):{opacity:0},s=R.createElement(HN,{toast:t}),o=R.createElement(XN,{...t.ariaProps},Ec(t.message,t));return R.createElement(YN,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):R.createElement(R.Fragment,null,s,o))});TN(R.createElement);var eD=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let s=R.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(t,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return R.createElement("div",{ref:s,className:e,style:n},i)},tD=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:$I()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},nD=ph`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,lu=16,rD=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,toasterId:s,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:c}=bN(n,s);return R.createElement("div",{"data-rht-toaster":s||"",style:{position:"fixed",zIndex:9999,top:lu,left:lu,right:lu,bottom:lu,pointerEvents:"none",...o},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(h=>{let d=h.position||e,p=c.calculateOffset(h,{reverseOrder:t,gutter:r,defaultPosition:e}),g=tD(d,p);return R.createElement(eD,{id:h.id,key:h.id,onHeightUpdate:c.updateHeight,className:h.visible?nD:"",style:g},h.type==="custom"?Ec(h.message,h):i?i(h):R.createElement(ZN,{toast:h,position:d}))}))},p0=qe,m0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},iD=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},KI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),r.push(n[h],n[d],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new sD;const p=s<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),d!==64){const y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oD=function(t){const e=qI(t);return KI.encodeByteArray(e,!0)},Tc=function(t){return oD(t).replace(/\./g,"")},GI=function(t){try{return KI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=()=>aD().__FIREBASE_DEFAULTS__,uD=()=>{if(typeof process>"u"||typeof m0>"u")return;const t=m0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},cD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&GI(t[1]);return e&&JSON.parse(e)},gh=()=>{try{return lD()||uD()||cD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},QI=t=>{var e,n;return(n=(e=gh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},hD=t=>{const e=QI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},YI=()=>{var t;return(t=gh())===null||t===void 0?void 0:t.config},XI=t=>{var e;return(e=gh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Tc(JSON.stringify(n)),Tc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function mD(){var t;const e=(t=gh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _D(){const t=St();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wD(){return!mD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ED(){try{return typeof indexedDB=="object"}catch{return!1}}function TD(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD="FirebaseError";class Tr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=SD,Object.setPrototypeOf(this,Tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ul.prototype.create)}}class ul{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?ID(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Tr(i,a,r)}}function ID(t,e){return t.replace(xD,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const xD=/\{\$([^}]+)}/g;function AD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(g0(s)&&g0(o)){if(!Sc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function g0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function PD(t,e){const n=new CD(t,e);return n.subscribe.bind(n)}class CD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");RD(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=jd),i.error===void 0&&(i.error=jd),i.complete===void 0&&(i.complete=jd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function RD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(t){return t&&t._delegate?t._delegate:t}class qi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new dD;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ND(e))try{this.getOrInitializeService({instanceIdentifier:Ai})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ai){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ai){return this.instances.has(e)}getOptions(e=Ai){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ai){return this.component?this.component.multipleInstances?e:Ai:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bD(t){return t===Ai?void 0:t}function ND(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const VD={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},LD=ae.INFO,OD={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},MD=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=OD[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let gg=class{constructor(e){this.name=e,this._logLevel=LD,this._logHandler=MD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}};const FD=(t,e)=>e.some(n=>t instanceof n);let y0,v0;function jD(){return y0||(y0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UD(){return v0||(v0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JI=new WeakMap,wp=new WeakMap,ZI=new WeakMap,Ud=new WeakMap,yg=new WeakMap;function $D(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ti(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&JI.set(n,t)}).catch(()=>{}),yg.set(e,t),e}function BD(t){if(wp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});wp.set(t,e)}let Ep={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ZI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ti(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zD(t){Ep=t(Ep)}function WD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call($d(this),e,...n);return ZI.set(r,e.sort?e.sort():[e]),ti(r)}:UD().includes(t)?function(...e){return t.apply($d(this),e),ti(JI.get(this))}:function(...e){return ti(t.apply($d(this),e))}}function HD(t){return typeof t=="function"?WD(t):(t instanceof IDBTransaction&&BD(t),FD(t,jD())?new Proxy(t,Ep):t)}function ti(t){if(t instanceof IDBRequest)return $D(t);if(Ud.has(t))return Ud.get(t);const e=HD(t);return e!==t&&(Ud.set(t,e),yg.set(e,t)),e}const $d=t=>yg.get(t);function qD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ti(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ti(o.result),l.oldVersion,l.newVersion,ti(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const KD=["get","getKey","getAll","getAllKeys","count"],GD=["put","add","delete","clear"],Bd=new Map;function _0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Bd.get(e))return Bd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=GD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||KD.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Bd.set(e,s),s}zD(t=>({...t,get:(e,n,r)=>_0(e,n)||t.get(e,n,r),has:(e,n)=>!!_0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(YD(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function YD(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Tp="@firebase/app",w0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new gg("@firebase/app"),XD="@firebase/app-compat",JD="@firebase/analytics-compat",ZD="@firebase/analytics",eV="@firebase/app-check-compat",tV="@firebase/app-check",nV="@firebase/auth",rV="@firebase/auth-compat",iV="@firebase/database",sV="@firebase/data-connect",oV="@firebase/database-compat",aV="@firebase/functions",lV="@firebase/functions-compat",uV="@firebase/installations",cV="@firebase/installations-compat",hV="@firebase/messaging",dV="@firebase/messaging-compat",fV="@firebase/performance",pV="@firebase/performance-compat",mV="@firebase/remote-config",gV="@firebase/remote-config-compat",yV="@firebase/storage",vV="@firebase/storage-compat",_V="@firebase/firestore",wV="@firebase/vertexai-preview",EV="@firebase/firestore-compat",TV="firebase",SV="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp="[DEFAULT]",IV={[Tp]:"fire-core",[XD]:"fire-core-compat",[ZD]:"fire-analytics",[JD]:"fire-analytics-compat",[tV]:"fire-app-check",[eV]:"fire-app-check-compat",[nV]:"fire-auth",[rV]:"fire-auth-compat",[iV]:"fire-rtdb",[sV]:"fire-data-connect",[oV]:"fire-rtdb-compat",[aV]:"fire-fn",[lV]:"fire-fn-compat",[uV]:"fire-iid",[cV]:"fire-iid-compat",[hV]:"fire-fcm",[dV]:"fire-fcm-compat",[fV]:"fire-perf",[pV]:"fire-perf-compat",[mV]:"fire-rc",[gV]:"fire-rc-compat",[yV]:"fire-gcs",[vV]:"fire-gcs-compat",[_V]:"fire-fst",[EV]:"fire-fst-compat",[wV]:"fire-vertex","fire-js":"fire-js",[TV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=new Map,xV=new Map,Ip=new Map;function E0(t,e){try{t.container.addComponent(e)}catch(n){pr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xs(t){const e=t.name;if(Ip.has(e))return pr.debug(`There were multiple attempts to register component ${e}.`),!1;Ip.set(e,t);for(const n of Ic.values())E0(n,t);for(const n of xV.values())E0(n,t);return!0}function vg(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ir(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ni=new ul("app","Firebase",AV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ni.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=SV;function e1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Sp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ni.create("bad-app-name",{appName:String(i)});if(n||(n=YI()),!n)throw ni.create("no-options");const s=Ic.get(i);if(s){if(Sc(n,s.options)&&Sc(r,s.config))return s;throw ni.create("duplicate-app",{appName:i})}const o=new DD(i);for(const l of Ip.values())o.addComponent(l);const a=new PV(n,r,o);return Ic.set(i,a),a}function t1(t=Sp){const e=Ic.get(t);if(!e&&t===Sp&&YI())return e1();if(!e)throw ni.create("no-app",{appName:t});return e}function ri(t,e,n){var r;let i=(r=IV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pr.warn(a.join(" "));return}Xs(new qi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV="firebase-heartbeat-database",RV=1,Ba="firebase-heartbeat-store";let zd=null;function n1(){return zd||(zd=qD(CV,RV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ba)}catch(n){console.warn(n)}}}}).catch(t=>{throw ni.create("idb-open",{originalErrorMessage:t.message})})),zd}async function kV(t){try{const n=(await n1()).transaction(Ba),r=await n.objectStore(Ba).get(r1(t));return await n.done,r}catch(e){if(e instanceof Tr)pr.warn(e.message);else{const n=ni.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pr.warn(n.message)}}}async function T0(t,e){try{const r=(await n1()).transaction(Ba,"readwrite");await r.objectStore(Ba).put(e,r1(t)),await r.done}catch(n){if(n instanceof Tr)pr.warn(n.message);else{const r=ni.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});pr.warn(r.message)}}}function r1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV=1024,NV=30*24*60*60*1e3;class DV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new LV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=S0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=NV}),this._storage.overwrite(this._heartbeatsCache))}catch(r){pr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=S0(),{heartbeatsToSend:r,unsentEntries:i}=VV(this._heartbeatsCache.heartbeats),s=Tc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return pr.warn(n),""}}}function S0(){return new Date().toISOString().substring(0,10)}function VV(t,e=bV){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),I0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),I0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class LV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ED()?TD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await kV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return T0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return T0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function I0(t){return Tc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OV(t){Xs(new qi("platform-logger",e=>new QD(e),"PRIVATE")),Xs(new qi("heartbeat",e=>new DV(e),"PRIVATE")),ri(Tp,w0,t),ri(Tp,w0,"esm2017"),ri("fire-js","")}OV("");var MV="firebase",FV="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ri(MV,FV,"app");var x0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mi,i1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,v){function S(){}S.prototype=v.prototype,x.D=v.prototype,x.prototype=new S,x.prototype.constructor=x,x.C=function(A,N,D){for(var C=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)C[Y-2]=arguments[Y];return v.prototype[N].apply(A,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,v,S){S||(S=0);var A=Array(16);if(typeof v=="string")for(var N=0;16>N;++N)A[N]=v.charCodeAt(S++)|v.charCodeAt(S++)<<8|v.charCodeAt(S++)<<16|v.charCodeAt(S++)<<24;else for(N=0;16>N;++N)A[N]=v[S++]|v[S++]<<8|v[S++]<<16|v[S++]<<24;v=x.g[0],S=x.g[1],N=x.g[2];var D=x.g[3],C=v+(D^S&(N^D))+A[0]+3614090360&4294967295;v=S+(C<<7&4294967295|C>>>25),C=D+(N^v&(S^N))+A[1]+3905402710&4294967295,D=v+(C<<12&4294967295|C>>>20),C=N+(S^D&(v^S))+A[2]+606105819&4294967295,N=D+(C<<17&4294967295|C>>>15),C=S+(v^N&(D^v))+A[3]+3250441966&4294967295,S=N+(C<<22&4294967295|C>>>10),C=v+(D^S&(N^D))+A[4]+4118548399&4294967295,v=S+(C<<7&4294967295|C>>>25),C=D+(N^v&(S^N))+A[5]+1200080426&4294967295,D=v+(C<<12&4294967295|C>>>20),C=N+(S^D&(v^S))+A[6]+2821735955&4294967295,N=D+(C<<17&4294967295|C>>>15),C=S+(v^N&(D^v))+A[7]+4249261313&4294967295,S=N+(C<<22&4294967295|C>>>10),C=v+(D^S&(N^D))+A[8]+1770035416&4294967295,v=S+(C<<7&4294967295|C>>>25),C=D+(N^v&(S^N))+A[9]+2336552879&4294967295,D=v+(C<<12&4294967295|C>>>20),C=N+(S^D&(v^S))+A[10]+4294925233&4294967295,N=D+(C<<17&4294967295|C>>>15),C=S+(v^N&(D^v))+A[11]+2304563134&4294967295,S=N+(C<<22&4294967295|C>>>10),C=v+(D^S&(N^D))+A[12]+1804603682&4294967295,v=S+(C<<7&4294967295|C>>>25),C=D+(N^v&(S^N))+A[13]+4254626195&4294967295,D=v+(C<<12&4294967295|C>>>20),C=N+(S^D&(v^S))+A[14]+2792965006&4294967295,N=D+(C<<17&4294967295|C>>>15),C=S+(v^N&(D^v))+A[15]+1236535329&4294967295,S=N+(C<<22&4294967295|C>>>10),C=v+(N^D&(S^N))+A[1]+4129170786&4294967295,v=S+(C<<5&4294967295|C>>>27),C=D+(S^N&(v^S))+A[6]+3225465664&4294967295,D=v+(C<<9&4294967295|C>>>23),C=N+(v^S&(D^v))+A[11]+643717713&4294967295,N=D+(C<<14&4294967295|C>>>18),C=S+(D^v&(N^D))+A[0]+3921069994&4294967295,S=N+(C<<20&4294967295|C>>>12),C=v+(N^D&(S^N))+A[5]+3593408605&4294967295,v=S+(C<<5&4294967295|C>>>27),C=D+(S^N&(v^S))+A[10]+38016083&4294967295,D=v+(C<<9&4294967295|C>>>23),C=N+(v^S&(D^v))+A[15]+3634488961&4294967295,N=D+(C<<14&4294967295|C>>>18),C=S+(D^v&(N^D))+A[4]+3889429448&4294967295,S=N+(C<<20&4294967295|C>>>12),C=v+(N^D&(S^N))+A[9]+568446438&4294967295,v=S+(C<<5&4294967295|C>>>27),C=D+(S^N&(v^S))+A[14]+3275163606&4294967295,D=v+(C<<9&4294967295|C>>>23),C=N+(v^S&(D^v))+A[3]+4107603335&4294967295,N=D+(C<<14&4294967295|C>>>18),C=S+(D^v&(N^D))+A[8]+1163531501&4294967295,S=N+(C<<20&4294967295|C>>>12),C=v+(N^D&(S^N))+A[13]+2850285829&4294967295,v=S+(C<<5&4294967295|C>>>27),C=D+(S^N&(v^S))+A[2]+4243563512&4294967295,D=v+(C<<9&4294967295|C>>>23),C=N+(v^S&(D^v))+A[7]+1735328473&4294967295,N=D+(C<<14&4294967295|C>>>18),C=S+(D^v&(N^D))+A[12]+2368359562&4294967295,S=N+(C<<20&4294967295|C>>>12),C=v+(S^N^D)+A[5]+4294588738&4294967295,v=S+(C<<4&4294967295|C>>>28),C=D+(v^S^N)+A[8]+2272392833&4294967295,D=v+(C<<11&4294967295|C>>>21),C=N+(D^v^S)+A[11]+1839030562&4294967295,N=D+(C<<16&4294967295|C>>>16),C=S+(N^D^v)+A[14]+4259657740&4294967295,S=N+(C<<23&4294967295|C>>>9),C=v+(S^N^D)+A[1]+2763975236&4294967295,v=S+(C<<4&4294967295|C>>>28),C=D+(v^S^N)+A[4]+1272893353&4294967295,D=v+(C<<11&4294967295|C>>>21),C=N+(D^v^S)+A[7]+4139469664&4294967295,N=D+(C<<16&4294967295|C>>>16),C=S+(N^D^v)+A[10]+3200236656&4294967295,S=N+(C<<23&4294967295|C>>>9),C=v+(S^N^D)+A[13]+681279174&4294967295,v=S+(C<<4&4294967295|C>>>28),C=D+(v^S^N)+A[0]+3936430074&4294967295,D=v+(C<<11&4294967295|C>>>21),C=N+(D^v^S)+A[3]+3572445317&4294967295,N=D+(C<<16&4294967295|C>>>16),C=S+(N^D^v)+A[6]+76029189&4294967295,S=N+(C<<23&4294967295|C>>>9),C=v+(S^N^D)+A[9]+3654602809&4294967295,v=S+(C<<4&4294967295|C>>>28),C=D+(v^S^N)+A[12]+3873151461&4294967295,D=v+(C<<11&4294967295|C>>>21),C=N+(D^v^S)+A[15]+530742520&4294967295,N=D+(C<<16&4294967295|C>>>16),C=S+(N^D^v)+A[2]+3299628645&4294967295,S=N+(C<<23&4294967295|C>>>9),C=v+(N^(S|~D))+A[0]+4096336452&4294967295,v=S+(C<<6&4294967295|C>>>26),C=D+(S^(v|~N))+A[7]+1126891415&4294967295,D=v+(C<<10&4294967295|C>>>22),C=N+(v^(D|~S))+A[14]+2878612391&4294967295,N=D+(C<<15&4294967295|C>>>17),C=S+(D^(N|~v))+A[5]+4237533241&4294967295,S=N+(C<<21&4294967295|C>>>11),C=v+(N^(S|~D))+A[12]+1700485571&4294967295,v=S+(C<<6&4294967295|C>>>26),C=D+(S^(v|~N))+A[3]+2399980690&4294967295,D=v+(C<<10&4294967295|C>>>22),C=N+(v^(D|~S))+A[10]+4293915773&4294967295,N=D+(C<<15&4294967295|C>>>17),C=S+(D^(N|~v))+A[1]+2240044497&4294967295,S=N+(C<<21&4294967295|C>>>11),C=v+(N^(S|~D))+A[8]+1873313359&4294967295,v=S+(C<<6&4294967295|C>>>26),C=D+(S^(v|~N))+A[15]+4264355552&4294967295,D=v+(C<<10&4294967295|C>>>22),C=N+(v^(D|~S))+A[6]+2734768916&4294967295,N=D+(C<<15&4294967295|C>>>17),C=S+(D^(N|~v))+A[13]+1309151649&4294967295,S=N+(C<<21&4294967295|C>>>11),C=v+(N^(S|~D))+A[4]+4149444226&4294967295,v=S+(C<<6&4294967295|C>>>26),C=D+(S^(v|~N))+A[11]+3174756917&4294967295,D=v+(C<<10&4294967295|C>>>22),C=N+(v^(D|~S))+A[2]+718787259&4294967295,N=D+(C<<15&4294967295|C>>>17),C=S+(D^(N|~v))+A[9]+3951481745&4294967295,x.g[0]=x.g[0]+v&4294967295,x.g[1]=x.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+N&4294967295,x.g[3]=x.g[3]+D&4294967295}r.prototype.u=function(x,v){v===void 0&&(v=x.length);for(var S=v-this.blockSize,A=this.B,N=this.h,D=0;D<v;){if(N==0)for(;D<=S;)i(this,x,D),D+=this.blockSize;if(typeof x=="string"){for(;D<v;)if(A[N++]=x.charCodeAt(D++),N==this.blockSize){i(this,A),N=0;break}}else for(;D<v;)if(A[N++]=x[D++],N==this.blockSize){i(this,A),N=0;break}}this.h=N,this.o+=v},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var v=1;v<x.length-8;++v)x[v]=0;var S=8*this.o;for(v=x.length-8;v<x.length;++v)x[v]=S&255,S/=256;for(this.u(x),x=Array(16),v=S=0;4>v;++v)for(var A=0;32>A;A+=8)x[S++]=this.g[v]>>>A&255;return x};function s(x,v){var S=a;return Object.prototype.hasOwnProperty.call(S,x)?S[x]:S[x]=v(x)}function o(x,v){this.h=v;for(var S=[],A=!0,N=x.length-1;0<=N;N--){var D=x[N]|0;A&&D==v||(S[N]=D,A=!1)}this.g=S}var a={};function l(x){return-128<=x&&128>x?s(x,function(v){return new o([v|0],0>v?-1:0)}):new o([x|0],0>x?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return d;if(0>x)return P(c(-x));for(var v=[],S=1,A=0;x>=S;A++)v[A]=x/S|0,S*=4294967296;return new o(v,0)}function h(x,v){if(x.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(x.charAt(0)=="-")return P(h(x.substring(1),v));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(v,8)),A=d,N=0;N<x.length;N+=8){var D=Math.min(8,x.length-N),C=parseInt(x.substring(N,N+D),v);8>D?(D=c(Math.pow(v,D)),A=A.j(D).add(c(C))):(A=A.j(S),A=A.add(c(C)))}return A}var d=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(I(this))return-P(this).m();for(var x=0,v=1,S=0;S<this.g.length;S++){var A=this.i(S);x+=(0<=A?A:4294967296+A)*v,v*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(y(this))return"0";if(I(this))return"-"+P(this).toString(x);for(var v=c(Math.pow(x,6)),S=this,A="";;){var N=b(S,v).g;S=w(S,N.j(v));var D=((0<S.g.length?S.g[0]:S.h)>>>0).toString(x);if(S=N,y(S))return D+A;for(;6>D.length;)D="0"+D;A=D+A}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function y(x){if(x.h!=0)return!1;for(var v=0;v<x.g.length;v++)if(x.g[v]!=0)return!1;return!0}function I(x){return x.h==-1}t.l=function(x){return x=w(this,x),I(x)?-1:y(x)?0:1};function P(x){for(var v=x.g.length,S=[],A=0;A<v;A++)S[A]=~x.g[A];return new o(S,~x.h).add(p)}t.abs=function(){return I(this)?P(this):this},t.add=function(x){for(var v=Math.max(this.g.length,x.g.length),S=[],A=0,N=0;N<=v;N++){var D=A+(this.i(N)&65535)+(x.i(N)&65535),C=(D>>>16)+(this.i(N)>>>16)+(x.i(N)>>>16);A=C>>>16,D&=65535,C&=65535,S[N]=C<<16|D}return new o(S,S[S.length-1]&-2147483648?-1:0)};function w(x,v){return x.add(P(v))}t.j=function(x){if(y(this)||y(x))return d;if(I(this))return I(x)?P(this).j(P(x)):P(P(this).j(x));if(I(x))return P(this.j(P(x)));if(0>this.l(g)&&0>x.l(g))return c(this.m()*x.m());for(var v=this.g.length+x.g.length,S=[],A=0;A<2*v;A++)S[A]=0;for(A=0;A<this.g.length;A++)for(var N=0;N<x.g.length;N++){var D=this.i(A)>>>16,C=this.i(A)&65535,Y=x.i(N)>>>16,de=x.i(N)&65535;S[2*A+2*N]+=C*de,_(S,2*A+2*N),S[2*A+2*N+1]+=D*de,_(S,2*A+2*N+1),S[2*A+2*N+1]+=C*Y,_(S,2*A+2*N+1),S[2*A+2*N+2]+=D*Y,_(S,2*A+2*N+2)}for(A=0;A<v;A++)S[A]=S[2*A+1]<<16|S[2*A];for(A=v;A<2*v;A++)S[A]=0;return new o(S,0)};function _(x,v){for(;(x[v]&65535)!=x[v];)x[v+1]+=x[v]>>>16,x[v]&=65535,v++}function E(x,v){this.g=x,this.h=v}function b(x,v){if(y(v))throw Error("division by zero");if(y(x))return new E(d,d);if(I(x))return v=b(P(x),v),new E(P(v.g),P(v.h));if(I(v))return v=b(x,P(v)),new E(P(v.g),v.h);if(30<x.g.length){if(I(x)||I(v))throw Error("slowDivide_ only works with positive integers.");for(var S=p,A=v;0>=A.l(x);)S=V(S),A=V(A);var N=M(S,1),D=M(A,1);for(A=M(A,2),S=M(S,2);!y(A);){var C=D.add(A);0>=C.l(x)&&(N=N.add(S),D=C),A=M(A,1),S=M(S,1)}return v=w(x,N.j(v)),new E(N,v)}for(N=d;0<=x.l(v);){for(S=Math.max(1,Math.floor(x.m()/v.m())),A=Math.ceil(Math.log(S)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),D=c(S),C=D.j(v);I(C)||0<C.l(x);)S-=A,D=c(S),C=D.j(v);y(D)&&(D=p),N=N.add(D),x=w(x,C)}return new E(N,x)}t.A=function(x){return b(this,x).h},t.and=function(x){for(var v=Math.max(this.g.length,x.g.length),S=[],A=0;A<v;A++)S[A]=this.i(A)&x.i(A);return new o(S,this.h&x.h)},t.or=function(x){for(var v=Math.max(this.g.length,x.g.length),S=[],A=0;A<v;A++)S[A]=this.i(A)|x.i(A);return new o(S,this.h|x.h)},t.xor=function(x){for(var v=Math.max(this.g.length,x.g.length),S=[],A=0;A<v;A++)S[A]=this.i(A)^x.i(A);return new o(S,this.h^x.h)};function V(x){for(var v=x.g.length+1,S=[],A=0;A<v;A++)S[A]=x.i(A)<<1|x.i(A-1)>>>31;return new o(S,x.h)}function M(x,v){var S=v>>5;v%=32;for(var A=x.g.length-S,N=[],D=0;D<A;D++)N[D]=0<v?x.i(D+S)>>>v|x.i(D+S+1)<<32-v:x.i(D+S);return new o(N,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,i1=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Mi=o}).apply(typeof x0<"u"?x0:typeof self<"u"?self:typeof window<"u"?window:{});var uu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var s1,Jo,o1,Vu,xp,a1,l1,u1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof uu=="object"&&uu];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var L=u[T];if(!(L in m))break e;m=m[L]}u=u[u.length-1],T=m[u],f=f(T),f!=T&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,T=!1,L={next:function(){if(!T&&m<u.length){var O=m++;return{value:f(O,u[O]),done:!1}}return T=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,m){return u.call.apply(u.bind,arguments)}function d(u,f,m){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,T),u.apply(f,L)}}return function(){return u.apply(f,arguments)}}function p(u,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function g(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var T=m.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function y(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(T,L,O){for(var B=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)B[ye-2]=arguments[ye];return f.prototype[L].apply(T,B)}}function I(u){const f=u.length;if(0<f){const m=Array(f);for(let T=0;T<f;T++)m[T]=u[T];return m}return[]}function P(u,f){for(let m=1;m<arguments.length;m++){const T=arguments[m];if(l(T)){const L=u.length||0,O=T.length||0;u.length=L+O;for(let B=0;B<O;B++)u[L+B]=T[B]}else u.push(T)}}class w{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function _(u){return/^[\s\xa0]*$/.test(u)}function E(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function b(u){return b[" "](u),u}b[" "]=function(){};var V=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function M(u,f,m){for(const T in u)f.call(m,u[T],T,u)}function x(u,f){for(const m in u)f.call(void 0,u[m],m,u)}function v(u){const f={};for(const m in u)f[m]=u[m];return f}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,f){let m,T;for(let L=1;L<arguments.length;L++){T=arguments[L];for(m in T)u[m]=T[m];for(let O=0;O<S.length;O++)m=S[O],Object.prototype.hasOwnProperty.call(T,m)&&(u[m]=T[m])}}function N(u){var f=1;u=u.split(":");const m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function D(u){a.setTimeout(()=>{throw u},0)}function C(){var u=K;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Y{constructor(){this.h=this.g=null}add(f,m){const T=de.get();T.set(f,m),this.h?this.h.next=T:this.g=T,this.h=T}}var de=new w(()=>new be,u=>u.reset());class be{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,$=!1,K=new Y,Q=()=>{const u=a.Promise.resolve(void 0);ne=()=>{u.then(re)}};var re=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(m){D(m)}var f=de;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}$=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var en=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function tn(u,f){if(ge.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(V){e:{try{b(f.nodeName);var L=!0;break e}catch{}L=!1}L||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Kn[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&tn.aa.h.call(this)}}y(tn,ge);var Kn={2:"touch",3:"pen",4:"mouse"};tn.prototype.h=function(){tn.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Gn="closure_listenable_"+(1e6*Math.random()|0),iC=0;function sC(u,f,m,T,L){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!T,this.ha=L,this.key=++iC,this.da=this.fa=!1}function Pl(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Cl(u){this.src=u,this.g={},this.h=0}Cl.prototype.add=function(u,f,m,T,L){var O=u.toString();u=this.g[O],u||(u=this.g[O]=[],this.h++);var B=Wh(u,f,T,L);return-1<B?(f=u[B],m||(f.fa=!1)):(f=new sC(f,this.src,O,!!T,L),f.fa=m,u.push(f)),f};function zh(u,f){var m=f.type;if(m in u.g){var T=u.g[m],L=Array.prototype.indexOf.call(T,f,void 0),O;(O=0<=L)&&Array.prototype.splice.call(T,L,1),O&&(Pl(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function Wh(u,f,m,T){for(var L=0;L<u.length;++L){var O=u[L];if(!O.da&&O.listener==f&&O.capture==!!m&&O.ha==T)return L}return-1}var Hh="closure_lm_"+(1e6*Math.random()|0),qh={};function Gy(u,f,m,T,L){if(Array.isArray(f)){for(var O=0;O<f.length;O++)Gy(u,f[O],m,T,L);return null}return m=Xy(m),u&&u[Gn]?u.K(f,m,c(T)?!!T.capture:!1,L):oC(u,f,m,!1,T,L)}function oC(u,f,m,T,L,O){if(!f)throw Error("Invalid event type");var B=c(L)?!!L.capture:!!L,ye=Gh(u);if(ye||(u[Hh]=ye=new Cl(u)),m=ye.add(f,m,T,B,O),m.proxy)return m;if(T=aC(),m.proxy=T,T.src=u,T.listener=m,u.addEventListener)en||(L=B),L===void 0&&(L=!1),u.addEventListener(f.toString(),T,L);else if(u.attachEvent)u.attachEvent(Yy(f.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return m}function aC(){function u(m){return f.call(u.src,u.listener,m)}const f=lC;return u}function Qy(u,f,m,T,L){if(Array.isArray(f))for(var O=0;O<f.length;O++)Qy(u,f[O],m,T,L);else T=c(T)?!!T.capture:!!T,m=Xy(m),u&&u[Gn]?(u=u.i,f=String(f).toString(),f in u.g&&(O=u.g[f],m=Wh(O,m,T,L),-1<m&&(Pl(O[m]),Array.prototype.splice.call(O,m,1),O.length==0&&(delete u.g[f],u.h--)))):u&&(u=Gh(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Wh(f,m,T,L)),(m=-1<u?f[u]:null)&&Kh(m))}function Kh(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Gn])zh(f.i,u);else{var m=u.type,T=u.proxy;f.removeEventListener?f.removeEventListener(m,T,u.capture):f.detachEvent?f.detachEvent(Yy(m),T):f.addListener&&f.removeListener&&f.removeListener(T),(m=Gh(f))?(zh(m,u),m.h==0&&(m.src=null,f[Hh]=null)):Pl(u)}}}function Yy(u){return u in qh?qh[u]:qh[u]="on"+u}function lC(u,f){if(u.da)u=!0;else{f=new tn(f,this);var m=u.listener,T=u.ha||u.src;u.fa&&Kh(u),u=m.call(T,f)}return u}function Gh(u){return u=u[Hh],u instanceof Cl?u:null}var Qh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xy(u){return typeof u=="function"?u:(u[Qh]||(u[Qh]=function(f){return u.handleEvent(f)}),u[Qh])}function ht(){oe.call(this),this.i=new Cl(this),this.M=this,this.F=null}y(ht,oe),ht.prototype[Gn]=!0,ht.prototype.removeEventListener=function(u,f,m,T){Qy(this,u,f,m,T)};function It(u,f){var m,T=u.F;if(T)for(m=[];T;T=T.F)m.push(T);if(u=u.M,T=f.type||f,typeof f=="string")f=new ge(f,u);else if(f instanceof ge)f.target=f.target||u;else{var L=f;f=new ge(T,u),A(f,L)}if(L=!0,m)for(var O=m.length-1;0<=O;O--){var B=f.g=m[O];L=Rl(B,T,!0,f)&&L}if(B=f.g=u,L=Rl(B,T,!0,f)&&L,L=Rl(B,T,!1,f)&&L,m)for(O=0;O<m.length;O++)B=f.g=m[O],L=Rl(B,T,!1,f)&&L}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],T=0;T<m.length;T++)Pl(m[T]);delete u.g[f],u.h--}}this.F=null},ht.prototype.K=function(u,f,m,T){return this.i.add(String(u),f,!1,m,T)},ht.prototype.L=function(u,f,m,T){return this.i.add(String(u),f,!0,m,T)};function Rl(u,f,m,T){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var L=!0,O=0;O<f.length;++O){var B=f[O];if(B&&!B.da&&B.capture==m){var ye=B.listener,Ze=B.ha||B.src;B.fa&&zh(u.i,B),L=ye.call(Ze,T)!==!1&&L}}return L&&!T.defaultPrevented}function Jy(u,f,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function Zy(u){u.g=Jy(()=>{u.g=null,u.i&&(u.i=!1,Zy(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class uC extends oe{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Zy(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Io(u){oe.call(this),this.h=u,this.g={}}y(Io,oe);var ev=[];function tv(u){M(u.g,function(f,m){this.g.hasOwnProperty(m)&&Kh(f)},u),u.g={}}Io.prototype.N=function(){Io.aa.N.call(this),tv(this)},Io.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yh=a.JSON.stringify,cC=a.JSON.parse,hC=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Xh(){}Xh.prototype.h=null;function nv(u){return u.h||(u.h=u.i())}function rv(){}var xo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jh(){ge.call(this,"d")}y(Jh,ge);function Zh(){ge.call(this,"c")}y(Zh,ge);var _i={},iv=null;function kl(){return iv=iv||new ht}_i.La="serverreachability";function sv(u){ge.call(this,_i.La,u)}y(sv,ge);function Ao(u){const f=kl();It(f,new sv(f))}_i.STAT_EVENT="statevent";function ov(u,f){ge.call(this,_i.STAT_EVENT,u),this.stat=f}y(ov,ge);function xt(u){const f=kl();It(f,new ov(f,u))}_i.Ma="timingevent";function av(u,f){ge.call(this,_i.Ma,u),this.size=f}y(av,ge);function Po(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Co(){this.g=!0}Co.prototype.xa=function(){this.g=!1};function dC(u,f,m,T,L,O){u.info(function(){if(u.g)if(O)for(var B="",ye=O.split("&"),Ze=0;Ze<ye.length;Ze++){var ce=ye[Ze].split("=");if(1<ce.length){var dt=ce[0];ce=ce[1];var ft=dt.split("_");B=2<=ft.length&&ft[1]=="type"?B+(dt+"="+ce+"&"):B+(dt+"=redacted&")}}else B=null;else B=O;return"XMLHTTP REQ ("+T+") [attempt "+L+"]: "+f+`
`+m+`
`+B})}function fC(u,f,m,T,L,O,B){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+L+"]: "+f+`
`+m+`
`+O+" "+B})}function rs(u,f,m,T){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+mC(u,m)+(T?" "+T:"")})}function pC(u,f){u.info(function(){return"TIMEOUT: "+f})}Co.prototype.info=function(){};function mC(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var T=m[u];if(!(2>T.length)){var L=T[1];if(Array.isArray(L)&&!(1>L.length)){var O=L[0];if(O!="noop"&&O!="stop"&&O!="close")for(var B=1;B<L.length;B++)L[B]=""}}}}return Yh(m)}catch{return f}}var bl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},lv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ed;function Nl(){}y(Nl,Xh),Nl.prototype.g=function(){return new XMLHttpRequest},Nl.prototype.i=function(){return{}},ed=new Nl;function Ir(u,f,m,T){this.j=u,this.i=f,this.l=m,this.R=T||1,this.U=new Io(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new uv}function uv(){this.i=null,this.g="",this.h=!1}var cv={},td={};function nd(u,f,m){u.L=1,u.v=Ol(Qn(f)),u.m=m,u.P=!0,hv(u,null)}function hv(u,f){u.F=Date.now(),Dl(u),u.A=Qn(u.v);var m=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),xv(m.i,"t",T),u.C=0,m=u.j.J,u.h=new uv,u.g=zv(u.j,m?f:null,!u.m),0<u.O&&(u.M=new uC(p(u.Y,u,u.g),u.O)),f=u.U,m=u.g,T=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(ev[0]=L.toString()),L=ev);for(var O=0;O<L.length;O++){var B=Gy(m,L[O],T||f.handleEvent,!1,f.h||f);if(!B)break;f.g[B.key]=B}f=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Ao(),dC(u.i,u.u,u.A,u.l,u.R,u.m)}Ir.prototype.ca=function(u){u=u.target;const f=this.M;f&&Yn(u)==3?f.j():this.Y(u)},Ir.prototype.Y=function(u){try{if(u==this.g)e:{const ft=Yn(this.g);var f=this.g.Ba();const os=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||Nv(this.g)))){this.J||ft!=4||f==7||(f==8||0>=os?Ao(3):Ao(2)),rd(this);var m=this.g.Z();this.X=m;t:if(dv(this)){var T=Nv(this.g);u="";var L=T.length,O=Yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wi(this),Ro(this);var B="";break t}this.h.i=new a.TextDecoder}for(f=0;f<L;f++)this.h.h=!0,u+=this.h.i.decode(T[f],{stream:!(O&&f==L-1)});T.length=0,this.h.g+=u,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=m==200,fC(this.i,this.u,this.A,this.l,this.R,ft,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,Ze=this.g;if((ye=Ze.g?Ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(ye)){var ce=ye;break t}}ce=null}if(m=ce)rs(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,id(this,m);else{this.o=!1,this.s=3,xt(12),wi(this),Ro(this);break e}}if(this.P){m=!0;let hn;for(;!this.J&&this.C<B.length;)if(hn=gC(this,B),hn==td){ft==4&&(this.s=4,xt(14),m=!1),rs(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==cv){this.s=4,xt(15),rs(this.i,this.l,B,"[Invalid Chunk]"),m=!1;break}else rs(this.i,this.l,hn,null),id(this,hn);if(dv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||B.length!=0||this.h.h||(this.s=1,xt(16),m=!1),this.o=this.o&&m,!m)rs(this.i,this.l,B,"[Invalid Chunked Response]"),wi(this),Ro(this);else if(0<B.length&&!this.W){this.W=!0;var dt=this.j;dt.g==this&&dt.ba&&!dt.M&&(dt.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),cd(dt),dt.M=!0,xt(11))}}else rs(this.i,this.l,B,null),id(this,B);ft==4&&wi(this),this.o&&!this.J&&(ft==4?jv(this.j,this):(this.o=!1,Dl(this)))}else DC(this.g),m==400&&0<B.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),wi(this),Ro(this)}}}catch{}finally{}};function dv(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function gC(u,f){var m=u.C,T=f.indexOf(`
`,m);return T==-1?td:(m=Number(f.substring(m,T)),isNaN(m)?cv:(T+=1,T+m>f.length?td:(f=f.slice(T,T+m),u.C=T+m,f)))}Ir.prototype.cancel=function(){this.J=!0,wi(this)};function Dl(u){u.S=Date.now()+u.I,fv(u,u.I)}function fv(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Po(p(u.ba,u),f)}function rd(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Ir.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(pC(this.i,this.A),this.L!=2&&(Ao(),xt(17)),wi(this),this.s=2,Ro(this)):fv(this,this.S-u)};function Ro(u){u.j.G==0||u.J||jv(u.j,u)}function wi(u){rd(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,tv(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function id(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||sd(m.h,u))){if(!u.K&&sd(m.h,u)&&m.G==3){try{var T=m.Da.g.parse(f)}catch{T=null}if(Array.isArray(T)&&T.length==3){var L=T;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Bl(m),Ul(m);else break e;ud(m),xt(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=Po(p(m.Za,m),6e3));if(1>=gv(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Ti(m,11)}else if((u.K||m.g==u)&&Bl(m),!_(f))for(L=m.Da.g.parse(f),f=0;f<L.length;f++){let ce=L[f];if(m.T=ce[0],ce=ce[1],m.G==2)if(ce[0]=="c"){m.K=ce[1],m.ia=ce[2];const dt=ce[3];dt!=null&&(m.la=dt,m.j.info("VER="+m.la));const ft=ce[4];ft!=null&&(m.Aa=ft,m.j.info("SVER="+m.Aa));const os=ce[5];os!=null&&typeof os=="number"&&0<os&&(T=1.5*os,m.L=T,m.j.info("backChannelRequestTimeoutMs_="+T)),T=m;const hn=u.g;if(hn){const Wl=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wl){var O=T.h;O.g||Wl.indexOf("spdy")==-1&&Wl.indexOf("quic")==-1&&Wl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(od(O,O.h),O.h=null))}if(T.D){const hd=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;hd&&(T.ya=hd,Ee(T.I,T.D,hd))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),T=m;var B=u;if(T.qa=Bv(T,T.J?T.ia:null,T.W),B.K){yv(T.h,B);var ye=B,Ze=T.L;Ze&&(ye.I=Ze),ye.B&&(rd(ye),Dl(ye)),T.g=B}else Mv(T);0<m.i.length&&$l(m)}else ce[0]!="stop"&&ce[0]!="close"||Ti(m,7);else m.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?Ti(m,7):ld(m):ce[0]!="noop"&&m.l&&m.l.ta(ce),m.v=0)}}Ao(4)}catch{}}var yC=class{constructor(u,f){this.g=u,this.map=f}};function pv(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mv(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function gv(u){return u.h?1:u.g?u.g.size:0}function sd(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function od(u,f){u.g?u.g.add(f):u.h=f}function yv(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}pv.prototype.cancel=function(){if(this.i=vv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function vv(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const m of u.g.values())f=f.concat(m.D);return f}return I(u.i)}function vC(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],m=u.length,T=0;T<m;T++)f.push(u[T]);return f}f=[],m=0;for(T in u)f[m++]=u[T];return f}function _C(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(const T in u)f[m++]=T;return f}}}function _v(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=_C(u),T=vC(u),L=T.length,O=0;O<L;O++)f.call(void 0,T[O],m&&m[O],u)}var wv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wC(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var T=u[m].indexOf("="),L=null;if(0<=T){var O=u[m].substring(0,T);L=u[m].substring(T+1)}else O=u[m];f(O,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Ei(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ei){this.h=u.h,Vl(this,u.j),this.o=u.o,this.g=u.g,Ll(this,u.s),this.l=u.l;var f=u.i,m=new No;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),Ev(this,m),this.m=u.m}else u&&(f=String(u).match(wv))?(this.h=!1,Vl(this,f[1]||"",!0),this.o=ko(f[2]||""),this.g=ko(f[3]||"",!0),Ll(this,f[4]),this.l=ko(f[5]||"",!0),Ev(this,f[6]||"",!0),this.m=ko(f[7]||"")):(this.h=!1,this.i=new No(null,this.h))}Ei.prototype.toString=function(){var u=[],f=this.j;f&&u.push(bo(f,Tv,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(bo(f,Tv,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(bo(m,m.charAt(0)=="/"?SC:TC,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",bo(m,xC)),u.join("")};function Qn(u){return new Ei(u)}function Vl(u,f,m){u.j=m?ko(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Ll(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Ev(u,f,m){f instanceof No?(u.i=f,AC(u.i,u.h)):(m||(f=bo(f,IC)),u.i=new No(f,u.h))}function Ee(u,f,m){u.i.set(f,m)}function Ol(u){return Ee(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ko(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function bo(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,EC),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function EC(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Tv=/[#\/\?@]/g,TC=/[#\?:]/g,SC=/[#\?]/g,IC=/[#\?@]/g,xC=/#/g;function No(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function xr(u){u.g||(u.g=new Map,u.h=0,u.i&&wC(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=No.prototype,t.add=function(u,f){xr(this),this.i=null,u=is(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function Sv(u,f){xr(u),f=is(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Iv(u,f){return xr(u),f=is(u,f),u.g.has(f)}t.forEach=function(u,f){xr(this),this.g.forEach(function(m,T){m.forEach(function(L){u.call(f,L,T,this)},this)},this)},t.na=function(){xr(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let T=0;T<f.length;T++){const L=u[T];for(let O=0;O<L.length;O++)m.push(f[T])}return m},t.V=function(u){xr(this);let f=[];if(typeof u=="string")Iv(this,u)&&(f=f.concat(this.g.get(is(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},t.set=function(u,f){return xr(this),this.i=null,u=is(this,u),Iv(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function xv(u,f,m){Sv(u,f),0<m.length&&(u.i=null,u.g.set(is(u,f),I(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var T=f[m];const O=encodeURIComponent(String(T)),B=this.V(T);for(T=0;T<B.length;T++){var L=O;B[T]!==""&&(L+="="+encodeURIComponent(String(B[T]))),u.push(L)}}return this.i=u.join("&")};function is(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function AC(u,f){f&&!u.j&&(xr(u),u.i=null,u.g.forEach(function(m,T){var L=T.toLowerCase();T!=L&&(Sv(this,T),xv(this,L,m))},u)),u.j=f}function PC(u,f){const m=new Co;if(a.Image){const T=new Image;T.onload=g(Ar,m,"TestLoadImage: loaded",!0,f,T),T.onerror=g(Ar,m,"TestLoadImage: error",!1,f,T),T.onabort=g(Ar,m,"TestLoadImage: abort",!1,f,T),T.ontimeout=g(Ar,m,"TestLoadImage: timeout",!1,f,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else f(!1)}function CC(u,f){const m=new Co,T=new AbortController,L=setTimeout(()=>{T.abort(),Ar(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:T.signal}).then(O=>{clearTimeout(L),O.ok?Ar(m,"TestPingServer: ok",!0,f):Ar(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),Ar(m,"TestPingServer: error",!1,f)})}function Ar(u,f,m,T,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),T(m)}catch{}}function RC(){this.g=new hC}function kC(u,f,m){const T=m||"";try{_v(u,function(L,O){let B=L;c(L)&&(B=Yh(L)),f.push(T+O+"="+encodeURIComponent(B))})}catch(L){throw f.push(T+"type="+encodeURIComponent("_badmap")),L}}function Ml(u){this.l=u.Ub||null,this.j=u.eb||!1}y(Ml,Xh),Ml.prototype.g=function(){return new Fl(this.l,this.j)},Ml.prototype.i=function(u){return function(){return u}}({});function Fl(u,f){ht.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Fl,ht),t=Fl.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Vo(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Do(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Vo(this)),this.g&&(this.readyState=3,Vo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Av(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Av(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Do(this):Vo(this),this.readyState==3&&Av(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Do(this))},t.Qa=function(u){this.g&&(this.response=u,Do(this))},t.ga=function(){this.g&&Do(this)};function Do(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Vo(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function Vo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Fl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Pv(u){let f="";return M(u,function(m,T){f+=T,f+=":",f+=m,f+=`\r
`}),f}function ad(u,f,m){e:{for(T in m){var T=!1;break e}T=!0}T||(m=Pv(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Ee(u,f,m))}function Ne(u){ht.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Ne,ht);var bC=/^https?$/i,NC=["POST","PUT"];t=Ne.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,m,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ed.g(),this.v=this.o?nv(this.o):nv(ed),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(O){Cv(this,O);return}if(u=m||"",m=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var L in T)m.set(L,T[L]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const O of T.keys())m.set(O,T.get(O));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(m.keys()).find(O=>O.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(NC,f,void 0))||T||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,B]of m)this.g.setRequestHeader(O,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bv(this),this.u=!0,this.g.send(u),this.u=!1}catch(O){Cv(this,O)}};function Cv(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Rv(u),jl(u)}function Rv(u){u.A||(u.A=!0,It(u,"complete"),It(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,It(this,"complete"),It(this,"abort"),jl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jl(this,!0)),Ne.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?kv(this):this.bb())},t.bb=function(){kv(this)};function kv(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Yn(u)!=4||u.Z()!=2)){if(u.u&&Yn(u)==4)Jy(u.Ea,0,u);else if(It(u,"readystatechange"),Yn(u)==4){u.h=!1;try{const B=u.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var T;if(T=B===0){var L=String(u.D).match(wv)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),T=!bC.test(L?L.toLowerCase():"")}m=T}if(m)It(u,"complete"),It(u,"success");else{u.m=6;try{var O=2<Yn(u)?u.g.statusText:""}catch{O=""}u.l=O+" ["+u.Z()+"]",Rv(u)}}finally{jl(u)}}}}function jl(u,f){if(u.g){bv(u);const m=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||It(u,"ready");try{m.onreadystatechange=T}catch{}}}function bv(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Yn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Yn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),cC(f)}};function Nv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function DC(u){const f={};u=(u.g&&2<=Yn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(_(u[T]))continue;var m=N(u[T]);const L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const O=f[L]||[];f[L]=O,O.push(m)}x(f,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Lo(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function Dv(u){this.Aa=0,this.i=[],this.j=new Co,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Lo("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Lo("baseRetryDelayMs",5e3,u),this.cb=Lo("retryDelaySeedMs",1e4,u),this.Wa=Lo("forwardChannelMaxRetries",2,u),this.wa=Lo("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new pv(u&&u.concurrentRequestLimit),this.Da=new RC,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Dv.prototype,t.la=8,t.G=1,t.connect=function(u,f,m,T){xt(0),this.W=u,this.H=f||{},m&&T!==void 0&&(this.H.OSID=m,this.H.OAID=T),this.F=this.X,this.I=Bv(this,null,this.W),$l(this)};function ld(u){if(Vv(u),u.G==3){var f=u.U++,m=Qn(u.I);if(Ee(m,"SID",u.K),Ee(m,"RID",f),Ee(m,"TYPE","terminate"),Oo(u,m),f=new Ir(u,u.j,f),f.L=2,f.v=Ol(Qn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=zv(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Dl(f)}$v(u)}function Ul(u){u.g&&(cd(u),u.g.cancel(),u.g=null)}function Vv(u){Ul(u),u.u&&(a.clearTimeout(u.u),u.u=null),Bl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function $l(u){if(!mv(u.h)&&!u.s){u.s=!0;var f=u.Ga;ne||Q(),$||(ne(),$=!0),K.add(f,u),u.B=0}}function VC(u,f){return gv(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Po(p(u.Ga,u,f),Uv(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new Ir(this,this.j,u);let O=this.o;if(this.S&&(O?(O=v(O),A(O,this.S)):O=this.S),this.m!==null||this.O||(L.H=O,O=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var T=this.i[m];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(f+=T,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Ov(this,L,f),m=Qn(this.I),Ee(m,"RID",u),Ee(m,"CVER",22),this.D&&Ee(m,"X-HTTP-Session-Id",this.D),Oo(this,m),O&&(this.O?f="headers="+encodeURIComponent(String(Pv(O)))+"&"+f:this.m&&ad(m,this.m,O)),od(this.h,L),this.Ua&&Ee(m,"TYPE","init"),this.P?(Ee(m,"$req",f),Ee(m,"SID","null"),L.T=!0,nd(L,m,null)):nd(L,m,f),this.G=2}}else this.G==3&&(u?Lv(this,u):this.i.length==0||mv(this.h)||Lv(this))};function Lv(u,f){var m;f?m=f.l:m=u.U++;const T=Qn(u.I);Ee(T,"SID",u.K),Ee(T,"RID",m),Ee(T,"AID",u.T),Oo(u,T),u.m&&u.o&&ad(T,u.m,u.o),m=new Ir(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Ov(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),od(u.h,m),nd(m,T,f)}function Oo(u,f){u.H&&M(u.H,function(m,T){Ee(f,T,m)}),u.l&&_v({},function(m,T){Ee(f,T,m)})}function Ov(u,f,m){m=Math.min(u.i.length,m);var T=u.l?p(u.l.Na,u.l,u):null;e:{var L=u.i;let O=-1;for(;;){const B=["count="+m];O==-1?0<m?(O=L[0].g,B.push("ofs="+O)):O=0:B.push("ofs="+O);let ye=!0;for(let Ze=0;Ze<m;Ze++){let ce=L[Ze].g;const dt=L[Ze].map;if(ce-=O,0>ce)O=Math.max(0,L[Ze].g-100),ye=!1;else try{kC(dt,B,"req"+ce+"_")}catch{T&&T(dt)}}if(ye){T=B.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,T}function Mv(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;ne||Q(),$||(ne(),$=!0),K.add(f,u),u.v=0}}function ud(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Po(p(u.Fa,u),Uv(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Fv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Po(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),Ul(this),Fv(this))};function cd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Fv(u){u.g=new Ir(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Qn(u.qa);Ee(f,"RID","rpc"),Ee(f,"SID",u.K),Ee(f,"AID",u.T),Ee(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ee(f,"TO",u.ja),Ee(f,"TYPE","xmlhttp"),Oo(u,f),u.m&&u.o&&ad(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Ol(Qn(f)),m.m=null,m.P=!0,hv(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Ul(this),ud(this),xt(19))};function Bl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function jv(u,f){var m=null;if(u.g==f){Bl(u),cd(u),u.g=null;var T=2}else if(sd(u.h,f))m=f.D,yv(u.h,f),T=1;else return;if(u.G!=0){if(f.o)if(T==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var L=u.B;T=kl(),It(T,new av(T,m)),$l(u)}else Mv(u);else if(L=f.s,L==3||L==0&&0<f.X||!(T==1&&VC(u,f)||T==2&&ud(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),L){case 1:Ti(u,5);break;case 4:Ti(u,10);break;case 3:Ti(u,6);break;default:Ti(u,2)}}}function Uv(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function Ti(u,f){if(u.j.info("Error code "+f),f==2){var m=p(u.fb,u),T=u.Xa;const L=!T;T=new Ei(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Vl(T,"https"),Ol(T),L?PC(T.toString(),m):CC(T.toString(),m)}else xt(2);u.G=0,u.l&&u.l.sa(f),$v(u),Vv(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function $v(u){if(u.G=0,u.ka=[],u.l){const f=vv(u.h);(f.length!=0||u.i.length!=0)&&(P(u.ka,f),P(u.ka,u.i),u.h.i.length=0,I(u.i),u.i.length=0),u.l.ra()}}function Bv(u,f,m){var T=m instanceof Ei?Qn(m):new Ei(m);if(T.g!="")f&&(T.g=f+"."+T.g),Ll(T,T.s);else{var L=a.location;T=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;var O=new Ei(null);T&&Vl(O,T),f&&(O.g=f),L&&Ll(O,L),m&&(O.l=m),T=O}return m=u.D,f=u.ya,m&&f&&Ee(T,m,f),Ee(T,"VER",u.la),Oo(u,T),T}function zv(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Ne(new Ml({eb:m})):new Ne(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wv(){}t=Wv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function zl(){}zl.prototype.g=function(u,f){return new Bt(u,f)};function Bt(u,f){ht.call(this),this.g=new Dv(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!_(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!_(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new ss(this)}y(Bt,ht),Bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){ld(this.g)},Bt.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Yh(u),u=m);f.i.push(new yC(f.Ya++,u)),f.G==3&&$l(f)},Bt.prototype.N=function(){this.g.l=null,delete this.j,ld(this.g),delete this.g,Bt.aa.N.call(this)};function Hv(u){Jh.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}y(Hv,Jh);function qv(){Zh.call(this),this.status=1}y(qv,Zh);function ss(u){this.g=u}y(ss,Wv),ss.prototype.ua=function(){It(this.g,"a")},ss.prototype.ta=function(u){It(this.g,new Hv(u))},ss.prototype.sa=function(u){It(this.g,new qv)},ss.prototype.ra=function(){It(this.g,"b")},zl.prototype.createWebChannel=zl.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,u1=function(){return new zl},l1=function(){return kl()},a1=_i,xp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bl.NO_ERROR=0,bl.TIMEOUT=8,bl.HTTP_ERROR=6,Vu=bl,lv.COMPLETE="complete",o1=lv,rv.EventType=xo,xo.OPEN="a",xo.CLOSE="b",xo.ERROR="c",xo.MESSAGE="d",ht.prototype.listen=ht.prototype.K,Jo=rv,Ne.prototype.listenOnce=Ne.prototype.L,Ne.prototype.getLastError=Ne.prototype.Ka,Ne.prototype.getLastErrorCode=Ne.prototype.Ba,Ne.prototype.getStatus=Ne.prototype.Z,Ne.prototype.getResponseJson=Ne.prototype.Oa,Ne.prototype.getResponseText=Ne.prototype.oa,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Ha,s1=Ne}).apply(typeof uu<"u"?uu:typeof self<"u"?self:typeof window<"u"?window:{});const A0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let go="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new gg("@firebase/firestore");function Ho(){return Ki.logLevel}function q(t,...e){if(Ki.logLevel<=ae.DEBUG){const n=e.map(_g);Ki.debug(`Firestore (${go}): ${t}`,...n)}}function mr(t,...e){if(Ki.logLevel<=ae.ERROR){const n=e.map(_g);Ki.error(`Firestore (${go}): ${t}`,...n)}}function Js(t,...e){if(Ki.logLevel<=ae.WARN){const n=e.map(_g);Ki.warn(`Firestore (${go}): ${t}`,...n)}}function _g(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${go}) INTERNAL ASSERTION FAILED: `+t;throw mr(e),new Error(e)}function pe(t,e){t||Z()}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends Tr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}}class UV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $V{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pe(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Mn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Mn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Mn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string"),new c1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string"),new yt(e)}}class BV{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class zV{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new BV(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class WV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HV{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){pe(this.o===void 0);const r=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pe(typeof n.token=="string"),this.R=n.token,new WV(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=qV(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function Zs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ge(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new te(e)}static min(){return new te(new Ge(0,0))}static max(){return new te(new Ge(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(),r===void 0?r=e.length-n:r>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return za.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof za?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Se extends za{construct(e,n,r){return new Se(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new z(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const KV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends za{construct(e,n,r){return new ot(e,n,r)}static isValidIdentifier(e){return KV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ot(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new z(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new z(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new z(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new z(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(Se.fromString(e))}static fromName(e){return new G(Se.fromString(e).popFirst(5))}static empty(){return new G(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new Se(e.slice()))}}function GV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new Ge(n+1,0):new Ge(n,r));return new ai(i,G.empty(),e)}function QV(t){return new ai(t.readTime,t.key,-1)}class ai{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ai(te.min(),G.empty(),-1)}static max(){return new ai(te.max(),G.empty(),-1)}}function YV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==XV)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(i=>i?j.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new j((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new j((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function ZV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function dl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}wg.oe=-1;function yh(t){return t==null}function xc(t){return t===0&&1/t==-1/0}function eL(t){return typeof t=="number"&&Number.isInteger(t)&&!xc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ts(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tL(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function d1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){this.comparator=e,this.root=n||it.EMPTY}insert(e,n){return new ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cu(this.root,e,this.comparator,!1)}getReverseIterator(){return new cu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cu(this.root,e,this.comparator,!0)}}class cu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class it{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??it.RED,this.left=i??it.EMPTY,this.right=s??it.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new it(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return it.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return it.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,it.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,it.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}it.EMPTY=null,it.RED=!0,it.BLACK=!1;it.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,r,i,s){return this}insert(e,n,r){return new it(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new C0(this.data.getIterator())}getIteratorFrom(e){return new C0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new lt(this.comparator);return n.data=e,n}}class C0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new Qt([])}unionWith(e){let n=new lt(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Qt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new f1("Invalid base64 string: "+s):s}}(e);return new ct(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const nL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function li(t){if(pe(!!t),typeof t=="string"){let e=0;const n=nL.exec(t);if(pe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(t.seconds),nanos:Oe(t.nanos)}}function Oe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Gi(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Tg(t){const e=t.mapValue.fields.__previous_value__;return Eg(e)?Tg(e):e}function Wa(t){const e=li(t.mapValue.fields.__local_write_time__.timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ha{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ha("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ha&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu={mapValue:{}};function Qi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Eg(t)?4:sL(t)?9007199254740991:iL(t)?10:11:Z()}function Bn(t,e){if(t===e)return!0;const n=Qi(t);if(n!==Qi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wa(t).isEqual(Wa(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=li(i.timestampValue),a=li(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Gi(i.bytesValue).isEqual(Gi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Oe(i.geoPointValue.latitude)===Oe(s.geoPointValue.latitude)&&Oe(i.geoPointValue.longitude)===Oe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Oe(i.integerValue)===Oe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Oe(i.doubleValue),a=Oe(s.doubleValue);return o===a?xc(o)===xc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Zs(t.arrayValue.values||[],e.arrayValue.values||[],Bn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(P0(o)!==P0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Bn(o[l],a[l])))return!1;return!0}(t,e);default:return Z()}}function qa(t,e){return(t.values||[]).find(n=>Bn(n,e))!==void 0}function eo(t,e){if(t===e)return 0;const n=Qi(t),r=Qi(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Oe(s.integerValue||s.doubleValue),l=Oe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return R0(t.timestampValue,e.timestampValue);case 4:return R0(Wa(t),Wa(e));case 5:return he(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Gi(s),l=Gi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=he(a[c],l[c]);if(h!==0)return h}return he(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=he(Oe(s.latitude),Oe(o.latitude));return a!==0?a:he(Oe(s.longitude),Oe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return k0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},p=o.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,y=(l=p.value)===null||l===void 0?void 0:l.arrayValue,I=he(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0);return I!==0?I:k0(g,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===hu.mapValue&&o===hu.mapValue)return 0;if(s===hu.mapValue)return 1;if(o===hu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=he(l[d],h[d]);if(p!==0)return p;const g=eo(a[l[d]],c[h[d]]);if(g!==0)return g}return he(l.length,h.length)}(t.mapValue,e.mapValue);default:throw Z()}}function R0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=li(t),r=li(e),i=he(n.seconds,r.seconds);return i!==0?i:he(n.nanos,r.nanos)}function k0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=eo(n[i],r[i]);if(s)return s}return he(n.length,r.length)}function to(t){return Ap(t)}function Ap(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=li(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Gi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Ap(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Ap(n.fields[o])}`;return i+"}"}(t.mapValue):Z()}function b0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Pp(t){return!!t&&"integerValue"in t}function Sg(t){return!!t&&"arrayValue"in t}function N0(t){return!!t&&"nullValue"in t}function D0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lu(t){return!!t&&"mapValue"in t}function iL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function da(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ts(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=da(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=da(t.arrayValue.values[n]);return e}return Object.assign({},t)}function sL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.value=e}static empty(){return new Lt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Lu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=da(n)}setAll(e){let n=ot.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=da(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Lu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Lu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ts(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Lt(da(this.value))}}function p1(t){const e=[];return ts(t.fields,(n,r)=>{const i=new ot([n]);if(Lu(r)){const s=p1(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Qt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new _t(e,0,te.min(),te.min(),te.min(),Lt.empty(),0)}static newFoundDocument(e,n,r,i){return new _t(e,1,n,te.min(),r,i,0)}static newNoDocument(e,n){return new _t(e,2,n,te.min(),te.min(),Lt.empty(),0)}static newUnknownDocument(e,n){return new _t(e,3,n,te.min(),te.min(),Lt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n){this.position=e,this.inclusive=n}}function V0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=eo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function L0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n="asc"){this.field=e,this.dir=n}}function oL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{}class ze extends m1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lL(e,n,r):n==="array-contains"?new hL(e,r):n==="in"?new dL(e,r):n==="not-in"?new fL(e,r):n==="array-contains-any"?new pL(e,r):new ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new uL(e,r):new cL(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(eo(n,this.value)):n!==null&&Qi(this.value)===Qi(n)&&this.matchesComparison(eo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class An extends m1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new An(e,n)}matches(e){return g1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function g1(t){return t.op==="and"}function y1(t){return aL(t)&&g1(t)}function aL(t){for(const e of t.filters)if(e instanceof An)return!1;return!0}function Cp(t){if(t instanceof ze)return t.field.canonicalString()+t.op.toString()+to(t.value);if(y1(t))return t.filters.map(e=>Cp(e)).join(",");{const e=t.filters.map(n=>Cp(n)).join(",");return`${t.op}(${e})`}}function v1(t,e){return t instanceof ze?function(r,i){return i instanceof ze&&r.op===i.op&&r.field.isEqual(i.field)&&Bn(r.value,i.value)}(t,e):t instanceof An?function(r,i){return i instanceof An&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&v1(o,i.filters[a]),!0):!1}(t,e):void Z()}function _1(t){return t instanceof ze?function(n){return`${n.field.canonicalString()} ${n.op} ${to(n.value)}`}(t):t instanceof An?function(n){return n.op.toString()+" {"+n.getFilters().map(_1).join(" ,")+"}"}(t):"Filter"}class lL extends ze{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class uL extends ze{constructor(e,n){super(e,"in",n),this.keys=w1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class cL extends ze{constructor(e,n){super(e,"not-in",n),this.keys=w1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function w1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class hL extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Sg(n)&&qa(n.arrayValue,this.value)}}class dL extends ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qa(this.value.arrayValue,n)}}class fL extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(qa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!qa(this.value.arrayValue,n)}}class pL extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Sg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>qa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function O0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new mL(t,e,n,r,i,s,o)}function Ig(t){const e=ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Cp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),yh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>to(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>to(r)).join(",")),e.ue=n}return e.ue}function xg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!v1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!L0(t.startAt,e.startAt)&&L0(t.endAt,e.endAt)}function Rp(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function gL(t,e,n,r,i,s,o,a){return new yo(t,e,n,r,i,s,o,a)}function vh(t){return new yo(t)}function M0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function E1(t){return t.collectionGroup!==null}function fa(t){const e=ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new lt(ot.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ka(s,r))}),n.has(ot.keyField().canonicalString())||e.ce.push(new Ka(ot.keyField(),r))}return e.ce}function Fn(t){const e=ee(t);return e.le||(e.le=T1(e,fa(t))),e.le}function yL(t){const e=ee(t);return e.he||(e.he=T1(e,t.explicitOrderBy)),e.he}function T1(t,e){if(t.limitType==="F")return O0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ka(i.field,s)});const n=t.endAt?new Ac(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ac(t.startAt.position,t.startAt.inclusive):null;return O0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function kp(t,e){const n=t.filters.concat([e]);return new yo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Pc(t,e,n){return new yo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _h(t,e){return xg(Fn(t),Fn(e))&&t.limitType===e.limitType}function S1(t){return`${Ig(Fn(t))}|lt:${t.limitType}`}function ds(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>_1(i)).join(", ")}]`),yh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>to(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>to(i)).join(",")),`Target(${r})`}(Fn(t))}; limitType=${t.limitType})`}function wh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):G.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of fa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=V0(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,fa(r),i)||r.endAt&&!function(o,a,l){const c=V0(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,fa(r),i))}(t,e)}function vL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function I1(t){return(e,n)=>{let r=!1;for(const i of fa(t)){const s=_L(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function _L(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?eo(l,c):Z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ts(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return d1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL=new ke(G.comparator);function gr(){return wL}const x1=new ke(G.comparator);function Zo(...t){let e=x1;for(const n of t)e=e.insert(n.key,n);return e}function A1(t){let e=x1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function bi(){return pa()}function P1(){return pa()}function pa(){return new vo(t=>t.toString(),(t,e)=>t.isEqual(e))}const EL=new ke(G.comparator),TL=new lt(G.comparator);function se(...t){let e=TL;for(const n of t)e=e.add(n);return e}const SL=new lt(he);function IL(){return SL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xc(e)?"-0":e}}function C1(t){return{integerValue:""+t}}function xL(t,e){return eL(e)?C1(e):Ag(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(){this._=void 0}}function AL(t,e,n){return t instanceof Cc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Eg(s)&&(s=Tg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ga?k1(t,e):t instanceof Qa?b1(t,e):function(i,s){const o=R1(i,s),a=F0(o)+F0(i.Pe);return Pp(o)&&Pp(i.Pe)?C1(a):Ag(i.serializer,a)}(t,e)}function PL(t,e,n){return t instanceof Ga?k1(t,e):t instanceof Qa?b1(t,e):n}function R1(t,e){return t instanceof Rc?function(r){return Pp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Cc extends Eh{}class Ga extends Eh{constructor(e){super(),this.elements=e}}function k1(t,e){const n=N1(e);for(const r of t.elements)n.some(i=>Bn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Qa extends Eh{constructor(e){super(),this.elements=e}}function b1(t,e){let n=N1(e);for(const r of t.elements)n=n.filter(i=>!Bn(i,r));return{arrayValue:{values:n}}}class Rc extends Eh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function F0(t){return Oe(t.integerValue||t.doubleValue)}function N1(t){return Sg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function CL(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ga&&i instanceof Ga||r instanceof Qa&&i instanceof Qa?Zs(r.elements,i.elements,Bn):r instanceof Rc&&i instanceof Rc?Bn(r.Pe,i.Pe):r instanceof Cc&&i instanceof Cc}(t.transform,e.transform)}class RL{constructor(e,n){this.version=e,this.transformResults=n}}class Tn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ou(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Th{}function D1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new L1(t.key,Tn.none()):new fl(t.key,t.data,Tn.none());{const n=t.data,r=Lt.empty();let i=new lt(ot.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new yi(t.key,r,new Qt(i.toArray()),Tn.none())}}function kL(t,e,n){t instanceof fl?function(i,s,o){const a=i.value.clone(),l=U0(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof yi?function(i,s,o){if(!Ou(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=U0(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(V1(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ma(t,e,n,r){return t instanceof fl?function(s,o,a,l){if(!Ou(s.precondition,o))return a;const c=s.value.clone(),h=$0(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof yi?function(s,o,a,l){if(!Ou(s.precondition,o))return a;const c=$0(s.fieldTransforms,l,o),h=o.data;return h.setAll(V1(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Ou(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function bL(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=R1(r.transform,i||null);s!=null&&(n===null&&(n=Lt.empty()),n.set(r.field,s))}return n||null}function j0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Zs(r,i,(s,o)=>CL(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fl extends Th{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class yi extends Th{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function V1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function U0(t,e,n){const r=new Map;pe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,PL(o,a,n[i]))}return r}function $0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,AL(s,o,e))}return r}class L1 extends Th{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NL extends Th{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&kL(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ma(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ma(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=P1();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=D1(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&Zs(this.mutations,e.mutations,(n,r)=>j0(n,r))&&Zs(this.baseMutations,e.baseMutations,(n,r)=>j0(n,r))}}class Pg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){pe(e.mutations.length===r.length);let i=function(){return EL}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Pg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue,le;function ML(t){switch(t){default:return Z();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function O1(t){if(t===void 0)return mr("GRPC error has no .code"),F.UNKNOWN;switch(t){case Ue.OK:return F.OK;case Ue.CANCELLED:return F.CANCELLED;case Ue.UNKNOWN:return F.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return F.INTERNAL;case Ue.UNAVAILABLE:return F.UNAVAILABLE;case Ue.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Ue.NOT_FOUND:return F.NOT_FOUND;case Ue.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Ue.ABORTED:return F.ABORTED;case Ue.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Ue.DATA_LOSS:return F.DATA_LOSS;default:return Z()}}(le=Ue||(Ue={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL=new Mi([4294967295,4294967295],0);function B0(t){const e=FL().encode(t),n=new i1;return n.update(e),new Uint8Array(n.digest())}function z0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Mi([n,r],0),new Mi([i,s],0)]}class Cg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ea(`Invalid padding: ${n}`);if(r<0)throw new ea(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ea(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ea(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Mi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Mi.fromNumber(r)));return i.compare(jL)===1&&(i=new Mi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=B0(e),[r,i]=z0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Cg(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=B0(e),[r,i]=z0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ea extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,pl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Sh(te.min(),i,new ke(he),gr(),se())}}class pl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new pl(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class M1{constructor(e,n){this.targetId=e,this.me=n}}class F1{constructor(e,n,r=ct.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class W0{constructor(){this.fe=0,this.ge=q0(),this.pe=ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),n=se(),r=se();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Z()}}),new pl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=q0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class UL{constructor(e){this.Le=e,this.Be=new Map,this.ke=gr(),this.qe=H0(),this.Qe=new ke(he)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Rp(s))if(r===0){const o=new G(s.path);this.Ue(n,o,_t.newNoDocument(o,te.min()))}else pe(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Gi(r).toUint8Array()}catch(l){if(l instanceof f1)return Js("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Cg(o,i,s)}catch(l){return Js(l instanceof ea?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Rp(a.target)){const l=new G(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,_t.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=se();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Sh(e,n,this.Qe,this.ke,r);return this.ke=gr(),this.qe=H0(),this.Qe=new ke(he),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new W0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new lt(he),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new W0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function H0(){return new ke(G.comparator)}function q0(){return new ke(G.comparator)}const $L={asc:"ASCENDING",desc:"DESCENDING"},BL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zL={and:"AND",or:"OR"};class WL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bp(t,e){return t.useProto3Json||yh(e)?e:{value:e}}function kc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function j1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function HL(t,e){return kc(t,e.toTimestamp())}function jn(t){return pe(!!t),te.fromTimestamp(function(n){const r=li(n);return new Ge(r.seconds,r.nanos)}(t))}function Rg(t,e){return Np(t,e).canonicalString()}function Np(t,e){const n=function(i){return new Se(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function U1(t){const e=Se.fromString(t);return pe(q1(e)),e}function Dp(t,e){return Rg(t.databaseId,e.path)}function Wd(t,e){const n=U1(e);if(n.get(1)!==t.databaseId.projectId)throw new z(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(B1(n))}function $1(t,e){return Rg(t.databaseId,e)}function qL(t){const e=U1(t);return e.length===4?Se.emptyPath():B1(e)}function Vp(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function B1(t){return pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function K0(t,e,n){return{name:Dp(t,e),fields:n.value.mapValue.fields}}function KL(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(pe(h===void 0||typeof h=="string"),ct.fromBase64String(h||"")):(pe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ct.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:O1(c.code);return new z(h,c.message||"")}(o);n=new F1(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Wd(t,r.document.name),s=jn(r.document.updateTime),o=r.document.createTime?jn(r.document.createTime):te.min(),a=new Lt({mapValue:{fields:r.document.fields}}),l=_t.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Mu(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Wd(t,r.document),s=r.readTime?jn(r.readTime):te.min(),o=_t.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Mu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Wd(t,r.document),s=r.removedTargetIds||[];n=new Mu([],s,i,null)}else{if(!("filter"in e))return Z();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new OL(i,s),a=r.targetId;n=new M1(a,o)}}return n}function GL(t,e){let n;if(e instanceof fl)n={update:K0(t,e.key,e.value)};else if(e instanceof L1)n={delete:Dp(t,e.key)};else if(e instanceof yi)n={update:K0(t,e.key,e.data),updateMask:rO(e.fieldMask)};else{if(!(e instanceof NL))return Z();n={verify:Dp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Cc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ga)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Qa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Rc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:HL(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z()}(t,e.precondition)),n}function QL(t,e){return t&&t.length>0?(pe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?jn(i.updateTime):jn(s);return o.isEqual(te.min())&&(o=jn(s)),new RL(o,i.transformResults||[])}(n,e))):[]}function YL(t,e){return{documents:[$1(t,e.path)]}}function z1(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$1(t,i);const s=function(c){if(c.length!==0)return H1(An.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Mr(p.field),direction:eO(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=bp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function XL(t,e,n,r){const{_t:i,parent:s}=z1(t,e),o={},a=[];let l=0;return n.forEach(c=>{const h="aggregate_"+l++;o[h]=c.alias,c.aggregateType==="count"?a.push({alias:h,count:{}}):c.aggregateType==="avg"?a.push({alias:h,avg:{field:Mr(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:h,sum:{field:Mr(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:i.structuredQuery},parent:i.parent},ut:o,parent:s}}function JL(t){let e=qL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){pe(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const p=W1(d);return p instanceof An&&y1(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(y){return new Ka(fs(y.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,yh(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,g=d.values||[];return new Ac(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,g=d.values||[];return new Ac(g,p)}(n.endAt)),gL(e,i,o,s,a,"F",l,c)}function ZL(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function W1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=fs(n.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=fs(n.unaryFilter.field);return ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=fs(n.unaryFilter.field);return ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=fs(n.unaryFilter.field);return ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return ze.create(fs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return An.create(n.compositeFilter.filters.map(r=>W1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function eO(t){return $L[t]}function tO(t){return BL[t]}function nO(t){return zL[t]}function Mr(t){return{fieldPath:t.canonicalString()}}function fs(t){return ot.fromServerFormat(t.fieldPath)}function H1(t){return t instanceof ze?function(n){if(n.op==="=="){if(D0(n.value))return{unaryFilter:{field:Mr(n.field),op:"IS_NAN"}};if(N0(n.value))return{unaryFilter:{field:Mr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(D0(n.value))return{unaryFilter:{field:Mr(n.field),op:"IS_NOT_NAN"}};if(N0(n.value))return{unaryFilter:{field:Mr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mr(n.field),op:tO(n.op),value:n.value}}}(t):t instanceof An?function(n){const r=n.getFilters().map(i=>H1(i));return r.length===1?r[0]:{compositeFilter:{op:nO(n.op),filters:r}}}(t):Z()}function rO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function q1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n,r,i,s=te.min(),o=te.min(),a=ct.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Wr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e){this.ct=e}}function sO(t){const e=JL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Pc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(){this.un=new aO}addToCollectionParentIndex(e,n){return this.un.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(ai.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(ai.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class aO{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new lt(Se.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new lt(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new no(0)}static kn(){return new no(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(){this.changes=new vo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ma(r.mutation,i,Qt.empty(),Ge.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const i=bi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Zo();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=bi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=gr();const o=pa(),a=function(){return pa()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof yi)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),ma(h.mutation,c,h.mutation.getFieldMask(),Ge.now())):o.set(c.key,Qt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new uO(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=pa();let i=new ke((o,a)=>o-a),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Qt.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||se()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=P1();h.forEach(p=>{if(!s.has(p)){const g=D1(n.get(p),r.get(p));g!==null&&d.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):E1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):j.resolve(bi());let a=-1,l=s;return o.next(c=>j.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,se())).next(h=>({batchId:a,changes:A1(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=Zo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Zo();return this.indexManager.getCollectionParents(e,s).next(a=>j.forEach(a,l=>{const c=function(d,p){return new yo(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,_t.newInvalidDocument(h)))});let a=Zo();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&ma(h.mutation,c,Qt.empty(),Ge.now()),wh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return j.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:jn(i.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:sO(i.bundledQuery),readTime:jn(i.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(){this.overlays=new ke(G.comparator),this.Ir=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=bi();return j.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const i=bi(),s=n.length+1,o=new G(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return j.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ke((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=bi(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=bi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return j.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new VL(n,r));let s=this.Ir.get(n);s===void 0&&(s=se(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(){this.Tr=new lt(Ye.Er),this.dr=new lt(Ye.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ye(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ye(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new G(new Se([])),r=new Ye(n,e),i=new Ye(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new G(new Se([])),r=new Ye(n,e),i=new Ye(n,e+1);let s=se();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ye(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ye{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return G.comparator(e.key,n.key)||he(e.wr,n.wr)}static Ar(e,n){return he(e.wr,n.wr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new lt(Ye.Er)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new DL(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Ye(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ye(n,0),i=new Ye(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new lt(he);return n.forEach(i=>{const s=new Ye(i,0),o=new Ye(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),j.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;G.isDocumentKey(s)||(s=s.child(""));const o=new Ye(new G(s),0);let a=new lt(he);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),j.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){pe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return j.forEach(n.mutations,i=>{const s=new Ye(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ye(n,0),i=this.br.firstAfterOrEqual(r);return j.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e){this.Mr=e,this.docs=function(){return new ke(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():_t.newInvalidDocument(n))}getEntries(e,n){let r=gr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():_t.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=gr();const o=n.path,a=new G(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||YV(QV(h),r)<=0||(i.has(h.key)||wh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Z()}Or(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new gO(this)}getSize(e){return j.resolve(this.size)}}class gO extends lO{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e){this.persistence=e,this.Nr=new vo(n=>Ig(n),xg),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new kg,this.targetCount=0,this.kr=no.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),j.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new no(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Kn(n),j.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),j.waitFor(s).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,n){this.qr={},this.overlays={},this.Qr=new wg(0),this.Kr=!1,this.Kr=!0,this.$r=new fO,this.referenceDelegate=e(this),this.Ur=new yO(this),this.indexManager=new oO,this.remoteDocumentCache=function(i){return new mO(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new iO(n),this.Gr=new hO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new pO(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const i=new _O(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return j.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class _O extends JV{constructor(e){super(),this.currentSequenceNumber=e}}class bg{constructor(e){this.persistence=e,this.Jr=new kg,this.Yr=null}static Zr(e){return new bg(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),j.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,r=>{const i=G.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return j.or([()=>j.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=se(),i=se();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Ng(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return wD()?8:ZV(St())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new wO;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ho()<=ae.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",ds(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):(Ho()<=ae.DEBUG&&q("QueryEngine","Query:",ds(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ho()<=ae.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",ds(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(n))):j.resolve())}Yi(e,n){if(M0(n))return j.resolve(null);let r=Fn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Pc(n,null,"F"),r=Fn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=se(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Pc(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return M0(n)||i.isEqual(te.min())?j.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?j.resolve(null):(Ho()<=ae.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ds(n)),this.rs(e,o,n,GV(i,-1)).next(a=>a))})}ts(e,n){let r=new lt(I1(e));return n.forEach((i,s)=>{wh(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Ho()<=ae.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",ds(n)),this.Ji.getDocumentsMatchingQuery(e,n,ai.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new ke(he),this._s=new vo(s=>Ig(s),xg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function SO(t,e,n,r){return new TO(t,e,n,r)}async function K1(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=se();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function IO(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let g=j.resolve();return p.forEach(y=>{g=g.next(()=>h.getEntry(l,y)).next(I=>{const P=c.docVersions.get(y);pe(P!==null),I.version.compareTo(P)<0&&(d.applyToRemoteDocument(I,c),I.isValidDocument()&&(I.setReadTime(c.commitVersion),h.addEntry(I)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=se();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function G1(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function xO(t,e){const n=ee(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(ct.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(d,g),function(I,P,w){return I.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,g,h)&&a.push(n.Ur.updateTargetData(s,g))});let l=gr(),c=se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(AO(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(te.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return j.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function AO(t,e,n){let r=se(),i=se();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=gr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(te.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function PO(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function CO(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,j.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Wr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Lp(t,e,n){const r=ee(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!dl(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function G0(t,e,n){const r=ee(t);let i=te.min(),s=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=ee(l),p=d._s.get(h);return p!==void 0?j.resolve(d.os.get(p)):d.Ur.getTargetData(c,h)}(r,o,Fn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:te.min(),n?s:se())).next(a=>(RO(r,vL(e),a),{documents:a,Ts:s})))}function RO(t,e,n){let r=t.us.get(e)||te.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Q0{constructor(){this.activeTargetIds=IL()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kO{constructor(){this.so=new Q0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Q0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let du=null;function Hd(){return du===null?du=function(){return 268435456+Math.round(2147483648*Math.random())}():du++,"0x"+du.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt="WebChannelConnection";class VO extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Hd(),l=this.xo(n,r.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(h=>(q("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Js("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+go}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=NO[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Hd();return new Promise((o,a)=>{const l=new s1;l.setWithCredentials(!0),l.listenOnce(o1.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Vu.NO_ERROR:const h=l.getResponseJson();q(gt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Vu.TIMEOUT:q(gt,`RPC '${e}' ${s} timed out`),a(new z(F.DEADLINE_EXCEEDED,"Request time out"));break;case Vu.HTTP_ERROR:const d=l.getStatus();if(q(gt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const y=function(P){const w=P.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(w)>=0?w:F.UNKNOWN}(g.status);a(new z(y,g.message))}else a(new z(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new z(F.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{q(gt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);q(gt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Hd(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=u1(),a=l1(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");q(gt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let p=!1,g=!1;const y=new DO({Io:P=>{g?q(gt,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(p||(q(gt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),p=!0),q(gt,`RPC '${e}' stream ${i} sending:`,P),d.send(P))},To:()=>d.close()}),I=(P,w,_)=>{P.listen(w,E=>{try{_(E)}catch(b){setTimeout(()=>{throw b},0)}})};return I(d,Jo.EventType.OPEN,()=>{g||(q(gt,`RPC '${e}' stream ${i} transport opened.`),y.yo())}),I(d,Jo.EventType.CLOSE,()=>{g||(g=!0,q(gt,`RPC '${e}' stream ${i} transport closed`),y.So())}),I(d,Jo.EventType.ERROR,P=>{g||(g=!0,Js(gt,`RPC '${e}' stream ${i} transport errored:`,P),y.So(new z(F.UNAVAILABLE,"The operation could not be completed")))}),I(d,Jo.EventType.MESSAGE,P=>{var w;if(!g){const _=P.data[0];pe(!!_);const E=_,b=E.error||((w=E[0])===null||w===void 0?void 0:w.error);if(b){q(gt,`RPC '${e}' stream ${i} received error:`,b);const V=b.status;let M=function(S){const A=Ue[S];if(A!==void 0)return O1(A)}(V),x=b.message;M===void 0&&(M=F.INTERNAL,x="Unknown error status: "+V+" with message "+b.message),g=!0,y.So(new z(M,x)),d.close()}else q(gt,`RPC '${e}' stream ${i} received:`,_),y.bo(_)}}),I(a,a1.STAT_EVENT,P=>{P.stat===xp.PROXY?q(gt,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===xp.NOPROXY&&q(gt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function qd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(t){return new WL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Q1(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(mr(n.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new z(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LO extends Y1{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=KL(this.serializer,e),r=function(s){if(!("targetChange"in s))return te.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?te.min():o.readTime?jn(o.readTime):te.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Vp(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Rp(l)?{documents:YL(s,l)}:{query:z1(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=j1(s,o.resumeToken);const c=bp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(te.min())>0){a.readTime=kc(s,o.snapshotVersion.toTimestamp());const c=bp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=ZL(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Vp(this.serializer),n.removeTarget=e,this.a_(n)}}class OO extends Y1{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return pe(!!e.streamToken),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=QL(e.writeResults,e.commitTime),r=jn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Vp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>GL(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new z(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Np(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(F.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Np(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class FO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(mr(n),this.D_=!1):q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{ns(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ee(l);c.L_.add(4),await ml(c),c.q_.set("Unknown"),c.L_.delete(4),await xh(c)}(this))})}),this.q_=new FO(r,i)}}async function xh(t){if(ns(t))for(const e of t.B_)await e(!0)}async function ml(t){for(const e of t.B_)await e(!1)}function X1(t,e){const n=ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Og(n)?Lg(n):_o(n).r_()&&Vg(n,e))}function Dg(t,e){const n=ee(t),r=_o(n);n.N_.delete(e),r.r_()&&J1(n,e),n.N_.size===0&&(r.r_()?r.o_():ns(n)&&n.q_.set("Unknown"))}function Vg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_o(t).A_(e)}function J1(t,e){t.Q_.xe(e),_o(t).R_(e)}function Lg(t){t.Q_=new UL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),_o(t).start(),t.q_.v_()}function Og(t){return ns(t)&&!_o(t).n_()&&t.N_.size>0}function ns(t){return ee(t).L_.size===0}function Z1(t){t.Q_=void 0}async function UO(t){t.q_.set("Online")}async function $O(t){t.N_.forEach((e,n)=>{Vg(t,e)})}async function BO(t,e){Z1(t),Og(t)?(t.q_.M_(e),Lg(t)):t.q_.set("Unknown")}async function zO(t,e,n){if(t.q_.set("Online"),e instanceof F1&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bc(t,r)}else if(e instanceof Mu?t.Q_.Ke(e):e instanceof M1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(te.min()))try{const r=await G1(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(ct.EMPTY_BYTE_STRING,h.snapshotVersion)),J1(s,l);const d=new Wr(h.target,l,c,h.sequenceNumber);Vg(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){q("RemoteStore","Failed to raise snapshot:",r),await bc(t,r)}}async function bc(t,e,n){if(!dl(e))throw e;t.L_.add(1),await ml(t),t.q_.set("Offline"),n||(n=()=>G1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await xh(t)})}function ex(t,e){return e().catch(n=>bc(t,n,e))}async function Ah(t){const e=ee(t),n=ui(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;WO(e);)try{const i=await PO(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,HO(e,i)}catch(i){await bc(e,i)}tx(e)&&nx(e)}function WO(t){return ns(t)&&t.O_.length<10}function HO(t,e){t.O_.push(e);const n=ui(t);n.r_()&&n.V_&&n.m_(e.mutations)}function tx(t){return ns(t)&&!ui(t).n_()&&t.O_.length>0}function nx(t){ui(t).start()}async function qO(t){ui(t).p_()}async function KO(t){const e=ui(t);for(const n of t.O_)e.m_(n.mutations)}async function GO(t,e,n){const r=t.O_.shift(),i=Pg.from(r,e,n);await ex(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ah(t)}async function QO(t,e){e&&ui(t).V_&&await async function(r,i){if(function(o){return ML(o)&&o!==F.ABORTED}(i.code)){const s=r.O_.shift();ui(r).s_(),await ex(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ah(r)}}(t,e),tx(t)&&nx(t)}async function X0(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=ns(n);n.L_.add(3),await ml(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await xh(n)}async function YO(t,e){const n=ee(t);e?(n.L_.delete(2),await xh(n)):e||(n.L_.add(2),await ml(n),n.q_.set("Unknown"))}function _o(t){return t.K_||(t.K_=function(n,r,i){const s=ee(n);return s.w_(),new LO(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:UO.bind(null,t),Ro:$O.bind(null,t),mo:BO.bind(null,t),d_:zO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Og(t)?Lg(t):t.q_.set("Unknown")):(await t.K_.stop(),Z1(t))})),t.K_}function ui(t){return t.U_||(t.U_=function(n,r,i){const s=ee(n);return s.w_(),new OO(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:qO.bind(null,t),mo:QO.bind(null,t),f_:KO.bind(null,t),g_:GO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ah(t)):(await t.U_.stop(),t.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Mn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Mg(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fg(t,e){if(mr("AsyncQueue",`${e}: ${t}`),dl(t))return new z(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=Zo(),this.sortedSet=new ke(this.comparator)}static emptySet(e){return new js(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof js)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new js;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(){this.W_=new ke(G.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ro{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ro(e,n,js.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_h(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class JO{constructor(){this.queries=Z0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ee(n),s=i.queries;i.queries=Z0(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new z(F.ABORTED,"Firestore shutting down"))}}function Z0(){return new vo(t=>S1(t),_h)}async function jg(t,e){const n=ee(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new XO,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Fg(o,`Initialization of query '${ds(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&$g(n)}async function Ug(t,e){const n=ee(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ZO(t,e){const n=ee(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&$g(n)}function e2(t,e,n){const r=ee(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function $g(t){t.Y_.forEach(e=>{e.next()})}var Op,ew;(ew=Op||(Op={})).ea="default",ew.Cache="cache";class Bg{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ro(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ro.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Op.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){this.key=e}}class ix{constructor(e){this.key=e}}class t2{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=I1(e),this.Ra=new js(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new J0,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const p=i.get(h),g=wh(this.query,d)?d:null,y=!!p&&this.mutatedKeys.has(p.key),I=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let P=!1;p&&g?p.data.isEqual(g.data)?y!==I&&(r.track({type:3,doc:g}),P=!0):this.ga(p,g)||(r.track({type:2,doc:g}),P=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),P=!0):p&&!g&&(r.track({type:1,doc:p}),P=!0,(l||c)&&(a=!0)),P&&(g?(o=o.add(g),s=I?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(g,y){const I=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return I(g)-I(y)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new ro(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new J0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new ix(r))}),this.da.forEach(r=>{e.has(r)||n.push(new rx(r))}),n}ba(e){this.Ta=e.Ts,this.da=se();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ro.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class n2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class r2{constructor(e){this.key=e,this.va=!1}}class i2{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new vo(a=>S1(a),_h),this.Ma=new Map,this.xa=new Set,this.Oa=new ke(G.comparator),this.Na=new Map,this.La=new kg,this.Ba={},this.ka=new Map,this.qa=no.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function s2(t,e,n=!0){const r=cx(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await sx(r,e,n,!0),i}async function o2(t,e){const n=cx(t);await sx(n,e,!0,!1)}async function sx(t,e,n,r){const i=await CO(t.localStore,Fn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await a2(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&X1(t.remoteStore,i),a}async function a2(t,e,n,r,i){t.Ka=(d,p,g)=>async function(I,P,w,_){let E=P.view.ma(w);E.ns&&(E=await G0(I.localStore,P.query,!1).then(({documents:x})=>P.view.ma(x,E)));const b=_&&_.targetChanges.get(P.targetId),V=_&&_.targetMismatches.get(P.targetId)!=null,M=P.view.applyChanges(E,I.isPrimaryClient,b,V);return nw(I,P.targetId,M.wa),M.snapshot}(t,d,p,g);const s=await G0(t.localStore,e,!0),o=new t2(e,s.Ts),a=o.ma(s.documents),l=pl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);nw(t,n,c.wa);const h=new n2(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function l2(t,e,n){const r=ee(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!_h(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Lp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Dg(r.remoteStore,i.targetId),Mp(r,i.targetId)}).catch(hl)):(Mp(r,i.targetId),await Lp(r.localStore,i.targetId,!0))}async function u2(t,e){const n=ee(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Dg(n.remoteStore,r.targetId))}async function c2(t,e,n){const r=y2(t);try{const i=await function(o,a){const l=ee(o),c=Ge.now(),h=a.reduce((g,y)=>g.add(y.key),se());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=gr(),I=se();return l.cs.getEntries(g,h).next(P=>{y=P,y.forEach((w,_)=>{_.isValidDocument()||(I=I.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,y)).next(P=>{d=P;const w=[];for(const _ of a){const E=bL(_,d.get(_.key).overlayedDocument);E!=null&&w.push(new yi(_.key,E,p1(E.value.mapValue),Tn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,w,a)}).next(P=>{p=P;const w=P.applyToLocalDocumentSet(d,I);return l.documentOverlayCache.saveOverlays(g,P.batchId,w)})}).then(()=>({batchId:p.batchId,changes:A1(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new ke(he)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await gl(r,i.changes),await Ah(r.remoteStore)}catch(i){const s=Fg(i,"Failed to persist write");n.reject(s)}}async function ox(t,e){const n=ee(t);try{const r=await xO(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?pe(o.va):i.removedDocuments.size>0&&(pe(o.va),o.va=!1))}),await gl(n,r,e)}catch(r){await hl(r)}}function tw(t,e,n){const r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ee(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.j_)p.Z_(a)&&(c=!0)}),c&&$g(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function h2(t,e,n){const r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new ke(G.comparator);o=o.insert(s,_t.newNoDocument(s,te.min()));const a=se().add(s),l=new Sh(te.min(),new Map,new ke(he),o,a);await ox(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),zg(r)}else await Lp(r.localStore,e,!1).then(()=>Mp(r,e,n)).catch(hl)}async function d2(t,e){const n=ee(t),r=e.batch.batchId;try{const i=await IO(n.localStore,e);lx(n,r,null),ax(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await gl(n,i)}catch(i){await hl(i)}}async function f2(t,e,n){const r=ee(t);try{const i=await function(o,a){const l=ee(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(pe(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);lx(r,e,n),ax(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await gl(r,i)}catch(i){await hl(i)}}function ax(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function lx(t,e,n){const r=ee(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Mp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||ux(t,r)})}function ux(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Dg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),zg(t))}function nw(t,e,n){for(const r of n)r instanceof rx?(t.La.addReference(r.key,e),p2(t,r)):r instanceof ix?(q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||ux(t,r.key)):Z()}function p2(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(q("SyncEngine","New document in limbo: "+n),t.xa.add(r),zg(t))}function zg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new G(Se.fromString(e)),r=t.qa.next();t.Na.set(r,new r2(n)),t.Oa=t.Oa.insert(n,r),X1(t.remoteStore,new Wr(Fn(vh(n.path)),r,"TargetPurposeLimboResolution",wg.oe))}}async function gl(t,e,n){const r=ee(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=Ng.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const h=ee(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>j.forEach(c,p=>j.forEach(p.$i,g=>h.persistence.referenceDelegate.addReference(d,p.targetId,g)).next(()=>j.forEach(p.Ui,g=>h.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))}catch(d){if(!dl(d))throw d;q("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const g=h.os.get(p),y=g.snapshotVersion,I=g.withLastLimboFreeSnapshotVersion(y);h.os=h.os.insert(p,I)}}}(r.localStore,s))}async function m2(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await K1(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new z(F.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gl(n,r.hs)}}function g2(t,e){const n=ee(t),r=n.Na.get(e);if(r&&r.va)return se().add(r.key);{let i=se();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function cx(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ox.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=g2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=h2.bind(null,e),e.Ca.d_=ZO.bind(null,e.eventManager),e.Ca.$a=e2.bind(null,e.eventManager),e}function y2(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=d2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f2.bind(null,e),e}class Nc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ih(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return SO(this.persistence,new EO,e.initialUser,this.serializer)}Ga(e){return new vO(bg.Zr,this.serializer)}Wa(e){return new kO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nc.provider={build:()=>new Nc};class Fp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>tw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=m2.bind(null,this.syncEngine),await YO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new JO}()}createDatastore(e){const n=Ih(e.databaseInfo.databaseId),r=function(s){return new VO(s)}(e.databaseInfo);return function(s,o,a,l){return new MO(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new jO(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>tw(this.syncEngine,n,0),function(){return Y0.D()?new Y0:new bO}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const d=new i2(i,s,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ee(i);q("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await ml(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Fp.provider={build:()=>new Fp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):mr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yt.UNAUTHENTICATED,this.clientId=h1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Fg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Kd(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await K1(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function rw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await _2(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>X0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>X0(e.remoteStore,i)),t._onlineComponents=e}async function _2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Kd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Js("Error using user provided cache. Falling back to memory cache: "+n),await Kd(t,new Nc)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await Kd(t,new Nc);return t._offlineComponents}async function Hg(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await rw(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await rw(t,new Fp))),t._onlineComponents}function w2(t){return Hg(t).then(e=>e.syncEngine)}function E2(t){return Hg(t).then(e=>e.datastore)}async function Dc(t){const e=await Hg(t),n=e.eventManager;return n.onListen=s2.bind(null,e.syncEngine),n.onUnlisten=l2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=o2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=u2.bind(null,e.syncEngine),n}function T2(t,e,n={}){const r=new Mn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Wg({next:p=>{h.Za(),o.enqueueAndForget(()=>Ug(s,d));const g=p.docs.has(a);!g&&p.fromCache?c.reject(new z(F.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?c.reject(new z(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new Bg(vh(a.path),h,{includeMetadataChanges:!0,_a:!0});return jg(s,d)}(await Dc(t),t.asyncQueue,e,n,r)),r.promise}function S2(t,e,n={}){const r=new Mn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Wg({next:p=>{h.Za(),o.enqueueAndForget(()=>Ug(s,d)),p.fromCache&&l.source==="server"?c.reject(new z(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new Bg(a,h,{includeMetadataChanges:!0,_a:!0});return jg(s,d)}(await Dc(t),t.asyncQueue,e,n,r)),r.promise}function I2(t,e,n){const r=new Mn;return t.asyncQueue.enqueueAndForget(async()=>{try{const i=await E2(t);r.resolve(async function(o,a,l){var c;const h=ee(o),{request:d,ut:p,parent:g}=XL(h.serializer,yL(a),l);h.connection.Fo||delete d.parent;const y=(await h.Lo("RunAggregationQuery",h.serializer.databaseId,g,d,1)).filter(P=>!!P.result);pe(y.length===1);const I=(c=y[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(I).reduce((P,w)=>(P[p[w]]=I[w],P),{})}(i,e,n))}catch(i){r.reject(i)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(t,e,n){if(!n)throw new z(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function x2(t,e,n,r){if(e===!0&&r===!0)throw new z(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function sw(t){if(!G.isDocumentKey(t))throw new z(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ow(t){if(G.isDocumentKey(t))throw new z(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ph(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function Ut(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ph(t);throw new z(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function A2(t,e){if(e<=0)throw new z(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}x2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ch{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new jV;switch(r.type){case"firstParty":return new zV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=iw.get(n);r&&(q("ComponentProvider","Removing Datastore"),iw.delete(n),r.terminate())}(this),Promise.resolve()}}function P2(t,e,n,r={}){var i;const s=(t=Ut(t,Ch))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Js("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=yt.MOCK_USER;else{a=fD(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new z(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new yt(c)}t._authCredentials=new UV(new c1(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Sr(this.firestore,e,this._query)}}class Et{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Et(this.firestore,e,this._key)}}class ii extends Sr{constructor(e,n,r){super(e,n,vh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new G(e))}withConverter(e){return new ii(this.firestore,e,this._path)}}function qn(t,e,...n){if(t=Qe(t),dx("collection","path",e),t instanceof Ch){const r=Se.fromString(e,...n);return ow(r),new ii(t,null,r)}{if(!(t instanceof Et||t instanceof ii))throw new z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return ow(r),new ii(t.firestore,null,r)}}function fe(t,e,...n){if(t=Qe(t),arguments.length===1&&(e=h1.newId()),dx("doc","path",e),t instanceof Ch){const r=Se.fromString(e,...n);return sw(r),new Et(t,null,new G(r))}{if(!(t instanceof Et||t instanceof ii))throw new z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return sw(r),new Et(t.firestore,t instanceof ii?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Q1(this,"async_queue_retry"),this.Vu=()=>{const r=qd();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=qd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=qd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Mn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!dl(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw mr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Mg.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Z()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function uw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class yr extends Ch{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new lw,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new lw(e),this._firestoreClient=void 0,await e}}}function C2(t,e){const n=typeof t=="object"?t:t1(),r=typeof t=="string"?t:"(default)",i=vg(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=hD("firestore");s&&P2(i,...s)}return i}function yl(t){if(t._terminated)throw new z(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||R2(t),t._firestoreClient}function R2(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new rL(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,hx(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new v2(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class b2{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this._byteString=e}static fromBase64String(e){try{return new io(ct.fromBase64String(e))}catch(n){throw new z(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new io(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2=/^__.*__$/;class D2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new yi(e,this.data,this.fieldMask,n,this.fieldTransforms):new fl(e,this.data,n,this.fieldTransforms)}}class fx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new yi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function px(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class Qg{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Qg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Vc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(px(this.Cu)&&N2.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class V2{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ih(e)}Qu(e,n,r,i=!1){return new Qg({Cu:e,methodName:n,qu:r,path:ot.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kh(t){const e=t._freezeSettings(),n=Ih(t._databaseId);return new V2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function mx(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Yg("Data must be an object, but it was:",o,r);const a=gx(r,o);let l,c;if(s.merge)l=new Qt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=jp(e,d,n);if(!o.contains(p))throw new z(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);vx(h,p)||h.push(p)}l=new Qt(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new D2(new Lt(a),l,c)}class bh extends qg{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bh}}function L2(t,e,n,r){const i=t.Qu(1,e,n);Yg("Data must be an object, but it was:",i,r);const s=[],o=Lt.empty();ts(r,(l,c)=>{const h=Xg(e,l,n);c=Qe(c);const d=i.Nu(h);if(c instanceof bh)s.push(h);else{const p=vl(c,d);p!=null&&(s.push(h),o.set(h,p))}});const a=new Qt(s);return new fx(o,a,i.fieldTransforms)}function O2(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[jp(e,r,n)],l=[i];if(s.length%2!=0)throw new z(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(jp(e,s[p])),l.push(s[p+1]);const c=[],h=Lt.empty();for(let p=a.length-1;p>=0;--p)if(!vx(c,a[p])){const g=a[p];let y=l[p];y=Qe(y);const I=o.Nu(g);if(y instanceof bh)c.push(g);else{const P=vl(y,I);P!=null&&(c.push(g),h.set(g,P))}}const d=new Qt(c);return new fx(h,d,o.fieldTransforms)}function M2(t,e,n,r=!1){return vl(n,t.Qu(r?4:3,e))}function vl(t,e){if(yx(t=Qe(t)))return Yg("Unsupported field value:",e,t),gx(t,e);if(t instanceof qg)return function(r,i){if(!px(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=vl(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return xL(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ge.fromDate(r);return{timestampValue:kc(i.serializer,s)}}if(r instanceof Ge){const s=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:kc(i.serializer,s)}}if(r instanceof Kg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof io)return{bytesValue:j1(i.serializer,r._byteString)};if(r instanceof Et){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Rg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Gg)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Ag(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Ph(r)}`)}(t,e)}function gx(t,e){const n={};return d1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ts(t,(r,i)=>{const s=vl(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function yx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof Kg||t instanceof io||t instanceof Et||t instanceof qg||t instanceof Gg)}function Yg(t,e,n){if(!yx(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Ph(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function jp(t,e,n){if((e=Qe(e))instanceof Rh)return e._internalPath;if(typeof e=="string")return Xg(t,e);throw Vc("Field path arguments must be of type string or ",t,!1,void 0,n)}const F2=new RegExp("[~\\*/\\[\\]]");function Xg(t,e,n){if(e.search(F2)>=0)throw Vc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Rh(...e.split("."))._internalPath}catch{throw Vc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new z(F.INVALID_ARGUMENT,a+t+l)}function vx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new j2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Nh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class j2 extends _x{data(){return super.data()}}function Nh(t,e){return typeof e=="string"?Xg(t,e):e instanceof Rh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jg{}class Zg extends Jg{}function De(t,e,...n){let r=[];e instanceof Jg&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof ey).length,a=s.filter(l=>l instanceof Dh).length;if(o>1||o>0&&a>0)throw new z(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Dh extends Zg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Dh(e,n,r)}_apply(e){const n=this._parse(e);return Ex(e._query,n),new Sr(e.firestore,e.converter,kp(e._query,n))}_parse(e){const n=kh(e.firestore);return function(s,o,a,l,c,h,d){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new z(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){hw(d,h);const g=[];for(const y of d)g.push(cw(l,s,y));p={arrayValue:{values:g}}}else p=cw(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||hw(d,h),p=M2(a,o,d,h==="in"||h==="not-in");return ze.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ve(t,e,n){const r=e,i=Nh("where",t);return Dh._create(i,r,n)}class ey extends Jg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ey(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:An.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)Ex(o,l),o=kp(o,l)}(e._query,n),new Sr(e.firestore,e.converter,kp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ty extends Zg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ty(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new z(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new z(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ka(s,o)}(e._query,this._field,this._direction);return new Sr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new yo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function U2(t,e="asc"){const n=e,r=Nh("orderBy",t);return ty._create(r,n)}class ny extends Zg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new ny(e,n,r)}_apply(e){return new Sr(e.firestore,e.converter,Pc(e._query,this._limit,this._limitType))}}function et(t){return A2("limit",t),ny._create("limit",t,"F")}function cw(t,e,n){if(typeof(n=Qe(n))=="string"){if(n==="")throw new z(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!E1(e)&&n.indexOf("/")!==-1)throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Se.fromString(n));if(!G.isDocumentKey(r))throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return b0(t,new G(r))}if(n instanceof Et)return b0(t,n._key);throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ph(n)}.`)}function hw(t,e){if(!Array.isArray(t)||t.length===0)throw new z(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ex(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new z(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class $2{convertValue(e,n="none"){switch(Qi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Gi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ts(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Oe(o.doubleValue));return new Gg(s)}convertGeoPoint(e){return new Kg(Oe(e.latitude),Oe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Tg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wa(e));default:return null}}convertTimestamp(e){const n=li(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Se.fromString(e);pe(q1(r));const i=new Ha(r.get(1),r.get(3)),s=new G(r.popFirst(5));return i.isEqual(n)||mr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function B2(){return new k2("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sx extends _x{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Fu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Nh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Fu extends Sx{data(e={}){return super.data(e)}}class Ix{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ta(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Fu(this._firestore,this._userDataWriter,r.key,r,new ta(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Fu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ta(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Fu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ta(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:z2(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function z2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(t){t=Ut(t,Et);const e=Ut(t.firestore,yr);return T2(yl(e),t._key).then(n=>xx(e,t,n))}class Vh extends $2{constructor(e){super(),this.firestore=e}convertBytes(e){return new io(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,n)}}function je(t){t=Ut(t,Sr);const e=Ut(t.firestore,yr),n=yl(e),r=new Vh(e);return wx(t._query),S2(n,t._query).then(i=>new Ix(e,r,t,i))}function zt(t,e,n){t=Ut(t,Et);const r=Ut(t.firestore,yr),i=Tx(t.converter,e,n);return ry(r,[mx(kh(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Tn.none())])}function Wt(t,e,n,...r){t=Ut(t,Et);const i=Ut(t.firestore,yr),s=kh(i);let o;return o=typeof(e=Qe(e))=="string"||e instanceof Rh?O2(s,"updateDoc",t._key,e,n,r):L2(s,"updateDoc",t._key,e),ry(i,[o.toMutation(t._key,Tn.exists(!0))])}function W2(t,e){const n=Ut(t.firestore,yr),r=fe(t),i=Tx(t.converter,e);return ry(n,[mx(kh(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Tn.exists(!1))]).then(()=>r)}function fn(t,...e){var n,r,i;t=Qe(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||uw(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(uw(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,h;if(t instanceof Et)c=Ut(t.firestore,yr),h=vh(t._key.path),l={next:d=>{e[o]&&e[o](xx(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Ut(t,Sr);c=Ut(d.firestore,yr),h=d._query;const p=new Vh(c);l={next:g=>{e[o]&&e[o](new Ix(c,p,d,g))},error:e[o+1],complete:e[o+2]},wx(t._query)}return function(p,g,y,I){const P=new Wg(I),w=new Bg(g,P,y);return p.asyncQueue.enqueueAndForget(async()=>jg(await Dc(p),w)),()=>{P.Za(),p.asyncQueue.enqueueAndForget(async()=>Ug(await Dc(p),w))}}(yl(c),h,a,l)}function ry(t,e){return function(r,i){const s=new Mn;return r.asyncQueue.enqueueAndForget(async()=>c2(await w2(r),i,s)),s.promise}(yl(t),e)}function xx(t,e,n){const r=n.docs.get(e._key),i=new Vh(t);return new Sx(t,i,e._key,r,new ta(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(t){return H2(t,{count:B2()})}function H2(t,e){const n=Ut(t.firestore,yr),r=yl(n),i=tL(e,(s,o)=>new LL(o,s.aggregateType,s._internalFieldPath));return I2(r,t._query,i).then(s=>function(a,l,c){const h=new Vh(a);return new b2(l,h,c)}(n,t,s))}(function(e,n=!0){(function(i){go=i})(mo),Xs(new qi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new yr(new $V(r.getProvider("auth-internal")),new HV(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new z(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ha(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ri(A0,"4.7.3",e),ri(A0,"4.7.3","esm2017")})();function iy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Ax(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const q2=Ax,Px=new ul("auth","Firebase",Ax());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=new gg("@firebase/auth");function K2(t,...e){Lc.logLevel<=ae.WARN&&Lc.warn(`Auth (${mo}): ${t}`,...e)}function ju(t,...e){Lc.logLevel<=ae.ERROR&&Lc.error(`Auth (${mo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(t,...e){throw oy(t,...e)}function Sn(t,...e){return oy(t,...e)}function sy(t,e,n){const r=Object.assign(Object.assign({},q2()),{[e]:n});return new ul("auth","Firebase",r).create(e,{appName:t.name})}function Fi(t){return sy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function G2(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&zn(t,"argument-error"),sy(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function oy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Px.create(t,...e)}function J(t,e,...n){if(!t)throw oy(e,...n)}function sr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ju(e),new Error(e)}function vr(t,e){t||sr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Q2(){return dw()==="http:"||dw()==="https:"}function dw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Q2()||yD()||"connection"in navigator)?navigator.onLine:!0}function X2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n){this.shortDelay=e,this.longDelay=n,vr(n>e,"Short delay should be less than long delay!"),this.isMobile=pD()||vD()}get(){return Y2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(t,e){vr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;sr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;sr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;sr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2=new _l(3e4,6e4);function ly(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function wo(t,e,n,r,i={}){return Rx(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=cl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return gD()||(c.referrerPolicy="no-referrer"),Cx.fetch()(kx(t,t.config.apiHost,n,a),c)})}async function Rx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},J2),e);try{const i=new tM(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw fu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw fu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw fu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw fu(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw sy(t,h,c);zn(t,h)}}catch(i){if(i instanceof Tr)throw i;zn(t,"network-request-failed",{message:String(i)})}}async function eM(t,e,n,r,i={}){const s=await wo(t,e,n,r,i);return"mfaPendingCredential"in s&&zn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function kx(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?ay(t.config,i):`${t.config.apiScheme}://${i}`}class tM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Sn(this.auth,"network-request-failed")),Z2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Sn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nM(t,e){return wo(t,"POST","/v1/accounts:delete",e)}async function bx(t,e){return wo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rM(t,e=!1){const n=Qe(t),r=await n.getIdToken(e),i=uy(r);J(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ga(Yd(i.auth_time)),issuedAtTime:ga(Yd(i.iat)),expirationTime:ga(Yd(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Yd(t){return Number(t)*1e3}function uy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ju("JWT malformed, contained fewer than 3 sections"),null;try{const i=GI(n);return i?JSON.parse(i):(ju("Failed to decode base64 JWT payload"),null)}catch(i){return ju("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function fw(t){const e=uy(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Tr&&iM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function iM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ga(this.lastLoginAt),this.creationTime=ga(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ya(t,bx(n,{idToken:r}));J(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Nx(s.providerUserInfo):[],a=aM(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new $p(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function oM(t){const e=Qe(t);await Oc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aM(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Nx(t){return t.map(e=>{var{providerId:n}=e,r=iy(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lM(t,e){const n=await Rx(t,{},async()=>{const r=cl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=kx(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Cx.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function uM(t,e){return wo(t,"POST","/v2/accounts:revokeToken",ly(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=fw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await lM(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Us;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(J(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(J(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Us,this.toJSON())}_performRefresh(){return sr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class or{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=iy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new $p(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ya(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return rM(this,e)}reload(){return oM(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new or(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Oc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ir(this.auth.app))return Promise.reject(Fi(this.auth));const e=await this.getIdToken();return await Ya(this,nM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,I=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:E,emailVerified:b,isAnonymous:V,providerData:M,stsTokenManager:x}=n;J(E&&x,e,"internal-error");const v=Us.fromJSON(this.name,x);J(typeof E=="string",e,"internal-error"),Cr(d,e.name),Cr(p,e.name),J(typeof b=="boolean",e,"internal-error"),J(typeof V=="boolean",e,"internal-error"),Cr(g,e.name),Cr(y,e.name),Cr(I,e.name),Cr(P,e.name),Cr(w,e.name),Cr(_,e.name);const S=new or({uid:E,auth:e,email:p,emailVerified:b,displayName:d,isAnonymous:V,photoURL:y,phoneNumber:g,tenantId:I,stsTokenManager:v,createdAt:w,lastLoginAt:_});return M&&Array.isArray(M)&&(S.providerData=M.map(A=>Object.assign({},A))),P&&(S._redirectEventId=P),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Us;i.updateFromServerResponse(n);const s=new or({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Oc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];J(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Nx(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Us;a.updateFromIdToken(r);const l=new or({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new $p(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw=new Map;function ar(t){vr(t instanceof Function,"Expected a class definition");let e=pw.get(t);return e?(vr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,pw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Dx.type="NONE";const mw=Dx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(t,e,n){return`firebase:${t}:${e}:${n}`}class $s{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Uu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Uu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?or._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new $s(ar(mw),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||ar(mw);const o=Uu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=or._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new $s(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new $s(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Mx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Vx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jx(e))return"Blackberry";if(Ux(e))return"Webos";if(Lx(e))return"Safari";if((e.includes("chrome/")||Ox(e))&&!e.includes("edge/"))return"Chrome";if(Fx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Vx(t=St()){return/firefox\//i.test(t)}function Lx(t=St()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ox(t=St()){return/crios\//i.test(t)}function Mx(t=St()){return/iemobile/i.test(t)}function Fx(t=St()){return/android/i.test(t)}function jx(t=St()){return/blackberry/i.test(t)}function Ux(t=St()){return/webos/i.test(t)}function cy(t=St()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function cM(t=St()){var e;return cy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function hM(){return _D()&&document.documentMode===10}function $x(t=St()){return cy(t)||Fx(t)||Ux(t)||jx(t)||/windows phone/i.test(t)||Mx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(t,e=[]){let n;switch(t){case"Browser":n=gw(St());break;case"Worker":n=`${gw(St())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fM(t,e={}){return wo(t,"GET","/v2/passwordPolicy",ly(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM=6;class mM{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:pM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yw(this),this.idTokenSubscription=new yw(this),this.beforeStateQueue=new dM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Px,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ar(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await $s.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await bx(this,{idToken:e}),r=await or._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ir(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Oc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=X2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ir(this.app))return Promise.reject(Fi(this));const n=e?Qe(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ir(this.app)?Promise.reject(Fi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ir(this.app)?Promise.reject(Fi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ar(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fM(this),n=new mM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ul("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await uM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ar(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await $s.create(this,[ar(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Bx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&K2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Lh(t){return Qe(t)}class yw{constructor(e){this.auth=e,this.observer=null,this.addObserver=PD(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yM(t){hy=t}function vM(t){return hy.loadJS(t)}function _M(){return hy.gapiScript}function wM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(t,e){const n=vg(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Sc(s,e??{}))return i;zn(i,"already-initialized")}return n.initialize({options:e})}function TM(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ar);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function SM(t,e,n){const r=Lh(t);J(r._canInitEmulator,r,"emulator-config-failed"),J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=zx(e),{host:o,port:a}=IM(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),xM()}function zx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function IM(t){const e=zx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:vw(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:vw(o)}}}function vw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function xM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return sr("not implemented")}_getIdTokenResponse(e){return sr("not implemented")}_linkToIdToken(e,n){return sr("not implemented")}_getReauthenticationResolver(e){return sr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bs(t,e){return eM(t,"POST","/v1/accounts:signInWithIdp",ly(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM="http://localhost";class Yi extends Wx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):zn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=iy(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Yi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Bs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Bs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bs(e,n)}buildRequest(){const e={requestUri:AM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=cl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl extends dy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends wl{constructor(){super("facebook.com")}static credential(e){return Yi._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fr.credential(e.oauthAccessToken)}catch{return null}}}Fr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends wl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Yi._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return tr.credential(n,r)}catch{return null}}}tr.GOOGLE_SIGN_IN_METHOD="google.com";tr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends wl{constructor(){super("github.com")}static credential(e){return Yi._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jr.credential(e.oauthAccessToken)}catch{return null}}}jr.GITHUB_SIGN_IN_METHOD="github.com";jr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends wl{constructor(){super("twitter.com")}static credential(e,n){return Yi._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ur.credential(n,r)}catch{return null}}}Ur.TWITTER_SIGN_IN_METHOD="twitter.com";Ur.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await or._fromIdTokenResponse(e,r,i),o=_w(r);return new so({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=_w(r);return new so({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function _w(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc extends Tr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Mc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Mc(e,n,r,i)}}function Hx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Mc._fromErrorAndOperation(t,s,e,r):s})}async function PM(t,e,n=!1){const r=await Ya(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return so._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CM(t,e,n=!1){const{auth:r}=t;if(ir(r.app))return Promise.reject(Fi(r));const i="reauthenticate";try{const s=await Ya(t,Hx(r,i,e,t),n);J(s.idToken,r,"internal-error");const o=uy(s.idToken);J(o,r,"internal-error");const{sub:a}=o;return J(t.uid===a,r,"user-mismatch"),so._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&zn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RM(t,e,n=!1){if(ir(t.app))return Promise.reject(Fi(t));const r="signIn",i=await Hx(t,r,e),s=await so._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(t,e){return Qe(t).setPersistence(e)}function bM(t,e,n,r){return Qe(t).onIdTokenChanged(e,n,r)}function NM(t,e,n){return Qe(t).beforeAuthStateChanged(e,n)}function DM(t,e,n,r){return Qe(t).onAuthStateChanged(e,n,r)}function VM(t){return Qe(t).signOut()}const Fc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fc,"1"),this.storage.removeItem(Fc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=1e3,OM=10;class Kx extends qx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$x(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);hM()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,OM):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},LM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Kx.type="LOCAL";const Gx=Kx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx extends qx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Qx.type="SESSION";const Yx=Qx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Oh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await MM(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=fy("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(){return window}function jM(t){Un().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(){return typeof Un().WorkerGlobalScope<"u"&&typeof Un().importScripts=="function"}async function UM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $M(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function BM(){return Xx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="firebaseLocalStorageDb",zM=1,jc="firebaseLocalStorage",Zx="fbase_key";class El{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mh(t,e){return t.transaction([jc],e?"readwrite":"readonly").objectStore(jc)}function WM(){const t=indexedDB.deleteDatabase(Jx);return new El(t).toPromise()}function Bp(){const t=indexedDB.open(Jx,zM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(jc,{keyPath:Zx})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(jc)?e(r):(r.close(),await WM(),e(await Bp()))})})}async function ww(t,e,n){const r=Mh(t,!0).put({[Zx]:e,value:n});return new El(r).toPromise()}async function HM(t,e){const n=Mh(t,!1).get(e),r=await new El(n).toPromise();return r===void 0?null:r.value}function Ew(t,e){const n=Mh(t,!0).delete(e);return new El(n).toPromise()}const qM=800,KM=3;class eA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>KM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oh._getInstance(BM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await UM(),!this.activeServiceWorker)return;this.sender=new FM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$M()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bp();return await ww(e,Fc,"1"),await Ew(e,Fc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ww(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>HM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ew(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Mh(i,!1).getAll();return new El(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eA.type="LOCAL";const GM=eA;new _l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(t,e){return e?ar(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py extends Wx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function QM(t){return RM(t.auth,new py(t),t.bypassAuthState)}function YM(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),CM(n,new py(t),t.bypassAuthState)}async function XM(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),PM(n,new py(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QM;case"linkViaPopup":case"linkViaRedirect":return XM;case"reauthViaPopup":case"reauthViaRedirect":return YM;default:zn(this.auth,"internal-error")}}resolve(e){vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM=new _l(2e3,1e4);async function ZM(t,e,n){if(ir(t.app))return Promise.reject(Sn(t,"operation-not-supported-in-this-environment"));const r=Lh(t);G2(t,e,dy);const i=tA(r,n);return new Ni(r,"signInViaPopup",e,i).executeNotNull()}class Ni extends nA{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ni.currentPopupAction&&Ni.currentPopupAction.cancel(),Ni.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){vr(this.filter.length===1,"Popup operations only handle one event");const e=fy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Sn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ni.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JM.get())};e()}}Ni.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF="pendingRedirect",$u=new Map;class tF extends nA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=$u.get(this.auth._key());if(!e){try{const r=await nF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}$u.set(this.auth._key(),e)}return this.bypassAuthState||$u.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nF(t,e){const n=sF(e),r=iF(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function rF(t,e){$u.set(t._key(),e)}function iF(t){return ar(t._redirectPersistence)}function sF(t){return Uu(eF,t.config.apiKey,t.name)}async function oF(t,e,n=!1){if(ir(t.app))return Promise.reject(Fi(t));const r=Lh(t),i=tA(r,e),o=await new tF(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF=10*60*1e3;class lF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!rA(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Sn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aF&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tw(e))}saveEventToCache(e){this.cachedEventUids.add(Tw(e)),this.lastProcessedEventTime=Date.now()}}function Tw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function rA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function uF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cF(t,e={}){return wo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dF=/^https?/;async function fF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await cF(t);for(const n of e)try{if(pF(n))return}catch{}zn(t,"unauthorized-domain")}function pF(t){const e=Up(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!dF.test(n))return!1;if(hF.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mF=new _l(3e4,6e4);function Sw(){const t=Un().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function gF(t){return new Promise((e,n)=>{var r,i,s;function o(){Sw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Sw(),n(Sn(t,"network-request-failed"))},timeout:mF.get()})}if(!((i=(r=Un().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Un().gapi)===null||s===void 0)&&s.load)o();else{const a=wM("iframefcb");return Un()[a]=()=>{gapi.load?o():n(Sn(t,"network-request-failed"))},vM(`${_M()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Bu=null,e})}let Bu=null;function yF(t){return Bu=Bu||gF(t),Bu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF=new _l(5e3,15e3),_F="__/auth/iframe",wF="emulator/auth/iframe",EF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SF(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ay(e,wF):`https://${t.config.authDomain}/${_F}`,r={apiKey:e.apiKey,appName:t.name,v:mo},i=TF.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${cl(r).slice(1)}`}async function IF(t){const e=await yF(t),n=Un().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:SF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:EF,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Sn(t,"network-request-failed"),a=Un().setTimeout(()=>{s(o)},vF.get());function l(){Un().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AF=500,PF=600,CF="_blank",RF="http://localhost";class Iw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kF(t,e,n,r=AF,i=PF){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},xF),{width:r.toString(),height:i.toString(),top:s,left:o}),c=St().toLowerCase();n&&(a=Ox(c)?CF:n),Vx(c)&&(e=e||RF,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[g,y])=>`${p}${g}=${y},`,"");if(cM(c)&&a!=="_self")return bF(e||"",a),new Iw(null);const d=window.open(e||"",a,h);J(d,t,"popup-blocked");try{d.focus()}catch{}return new Iw(d)}function bF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF="__/auth/handler",DF="emulator/auth/handler",VF=encodeURIComponent("fac");async function xw(t,e,n,r,i,s){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:mo,eventId:i};if(e instanceof dy){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",AD(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof wl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${VF}=${encodeURIComponent(l)}`:"";return`${LF(t)}?${cl(a).slice(1)}${c}`}function LF({config:t}){return t.emulator?ay(t,DF):`https://${t.authDomain}/${NF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd="webStorageSupport";class OF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yx,this._completeRedirectFn=oF,this._overrideRedirectResult=rF}async _openPopup(e,n,r,i){var s;vr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await xw(e,n,r,Up(),i);return kF(e,o,fy())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await xw(e,n,r,Up(),i);return jM(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(vr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await IF(e),r=new lF(e);return n.register("authEvent",i=>(J(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Xd,{type:Xd},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Xd];o!==void 0&&n(!!o),zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=fF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return $x()||Lx()||cy()}}const MF=OF;var Aw="@firebase/auth",Pw="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UF(t){Xs(new qi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bx(t)},c=new gM(r,i,s,l);return TM(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Xs(new qi("auth-internal",e=>{const n=Lh(e.getProvider("auth").getImmediate());return(r=>new FF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ri(Aw,Pw,jF(t)),ri(Aw,Pw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $F=5*60,BF=XI("authIdTokenMaxAge")||$F;let Cw=null;const zF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>BF)return;const i=n==null?void 0:n.token;Cw!==i&&(Cw=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function WF(t=t1()){const e=vg(t,"auth");if(e.isInitialized())return e.getImmediate();const n=EM(t,{popupRedirectResolver:MF,persistence:[GM,Gx,Yx]}),r=XI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=zF(s.toString());NM(n,o,()=>o(n.currentUser)),bM(n,a=>o(a))}}const i=QI("auth");return i&&SM(n,`http://${i}`),n}function HF(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}yM({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Sn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",HF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UF("Browser");const qF={apiKey:"AIzaSyCZq00Q7H4Gac-cKrc99tX-Xbikmk4FhZk",authDomain:"ajedreztopchess-ee537.firebaseapp.com",projectId:"ajedreztopchess-ee537",storageBucket:"ajedreztopchess-ee537.firebasestorage.app",messagingSenderId:"135701954603",appId:"1:135701954603:web:4e7f73cc49e386604dea6e",measurementId:"G-G9M4HS6X0X"},iA=e1(qF),st=C2(iA),zu=WF(iA);kM(zu,Gx).catch(t=>{console.error("Firebase Persistence Error:",t)});const Rw=qn(st,"messages"),pn=qn(st,"users"),Jn=qn(st,"teachers"),Ht=qn(st,"requests"),pu=qn(st,"bookings"),ls=qn(st,"transactions"),mu=qn(st,"homeworks"),Jd=qn(st,"notifications"),Zd=qn(st,"clubs"),tt=t=>Array.isArray(t)?t.map(e=>tt(e)):t!==null&&typeof t=="object"?Object.entries(t).reduce((e,[n,r])=>(e[n]=r===void 0?null:tt(r),e),{}):t,Xi={async getClubByDirectorId(t){try{const e=De(Zd,ve("directorId","==",t),et(1)),n=await je(e);return n.empty?null:n.docs[0].data()}catch(e){return console.error(`Error in getClubByDirectorId(${t}):`,e),null}},observeClubTeachersPresence(t,e){if(!t||t.length===0)return e([]),()=>{};const n=De(pn,ve("id","in",t));return fn(n,r=>{const i=r.docs.map(s=>s.data());e(i)},r=>{console.error("Error observing club teachers presence:",r)})},async createClub(t,e){try{const n=`club_${Date.now()}`,r={id:n,name:t,directorId:e,teacherIds:[e],createdAt:Date.now()};return await zt(fe(Zd,n),tt(r)),await this.updateUser(e,{role:"club_director"}),n}catch(n){throw console.error("Error creating club:",n),n}},async inviteTeacherToClub(t,e){try{const n=De(pn,ve("email","==",e),ve("role","==","teacher"),et(1)),r=await je(n);if(r.empty)return{success:!1,message:"No se encontr ningn profesor con ese correo electrnico"};const i=r.docs[0].data(),s=i.id,o=fe(Zd,t),a=await Gd(o);if(!a.exists())return{success:!1,message:"Club no encontrado"};const l=a.data();if(l.teacherIds.includes(s))return{success:!1,message:"El profesor ya es miembro de este club"};const c=[...l.teacherIds,s];return await Wt(o,{teacherIds:c}),await this.updateTeacher(s,{clubId:t}),{success:!0,message:`${i.name} ha sido aadido al club!`}}catch(n){return console.error("Error inviting teacher to club:",n),{success:!1,message:"Error interno al invitar al profesor"}}},async getUser(t){try{const e=fe(pn,t),n=await Gd(e);return n.exists()?n.data():null}catch(e){throw console.error(`Error in getUser(${t}):`,e),e}},async createUser(t){try{const e={...t,walletBalance:t.walletBalance??0,currency:t.currency??"EUR"};await zt(fe(pn,t.id),tt(e))}catch(e){throw console.error(`Error in createUser(${t.id}):`,e),e}},async updateUser(t,e){try{await Wt(fe(pn,t),tt(e))}catch(n){throw console.error(`Error in updateUser(${t}):`,n),n}},async updateUserPresence(t,e){try{await Wt(fe(pn,t),{onlineStatus:e,lastActive:Date.now()})}catch(n){console.error(`Error in updateUserPresence(${t}):`,n)}},async getWallet(t){try{const e=await this.getUser(t);return{balance:(e==null?void 0:e.walletBalance)??0,currency:(e==null?void 0:e.currency)??"EUR"}}catch(e){return console.error(`Error in getWallet(${t}):`,e),{balance:0,currency:"EUR"}}},observeWallet(t,e){return t?fn(fe(pn,t),n=>{if(n.exists()){const r=n.data();e({balance:r.walletBalance??0,currency:r.currency??"EUR"})}else e({balance:0,currency:"EUR"})},n=>{console.error("Error observing wallet:",n)}):(e({balance:0,currency:"EUR"}),()=>{})},async addFunds(t,e,n="stripe"){try{const r=await this.getUser(t);if(r){const i=(r.walletBalance||0)+e;await this.updateUser(t,{walletBalance:i});const s=`tx_${Date.now()}_${t.substring(0,5)}`,o={id:s,type:"deposit",description:`Recarga de saldo (${n==="mercadopago"?"MercadoPago":"Stripe"})`,amount:e,timestamp:Date.now(),fromId:"system",toId:t};await zt(fe(st,"transactions",s),tt(o))}}catch(r){throw console.error(`Error in addFunds(${t}):`,r),r}},async getTransactions(t){try{const e=De(ls,ve("fromId","==",t),et(100)),n=De(ls,ve("toId","==",t),et(100)),[r,i]=await Promise.all([je(e),je(n)]),s=[...r.docs,...i.docs].map(a=>a.data());return Array.from(new Map(s.map(a=>[a.id,a])).values()).sort((a,l)=>l.timestamp-a.timestamp)}catch(e){return console.error(`Error in getTransactions(${t}):`,e),[]}},observeTransactions(t,e){if(!t)return e([]),()=>{};const n=De(ls,ve("fromId","==",t),et(100)),r=De(ls,ve("toId","==",t),et(100));let i=[],s=[];const o=()=>{const c=[...i,...s],h=Array.from(new Map(c.map(d=>[d.id,d])).values());e(h.sort((d,p)=>p.timestamp-d.timestamp))},a=fn(n,c=>{i=c.docs.map(h=>h.data()),o()},c=>console.error("Error observing tx from:",c)),l=fn(r,c=>{s=c.docs.map(h=>h.data()),o()},c=>console.error("Error observing tx to:",c));return()=>{a(),l()}},async processPayment(t,e,n){return{success:!1,message:"Deprecated"}},async buySubscription(t,e,n){try{const r=await this.getUser(t);if(!r)return{success:!1,message:"Usuario no encontrado"};const i=De(Ht,ve("studentId","==",t),ve("teacherId","==",e.id),ve("status","==","approved"),et(1)),s=await je(i);if(s.empty)return{success:!1,message:"No tienes una conexin activa con este profesor"};const o=s.docs[0],l=o.data().classCredits||0;await Wt(fe(Ht,o.id),{classCredits:l+4});const c=e.commissionRate||.5,h=e.region==="EU"?59:39,d=h*c,p=`sub_${Date.now()}_${t.substring(0,5)}`,g={id:p,type:"payment_sent",description:`Suscripcin mensual: 4 clases con ${e.name}`,amount:-h,timestamp:Date.now(),fromId:t,toId:e.id};await zt(fe(st,"transactions",p),tt(g));const y={id:`${p}_t`,type:"payment_received",description:`Suscripcin de ${r.name}`,amount:d,timestamp:Date.now(),fromId:t,toId:e.id};return await zt(fe(st,"transactions",`${p}_t`),tt(y)),{success:!0,message:"Suscripcin exitosa! Tienes 4 nuevas clases disponibles."}}catch(r){return console.error("Error in buySubscription:",r),{success:!1,message:"Error interno al procesar el pago"}}},async getTeachers(){try{const t=De(Jn,et(200));return(await je(t)).docs.map(n=>n.data())}catch(t){return console.error("Error in getTeachers:",t),[]}},async getTeacherById(t){try{const e=fe(Jn,t),n=await Gd(e);return n.exists()?n.data():null}catch(e){return console.error(`Error in getTeacherById(${t}):`,e),null}},async createTeacherProfile(t){try{await zt(fe(Jn,t.id),tt(t))}catch(e){throw console.error(`Error in createTeacherProfile(${t.id}):`,e),e}},async updateTeacher(t,e){try{await Wt(fe(Jn,t),tt(e))}catch(n){throw console.error(`Error in updateTeacher(${t}):`,n),n}},async createRequest(t){try{await zt(fe(Ht,t.id),tt(t))}catch(e){throw console.error(`Error in createRequest(${t.id}):`,e),e}},async getRequestsForStudent(t){try{const e=De(Ht,ve("studentId","==",t),et(100));return(await je(e)).docs.map(r=>r.data())}catch(e){return console.error(`Error in getRequestsForStudent(${t}):`,e),[]}},async getRequestsForTeacher(t){try{const e=De(Ht,ve("teacherId","==",t),et(100));return(await je(e)).docs.map(r=>r.data())}catch(e){return console.error(`Error in getRequestsForTeacher(${t}):`,e),[]}},observeRequestsForStudent(t,e){if(!t)return e([]),()=>{};const n=De(Ht,ve("studentId","==",t),et(100));return fn(n,r=>{e(r.docs.map(i=>i.data()))},r=>{console.error("Error observing requests for student:",r)})},observeRequestsForTeacher(t,e){if(!t)return e([]),()=>{};const n=De(Ht,ve("teacherId","==",t),et(100));return fn(n,r=>{e(r.docs.map(i=>i.data()))},r=>{console.error("Error observing requests for teacher:",r)})},async updateRequestStatus(t,e){try{await Wt(fe(Ht,t),{status:e})}catch(n){throw console.error(`Error in updateRequestStatus(${t}):`,n),n}},async createBooking(t){try{await zt(fe(pu,t.id),tt(t))}catch(e){throw console.error(`Error in createBooking(${t.id}):`,e),e}},async bookClass(t,e,n){try{const r=De(Ht,ve("studentId","==",t),ve("teacherId","==",e),ve("status","==","approved"),et(1)),i=await je(r);if(i.empty)return{success:!1,message:"No tienes una conexin activa con este profesor"};const s=i.docs[0],a=s.data().classCredits||0;return a<=0?{success:!1,message:"No tienes clases disponibles. Adquiere una nueva suscripcin."}:(await zt(fe(pu,n.id),tt(n)),await Wt(fe(Ht,s.id),{classCredits:a-1}),this.createNotification({id:`notif_${Date.now()}_${e.substring(0,5)}`,userId:e,title:"Nueva Clase Reservada!",message:`Te han reservado una clase el ${n.date} a las ${n.time}.`,type:"booking",read:!1,timestamp:Date.now(),link:"/dashboard"}).catch(console.error),{success:!0,message:"Clase reservada exitosamente"})}catch(r){return console.error("Error in bookClass:",r),{success:!1,message:"Error interno al reservar la clase"}}},async getBookingsForUser(t,e){try{const r=De(pu,ve(e==="student"?"studentId":"teacherId","==",t),et(100));return(await je(r)).docs.map(s=>s.data())}catch(n){return console.error(`Error in getBookingsForUser(${t}):`,n),[]}},observeBookingsForUser(t,e,n){if(!t)return n([]),()=>{};const i=De(pu,ve(e==="student"?"studentId":"teacherId","==",t),et(100));return fn(i,s=>{n(s.docs.map(o=>o.data()))},s=>{console.error("Error observing bookings:",s)})},async getTeacherAvailability(t){try{const e=await this.getTeacherById(t);return(e==null?void 0:e.availability)||[]}catch(e){return console.error(`Error in getTeacherAvailability(${t}):`,e),[]}},async updateTeacherAvailability(t,e){try{await Wt(fe(Jn,t),{availability:e})}catch(n){throw console.error(`Error in updateTeacherAvailability(${t}):`,n),n}},async createHomework(t){try{await zt(fe(mu,t.id),tt(t))}catch(e){throw console.error(`Error in createHomework(${t.id}):`,e),e}},async getHomeworksForStudent(t){try{const e=De(mu,ve("studentId","==",t));return(await je(e)).docs.map(r=>r.data()).sort((r,i)=>i.assignedAt-r.assignedAt)}catch(e){return console.error(`Error in getHomeworksForStudent(${t}):`,e),[]}},async getHomeworksForTeacher(t){try{const e=De(mu,ve("teacherId","==",t));return(await je(e)).docs.map(r=>r.data()).sort((r,i)=>i.assignedAt-r.assignedAt)}catch(e){return console.error(`Error in getHomeworksForTeacher(${t}):`,e),[]}},async updateHomeworkStatus(t,e){try{await Wt(fe(mu,t),{status:e,completedAt:e==="completed"?Date.now():null})}catch(n){throw console.error(`Error in updateHomeworkStatus(${t}):`,n),n}},subscribeToChat(t,e,n){const r=[t,e].sort().join("_"),i=De(Rw,ve("chatId","==",r),et(100));return fn(i,s=>{const o=s.docs.map(a=>({id:a.id,...a.data()})).sort((a,l)=>a.timestamp-l.timestamp);n(o)},s=>{console.warn("Chat subscription error:",s)})},async sendMessage(t){try{const e={...t,chatId:[t.studentId,t.teacherId].sort().join("_")};await W2(Rw,tt(e));const n=t.sender==="student"?t.teacherId:t.studentId,r=t.sender==="student"?t.studentId:t.teacherId,i=t.sender==="student"?"Tu alumno":"Tu maestro";this.createNotification({id:`notif_${Date.now()}_${n.substring(0,5)}`,userId:n,title:"Nuevo Mensaje",message:`${i} te ha enviado un mensaje.`,type:"message",read:!1,timestamp:Date.now(),link:`/chat/${r}`}).catch(console.error)}catch(e){throw console.error("Error in sendMessage:",e),e}},async getPublicProfile(t){try{const e=await this.getTeacherById(t);if(e)return{name:e.name,bio:e.description,image:e.image,elo:e.elo};const n=await this.getUser(t);return n?{name:n.name,bio:"Estudiante",image:n.photoURL||"https://via.placeholder.com/150",elo:0}:null}catch(e){return console.error(`Error in getPublicProfile(${t}):`,e),null}},async updateRoom(t,e){try{await zt(fe(st,"rooms",t),tt(e),{merge:!0})}catch(n){throw console.error(`Error in updateRoom(${t}):`,n),n}},async resetRoom(t){try{await zt(fe(st,"rooms",t),{fen:"start",pgn:"",orientation:"white",history:[],fenHistory:[],currentIndex:0,shapes:[],chapters:[],activeChapterIndex:-1,activeStudyName:"",comment:"",comments:{}})}catch(e){throw console.error(`Error in resetRoom(${t}):`,e),e}},async updateChatMessages(t){try{const e=fe(st,"chats",t);await Wt(e,{updatedAt:Date.now()})}catch(e){throw console.error(`Error in updateChatMessages(${t}):`,e),e}},subscribeToRoom(t,e){const n=fe(st,"rooms",t);return fn(n,r=>{r.exists()&&e(r.data())},r=>{console.error(`Room subscription error (${t}):`,r)})},async getRequestStatus(t,e){try{const n=De(Ht,ve("studentId","==",t),ve("teacherId","==",e)),r=await je(n);return r.empty?null:r.docs[0].data().status}catch(n){return console.error("Error in getRequestStatus:",n),null}},async getAllUsers(){try{return(await je(pn)).docs.map(e=>e.data())}catch(t){return console.error("Error in getAllUsers:",t),[]}},async getAllTeachers(){try{return(await je(Jn)).docs.map(e=>e.data())}catch(t){return console.error("Error in getAllTeachers:",t),[]}},async getAllTransactions(){try{return(await je(ls)).docs.map(e=>e.data())}catch(t){return console.error("Error in getAllTransactions:",t),[]}},async verifyTeacher(t,e){try{await Wt(fe(Jn,t),{isVerified:e})}catch(n){throw console.error(`Error in verifyTeacher(${t}):`,n),n}},async banUser(t,e){try{await Wt(fe(pn,t),{status:e?"banned":"active"})}catch(n){throw console.error(`Error in banUser(${t}):`,n),n}},async getPlatformStats(){try{const[t,e,n,r]=await Promise.all([je(pn),je(Jn),je(Ht),je(ls)]),i=r.docs.map(s=>s.data()).filter(s=>s.type==="payment_received").reduce((s,o)=>s+(o.amount||0),0);return{users:t.size,teachers:e.size,requests:n.size,revenue:i}}catch{return{users:0,teachers:0,requests:0,revenue:0}}},subscribeToCollection(t,e){const n=De(qn(st,t));return fn(n,r=>{const i=r.docs.map(s=>({id:s.id,...s.data()}));e(i)},r=>{console.error(`Collection subscription error (${t}):`,r)})},async isAdmin(t){try{const e=await this.getUser(t),n=["andreslgumuzio@gmail.com"];return(e==null?void 0:e.role)==="admin"||(e!=null&&e.email?n.includes(e.email):!1)}catch(e){return console.error(`Error in isAdmin(${t}):`,e),!1}},async getLiveKitToken(t,e,n){try{return"DEV_TOKEN_PLACEHOLDER"}catch(r){return console.error("Error getting LiveKit token:",r),""}},async createNotification(t){try{await zt(fe(Jd,t.id),tt(t))}catch(e){console.error(`Error in createNotification(${t.id}):`,e)}},subscribeToNotifications(t,e){const n=De(Jd,ve("userId","==",t),U2("timestamp","desc"),et(50));return fn(n,r=>{const i=r.docs.map(s=>s.data());e(i)})},async markNotificationAsRead(t){try{await Wt(fe(Jd,t),{read:!0})}catch(e){console.error(`Error in markNotificationAsRead(${t}):`,e)}},async getPlatformStats(){try{const t=await Qd(pn),e=await Qd(Jn),n=await Qd(Ht);return{users:t.data().count,teachers:e.data().count,requests:n.data().count}}catch(t){return console.error("Error fetching platform stats:",t),{users:0,teachers:0,requests:0}}}},n9=Object.freeze(Object.defineProperty({__proto__:null,firebaseService:Xi},Symbol.toStringTag,{value:"Module"}));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),sA=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QF=R.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>R.createElement("svg",{ref:l,...GF,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:sA("lucide",i),...a},[...o.map(([c,h])=>R.createElement(c,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=(t,e)=>{const n=R.forwardRef(({className:r,...i},s)=>R.createElement(QF,{ref:s,iconNode:e,className:sA(`lucide-${KF(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=$t("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=$t("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=$t("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=$t("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=$t("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=$t("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=$t("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=$t("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=$t("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=$t("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=$t("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=$t("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=$t("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=$t("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),X=t=>typeof t=="string",qo=()=>{let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n},bw=t=>t==null?"":""+t,aj=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},lj=/###/g,Nw=t=>t&&t.indexOf("###")>-1?t.replace(lj,"."):t,Dw=t=>!t||X(t),ya=(t,e,n)=>{const r=X(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(Dw(t))return{};const s=Nw(r[i]);!t[s]&&n&&(t[s]=new n),Object.prototype.hasOwnProperty.call(t,s)?t=t[s]:t={},++i}return Dw(t)?{}:{obj:t,k:Nw(r[i])}},Vw=(t,e,n)=>{const{obj:r,k:i}=ya(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let s=e[e.length-1],o=e.slice(0,e.length-1),a=ya(t,o,Object);for(;a.obj===void 0&&o.length;)s=`${o[o.length-1]}.${s}`,o=o.slice(0,o.length-1),a=ya(t,o,Object),a!=null&&a.obj&&typeof a.obj[`${a.k}.${s}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${s}`]=n},uj=(t,e,n,r)=>{const{obj:i,k:s}=ya(t,e,Object);i[s]=i[s]||[],i[s].push(n)},Uc=(t,e)=>{const{obj:n,k:r}=ya(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},cj=(t,e,n)=>{const r=Uc(t,n);return r!==void 0?r:Uc(e,n)},aA=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?X(t[r])||t[r]instanceof String||X(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):aA(t[r],e[r],n):t[r]=e[r]);return t},us=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var hj={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const dj=t=>X(t)?t.replace(/[&<>"'\/]/g,e=>hj[e]):t;class fj{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const pj=[" ",",","?","!",";"],mj=new fj(20),gj=(t,e,n)=>{e=e||"",n=n||"";const r=pj.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const i=mj.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let s=!i.test(t);if(!s){const o=t.indexOf(n);o>0&&!i.test(t.substring(0,o))&&(s=!0)}return s},zp=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let i=t;for(let s=0;s<r.length;){if(!i||typeof i!="object")return;let o,a="";for(let l=s;l<r.length;++l)if(l!==s&&(a+=n),a+=r[l],o=i[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;s+=l-s+1;break}i=o}return i},Xa=t=>t==null?void 0:t.replace("_","-"),yj={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var n,r;(r=(n=console==null?void 0:console[t])==null?void 0:n.apply)==null||r.call(n,console,e)}};class $c{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||yj,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(X(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new $c(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new $c(this.logger,e)}}var Vn=new $c;class Fh{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,s])=>{for(let o=0;o<s;o++)i(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,s])=>{for(let o=0;o<s;o++)i.apply(i,[e,...n])})}}class Lw extends Fh{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,i={}){var c,h;const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],r&&(Array.isArray(r)?a.push(...r):X(r)&&s?a.push(...r.split(s)):a.push(r)));const l=Uc(this.data,a);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=a[0],n=a[1],r=a.slice(2).join(".")),l||!o||!X(r)?l:zp((h=(c=this.data)==null?void 0:c[e])==null?void 0:h[n],r,s)}addResource(e,n,r,i,s={silent:!1}){const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=[e,n];r&&(a=a.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(a=e.split("."),i=n,n=a[1]),this.addNamespaces(n),Vw(this.data,a,i),s.silent||this.emit("added",e,n,r,i)}addResources(e,n,r,i={silent:!1}){for(const s in r)(X(r[s])||Array.isArray(r[s]))&&this.addResource(e,n,s,r[s],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,s,o={silent:!1,skipCopy:!1}){let a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),i=r,r=n,n=a[1]),this.addNamespaces(n);let l=Uc(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?aA(l,r,s):l={...l,...r},Vw(this.data,a,l),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var lA={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(s=>{var o;e=((o=this.processors[s])==null?void 0:o.process(e,n,r,i))??e}),e}};const uA=Symbol("i18next/PATH_KEY");function vj(){const t=[],e=Object.create(null);let n;return e.get=(r,i)=>{var s;return(s=n==null?void 0:n.revoke)==null||s.call(n),i===uA?t:(t.push(i),n=Proxy.revocable(r,e),n.proxy)},Proxy.revocable(Object.create(null),e).proxy}function Wp(t,e){const{[uA]:n}=t(vj());return n.join((e==null?void 0:e.keySeparator)??".")}const Ow={},ef=t=>!X(t)&&typeof t!="boolean"&&typeof t!="number";class Bc extends Fh{constructor(e,n={}){super(),aj(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Vn.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};if(e==null)return!1;const i=this.resolve(e,r);if((i==null?void 0:i.res)===void 0)return!1;const s=ef(i.res);return!(r.returnObjects===!1&&s)}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!gj(e,r,i);if(o&&!a){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:X(s)?[s]:s};const c=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(c[0])>-1)&&(s=c.shift()),e=c.join(i)}return{key:e,namespaces:X(s)?[s]:s}}translate(e,n,r){let i=typeof n=="object"?{...n}:n;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=Wp(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const s=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:a,namespaces:l}=this.extractFromKey(e[e.length-1],i),c=l[l.length-1];let h=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;h===void 0&&(h=":");const d=i.lng||this.language,p=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((d==null?void 0:d.toLowerCase())==="cimode")return p?s?{res:`${c}${h}${a}`,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(i)}:`${c}${h}${a}`:s?{res:a,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(i)}:a;const g=this.resolve(e,i);let y=g==null?void 0:g.res;const I=(g==null?void 0:g.usedKey)||a,P=(g==null?void 0:g.exactUsedKey)||a,w=["[object Number]","[object Function]","[object RegExp]"],_=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,E=!this.i18nFormat||this.i18nFormat.handleAsObject,b=i.count!==void 0&&!X(i.count),V=Bc.hasDefaultValue(i),M=b?this.pluralResolver.getSuffix(d,i.count,i):"",x=i.ordinal&&b?this.pluralResolver.getSuffix(d,i.count,{ordinal:!1}):"",v=b&&!i.ordinal&&i.count===0,S=v&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${M}`]||i[`defaultValue${x}`]||i.defaultValue;let A=y;E&&!y&&V&&(A=S);const N=ef(A),D=Object.prototype.toString.apply(A);if(E&&A&&N&&w.indexOf(D)<0&&!(X(_)&&Array.isArray(A))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const C=this.options.returnedObjectHandler?this.options.returnedObjectHandler(I,A,{...i,ns:l}):`key '${a} (${this.language})' returned an object instead of string.`;return s?(g.res=C,g.usedParams=this.getUsedParamsDetails(i),g):C}if(o){const C=Array.isArray(A),Y=C?[]:{},de=C?P:I;for(const be in A)if(Object.prototype.hasOwnProperty.call(A,be)){const ne=`${de}${o}${be}`;V&&!y?Y[be]=this.translate(ne,{...i,defaultValue:ef(S)?S[be]:void 0,joinArrays:!1,ns:l}):Y[be]=this.translate(ne,{...i,joinArrays:!1,ns:l}),Y[be]===ne&&(Y[be]=A[be])}y=Y}}else if(E&&X(_)&&Array.isArray(y))y=y.join(_),y&&(y=this.extendTranslation(y,e,i,r));else{let C=!1,Y=!1;!this.isValidLookup(y)&&V&&(C=!0,y=S),this.isValidLookup(y)||(Y=!0,y=a);const be=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Y?void 0:y,ne=V&&S!==y&&this.options.updateMissing;if(Y||C||ne){if(this.logger.log(ne?"updateKey":"missingKey",d,c,a,ne?S:y),o){const re=this.resolve(a,{...i,keySeparator:!1});re&&re.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let $=[];const K=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&K&&K[0])for(let re=0;re<K.length;re++)$.push(K[re]);else this.options.saveMissingTo==="all"?$=this.languageUtils.toResolveHierarchy(i.lng||this.language):$.push(i.lng||this.language);const Q=(re,oe,ge)=>{var tn;const en=V&&ge!==y?ge:be;this.options.missingKeyHandler?this.options.missingKeyHandler(re,c,oe,en,ne,i):(tn=this.backendConnector)!=null&&tn.saveMissing&&this.backendConnector.saveMissing(re,c,oe,en,ne,i),this.emit("missingKey",re,c,oe,y)};this.options.saveMissing&&(this.options.saveMissingPlurals&&b?$.forEach(re=>{const oe=this.pluralResolver.getSuffixes(re,i);v&&i[`defaultValue${this.options.pluralSeparator}zero`]&&oe.indexOf(`${this.options.pluralSeparator}zero`)<0&&oe.push(`${this.options.pluralSeparator}zero`),oe.forEach(ge=>{Q([re],a+ge,i[`defaultValue${ge}`]||S)})}):Q($,a,S))}y=this.extendTranslation(y,e,i,g,r),Y&&y===a&&this.options.appendNamespaceToMissingKey&&(y=`${c}${h}${a}`),(Y||C)&&this.options.parseMissingKeyHandler&&(y=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}${h}${a}`:a,C?y:void 0,i))}return s?(g.res=y,g.usedParams=this.getUsedParamsDetails(i),g):y}extendTranslation(e,n,r,i,s){var l,c;if((l=this.i18nFormat)!=null&&l.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const h=X(e)&&(((c=r==null?void 0:r.interpolation)==null?void 0:c.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(h){const g=e.match(this.interpolator.nestingRegexp);d=g&&g.length}let p=r.replace&&!X(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),e=this.interpolator.interpolate(e,p,r.lng||this.language||i.usedLng,r),h){const g=e.match(this.interpolator.nestingRegexp),y=g&&g.length;d<y&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...g)=>(s==null?void 0:s[0])===g[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${n[0]}`),null):this.translate(...g,n),r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,a=X(o)?[o]:o;return e!=null&&(a!=null&&a.length)&&r.applyPostProcessor!==!1&&(e=lA.handle(a,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,i,s,o,a;return X(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const c=this.extractFromKey(l,n),h=c.key;i=h;let d=c.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const p=n.count!==void 0&&!X(n.count),g=p&&!n.ordinal&&n.count===0,y=n.context!==void 0&&(X(n.context)||typeof n.context=="number")&&n.context!=="",I=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);d.forEach(P=>{var w,_;this.isValidLookup(r)||(a=P,!Ow[`${I[0]}-${P}`]&&((w=this.utils)!=null&&w.hasLoadedNamespace)&&!((_=this.utils)!=null&&_.hasLoadedNamespace(a))&&(Ow[`${I[0]}-${P}`]=!0,this.logger.warn(`key "${i}" for languages "${I.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),I.forEach(E=>{var M;if(this.isValidLookup(r))return;o=E;const b=[h];if((M=this.i18nFormat)!=null&&M.addLookupKeys)this.i18nFormat.addLookupKeys(b,h,E,P,n);else{let x;p&&(x=this.pluralResolver.getSuffix(E,n.count,n));const v=`${this.options.pluralSeparator}zero`,S=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(n.ordinal&&x.indexOf(S)===0&&b.push(h+x.replace(S,this.options.pluralSeparator)),b.push(h+x),g&&b.push(h+v)),y){const A=`${h}${this.options.contextSeparator||"_"}${n.context}`;b.push(A),p&&(n.ordinal&&x.indexOf(S)===0&&b.push(A+x.replace(S,this.options.pluralSeparator)),b.push(A+x),g&&b.push(A+v))}}let V;for(;V=b.pop();)this.isValidLookup(r)||(s=V,r=this.getResource(E,P,V,n))}))})}),{res:r,usedKey:i,exactUsedKey:s,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,i={}){var s;return(s=this.i18nFormat)!=null&&s.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!X(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const s of n)delete i[s]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class Mw{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Vn.create("languageUtils")}getScriptPartFromCode(e){if(e=Xa(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Xa(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(X(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return n=i;const s=this.getLanguagePartFromCode(r);if(this.isSupportedCode(s))return n=s;n=this.options.supportedLngs.find(o=>{if(o===s)return o;if(!(o.indexOf("-")<0&&s.indexOf("-")<0)&&(o.indexOf("-")>0&&s.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===s||o.indexOf(s)===0&&s.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),X(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),i=[],s=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return X(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):X(e)&&s(this.formatLanguageCode(e)),r.forEach(o=>{i.indexOf(o)<0&&s(this.formatLanguageCode(o))}),i}}const Fw={zero:0,one:1,two:2,few:3,many:4,other:5},jw={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class _j{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=Vn.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=Xa(e==="dev"?"en":e),i=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let o;try{o=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),jw;if(!e.match(/-|_/))return jw;const l=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(l,n)}return this.pluralRulesCache[s]=o,o}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((i,s)=>Fw[i]-Fw[s]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,n,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const Uw=(t,e,n,r=".",i=!0)=>{let s=cj(t,e,n);return!s&&i&&X(n)&&(s=zp(t,n,r),s===void 0&&(s=zp(e,n,r))),s},tf=t=>t.replace(/\$/g,"$$$$");class $w{constructor(e={}){var n;this.logger=Vn.create("interpolator"),this.options=e,this.format=((n=e==null?void 0:e.interpolation)==null?void 0:n.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:s,prefixEscaped:o,suffix:a,suffixEscaped:l,formatSeparator:c,unescapeSuffix:h,unescapePrefix:d,nestingPrefix:p,nestingPrefixEscaped:g,nestingSuffix:y,nestingSuffixEscaped:I,nestingOptionsSeparator:P,maxReplaces:w,alwaysFormat:_}=e.interpolation;this.escape=n!==void 0?n:dj,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=s?us(s):o||"{{",this.suffix=a?us(a):l||"}}",this.formatSeparator=c||",",this.unescapePrefix=h?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":h||"",this.nestingPrefix=p?us(p):g||us("$t("),this.nestingSuffix=y?us(y):I||us(")"),this.nestingOptionsSeparator=P||",",this.maxReplaces=w||1e3,this.alwaysFormat=_!==void 0?_:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,n,r,i){var g;let s,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=y=>{if(y.indexOf(this.formatSeparator)<0){const _=Uw(n,l,y,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(_,void 0,r,{...i,...n,interpolationkey:y}):_}const I=y.split(this.formatSeparator),P=I.shift().trim(),w=I.join(this.formatSeparator).trim();return this.format(Uw(n,l,P,this.options.keySeparator,this.options.ignoreJSONStructure),w,r,{...i,...n,interpolationkey:P})};this.resetRegExp();const h=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,d=((g=i==null?void 0:i.interpolation)==null?void 0:g.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:y=>tf(y)},{regex:this.regexp,safeValue:y=>this.escapeValue?tf(this.escape(y)):tf(y)}].forEach(y=>{for(a=0;s=y.regex.exec(e);){const I=s[1].trim();if(o=c(I),o===void 0)if(typeof h=="function"){const w=h(e,s,i);o=X(w)?w:""}else if(i&&Object.prototype.hasOwnProperty.call(i,I))o="";else if(d){o=s[0];continue}else this.logger.warn(`missed to pass in variable ${I} for interpolating ${e}`),o="";else!X(o)&&!this.useRawValueToEscape&&(o=bw(o));const P=y.safeValue(o);if(e=e.replace(s[0],P),d?(y.regex.lastIndex+=o.length,y.regex.lastIndex-=s[0].length):y.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n,r={}){let i,s,o;const a=(l,c)=>{const h=this.nestingOptionsSeparator;if(l.indexOf(h)<0)return l;const d=l.split(new RegExp(`${h}[ ]*{`));let p=`{${d[1]}`;l=d[0],p=this.interpolate(p,o);const g=p.match(/'/g),y=p.match(/"/g);(((g==null?void 0:g.length)??0)%2===0&&!y||y.length%2!==0)&&(p=p.replace(/'/g,'"'));try{o=JSON.parse(p),c&&(o={...c,...o})}catch(I){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,I),`${l}${h}${p}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l};for(;i=this.nestingRegexp.exec(e);){let l=[];o={...r},o=o.replace&&!X(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const c=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(c!==-1&&(l=i[1].slice(c).split(this.formatSeparator).map(h=>h.trim()).filter(Boolean),i[1]=i[1].slice(0,c)),s=n(a.call(this,i[1].trim(),o),o),s&&i[0]===e&&!X(s))return s;X(s)||(s=bw(s)),s||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),s=""),l.length&&(s=l.reduce((h,d)=>this.format(h,d,r.lng,{...r,interpolationkey:i[1].trim()}),s.trim())),e=e.replace(i[0],s),this.regexp.lastIndex=0}return e}}const wj=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(o=>{if(o){const[a,...l]=o.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,""),h=a.trim();n[h]||(n[h]=c),c==="false"&&(n[h]=!1),c==="true"&&(n[h]=!0),isNaN(c)||(n[h]=parseInt(c,10))}})}return{formatName:e,formatOptions:n}},Bw=t=>{const e={};return(n,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const o=r+JSON.stringify(s);let a=e[o];return a||(a=t(Xa(r),i),e[o]=a),a(n)}},Ej=t=>(e,n,r)=>t(Xa(n),r)(e);class Tj{constructor(e={}){this.logger=Vn.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?Bw:Ej;this.formats={number:r((i,s)=>{const o=new Intl.NumberFormat(i,{...s});return a=>o.format(a)}),currency:r((i,s)=>{const o=new Intl.NumberFormat(i,{...s,style:"currency"});return a=>o.format(a)}),datetime:r((i,s)=>{const o=new Intl.DateTimeFormat(i,{...s});return a=>o.format(a)}),relativetime:r((i,s)=>{const o=new Intl.RelativeTimeFormat(i,{...s});return a=>o.format(a,s.range||"day")}),list:r((i,s)=>{const o=new Intl.ListFormat(i,{...s});return a=>o.format(a)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=Bw(n)}format(e,n,r,i={}){const s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(a=>a.indexOf(")")>-1)){const a=s.findIndex(l=>l.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,a)].join(this.formatSeparator)}return s.reduce((a,l)=>{var d;const{formatName:c,formatOptions:h}=wj(l);if(this.formats[c]){let p=a;try{const g=((d=i==null?void 0:i.formatParams)==null?void 0:d[i.interpolationkey])||{},y=g.locale||g.lng||i.locale||i.lng||r;p=this.formats[c](a,y,{...h,...i,...g})}catch(g){this.logger.warn(g)}return p}else this.logger.warn(`there was no format function for ${c}`);return a},e)}}const Sj=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class Ij extends Fh{constructor(e,n,r,i={}){var s,o;super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=Vn.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(o=(s=this.backend)==null?void 0:s.init)==null||o.call(s,r,i.backend,i)}queueLoad(e,n,r,i){const s={},o={},a={},l={};return e.forEach(c=>{let h=!0;n.forEach(d=>{const p=`${c}|${d}`;!r.reload&&this.store.hasResourceBundle(c,d)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?o[p]===void 0&&(o[p]=!0):(this.state[p]=1,h=!1,o[p]===void 0&&(o[p]=!0),s[p]===void 0&&(s[p]=!0),l[d]===void 0&&(l[d]=!0)))}),h||(a[c]=!0)}),(Object.keys(s).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const i=e.split("|"),s=i[0],o=i[1];n&&this.emit("failedLoading",s,o,n),!n&&r&&this.store.addResourceBundle(s,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const a={};this.queue.forEach(l=>{uj(l.loaded,[s],o),Sj(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{a[c]||(a[c]={});const h=l.loaded[c];h.length&&h.forEach(d=>{a[c][d]===void 0&&(a[c][d]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r,i=0,s=this.retryTimeout,o){if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:s,callback:o});return}this.readingCalls++;const a=(c,h)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(c&&h&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,s*2,o)},s);return}o(c,h)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const c=l(e,n);c&&typeof c.then=="function"?c.then(h=>a(null,h)).catch(a):a(null,c)}catch(c){a(c)}return}return l(e,n,a)}prepareLoading(e,n,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();X(e)&&(e=this.languageUtils.toResolveHierarchy(e)),X(n)&&(n=[n]);const s=this.queueLoad(e,n,r,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),i=r[0],s=r[1];this.read(i,s,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${s} for language ${i} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${s} for language ${i}`,a),this.loaded(e,o,a)})}saveMissing(e,n,r,i,s,o={},a=()=>{}){var l,c,h,d,p;if((c=(l=this.services)==null?void 0:l.utils)!=null&&c.hasLoadedNamespace&&!((d=(h=this.services)==null?void 0:h.utils)!=null&&d.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((p=this.backend)!=null&&p.create){const g={...o,isUpdate:s},y=this.backend.create.bind(this.backend);if(y.length<6)try{let I;y.length===5?I=y(e,n,r,i,g):I=y(e,n,r,i),I&&typeof I.then=="function"?I.then(P=>a(null,P)).catch(a):a(null,I)}catch(I){a(I)}else y(e,n,r,i,a,g)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}const nf=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),X(t[1])&&(e.defaultValue=t[1]),X(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),zw=t=>{var e,n;return X(t.ns)&&(t.ns=[t.ns]),X(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),X(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((n=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:n.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},gu=()=>{},xj=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};let Ww=!1;const Aj=t=>{var e,n,r,i,s,o,a,l,c;return!!(((r=(n=(e=t==null?void 0:t.modules)==null?void 0:e.backend)==null?void 0:n.name)==null?void 0:r.indexOf("Locize"))>0||((a=(o=(s=(i=t==null?void 0:t.modules)==null?void 0:i.backend)==null?void 0:s.constructor)==null?void 0:o.name)==null?void 0:a.indexOf("Locize"))>0||(c=(l=t==null?void 0:t.options)==null?void 0:l.backend)!=null&&c.backends&&t.options.backend.backends.some(h=>{var d,p,g;return((d=h==null?void 0:h.name)==null?void 0:d.indexOf("Locize"))>0||((g=(p=h==null?void 0:h.constructor)==null?void 0:p.name)==null?void 0:g.indexOf("Locize"))>0}))};class va extends Fh{constructor(e={},n){if(super(),this.options=zw(e),this.services={},this.logger=Vn,this.modules={external:[]},xj(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(X(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=nf();this.options={...r,...this.options,...zw(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=r.overloadTranslationOptionHandler),this.options.showSupportNotice!==!1&&!Aj(this)&&!Ww&&(typeof console<"u"&&typeof console.info<"u"&&console.info(" i18next is maintained with support from Locize  consider powering your project with managed localization (AI, CDN, integrations): https://locize.com "),Ww=!0);const i=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?Vn.init(i(this.modules.logger),this.options):Vn.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:c=Tj;const h=new Mw(this.options);this.store=new Lw(this.options.resources,this.options);const d=this.services;d.logger=Vn,d.resourceStore=this.store,d.languageUtils=h,d.pluralResolver=new _j(h,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),c&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(d.formatter=i(c),d.formatter.init&&d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new $w(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new Ij(i(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",(g,...y)=>{this.emit(g,...y)}),this.modules.languageDetector&&(d.languageDetector=i(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=i(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new Bc(this.services,this.options),this.translator.on("*",(g,...y)=>{this.emit(g,...y)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,n||(n=gu),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=(...h)=>this.store[c](...h)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=(...h)=>(this.store[c](...h),this)});const a=qo(),l=()=>{const c=(h,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(d),n(h,d)};if(this.languages&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initAsync?l():setTimeout(l,0),a}loadResources(e,n=gu){var s,o;let r=n;const i=X(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const a=[],l=c=>{if(!c||c==="cimode")return;this.services.languageUtils.toResolveHierarchy(c).forEach(d=>{d!=="cimode"&&a.indexOf(d)<0&&a.push(d)})};i?l(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(h=>l(h)),(o=(s=this.options.preload)==null?void 0:s.forEach)==null||o.call(s,c=>l(c)),this.services.backendConnector.load(a,this.options.ns,c=>{!c&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(c)})}else r(null)}reloadResources(e,n,r){const i=qo();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=gu),this.services.backendConnector.reload(e,n,s=>{i.resolve(),r(s)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&lA.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=qo();this.emit("languageChanging",e);const i=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},s=(a,l)=>{l?this.isLanguageChangingTo===e&&(i(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,r.resolve((...c)=>this.t(...c)),n&&n(a,(...c)=>this.t(...c))},o=a=>{var h,d;!e&&!a&&this.services.languageDetector&&(a=[]);const l=X(a)?a:a&&a[0],c=this.store.hasLanguageSomeTranslations(l)?l:this.services.languageUtils.getBestMatchFromCodes(X(a)?[a]:a);c&&(this.language||i(c),this.translator.language||this.translator.changeLanguage(c),(d=(h=this.services.languageDetector)==null?void 0:h.cacheUserLanguage)==null||d.call(h,c)),this.loadResources(c,p=>{s(p,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),r}getFixedT(e,n,r){const i=(s,o,...a)=>{let l;typeof o!="object"?l=this.options.overloadTranslationOptionHandler([s,o].concat(a)):l={...o},l.lng=l.lng||i.lng,l.lngs=l.lngs||i.lngs,l.ns=l.ns||i.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||i.keyPrefix);const c=this.options.keySeparator||".";let h;return l.keyPrefix&&Array.isArray(s)?h=s.map(d=>(typeof d=="function"&&(d=Wp(d,{...this.options,...o})),`${l.keyPrefix}${c}${d}`)):(typeof s=="function"&&(s=Wp(s,{...this.options,...o})),h=l.keyPrefix?`${l.keyPrefix}${c}${s}`:s),this.t(h,l)};return X(e)?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(...e){var n;return(n=this.translator)==null?void 0:n.translate(...e)}exists(...e){var n;return(n=this.translator)==null?void 0:n.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const c=this.services.backendConnector.state[`${a}|${l}`];return c===-1||c===0||c===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!i||o(s,e)))}loadNamespaces(e,n){const r=qo();return this.options.ns?(X(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=qo();X(e)&&(e=[e]);const i=this.options.preload||[],s=e.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return s.length?(this.options.preload=i.concat(s),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){var i,s;if(e||(e=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const o=new Intl.Locale(e);if(o&&o.getTextInfo){const a=o.getTextInfo();if(a&&a.direction)return a.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((s=this.services)==null?void 0:s.languageUtils)||new Mw(nf());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){const r=new va(e,n);return r.createInstance=va.createInstance,r}cloneInstance(e={},n=gu){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},s=new va(i);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(a=>{s[a]=this[a]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const a=Object.keys(this.store.data).reduce((l,c)=>(l[c]={...this.store.data[c]},l[c]=Object.keys(l[c]).reduce((h,d)=>(h[d]={...l[c][d]},h),l[c]),l),{});s.store=new Lw(a,i),s.services.resourceStore=s.store}if(e.interpolation){const l={...nf().interpolation,...this.options.interpolation,...e.interpolation},c={...i,interpolation:l};s.services.interpolator=new $w(c)}return s.translator=new Bc(s.services,i),s.translator.on("*",(a,...l)=>{s.emit(a,...l)}),s.init(i,n),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Nt=va.createInstance();Nt.createInstance;Nt.dir;Nt.init;Nt.loadResources;Nt.reloadResources;Nt.use;Nt.changeLanguage;Nt.getFixedT;Nt.t;Nt.exists;Nt.setDefaultNamespace;Nt.hasLoadedNamespace;Nt.loadNamespaces;Nt.loadLanguages;const Pj=(t,e,n,r)=>{var s,o,a,l;const i=[n,{code:e,...r||{}}];if((o=(s=t==null?void 0:t.services)==null?void 0:s.logger)!=null&&o.forward)return t.services.logger.forward(i,"warn","react-i18next::",!0);Ji(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(l=(a=t==null?void 0:t.services)==null?void 0:a.logger)!=null&&l.warn?t.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},Hw={},cA=(t,e,n,r)=>{Ji(n)&&Hw[n]||(Ji(n)&&(Hw[n]=new Date),Pj(t,e,n,r))},hA=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},Hp=(t,e,n)=>{t.loadNamespaces(e,hA(t,n))},qw=(t,e,n,r)=>{if(Ji(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return Hp(t,n,r);n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,hA(t,r))},Cj=(t,e,n={})=>!e.languages||!e.languages.length?(cA(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,i)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,t))return!1}}),Ji=t=>typeof t=="string",Rj=t=>typeof t=="object"&&t!==null,kj=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,bj={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Nj=t=>bj[t],Dj=t=>t.replace(kj,Nj);let qp={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Dj,transDefaultProps:void 0};const Vj=(t={})=>{qp={...qp,...t}},Lj=()=>qp;let dA;const Oj=t=>{dA=t},Mj=()=>dA,Fj={type:"3rdParty",init(t){Vj(t.options.react),Oj(t)}},jj=R.createContext();class Uj{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var fA={exports:{}},pA={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oo=R;function $j(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Bj=typeof Object.is=="function"?Object.is:$j,zj=oo.useState,Wj=oo.useEffect,Hj=oo.useLayoutEffect,qj=oo.useDebugValue;function Kj(t,e){var n=e(),r=zj({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return Hj(function(){i.value=n,i.getSnapshot=e,rf(i)&&s({inst:i})},[t,n,e]),Wj(function(){return rf(i)&&s({inst:i}),t(function(){rf(i)&&s({inst:i})})},[t]),qj(n),n}function rf(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Bj(t,n)}catch{return!0}}function Gj(t,e){return e()}var Qj=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Gj:Kj;pA.useSyncExternalStore=oo.useSyncExternalStore!==void 0?oo.useSyncExternalStore:Qj;fA.exports=pA;var Yj=fA.exports;const Xj=(t,e)=>Ji(e)?e:Rj(e)&&Ji(e.defaultValue)?e.defaultValue:Array.isArray(t)?t[t.length-1]:t,Jj={t:Xj,ready:!1},Zj=()=>()=>{},mA=(t,e={})=>{var S,A,N;const{i18n:n}=e,{i18n:r,defaultNS:i}=R.useContext(jj)||{},s=n||r||Mj();s&&!s.reportNamespaces&&(s.reportNamespaces=new Uj),s||cA(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const o=R.useMemo(()=>{var D;return{...Lj(),...(D=s==null?void 0:s.options)==null?void 0:D.react,...e}},[s,e]),{useSuspense:a,keyPrefix:l}=o,c=i||((S=s==null?void 0:s.options)==null?void 0:S.defaultNS),h=Ji(c)?[c]:c||["translation"],d=R.useMemo(()=>h,h);(N=(A=s==null?void 0:s.reportNamespaces)==null?void 0:A.addUsedNamespaces)==null||N.call(A,d);const p=R.useRef(0),g=R.useCallback(D=>{if(!s)return Zj;const{bindI18n:C,bindI18nStore:Y}=o,de=()=>{p.current+=1,D()};return C&&s.on(C,de),Y&&s.store.on(Y,de),()=>{C&&C.split(" ").forEach(be=>s.off(be,de)),Y&&Y.split(" ").forEach(be=>s.store.off(be,de))}},[s,o]),y=R.useRef(),I=R.useCallback(()=>{if(!s)return Jj;const D=!!(s.isInitialized||s.initializedStoreOnce)&&d.every($=>Cj($,s,o)),C=e.lng||s.language,Y=p.current,de=y.current;if(de&&de.ready===D&&de.lng===C&&de.keyPrefix===l&&de.revision===Y)return de;const ne={t:s.getFixedT(C,o.nsMode==="fallback"?d:d[0],l),ready:D,lng:C,keyPrefix:l,revision:Y};return y.current=ne,ne},[s,d,l,o,e.lng]),[P,w]=R.useState(0),{t:_,ready:E}=Yj.useSyncExternalStore(g,I,I);R.useEffect(()=>{if(s&&!E&&!a){const D=()=>w(C=>C+1);e.lng?qw(s,e.lng,d,D):Hp(s,d,D)}},[s,e.lng,d,E,a,P]);const b=s||{},V=R.useRef(null),M=R.useRef(),x=D=>{const C=Object.getOwnPropertyDescriptors(D);C.__original&&delete C.__original;const Y=Object.create(Object.getPrototypeOf(D),C);if(!Object.prototype.hasOwnProperty.call(Y,"__original"))try{Object.defineProperty(Y,"__original",{value:D,writable:!1,enumerable:!1,configurable:!1})}catch{}return Y},v=R.useMemo(()=>{const D=b,C=D==null?void 0:D.language;let Y=D;D&&(V.current&&V.current.__original===D?M.current!==C?(Y=x(D),V.current=Y,M.current=C):Y=V.current:(Y=x(D),V.current=Y,M.current=C));const de=[_,Y,E];return de.t=_,de.i18n=Y,de.ready=E,de},[_,b,E,b.resolvedLanguage,b.language,b.languages]);if(s&&a&&!E)throw new Promise(D=>{const C=()=>D();e.lng?qw(s,e.lng,d,C):Hp(s,d,C)});return v},Kw=({className:t="w-10 h-10"})=>k.jsx("div",{className:`${t} flex items-center justify-center text-gold`,children:k.jsx(ZF,{size:"100%",strokeWidth:1.5})}),eU=({onMenuClick:t})=>{const{t:e}=mA(),n=Hn(),{userRole:r,isAuthenticated:i,currentUserId:s}=Al(),o=a=>n.pathname===a;return n.pathname.includes("/classroom/")||n.pathname.includes("/room/")?null:k.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-[#161512] border-t border-white/10 pb-safe z-50",children:[k.jsxs("div",{className:"flex justify-around items-center h-16",children:[k.jsxs(bn,{to:"/","aria-label":"Ir a Inicio",className:`flex flex-col items-center justify-center w-full h-full space-y-1 relative ${o("/")?"text-gold":"text-white/40 hover:text-white/80"}`,children:[o("/")&&k.jsx("div",{className:"absolute top-0 w-8 h-1 bg-gold rounded-b-full shadow-[0_0_10px_rgba(212,175,55,0.5)]"}),k.jsx(ej,{size:20}),k.jsx("span",{className:"text-[10px] font-medium",children:"Jugar"})]}),i&&k.jsxs(bn,{to:`/classroom/${s}`,"aria-label":"Ir a Aula Interactiva",className:`flex flex-col items-center justify-center w-full h-full space-y-1 relative ${o(`/classroom/${s}`)?"text-gold":"text-white/40 hover:text-white/80"}`,children:[o(`/classroom/${s}`)&&k.jsx("div",{className:"absolute top-0 w-8 h-1 bg-gold rounded-b-full shadow-[0_0_10px_rgba(212,175,55,0.5)]"}),k.jsx(XF,{size:20}),k.jsx("span",{className:"text-[10px] font-medium",children:"Aprender"})]}),i&&k.jsxs(bn,{to:r==="teacher"||r==="club_director"?"/dashboard":"/student-dashboard","aria-label":"Ir a Mi Panel",className:`flex flex-col items-center justify-center w-full h-full space-y-1 relative ${o("/dashboard")||o("/student-dashboard")||o("/office")?"text-gold":"text-white/40 hover:text-white/80"}`,children:[(o("/dashboard")||o("/student-dashboard"))&&k.jsx("div",{className:"absolute top-0 w-8 h-1 bg-gold rounded-b-full shadow-[0_0_10px_rgba(212,175,55,0.5)]"}),k.jsx(oA,{size:20}),k.jsx("span",{className:"text-[10px] font-medium",children:"Panel"})]}),i?k.jsxs(bn,{to:"/profile","aria-label":"Ir a Mi Perfil",className:`flex flex-col items-center justify-center w-full h-full space-y-1 relative ${o("/profile")?"text-gold":"text-white/40 hover:text-white/80"}`,children:[o("/profile")&&k.jsx("div",{className:"absolute top-0 w-8 h-1 bg-gold rounded-b-full shadow-[0_0_10px_rgba(212,175,55,0.5)]"}),k.jsx(Ps,{size:20}),k.jsx("span",{className:"text-[10px] font-medium",children:"Perfil"})]}):k.jsxs("button",{onClick:t,"aria-label":"Iniciar Sesin",className:"flex flex-col items-center justify-center w-full h-full space-y-1 text-white/40 hover:text-white/80",children:[k.jsx(Ps,{size:20}),k.jsx("span",{className:"text-[10px] font-medium",children:"Login"})]}),k.jsxs("button",{onClick:t,"aria-label":"Abrir Men Principal",className:"flex flex-col items-center justify-center w-full h-full space-y-1 text-white/40 hover:text-white/80",children:[k.jsx(rj,{size:20}),k.jsx("span",{className:"text-[10px] font-medium",children:"Men"})]})]}),k.jsx("div",{className:"h-safe-area-bottom w-full bg-[#161512]"})]})},tU=()=>{var b,V,M,x,v;const t=Al(),{userRole:e,logout:n}=t,r=po(),i=Hn(),{t:s,i18n:o}=mA(),[a,l]=R.useState(!1),[c,h]=R.useState(!1),[d,p]=R.useState(!1),[g,y]=R.useState([]),[I,P]=R.useState(!1),w=g.filter(S=>!S.read).length;R.useEffect(()=>{if(t!=null&&t.currentUserId){const S=Xi.subscribeToNotifications(t.currentUserId,A=>{y(A)});return()=>S()}else y([])},[t==null?void 0:t.currentUserId]);const _=async S=>{S.read||await Xi.markNotificationAsRead(S.id),P(!1),S.link&&r(S.link)};R.useEffect(()=>{const S=()=>{l(window.scrollY>20)};return window.addEventListener("scroll",S),()=>window.removeEventListener("scroll",S)},[]),R.useEffect(()=>{h(!1)},[i]);const E=async()=>{p(!0);try{await(t==null?void 0:t.loginWithGoogle()),h(!1)}catch(S){console.error("Login failed:",S)}finally{p(!1)}};return i.pathname.includes("/classroom/")||i.pathname.includes("/room/"),k.jsxs(k.Fragment,{children:[k.jsx("nav",{className:`fixed top-0 left-0 right-0 h-16 z-[100] transition-all duration-500 border-b ${a||c?"bg-dark-bg/95 backdrop-blur-xl border-white/5 shadow-2xl":"bg-transparent border-transparent"}`,children:k.jsxs("div",{className:"h-full px-6 flex items-center justify-between relative z-[101]",children:[k.jsxs(bn,{to:"/",className:"flex items-center gap-2 group transition-opacity hover:opacity-80","aria-label":"Home",children:[k.jsx(Kw,{className:"w-8 h-8 text-gold drop-shadow-[0_0_8px_rgba(212,175,55,0.3)]"}),k.jsxs("h1",{className:"font-bold text-xl tracking-tighter text-white",children:["TOP",k.jsx("span",{className:"text-gold font-light",children:"CHESS"})]})]}),k.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[k.jsxs("button",{onClick:()=>{const S=o.language==="es"?"en":"es";o.changeLanguage(S)},"aria-label":"Cambiar idioma",className:"text-xs font-bold text-white/70 hover:text-gold transition-colors uppercase tracking-widest flex items-center gap-1",children:[k.jsx(kw,{size:14}),o.language==="es"?"ES":"EN"]}),k.jsx("div",{className:"w-px h-4 bg-white/10 mx-2"}),t!=null&&t.isAuthenticated?k.jsxs("div",{className:"flex items-center gap-4 relative",children:[k.jsxs("div",{className:"relative",children:[k.jsxs("button",{onClick:()=>{P(!I),h(!1)},className:"relative w-10 h-10 flex items-center justify-center rounded-full bg-white/5 border border-white/10 hover:bg-white/10 transition-all",children:[k.jsx(YF,{size:18,className:"text-white/80 hover:text-white transition-colors"}),w>0&&k.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center text-[9px] font-black text-white shadow-lg shadow-red-500/50 animate-pulse",children:w})]}),I&&k.jsxs("div",{className:"absolute top-14 right-0 w-80 bg-stone-900 border border-white/5 rounded-2xl shadow-2xl py-2 z-50 overflow-hidden backdrop-blur-3xl animate-enter",children:[k.jsxs("div",{className:"px-4 py-3 border-b border-white/5 flex items-center justify-between",children:[k.jsx("h3",{className:"font-bold text-sm text-white uppercase tracking-wider",children:"Notificaciones"}),w>0&&k.jsxs("span",{className:"text-[10px] bg-gold/20 text-gold px-2 py-0.5 rounded font-bold uppercase tracking-widest",children:[w," Nuevas"]})]}),k.jsx("div",{className:"max-h-[300px] overflow-y-auto no-scrollbar",children:g.length>0?g.map(S=>k.jsxs("button",{onClick:()=>_(S),className:`w-full text-left p-4 hover:bg-white/5 transition-colors border-b border-white/5 last:border-0 flex gap-3 ${S.read?"":"bg-gold/5"}`,children:[k.jsx("div",{className:`mt-1 w-2 h-2 rounded-full flex-shrink-0 ${S.read?"bg-transparent":"bg-gold"}`}),k.jsxs("div",{children:[k.jsx("p",{className:`text-sm ${S.read?"text-text-muted font-medium":"text-white font-bold"}`,children:S.title}),k.jsx("p",{className:"text-xs text-text-muted mt-1 leading-relaxed",children:S.message})]})]},S.id)):k.jsx("div",{className:"p-8 text-center text-text-muted text-sm",children:"No tienes notificaciones x"})})]})]}),k.jsxs("button",{onClick:()=>h(!c),"aria-label":"Abrir men de usuario",className:"relative w-10 h-10 flex items-center justify-center rounded-full bg-white/5 border border-white/10 hover:bg-white/10 transition-all",children:[(b=t.currentUser)!=null&&b.photoURL&&t.currentUser.photoURL.startsWith("http")?k.jsx("img",{src:t.currentUser.photoURL,alt:"Profile",className:"w-8 h-8 rounded-full object-cover"}):k.jsx(Ps,{size:18,className:"text-gold"}),e==="teacher"&&k.jsx("span",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-gold rounded-full flex items-center justify-center text-[8px] font-bold text-black border border-black",children:"T"})]})]}):k.jsx("div",{className:"flex gap-2",children:k.jsx("button",{onClick:E,disabled:d,className:"btn-primary",children:d?"...":s("nav.login")})})]}),k.jsxs("div",{className:"md:hidden flex items-center gap-4",children:[k.jsxs("button",{onClick:()=>{const S=o.language==="es"?"en":"es";o.changeLanguage(S)},"aria-label":"Cambiar idioma mvil",className:"text-xs font-bold text-white/70 hover:text-gold transition-colors uppercase tracking-widest flex items-center gap-1",children:[k.jsx(kw,{size:14}),o.language==="es"?"ES":"EN"]}),k.jsxs("button",{onClick:()=>h(!c),"aria-label":"Abrir men de usuario mvil",className:"relative w-10 h-10 flex items-center justify-center rounded-full bg-white/5 border border-white/10 hover:bg-white/10 transition-all",children:[t!=null&&t.isAuthenticated&&((V=t.currentUser)!=null&&V.photoURL)&&t.currentUser.photoURL.startsWith("http")?k.jsx("img",{src:t.currentUser.photoURL,alt:"Profile",className:"w-8 h-8 rounded-full object-cover"}):k.jsx(Ps,{size:18,className:"text-gold"}),(t==null?void 0:t.isAuthenticated)&&e==="teacher"&&k.jsx("span",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-gold rounded-full flex items-center justify-center text-[8px] font-bold text-black border border-black",children:"T"})]})]})]})}),c&&PI.createPortal(k.jsxs("div",{className:`fixed inset-0 z-[99] bg-dark-bg/95 backdrop-blur-xl transition-transform duration-300 ease-out ${c?"translate-x-0":"translate-x-full"}`,children:[k.jsx("div",{className:"absolute top-0 right-0 p-6 z-[101]",children:k.jsx("button",{onClick:()=>h(!1),"aria-label":"Cerrar men",className:"w-10 h-10 flex items-center justify-center rounded-full bg-white/5 border border-white/10 hover:bg-white/10 transition-all text-white",children:k.jsx(oj,{size:20})})}),k.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6",children:[k.jsx("div",{className:"flex flex-col items-center gap-6 mb-8",children:k.jsxs(bn,{to:"/",className:"flex items-center gap-2 group transition-opacity hover:opacity-80","aria-label":"Home",children:[k.jsx(Kw,{className:"w-12 h-12 text-gold drop-shadow-[0_0_8px_rgba(212,175,55,0.3)]"}),k.jsxs("h1",{className:"font-bold text-3xl tracking-tighter text-white",children:["TOP",k.jsx("span",{className:"text-gold font-light",children:"CHESS"})]})]})}),t!=null&&t.isAuthenticated?k.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[k.jsxs("div",{className:"flex items-center gap-4 mb-8 bg-white/5 p-4 rounded-2xl border border-white/5",children:[(M=t.currentUser)!=null&&M.photoURL&&t.currentUser.photoURL.startsWith("http")?k.jsx("img",{src:t.currentUser.photoURL,alt:"Profile",className:"w-12 h-12 rounded-lg object-cover border border-white/10"}):k.jsx("div",{className:"w-12 h-12 rounded-lg bg-white/10 flex items-center justify-center border border-white/10",children:k.jsx(Ps,{size:20,className:"text-gold"})}),k.jsxs("div",{children:[k.jsx("p",{className:"text-white font-bold text-sm truncate max-w-[140px]",children:(x=t.currentUser)==null?void 0:x.displayName}),k.jsx("p",{className:"text-gold text-[10px] font-mono uppercase tracking-widest",children:e})]})]}),(e==="teacher"||e==="club_director")&&k.jsxs(bn,{to:"/dashboard",onClick:()=>h(!1),className:"flex items-center gap-4 px-4 py-3 rounded-xl text-white/80 hover:text-white hover:bg-white/5 transition-all text-sm font-bold uppercase tracking-wider",children:[k.jsx(oA,{size:18,className:"text-gold/70"}),s("nav.panel")]}),((v=t.currentUser)==null?void 0:v.email)==="andreslgumuzio@gmail.com"&&k.jsxs(bn,{to:"/admin",onClick:()=>h(!1),className:"flex items-center gap-4 px-4 py-3 rounded-xl text-white/80 hover:text-white hover:bg-white/5 transition-all text-sm font-bold uppercase tracking-wider",children:[k.jsx(sj,{size:18,className:"text-red-400"}),s("nav.admin")]}),e==="club_director"&&k.jsxs(bn,{to:"/office",onClick:()=>h(!1),className:"flex items-center gap-4 px-4 py-3 rounded-xl text-white/80 hover:text-white hover:bg-white/5 transition-all text-sm font-bold uppercase tracking-wider",children:[k.jsx(nj,{size:18,className:"text-purple-400"}),"OFICINA VIRTUAL"]}),k.jsxs(bn,{to:"/profile",onClick:()=>h(!1),className:"flex items-center gap-4 px-4 py-3 rounded-xl text-white/80 hover:text-white hover:bg-white/5 transition-all text-sm font-bold uppercase tracking-wider",children:[k.jsx(Ps,{size:18,className:"text-blue-400"}),s("nav.profile")]}),k.jsxs("button",{onClick:()=>{n(),h(!1)},className:"flex items-center gap-4 px-4 py-3 rounded-xl text-red-500/80 hover:text-red-500 hover:bg-red-500/10 transition-all text-sm font-bold uppercase tracking-wider mt-4",children:[k.jsx(tj,{size:18}),s("nav.logout")]})]}):k.jsx("div",{className:"flex flex-col gap-4 w-full",children:k.jsxs("button",{onClick:E,disabled:d,className:"btn-primary w-full",children:[d&&k.jsx("div",{className:"w-3 h-3 border-2 border-black/30 border-t-black rounded-full animate-spin"}),d?"Iniciando...":s("nav.login")]})})]})]}),document.body),k.jsx(eU,{onMenuClick:()=>h(!0)})]})};class nU extends R.Component{constructor(){super(...arguments);Kv(this,"state",{hasError:!1})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Uncaught error:",n,r)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:k.jsx("div",{className:"w-full h-full min-h-[300px] flex flex-col items-center justify-center p-6 bg-[#0a0a0a]",children:k.jsxs("div",{className:"glass-panel p-8 rounded-2xl border border-red-500/20 bg-gradient-to-br from-[#1b1a17] to-red-900/10 max-w-md w-full text-center shadow-2xl",children:[k.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/10 mx-auto flex items-center justify-center mb-6 text-red-500 border border-red-500/20 shadow-[0_0_15px_rgba(239,68,68,0.2)]",children:k.jsx(JF,{size:32})}),k.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Algo sali mal"}),k.jsx("p",{className:"text-sm text-white/50 mb-8 leading-relaxed",children:"Ha ocurrido un error inesperado al cargar este componente. Nuestro equipo ha sido notificado."}),k.jsxs("button",{onClick:()=>this.setState({hasError:!1}),className:"px-6 py-3 rounded-xl bg-white/5 hover:bg-white/10 text-white font-bold transition-all border border-white/5 flex items-center justify-center gap-3 mx-auto w-full group overflow-hidden relative",children:[k.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),k.jsx(ij,{size:16,className:"group-hover:rotate-180 transition-transform duration-500"}),"Intentar de nuevo"]}),this.state.error&&k.jsx("div",{className:"mt-6 text-left p-4 bg-black/40 rounded-xl border border-white/5 overflow-x-auto custom-scrollbar",children:k.jsx("p",{className:"text-xs font-mono text-red-400 truncate",children:this.state.error.message})})]})}):this.props.children}}const my=R.createContext({});function gy(t){const e=R.useRef(null);return e.current===null&&(e.current=t()),e.current}const gA=typeof window<"u",yA=gA?R.useLayoutEffect:R.useEffect,jh=R.createContext(null);function yy(t,e){t.indexOf(e)===-1&&t.push(e)}function zc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Wn=(t,e,n)=>n>e?e:n<t?t:n;let vy=()=>{};const _r={},vA=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function _A(t){return typeof t=="object"&&t!==null}const wA=t=>/^0[^.\s]+$/u.test(t);function _y(t){let e;return()=>(e===void 0&&(e=t()),e)}const ln=t=>t,rU=(t,e)=>n=>e(t(n)),Tl=(...t)=>t.reduce(rU),Ja=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class wy{constructor(){this.subscriptions=[]}add(e){return yy(this.subscriptions,e),()=>zc(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const In=t=>t*1e3,on=t=>t/1e3;function EA(t,e){return e?t*(1e3/e):0}const TA=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,iU=1e-7,sU=12;function oU(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=TA(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>iU&&++a<sU);return o}function Sl(t,e,n,r){if(t===e&&n===r)return ln;const i=s=>oU(s,0,1,t,n);return s=>s===0||s===1?s:TA(i(s),e,r)}const SA=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,IA=t=>e=>1-t(1-e),xA=Sl(.33,1.53,.69,.99),Ey=IA(xA),AA=SA(Ey),PA=t=>(t*=2)<1?.5*Ey(t):.5*(2-Math.pow(2,-10*(t-1))),Ty=t=>1-Math.sin(Math.acos(t)),CA=IA(Ty),RA=SA(Ty),aU=Sl(.42,0,1,1),lU=Sl(0,0,.58,1),kA=Sl(.42,0,.58,1),uU=t=>Array.isArray(t)&&typeof t[0]!="number",bA=t=>Array.isArray(t)&&typeof t[0]=="number",cU={linear:ln,easeIn:aU,easeInOut:kA,easeOut:lU,circIn:Ty,circInOut:RA,circOut:CA,backIn:Ey,backInOut:AA,backOut:xA,anticipate:PA},hU=t=>typeof t=="string",Gw=t=>{if(bA(t)){vy(t.length===4);const[e,n,r,i]=t;return Sl(e,n,r,i)}else if(hU(t))return cU[t];return t},yu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function dU(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(h){o.has(h)&&(c.schedule(h),t()),h(a)}const c={schedule:(h,d=!1,p=!1)=>{const y=p&&i?n:r;return d&&o.add(h),y.has(h)||y.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(a=h,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),n.clear(),i=!1,s&&(s=!1,c.process(h))}};return c}const fU=40;function NA(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=yu.reduce((E,b)=>(E[b]=dU(s),E),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:h,update:d,preRender:p,render:g,postRender:y}=o,I=()=>{const E=_r.useManualTiming?i.timestamp:performance.now();n=!1,_r.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(E-i.timestamp,fU),1)),i.timestamp=E,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),h.process(i),d.process(i),p.process(i),g.process(i),y.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(I))},P=()=>{n=!0,r=!0,i.isProcessing||t(I)};return{schedule:yu.reduce((E,b)=>{const V=o[b];return E[b]=(M,x=!1,v=!1)=>(n||P(),V.schedule(M,x,v)),E},{}),cancel:E=>{for(let b=0;b<yu.length;b++)o[yu[b]].cancel(E)},state:i,steps:o}}const{schedule:we,cancel:ci,state:rt,steps:sf}=NA(typeof requestAnimationFrame<"u"?requestAnimationFrame:ln,!0);let Wu;function pU(){Wu=void 0}const Pt={now:()=>(Wu===void 0&&Pt.set(rt.isProcessing||_r.useManualTiming?rt.timestamp:performance.now()),Wu),set:t=>{Wu=t,queueMicrotask(pU)}},DA=t=>e=>typeof e=="string"&&e.startsWith(t),VA=DA("--"),mU=DA("var(--"),Sy=t=>mU(t)?gU.test(t.split("/*")[0].trim()):!1,gU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Qw(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Eo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Za={...Eo,transform:t=>Wn(0,1,t)},vu={...Eo,default:1},_a=t=>Math.round(t*1e5)/1e5,Iy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function yU(t){return t==null}const vU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,xy=(t,e)=>n=>!!(typeof n=="string"&&vU.test(n)&&n.startsWith(t)||e&&!yU(n)&&Object.prototype.hasOwnProperty.call(n,e)),LA=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Iy);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},_U=t=>Wn(0,255,t),of={...Eo,transform:t=>Math.round(_U(t))},Di={test:xy("rgb","red"),parse:LA("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+of.transform(t)+", "+of.transform(e)+", "+of.transform(n)+", "+_a(Za.transform(r))+")"};function wU(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Kp={test:xy("#"),parse:wU,transform:Di.transform},Il=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),kr=Il("deg"),$n=Il("%"),H=Il("px"),EU=Il("vh"),TU=Il("vw"),Yw={...$n,parse:t=>$n.parse(t)/100,transform:t=>$n.transform(t*100)},Cs={test:xy("hsl","hue"),parse:LA("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+$n.transform(_a(e))+", "+$n.transform(_a(n))+", "+_a(Za.transform(r))+")"},$e={test:t=>Di.test(t)||Kp.test(t)||Cs.test(t),parse:t=>Di.test(t)?Di.parse(t):Cs.test(t)?Cs.parse(t):Kp.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Di.transform(t):Cs.transform(t),getAnimatableNone:t=>{const e=$e.parse(t);return e.alpha=0,$e.transform(e)}},SU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function IU(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Iy))==null?void 0:e.length)||0)+(((n=t.match(SU))==null?void 0:n.length)||0)>0}const OA="number",MA="color",xU="var",AU="var(",Xw="${}",PU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function el(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(PU,l=>($e.test(l)?(r.color.push(s),i.push(MA),n.push($e.parse(l))):l.startsWith(AU)?(r.var.push(s),i.push(xU),n.push(l)):(r.number.push(s),i.push(OA),n.push(parseFloat(l))),++s,Xw)).split(Xw);return{values:n,split:a,indexes:r,types:i}}function FA(t){return el(t).values}function jA(t){const{split:e,types:n}=el(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===OA?s+=_a(i[o]):a===MA?s+=$e.transform(i[o]):s+=i[o]}return s}}const CU=t=>typeof t=="number"?0:$e.test(t)?$e.getAnimatableNone(t):t;function RU(t){const e=FA(t);return jA(t)(e.map(CU))}const hi={test:IU,parse:FA,createTransformer:jA,getAnimatableNone:RU};function af(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function kU({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=af(l,a,t+1/3),s=af(l,a,t),o=af(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Wc(t,e){return n=>n>0?e:t}const Pe=(t,e,n)=>t+(e-t)*n,lf=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},bU=[Kp,Di,Cs],NU=t=>bU.find(e=>e.test(t));function Jw(t){const e=NU(t);if(!e)return!1;let n=e.parse(t);return e===Cs&&(n=kU(n)),n}const Zw=(t,e)=>{const n=Jw(t),r=Jw(e);if(!n||!r)return Wc(t,e);const i={...n};return s=>(i.red=lf(n.red,r.red,s),i.green=lf(n.green,r.green,s),i.blue=lf(n.blue,r.blue,s),i.alpha=Pe(n.alpha,r.alpha,s),Di.transform(i))},Gp=new Set(["none","hidden"]);function DU(t,e){return Gp.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function VU(t,e){return n=>Pe(t,e,n)}function Ay(t){return typeof t=="number"?VU:typeof t=="string"?Sy(t)?Wc:$e.test(t)?Zw:MU:Array.isArray(t)?UA:typeof t=="object"?$e.test(t)?Zw:LU:Wc}function UA(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>Ay(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function LU(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Ay(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function OU(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const MU=(t,e)=>{const n=hi.createTransformer(e),r=el(t),i=el(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Gp.has(t)&&!i.values.length||Gp.has(e)&&!r.values.length?DU(t,e):Tl(UA(OU(r,i),i.values),n):Wc(t,e)};function $A(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Pe(t,e,n):Ay(t)(t,e)}const FU=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>we.update(e,n),stop:()=>ci(e),now:()=>rt.isProcessing?rt.timestamp:Pt.now()}},BA=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Hc=2e4;function Py(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Hc;)e+=n,r=t.next(e);return e>=Hc?1/0:e}function jU(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(Py(r),Hc);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:on(i)}}const UU=5;function zA(t,e,n){const r=Math.max(e-UU,0);return EA(n-t(r),e-r)}const Ve={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},uf=.001;function $U({duration:t=Ve.duration,bounce:e=Ve.bounce,velocity:n=Ve.velocity,mass:r=Ve.mass}){let i,s,o=1-e;o=Wn(Ve.minDamping,Ve.maxDamping,o),t=Wn(Ve.minDuration,Ve.maxDuration,on(t)),o<1?(i=c=>{const h=c*o,d=h*t,p=h-n,g=Qp(c,o),y=Math.exp(-d);return uf-p/g*y},s=c=>{const d=c*o*t,p=d*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,y=Math.exp(-d),I=Qp(Math.pow(c,2),o);return(-i(c)+uf>0?-1:1)*((p-g)*y)/I}):(i=c=>{const h=Math.exp(-c*t),d=(c-n)*t+1;return-uf+h*d},s=c=>{const h=Math.exp(-c*t),d=(n-c)*(t*t);return h*d});const a=5/t,l=zU(i,s,a);if(t=In(t),isNaN(l))return{stiffness:Ve.stiffness,damping:Ve.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const BU=12;function zU(t,e,n){let r=n;for(let i=1;i<BU;i++)r=r-t(r)/e(r);return r}function Qp(t,e){return t*Math.sqrt(1-e*e)}const WU=["duration","bounce"],HU=["stiffness","damping","mass"];function eE(t,e){return e.some(n=>t[n]!==void 0)}function qU(t){let e={velocity:Ve.velocity,stiffness:Ve.stiffness,damping:Ve.damping,mass:Ve.mass,isResolvedFromDuration:!1,...t};if(!eE(t,HU)&&eE(t,WU))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Wn(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Ve.mass,stiffness:i,damping:s}}else{const n=$U(t);e={...e,...n,mass:Ve.mass},e.isResolvedFromDuration=!0}return e}function qc(t=Ve.visualDuration,e=Ve.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:h,duration:d,velocity:p,isResolvedFromDuration:g}=qU({...n,velocity:-on(n.velocity||0)}),y=p||0,I=c/(2*Math.sqrt(l*h)),P=o-s,w=on(Math.sqrt(l/h)),_=Math.abs(P)<5;r||(r=_?Ve.restSpeed.granular:Ve.restSpeed.default),i||(i=_?Ve.restDelta.granular:Ve.restDelta.default);let E;if(I<1){const V=Qp(w,I);E=M=>{const x=Math.exp(-I*w*M);return o-x*((y+I*w*P)/V*Math.sin(V*M)+P*Math.cos(V*M))}}else if(I===1)E=V=>o-Math.exp(-w*V)*(P+(y+w*P)*V);else{const V=w*Math.sqrt(I*I-1);E=M=>{const x=Math.exp(-I*w*M),v=Math.min(V*M,300);return o-x*((y+I*w*P)*Math.sinh(v)+V*P*Math.cosh(v))/V}}const b={calculatedDuration:g&&d||null,next:V=>{const M=E(V);if(g)a.done=V>=d;else{let x=V===0?y:0;I<1&&(x=V===0?In(y):zA(E,V,M));const v=Math.abs(x)<=r,S=Math.abs(o-M)<=i;a.done=v&&S}return a.value=a.done?o:M,a},toString:()=>{const V=Math.min(Py(b),Hc),M=BA(x=>b.next(V*x).value,V,30);return V+"ms "+M},toTransition:()=>{}};return b}qc.applyToOptions=t=>{const e=jU(t,100,qc);return t.ease=e.ease,t.duration=In(e.duration),t.type="keyframes",t};function Yp({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const d=t[0],p={done:!1,value:d},g=v=>a!==void 0&&v<a||l!==void 0&&v>l,y=v=>a===void 0?l:l===void 0||Math.abs(a-v)<Math.abs(l-v)?a:l;let I=n*e;const P=d+I,w=o===void 0?P:o(P);w!==P&&(I=w-d);const _=v=>-I*Math.exp(-v/r),E=v=>w+_(v),b=v=>{const S=_(v),A=E(v);p.done=Math.abs(S)<=c,p.value=p.done?w:A};let V,M;const x=v=>{g(p.value)&&(V=v,M=qc({keyframes:[p.value,y(p.value)],velocity:zA(E,v,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:h}))};return x(0),{calculatedDuration:null,next:v=>{let S=!1;return!M&&V===void 0&&(S=!0,b(v),x(v)),V!==void 0&&v>=V?M.next(v-V):(!S&&b(v),p)}}}function KU(t,e,n){const r=[],i=n||_r.mix||$A,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||ln:e;a=Tl(l,a)}r.push(a)}return r}function GU(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(vy(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=KU(e,r,i),l=a.length,c=h=>{if(o&&h<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(h<t[d+1]);d++);const p=Ja(t[d],t[d+1],h);return a[d](p)};return n?h=>c(Wn(t[0],t[s-1],h)):c}function QU(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Ja(0,e,r);t.push(Pe(n,1,i))}}function YU(t){const e=[0];return QU(e,t.length-1),e}function XU(t,e){return t.map(n=>n*e)}function JU(t,e){return t.map(()=>e||kA).splice(0,t.length-1)}function wa({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=uU(r)?r.map(Gw):Gw(r),s={done:!1,value:e[0]},o=XU(n&&n.length===e.length?n:YU(e),t),a=GU(o,e,{ease:Array.isArray(i)?i:JU(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const ZU=t=>t!==null;function Cy(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(ZU),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const e4={decay:Yp,inertia:Yp,tween:wa,keyframes:wa,spring:qc};function WA(t){typeof t.type=="string"&&(t.type=e4[t.type])}class Ry{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const t4=t=>t/100;class ky extends Ry{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Pt.now()&&this.tick(Pt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;WA(e);const{type:n=wa,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||wa;l!==wa&&typeof a[0]!="number"&&(this.mixKeyframes=Tl(t4,$A(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=Py(c));const{calculatedDuration:h}=c;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:h,repeat:d,repeatType:p,repeatDelay:g,type:y,onUpdate:I,finalKeyframe:P}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const w=this.currentTime-c*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?w<0:w>i;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let E=this.currentTime,b=r;if(d){const v=Math.min(this.currentTime,i)/a;let S=Math.floor(v),A=v%1;!A&&v>=1&&(A=1),A===1&&S--,S=Math.min(S,d+1),!!(S%2)&&(p==="reverse"?(A=1-A,g&&(A-=g/a)):p==="mirror"&&(b=o)),E=Wn(0,1,A)*a}const V=_?{done:!1,value:h[0]}:b.next(E);s&&(V.value=s(V.value));let{done:M}=V;!_&&l!==null&&(M=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const x=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return x&&y!==Yp&&(V.value=Cy(h,this.options,P,this.speed)),I&&I(V.value),x&&this.finish(),V}then(e,n){return this.finished.then(e,n)}get duration(){return on(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+on(e)}get time(){return on(this.currentTime)}set time(e){var n;e=In(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Pt.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=on(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=FU,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Pt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function n4(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Vi=t=>t*180/Math.PI,Xp=t=>{const e=Vi(Math.atan2(t[1],t[0]));return Jp(e)},r4={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Xp,rotateZ:Xp,skewX:t=>Vi(Math.atan(t[1])),skewY:t=>Vi(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Jp=t=>(t=t%360,t<0&&(t+=360),t),tE=Xp,nE=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),rE=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),i4={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:nE,scaleY:rE,scale:t=>(nE(t)+rE(t))/2,rotateX:t=>Jp(Vi(Math.atan2(t[6],t[5]))),rotateY:t=>Jp(Vi(Math.atan2(-t[2],t[0]))),rotateZ:tE,rotate:tE,skewX:t=>Vi(Math.atan(t[4])),skewY:t=>Vi(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Zp(t){return t.includes("scale")?1:0}function em(t,e){if(!t||t==="none")return Zp(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=i4,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=r4,i=a}if(!i)return Zp(e);const s=r[e],o=i[1].split(",").map(o4);return typeof s=="function"?s(o):o[s]}const s4=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return em(n,e)};function o4(t){return parseFloat(t.trim())}const To=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],So=new Set(To),iE=t=>t===Eo||t===H,a4=new Set(["x","y","z"]),l4=To.filter(t=>!a4.has(t));function u4(t){const e=[];return l4.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Hr={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>em(e,"x"),y:(t,{transform:e})=>em(e,"y")};Hr.translateX=Hr.x;Hr.translateY=Hr.y;const ji=new Set;let tm=!1,nm=!1,rm=!1;function HA(){if(nm){const t=Array.from(ji).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=u4(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}nm=!1,tm=!1,ji.forEach(t=>t.complete(rm)),ji.clear()}function qA(){ji.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(nm=!0)})}function c4(){rm=!0,qA(),HA(),rm=!1}class by{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ji.add(this),tm||(tm=!0,we.read(qA),we.resolveKeyframes(HA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}n4(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ji.delete(this)}cancel(){this.state==="scheduled"&&(ji.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const h4=t=>t.startsWith("--");function d4(t,e,n){h4(e)?t.style.setProperty(e,n):t.style[e]=n}const f4=_y(()=>window.ScrollTimeline!==void 0),p4={};function m4(t,e){const n=_y(t);return()=>p4[e]??n()}const KA=m4(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),na=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,sE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:na([0,.65,.55,1]),circOut:na([.55,0,1,.45]),backIn:na([.31,.01,.66,-.59]),backOut:na([.33,1.53,.69,.99])};function GA(t,e){if(t)return typeof t=="function"?KA()?BA(t,e):"ease-out":bA(t)?na(t):Array.isArray(t)?t.map(n=>GA(n,e)||sE.easeOut):sE[t]}function g4(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const h={[e]:n};l&&(h.offset=l);const d=GA(a,i);Array.isArray(d)&&(h.easing=d);const p={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(p.pseudoElement=c),t.animate(h,p)}function QA(t){return typeof t=="function"&&"applyToOptions"in t}function y4({type:t,...e}){return QA(t)&&KA()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class YA extends Ry{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,vy(typeof e.type!="string");const c=y4(e);this.animation=g4(n,r,i,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=Cy(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(h):d4(n,r,h),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,r,i;const e=(n=this.options)==null?void 0:n.element;!this.isPseudoElement&&(e!=null&&e.isConnected)&&((i=(r=this.animation).commitStyles)==null||i.call(r))}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return on(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+on(e)}get time(){return on(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=In(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&f4()?(this.animation.timeline=e,ln):n(this)}}const XA={anticipate:PA,backInOut:AA,circInOut:RA};function v4(t){return t in XA}function _4(t){typeof t.ease=="string"&&v4(t.ease)&&(t.ease=XA[t.ease])}const cf=10;class w4 extends YA{constructor(e){_4(e),WA(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new ky({...o,autoplay:!1}),l=Math.max(cf,Pt.now()-this.startTime),c=Wn(0,cf,l-cf);n.setWithVelocity(a.sample(Math.max(0,l-c)).value,a.sample(l).value,c),a.stop()}}const oE=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(hi.test(t)||t==="0")&&!t.startsWith("url("));function E4(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function T4(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=oE(i,e),a=oE(s,e);return!o||!a?!1:E4(t)||(n==="spring"||QA(n))&&r}function im(t){t.duration=0,t.type="keyframes"}const S4=new Set(["opacity","clipPath","filter","transform"]),I4=_y(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function x4(t){var h;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((h=e==null?void 0:e.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return I4()&&n&&S4.has(n)&&(n!=="transform"||!c)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const A4=40;class P4 extends Ry{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:h,...d}){var y;super(),this.stop=()=>{var I,P;this._animation&&(this._animation.stop(),(I=this.stopTimeline)==null||I.call(this)),(P=this.keyframeResolver)==null||P.cancel()},this.createdAt=Pt.now();const p={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:h,...d},g=(h==null?void 0:h.KeyframeResolver)||by;this.keyframeResolver=new g(a,(I,P,w)=>this.onKeyframesResolved(I,P,p,!w),l,c,h),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(e,n,r,i){var P,w;this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:h}=r;this.resolvedAt=Pt.now(),T4(e,s,o,a)||((_r.instantAnimations||!l)&&(h==null||h(Cy(e,r,n))),e[0]=e[e.length-1],im(r),r.repeat=0);const p={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>A4?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},g=!c&&x4(p),y=(w=(P=p.motionValue)==null?void 0:P.owner)==null?void 0:w.current,I=g?new w4({...p,element:y}):new ky(p);I.finished.then(()=>{this.notifyFinished()}).catch(ln),this.pendingTimeline&&(this.stopTimeline=I.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=I}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),c4()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function JA(t,e,n,r=0,i=1){const s=Array.from(t).sort((c,h)=>c.sortNodePosition(h)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}const C4=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function R4(t){const e=C4.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function ZA(t,e,n=1){const[r,i]=R4(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return vA(o)?parseFloat(o):o}return Sy(i)?ZA(i,e,n+1):i}const k4={type:"spring",stiffness:500,damping:25,restSpeed:10},b4=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),N4={type:"keyframes",duration:.8},D4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},V4=(t,{keyframes:e})=>e.length>2?N4:So.has(t)?t.startsWith("scale")?b4(e[1]):k4:D4,L4=t=>t!==null;function O4(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(L4),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}function eP(t,e){if(t!=null&&t.inherit&&e){const{inherit:n,...r}=t;return{...e,...r}}return t}function Ny(t,e){const n=(t==null?void 0:t[e])??(t==null?void 0:t.default)??t;return n!==t?eP(n,t):n}function M4({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}const Dy=(t,e,n,r={},i,s)=>o=>{const a=Ny(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-In(l);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};M4(a)||Object.assign(h,V4(t,h)),h.duration&&(h.duration=In(h.duration)),h.repeatDelay&&(h.repeatDelay=In(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(im(h),h.delay===0&&(d=!0)),(_r.instantAnimations||_r.skipAnimations||i!=null&&i.shouldSkipAnimations)&&(d=!0,im(h),h.delay=0),h.allowFlatten=!a.type&&!a.ease,d&&!s&&e.get()!==void 0){const p=O4(h.keyframes,a);if(p!==void 0){we.update(()=>{h.onUpdate(p),h.onComplete()});return}}return a.isSync?new ky(h):new P4(h)};function aE(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Vy(t,e,n,r){if(typeof e=="function"){const[i,s]=aE(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=aE(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function zs(t,e,n){const r=t.getProps();return Vy(r,e,n!==void 0?n:r.custom,t)}const tP=new Set(["width","height","top","left","right","bottom",...To]),lE=30,F4=t=>!isNaN(parseFloat(t));class j4{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Pt.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Pt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=F4(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new wy);const r=this.events[e].add(n);return e==="change"?()=>{r(),we.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Pt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>lE)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,lE);return EA(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ao(t,e){return new j4(t,e)}const sm=t=>Array.isArray(t);function U4(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ao(n))}function $4(t){return sm(t)?t[t.length-1]||0:t}function B4(t,e){const n=zs(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=$4(s[o]);U4(t,o,a)}}const wt=t=>!!(t&&t.getVelocity);function z4(t){return!!(wt(t)&&t.add)}function om(t,e){const n=t.getValue("willChange");if(z4(n))return n.add(e);if(!n&&_r.WillChange){const r=new _r.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function Ly(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const W4="framerAppearId",nP="data-"+Ly(W4);function rP(t){return t.props[nP]}function H4({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function iP(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s,transitionEnd:o,...a}=e;const l=t.getDefaultTransition();s=s?eP(s,l):l;const c=s==null?void 0:s.reduceMotion;r&&(s=r);const h=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const p in a){const g=t.getValue(p,t.latestValues[p]??null),y=a[p];if(y===void 0||d&&H4(d,p))continue;const I={delay:n,...Ny(s||{},p)},P=g.get();if(P!==void 0&&!g.isAnimating&&!Array.isArray(y)&&y===P&&!I.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const b=rP(t);if(b){const V=window.MotionHandoffAnimation(b,p,we);V!==null&&(I.startTime=V,w=!0)}}om(t,p);const _=c??t.shouldReduceMotion;g.start(Dy(p,g,y,_&&tP.has(p)?{type:!1}:I,t,w));const E=g.animation;E&&h.push(E)}if(o){const p=()=>we.update(()=>{o&&B4(t,o)});h.length?Promise.all(h).then(p):p()}return h}function am(t,e,n={}){var l;const r=zs(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(iP(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:p}=i;return q4(t,e,c,h,d,p,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,h]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>h())}else return Promise.all([s(),o(n.delay)])}function q4(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(am(l,e,{...o,delay:n+(typeof r=="function"?0:r)+JA(t.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function K4(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>am(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=am(t,e,n);else{const i=typeof e=="function"?zs(t,e,n.custom):e;r=Promise.all(iP(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const G4={test:t=>t==="auto",parse:t=>t},sP=t=>e=>e.test(t),oP=[Eo,H,$n,kr,TU,EU,G4],uE=t=>oP.find(sP(t));function Q4(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||wA(t):!0}const Y4=new Set(["brightness","contrast","saturate","opacity"]);function X4(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Iy)||[];if(!r)return t;const i=n.replace(r,"");let s=Y4.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const J4=/\b([a-z-]*)\(.*?\)/gu,lm={...hi,getAnimatableNone:t=>{const e=t.match(J4);return e?e.map(X4).join(" "):t}},cE={...Eo,transform:Math.round},Z4={rotate:kr,rotateX:kr,rotateY:kr,rotateZ:kr,scale:vu,scaleX:vu,scaleY:vu,scaleZ:vu,skew:kr,skewX:kr,skewY:kr,distance:H,translateX:H,translateY:H,translateZ:H,x:H,y:H,z:H,perspective:H,transformPerspective:H,opacity:Za,originX:Yw,originY:Yw,originZ:H},Oy={borderWidth:H,borderTopWidth:H,borderRightWidth:H,borderBottomWidth:H,borderLeftWidth:H,borderRadius:H,borderTopLeftRadius:H,borderTopRightRadius:H,borderBottomRightRadius:H,borderBottomLeftRadius:H,width:H,maxWidth:H,height:H,maxHeight:H,top:H,right:H,bottom:H,left:H,inset:H,insetBlock:H,insetBlockStart:H,insetBlockEnd:H,insetInline:H,insetInlineStart:H,insetInlineEnd:H,padding:H,paddingTop:H,paddingRight:H,paddingBottom:H,paddingLeft:H,paddingBlock:H,paddingBlockStart:H,paddingBlockEnd:H,paddingInline:H,paddingInlineStart:H,paddingInlineEnd:H,margin:H,marginTop:H,marginRight:H,marginBottom:H,marginLeft:H,marginBlock:H,marginBlockStart:H,marginBlockEnd:H,marginInline:H,marginInlineStart:H,marginInlineEnd:H,fontSize:H,backgroundPositionX:H,backgroundPositionY:H,...Z4,zIndex:cE,fillOpacity:Za,strokeOpacity:Za,numOctaves:cE},e$={...Oy,color:$e,backgroundColor:$e,outlineColor:$e,fill:$e,stroke:$e,borderColor:$e,borderTopColor:$e,borderRightColor:$e,borderBottomColor:$e,borderLeftColor:$e,filter:lm,WebkitFilter:lm},aP=t=>e$[t];function lP(t,e){let n=aP(t);return n!==lm&&(n=hi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const t$=new Set(["auto","none","0"]);function n$(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!t$.has(s)&&el(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=lP(n,i)}class r$ extends by{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let d=e[h];if(typeof d=="string"&&(d=d.trim(),Sy(d))){const p=ZA(d,n.current);p!==void 0&&(e[h]=p),h===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!tP.has(r)||e.length!==2)return;const[i,s]=e,o=uE(i),a=uE(s),l=Qw(i),c=Qw(s);if(l!==c&&Hr[r]){this.needsMeasurement=!0;return}if(o!==a)if(iE(o)&&iE(a))for(let h=0;h<e.length;h++){const d=e[h];typeof d=="string"&&(e[h]=parseFloat(d))}else Hr[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||Q4(e[i]))&&r.push(i);r.length&&n$(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Hr[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Hr[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const i$=new Set(["opacity","clipPath","filter","transform"]);function uP(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t).filter(r=>r!=null)}const cP=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function um(t){return _A(t)&&"offsetHeight"in t}const{schedule:My}=NA(queueMicrotask,!1),gn={x:!1,y:!1};function hP(){return gn.x||gn.y}function s$(t){return t==="x"||t==="y"?gn[t]?null:(gn[t]=!0,()=>{gn[t]=!1}):gn.x||gn.y?null:(gn.x=gn.y=!0,()=>{gn.x=gn.y=!1})}function dP(t,e){const n=uP(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function o$(t){return!(t.pointerType==="touch"||hP())}function a$(t,e,n={}){const[r,i,s]=dP(t,n);return r.forEach(o=>{let a=!1,l=!1,c;const h=()=>{o.removeEventListener("pointerleave",y)},d=P=>{c&&(c(P),c=void 0),h()},p=P=>{a=!1,window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",p),l&&(l=!1,d(P))},g=()=>{a=!0,window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",p,i)},y=P=>{if(P.pointerType!=="touch"){if(a){l=!0;return}d(P)}},I=P=>{if(!o$(P))return;l=!1;const w=e(o,P);typeof w=="function"&&(c=w,o.addEventListener("pointerleave",y,i))};o.addEventListener("pointerenter",I,i),o.addEventListener("pointerdown",g,i)}),s}const fP=(t,e)=>e?t===e?!0:fP(t,e.parentElement):!1,Fy=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,l$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function u$(t){return l$.has(t.tagName)||t.isContentEditable===!0}const c$=new Set(["INPUT","SELECT","TEXTAREA"]);function h$(t){return c$.has(t.tagName)||t.isContentEditable===!0}const Hu=new WeakSet;function hE(t){return e=>{e.key==="Enter"&&t(e)}}function hf(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const d$=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=hE(()=>{if(Hu.has(n))return;hf(n,"down");const i=hE(()=>{hf(n,"up")}),s=()=>hf(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function dE(t){return Fy(t)&&!hP()}const fE=new WeakSet;function f$(t,e,n={}){const[r,i,s]=dP(t,n),o=a=>{const l=a.currentTarget;if(!dE(a)||fE.has(a))return;Hu.add(l),n.stopPropagation&&fE.add(a);const c=e(l,a),h=(g,y)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",p),Hu.has(l)&&Hu.delete(l),dE(g)&&typeof c=="function"&&c(g,{success:y})},d=g=>{h(g,l===window||l===document||n.useGlobalTarget||fP(l,g.target))},p=g=>{h(g,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",p,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),um(a)&&(a.addEventListener("focus",c=>d$(c,i)),!u$(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function jy(t){return _A(t)&&"ownerSVGElement"in t}const qu=new WeakMap;let br;const pP=(t,e,n)=>(r,i)=>i&&i[0]?i[0][t+"Size"]:jy(r)&&"getBBox"in r?r.getBBox()[e]:r[n],p$=pP("inline","width","offsetWidth"),m$=pP("block","height","offsetHeight");function g$({target:t,borderBoxSize:e}){var n;(n=qu.get(t))==null||n.forEach(r=>{r(t,{get width(){return p$(t,e)},get height(){return m$(t,e)}})})}function y$(t){t.forEach(g$)}function v$(){typeof ResizeObserver>"u"||(br=new ResizeObserver(y$))}function _$(t,e){br||v$();const n=uP(t);return n.forEach(r=>{let i=qu.get(r);i||(i=new Set,qu.set(r,i)),i.add(e),br==null||br.observe(r)}),()=>{n.forEach(r=>{const i=qu.get(r);i==null||i.delete(e),i!=null&&i.size||br==null||br.unobserve(r)})}}const Ku=new Set;let Rs;function w$(){Rs=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};Ku.forEach(e=>e(t))},window.addEventListener("resize",Rs)}function E$(t){return Ku.add(t),Rs||w$(),()=>{Ku.delete(t),!Ku.size&&typeof Rs=="function"&&(window.removeEventListener("resize",Rs),Rs=void 0)}}function pE(t,e){return typeof t=="function"?E$(t):_$(t,e)}function T$(t){return jy(t)&&t.tagName==="svg"}const S$=[...oP,$e,hi],I$=t=>S$.find(sP(t)),mE=()=>({translate:0,scale:1,origin:0,originPoint:0}),ks=()=>({x:mE(),y:mE()}),gE=()=>({min:0,max:0}),We=()=>({x:gE(),y:gE()}),x$=new WeakMap;function Uh(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function tl(t){return typeof t=="string"||Array.isArray(t)}const Uy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],$y=["initial",...Uy];function $h(t){return Uh(t.animate)||$y.some(e=>tl(t[e]))}function mP(t){return!!($h(t)||t.variants)}function A$(t,e,n){for(const r in e){const i=e[r],s=n[r];if(wt(i))t.addValue(r,i);else if(wt(s))t.addValue(r,ao(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,ao(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const cm={current:null},gP={current:!1},P$=typeof window<"u";function C$(){if(gP.current=!0,!!P$)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>cm.current=t.matches;t.addEventListener("change",e),e()}else cm.current=!1}const yE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Kc={};function yP(t){Kc=t}function R$(){return Kc}class k${scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,skipAnimations:s,blockInitialAnimation:o,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=by,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Pt.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,we.render(this.render,!1,!0))};const{latestValues:c,renderState:h}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.skipAnimationsConfig=s,this.options=l,this.blockInitialAnimation=!!o,this.isControllingVariants=$h(n),this.isVariantNode=mP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in p){const y=p[g];c[g]!==void 0&&wt(y)&&y.set(c[g])}}mount(e){var n,r;if(this.hasBeenMounted)for(const i in this.initialValues)(n=this.values.get(i))==null||n.jump(this.initialValues[i]),this.latestValues[i]=this.initialValues[i];this.current=e,x$.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,s)=>this.bindToMotionValue(s,i)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(gP.current||C$(),this.shouldReduceMotion=cm.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var e;this.projection&&this.projection.unmount(),ci(this.notifyUpdate),ci(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),n.accelerate&&i$.has(e)&&this.current instanceof HTMLElement){const{factory:o,keyframes:a,times:l,ease:c,duration:h}=n.accelerate,d=new YA({element:this.current,name:e,keyframes:a,times:l,ease:c,duration:In(h)}),p=o(d);this.valueSubscriptions.set(e,()=>{p(),d.cancel()});return}const r=So.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&we.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;typeof window<"u"&&window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Kc){const n=Kc[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):We()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<yE.length;r++){const i=yE[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=A$(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ao(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(vA(r)||wA(r))?r=parseFloat(r):!I$(r)&&hi.test(n)&&(r=lP(e,n)),this.setBaseTarget(e,wt(r)?r.get():r)),wt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Vy(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!wt(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new wy),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){My.render(this.render)}}class vP extends k${constructor(){super(...arguments),this.KeyframeResolver=r$}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const r=e.style;return r?r[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;wt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class vi{constructor(e){this.isMounted=!1,this.node=e}update(){}}function _P({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function b$({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function N$(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function df(t){return t===void 0||t===1}function hm({scale:t,scaleX:e,scaleY:n}){return!df(t)||!df(e)||!df(n)}function Pi(t){return hm(t)||wP(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function wP(t){return vE(t.x)||vE(t.y)}function vE(t){return t&&t!=="0%"}function Gc(t,e,n){const r=t-n,i=e*r;return n+i}function _E(t,e,n,r,i){return i!==void 0&&(t=Gc(t,i,r)),Gc(t,n,r)+e}function dm(t,e=0,n=1,r,i){t.min=_E(t.min,e,n,r,i),t.max=_E(t.max,e,n,r,i)}function EP(t,{x:e,y:n}){dm(t.x,e.translate,e.scale,e.originPoint),dm(t.y,n.translate,n.scale,n.originPoint)}const wE=.999999999999,EE=1.0000000000001;function D$(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Ns(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,EP(t,o)),r&&Pi(s.latestValues)&&Ns(t,s.latestValues))}e.x<EE&&e.x>wE&&(e.x=1),e.y<EE&&e.y>wE&&(e.y=1)}function bs(t,e){t.min=t.min+e,t.max=t.max+e}function TE(t,e,n,r,i=.5){const s=Pe(t.min,t.max,i);dm(t,e,n,s,r)}function Ns(t,e){TE(t.x,e.x,e.scaleX,e.scale,e.originX),TE(t.y,e.y,e.scaleY,e.scale,e.originY)}function TP(t,e){return _P(N$(t.getBoundingClientRect(),e))}function V$(t,e,n){const r=TP(t,n),{scroll:i}=e;return i&&(bs(r.x,i.offset.x),bs(r.y,i.offset.y)),r}const L$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},O$=To.length;function M$(t,e,n){let r="",i=!0;for(let s=0;s<O$;s++){const o=To[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number")l=a===(o.startsWith("scale")?1:0);else{const c=parseFloat(a);l=o.startsWith("scale")?c===1:c===0}if(!l||n){const c=cP(a,Oy[o]);if(!l){i=!1;const h=L$[o]||o;r+=`${h}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function By(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(So.has(l)){o=!0;continue}else if(VA(l)){i[l]=c;continue}else{const h=cP(c,Oy[l]);l.startsWith("origin")?(a=!0,s[l]=h):r[l]=h}}if(e.transform||(o||n?r.transform=M$(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:h=0}=s;r.transformOrigin=`${l} ${c} ${h}`}}function SP(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function SE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ko={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(H.test(t))t=parseFloat(t);else return t;const n=SE(t,e.target.x),r=SE(t,e.target.y);return`${n}% ${r}%`}},F$={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=hi.parse(t);if(i.length>5)return r;const s=hi.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Pe(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}},fm={borderRadius:{...Ko,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ko,borderTopRightRadius:Ko,borderBottomLeftRadius:Ko,borderBottomRightRadius:Ko,boxShadow:F$};function IP(t,{layout:e,layoutId:n}){return So.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!fm[t]||t==="opacity")}function zy(t,e,n){var o;const r=t.style,i=e==null?void 0:e.style,s={};if(!r)return s;for(const a in r)(wt(r[a])||i&&wt(i[a])||IP(a,t)||((o=n==null?void 0:n.getValue(a))==null?void 0:o.liveStyle)!==void 0)&&(s[a]=r[a]);return s}function j$(t){return window.getComputedStyle(t)}class U$ extends vP{constructor(){super(...arguments),this.type="html",this.renderInstance=SP}readValueFromInstance(e,n){var r;if(So.has(n))return(r=this.projection)!=null&&r.isProjecting?Zp(n):s4(e,n);{const i=j$(e),s=(VA(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return TP(e,n)}build(e,n,r){By(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return zy(e,n,r)}}const $$={offset:"stroke-dashoffset",array:"stroke-dasharray"},B$={offset:"strokeDashoffset",array:"strokeDasharray"};function z$(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?$$:B$;t[s.offset]=`${-r}`,t[s.array]=`${e} ${n}`}const W$=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function xP(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,c,h){if(By(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:p}=t;d.transform&&(p.transform=d.transform,delete d.transform),(p.transform||d.transformOrigin)&&(p.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),p.transform&&(p.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete d.transformBox);for(const g of W$)d[g]!==void 0&&(p[g]=d[g],delete d[g]);e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&z$(d,i,s,o,!1)}const AP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),PP=t=>typeof t=="string"&&t.toLowerCase()==="svg";function H$(t,e,n,r){SP(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(AP.has(i)?i:Ly(i),e.attrs[i])}function CP(t,e,n){const r=zy(t,e,n);for(const i in t)if(wt(t[i])||wt(e[i])){const s=To.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}class q$ extends vP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=We}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(So.has(n)){const r=aP(n);return r&&r.default||0}return n=AP.has(n)?n:Ly(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return CP(e,n,r)}build(e,n,r){xP(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){H$(e,n,r,i)}mount(e){this.isSVGTag=PP(e.tagName),super.mount(e)}}const K$=$y.length;function RP(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?RP(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<K$;n++){const r=$y[n],i=t.props[r];(tl(i)||i===!1)&&(e[r]=i)}return e}function kP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const G$=[...Uy].reverse(),Q$=Uy.length;function Y$(t){return e=>Promise.all(e.map(({animation:n,options:r})=>K4(t,n,r)))}function X$(t){let e=Y$(t),n=IE(),r=!0;const i=l=>(c,h)=>{var p;const d=zs(t,h,l==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);if(d){const{transition:g,transitionEnd:y,...I}=d;c={...c,...I,...y}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,h=RP(t.parent)||{},d=[],p=new Set;let g={},y=1/0;for(let P=0;P<Q$;P++){const w=G$[P],_=n[w],E=c[w]!==void 0?c[w]:h[w],b=tl(E),V=w===l?_.isActive:null;V===!1&&(y=P);let M=E===h[w]&&E!==c[w]&&b;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),_.protectedKeys={...g},!_.isActive&&V===null||!E&&!_.prevProp||Uh(E)||typeof E=="boolean")continue;if(w==="exit"&&_.isActive&&V!==!0){_.prevResolvedValues&&(g={...g,..._.prevResolvedValues});continue}const x=J$(_.prevProp,E);let v=x||w===l&&_.isActive&&!M&&b||P>y&&b,S=!1;const A=Array.isArray(E)?E:[E];let N=A.reduce(i(w),{});V===!1&&(N={});const{prevResolvedValues:D={}}=_,C={...D,...N},Y=ne=>{v=!0,p.has(ne)&&(S=!0,p.delete(ne)),_.needsAnimating[ne]=!0;const $=t.getValue(ne);$&&($.liveStyle=!1)};for(const ne in C){const $=N[ne],K=D[ne];if(g.hasOwnProperty(ne))continue;let Q=!1;sm($)&&sm(K)?Q=!kP($,K):Q=$!==K,Q?$!=null?Y(ne):p.add(ne):$!==void 0&&p.has(ne)?Y(ne):_.protectedKeys[ne]=!0}_.prevProp=E,_.prevResolvedValues=N,_.isActive&&(g={...g,...N}),r&&t.blockInitialAnimation&&(v=!1);const de=M&&x;v&&(!de||S)&&d.push(...A.map(ne=>{const $={type:w};if(typeof ne=="string"&&r&&!de&&t.manuallyAnimateOnMount&&t.parent){const{parent:K}=t,Q=zs(K,ne);if(K.enteringChildren&&Q){const{delayChildren:re}=Q.transition||{};$.delay=JA(K.enteringChildren,t,re)}}return{animation:ne,options:$}}))}if(p.size){const P={};if(typeof c.initial!="boolean"){const w=zs(t,Array.isArray(c.initial)?c.initial[0]:c.initial);w&&w.transition&&(P.transition=w.transition)}p.forEach(w=>{const _=t.getBaseTarget(w),E=t.getValue(w);E&&(E.liveStyle=!0),P[w]=_??null}),d.push({animation:P})}let I=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(I=!1),r=!1,I?e(d):Promise.resolve()}function a(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=t.variantChildren)==null||d.forEach(p=>{var g;return(g=p.animationState)==null?void 0:g.setActive(l,c)}),n[l].isActive=c;const h=o(l);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=IE()}}}function J$(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!kP(e,t):!1}function Si(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function IE(){return{animate:Si(!0),whileInView:Si(),whileHover:Si(),whileTap:Si(),whileDrag:Si(),whileFocus:Si(),exit:Si()}}function xE(t,e){t.min=e.min,t.max=e.max}function mn(t,e){xE(t.x,e.x),xE(t.y,e.y)}function AE(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const bP=1e-4,Z$=1-bP,e3=1+bP,NP=.01,t3=0-NP,n3=0+NP;function Ct(t){return t.max-t.min}function r3(t,e,n){return Math.abs(t-e)<=n}function PE(t,e,n,r=.5){t.origin=r,t.originPoint=Pe(e.min,e.max,t.origin),t.scale=Ct(n)/Ct(e),t.translate=Pe(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Z$&&t.scale<=e3||isNaN(t.scale))&&(t.scale=1),(t.translate>=t3&&t.translate<=n3||isNaN(t.translate))&&(t.translate=0)}function Ea(t,e,n,r){PE(t.x,e.x,n.x,r?r.originX:void 0),PE(t.y,e.y,n.y,r?r.originY:void 0)}function CE(t,e,n){t.min=n.min+e.min,t.max=t.min+Ct(e)}function i3(t,e,n){CE(t.x,e.x,n.x),CE(t.y,e.y,n.y)}function RE(t,e,n){t.min=e.min-n.min,t.max=t.min+Ct(e)}function Qc(t,e,n){RE(t.x,e.x,n.x),RE(t.y,e.y,n.y)}function kE(t,e,n,r,i){return t-=e,t=Gc(t,1/n,r),i!==void 0&&(t=Gc(t,1/i,r)),t}function s3(t,e=0,n=1,r=.5,i,s=t,o=t){if($n.test(e)&&(e=parseFloat(e),e=Pe(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Pe(s.min,s.max,r);t===s&&(a-=e),t.min=kE(t.min,e,n,a,i),t.max=kE(t.max,e,n,a,i)}function bE(t,e,[n,r,i],s,o){s3(t,e[n],e[r],e[i],e.scale,s,o)}const o3=["x","scaleX","originX"],a3=["y","scaleY","originY"];function NE(t,e,n,r){bE(t.x,e,o3,n?n.x:void 0,r?r.x:void 0),bE(t.y,e,a3,n?n.y:void 0,r?r.y:void 0)}function DE(t){return t.translate===0&&t.scale===1}function DP(t){return DE(t.x)&&DE(t.y)}function VE(t,e){return t.min===e.min&&t.max===e.max}function l3(t,e){return VE(t.x,e.x)&&VE(t.y,e.y)}function LE(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function VP(t,e){return LE(t.x,e.x)&&LE(t.y,e.y)}function OE(t){return Ct(t.x)/Ct(t.y)}function ME(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function kn(t){return[t("x"),t("y")]}function u3(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:d,rotateY:p,skewX:g,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),h&&(r+=`rotate(${h}deg) `),d&&(r+=`rotateX(${d}deg) `),p&&(r+=`rotateY(${p}deg) `),g&&(r+=`skewX(${g}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const LP=["TopLeft","TopRight","BottomLeft","BottomRight"],c3=LP.length,FE=t=>typeof t=="string"?parseFloat(t):t,jE=t=>typeof t=="number"||H.test(t);function h3(t,e,n,r,i,s){i?(t.opacity=Pe(0,n.opacity??1,d3(r)),t.opacityExit=Pe(e.opacity??1,0,f3(r))):s&&(t.opacity=Pe(e.opacity??1,n.opacity??1,r));for(let o=0;o<c3;o++){const a=`border${LP[o]}Radius`;let l=UE(e,a),c=UE(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||jE(l)===jE(c)?(t[a]=Math.max(Pe(FE(l),FE(c),r),0),($n.test(c)||$n.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Pe(e.rotate||0,n.rotate||0,r))}function UE(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const d3=OP(0,.5,CA),f3=OP(.5,.95,ln);function OP(t,e,n){return r=>r<t?0:r>e?1:n(Ja(t,e,r))}function p3(t,e,n){const r=wt(t)?t:ao(t);return r.start(Dy("",r,e,n)),r.animation}function nl(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const m3=(t,e)=>t.depth-e.depth;class g3{constructor(){this.children=[],this.isDirty=!1}add(e){yy(this.children,e),this.isDirty=!0}remove(e){zc(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(m3),this.isDirty=!1,this.children.forEach(e)}}function y3(t,e){const n=Pt.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(ci(r),t(s-e))};return we.setup(r,!0),()=>ci(r)}function Gu(t){return wt(t)?t.get():t}class v3{constructor(){this.members=[]}add(e){yy(this.members,e);for(let n=this.members.length-1;n>=0;n--){const r=this.members[n];if(r===e||r===this.lead||r===this.prevLead)continue;const i=r.instance;i&&i.isConnected===!1&&r.isPresent!==!1&&!r.snapshot&&zc(this.members,r)}e.scheduleRender()}remove(e){if(zc(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i],o=s.instance;if(s.isPresent!==!1&&(!o||o.isConnected!==!1)){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const i=r.options.layoutDependency,s=e.options.layoutDependency;if(!(i!==void 0&&s!==void 0&&i===s)){const l=r.instance;l&&l.isConnected===!1&&!r.snapshot||(e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:a}=e.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Qu={hasAnimatedSinceResize:!0,hasEverUpdated:!1},ff=["","X","Y","Z"],_3=1e3;let w3=0;function pf(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function MP(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=rP(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",we,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&MP(r)}function FP({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=w3++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(S3),this.nodes.forEach(P3),this.nodes.forEach(C3),this.nodes.forEach(I3)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new g3)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new wy),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=jy(o)&&!T$(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let h,d=0;const p=()=>this.root.updateBlockedByResize=!1;we.read(()=>{d=window.innerWidth}),t(o,()=>{const g=window.innerWidth;g!==d&&(d=g,this.root.updateBlockedByResize=!0,h&&h(),h=y3(p,250),Qu.hasAnimatedSinceResize&&(Qu.hasAnimatedSinceResize=!1,this.nodes.forEach(zE)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:d,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||c.getDefaultTransition()||D3,{onLayoutAnimationStart:I,onLayoutAnimationComplete:P}=c.getProps(),w=!this.targetLayout||!VP(this.targetLayout,g),_=!d&&p;if(this.options.layoutRoot||this.resumeFrom||_||d&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...Ny(y,"layout"),onPlay:I,onComplete:P};(c.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(h,_)}else d||zE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ci(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(R3),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&MP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($E);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(BE);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(A3),this.nodes.forEach(E3),this.nodes.forEach(T3)):this.nodes.forEach(BE),this.clearAllSnapshots();const a=Pt.now();rt.delta=Wn(0,1e3/60,a-rt.timestamp),rt.timestamp=a,rt.isProcessing=!0,sf.update.process(rt),sf.preRender.process(rt),sf.render.process(rt),rt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,My.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(x3),this.sharedNodes.forEach(k3)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,we.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){we.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ct(this.snapshot.measuredBox.x)&&!Ct(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=We(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!DP(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||Pi(this.latestValues)||h)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),V3(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return We();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(L3))){const{scroll:h}=this.root;h&&(bs(a.x,h.offset.x),bs(a.y,h.offset.y))}return a}removeElementScroll(o){var l;const a=We();if(mn(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:d,options:p}=h;h!==this.root&&d&&p.layoutScroll&&(d.wasRoot&&mn(a,o),bs(a.x,d.offset.x),bs(a.y,d.offset.y))}return a}applyTransform(o,a=!1){const l=We();mn(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Ns(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Pi(h.latestValues)&&Ns(l,h.latestValues)}return Pi(this.latestValues)&&Ns(l,this.latestValues),l}removeTransform(o){const a=We();mn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Pi(c.latestValues))continue;hm(c.latestValues)&&c.updateSnapshot();const h=We(),d=c.measurePageBox();mn(h,d),NE(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return Pi(this.latestValues)&&NE(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==rt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var g;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:d}=this.options;if(!this.layout||!(h||d))return;this.resolvedRelativeTargetAt=rt.timestamp;const p=this.getClosestProjectingParent();p&&this.linkedParentVersion!==p.layoutVersion&&!p.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(p&&p.layout?this.createRelativeTarget(p,this.layout.layoutBox,p.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=We(),this.targetWithTransforms=We()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):mn(this.target,this.layout.layoutBox),EP(this.target,this.targetDelta)):mn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?this.createRelativeTarget(p,this.target,p.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||hm(this.parent.latestValues)||wP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,a,l){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=We(),this.relativeTargetOrigin=We(),Qc(this.relativeTargetOrigin,a,l),mn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var y;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===rt.timestamp&&(l=!1),l)return;const{layout:c,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||h))return;mn(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,p=this.treeScale.y;D$(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=We());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(AE(this.prevProjectionDelta.x,this.projectionDelta.x),AE(this.prevProjectionDelta.y,this.projectionDelta.y)),Ea(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==p||!ME(this.projectionDelta.x,this.prevProjectionDelta.x)||!ME(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ks(),this.projectionDelta=ks(),this.projectionDeltaWithTransform=ks()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},d=ks();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=We(),g=l?l.source:void 0,y=this.layout?this.layout.source:void 0,I=g!==y,P=this.getStack(),w=!P||P.members.length<=1,_=!!(I&&!w&&this.options.crossfade===!0&&!this.path.some(N3));this.animationProgress=0;let E;this.mixTargetDelta=b=>{const V=b/1e3;WE(d.x,o.x,V),WE(d.y,o.y,V),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Qc(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),b3(this.relativeTarget,this.relativeTargetOrigin,p,V),E&&l3(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=We()),mn(E,this.relativeTarget)),I&&(this.animationValues=h,h3(h,c,this.latestValues,V,_,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=V},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(ci(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=we.update(()=>{Qu.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ao(0)),this.currentAnimation=p3(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(_3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&jP(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||We();const d=Ct(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const p=Ct(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}mn(a,l),Ns(a,h),Ea(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new v3),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&pf("z",o,c,this.animationValues);for(let h=0;h<ff.length;h++)pf(`rotate${ff[h]}`,o,c,this.animationValues),pf(`skew${ff[h]}`,o,c,this.animationValues);o.render();for(const h in c)o.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Gu(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Gu(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Pi(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=c.animationValues||c.latestValues;this.applyTransformsToTarget();let d=u3(this.projectionDeltaWithTransform,this.treeScale,h);l&&(d=l(h,d)),o.transform=d;const{x:p,y:g}=this.projectionDelta;o.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,c.animationValues?o.opacity=c===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=c===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const y in fm){if(h[y]===void 0)continue;const{correct:I,applyTo:P,isCSSVariable:w}=fm[y],_=d==="none"?h[y]:I(h[y],c);if(P){const E=P.length;for(let b=0;b<E;b++)o[P[b]]=_}else w?this.options.visualElement.renderState.vars[y]=_:o[y]=_}this.options.layoutId&&(o.pointerEvents=c===this?Gu(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach($E),this.root.sharedNodes.clear()}}}function E3(t){t.updateLayout()}function T3(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?kn(d=>{const p=o?e.measuredBox[d]:e.layoutBox[d],g=Ct(p);p.min=r[d].min,p.max=p.min+g}):jP(s,e.layoutBox,r)&&kn(d=>{const p=o?e.measuredBox[d]:e.layoutBox[d],g=Ct(r[d]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+g)});const a=ks();Ea(a,r,e.layoutBox);const l=ks();o?Ea(l,t.applyTransform(i,!0),e.measuredBox):Ea(l,r,e.layoutBox);const c=!DP(a);let h=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:g}=d;if(p&&g){const y=We();Qc(y,e.layoutBox,p.layoutBox);const I=We();Qc(I,r,g.layoutBox),VP(y,I)||(h=!0),d.options.layoutRoot&&(t.relativeTarget=I,t.relativeTargetOrigin=y,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function S3(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function I3(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function x3(t){t.clearSnapshot()}function $E(t){t.clearMeasurements()}function BE(t){t.isLayoutDirty=!1}function A3(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function zE(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function P3(t){t.resolveTargetDelta()}function C3(t){t.calcProjection()}function R3(t){t.resetSkewAndRotation()}function k3(t){t.removeLeadSnapshot()}function WE(t,e,n){t.translate=Pe(e.translate,0,n),t.scale=Pe(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function HE(t,e,n,r){t.min=Pe(e.min,n.min,r),t.max=Pe(e.max,n.max,r)}function b3(t,e,n,r){HE(t.x,e.x,n.x,r),HE(t.y,e.y,n.y,r)}function N3(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const D3={duration:.45,ease:[.4,0,.1,1]},qE=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),KE=qE("applewebkit/")&&!qE("chrome/")?Math.round:ln;function GE(t){t.min=KE(t.min),t.max=KE(t.max)}function V3(t){GE(t.x),GE(t.y)}function jP(t,e,n){return t==="position"||t==="preserve-aspect"&&!r3(OE(e),OE(n),.2)}function L3(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const O3=FP({attachResizeListener:(t,e)=>nl(t,"resize",e),measureScroll:()=>{var t,e;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),mf={current:void 0},UP=FP({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!mf.current){const t=new O3({});t.mount(window),t.setOptions({layoutScroll:!0}),mf.current=t}return mf.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Wy=R.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function QE(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function M3(...t){return e=>{let n=!1;const r=t.map(i=>{const s=QE(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():QE(t[i],null)}}}}function F3(...t){return R.useCallback(M3(...t),t)}class j3 extends R.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const r=n.offsetParent,i=um(r)&&r.offsetWidth||0,s=um(r)&&r.offsetHeight||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=i-o.width-o.left,o.bottom=s-o.height-o.top}return null}componentDidUpdate(){}render(){return this.props.children}}function U3({children:t,isPresent:e,anchorX:n,anchorY:r,root:i,pop:s}){var p;const o=R.useId(),a=R.useRef(null),l=R.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:c}=R.useContext(Wy),h=((p=t.props)==null?void 0:p.ref)??(t==null?void 0:t.ref),d=F3(a,h);return R.useInsertionEffect(()=>{const{width:g,height:y,top:I,left:P,right:w,bottom:_}=l.current;if(e||s===!1||!a.current||!g||!y)return;const E=n==="left"?`left: ${P}`:`right: ${w}`,b=r==="bottom"?`bottom: ${_}`:`top: ${I}`;a.current.dataset.motionPopId=o;const V=document.createElement("style");c&&(V.nonce=c);const M=i??document.head;return M.appendChild(V),V.sheet&&V.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${y}px !important;
            ${E}px !important;
            ${b}px !important;
          }
        `),()=>{M.contains(V)&&M.removeChild(V)}},[e]),k.jsx(j3,{isPresent:e,childRef:a,sizeRef:l,pop:s,children:s===!1?t:R.cloneElement(t,{ref:d})})}const $3=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,anchorY:l,root:c})=>{const h=gy(B3),d=R.useId();let p=!0,g=R.useMemo(()=>(p=!1,{id:d,initial:e,isPresent:n,custom:i,onExitComplete:y=>{h.set(y,!0);for(const I of h.values())if(!I)return;r&&r()},register:y=>(h.set(y,!1),()=>h.delete(y))}),[n,h,r]);return s&&p&&(g={...g}),R.useMemo(()=>{h.forEach((y,I)=>h.set(I,!1))},[n]),R.useEffect(()=>{!n&&!h.size&&r&&r()},[n]),t=k.jsx(U3,{pop:o==="popLayout",isPresent:n,anchorX:a,anchorY:l,root:c,children:t}),k.jsx(jh.Provider,{value:g,children:t})};function B3(){return new Map}function $P(t=!0){const e=R.useContext(jh);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=R.useId();R.useEffect(()=>{if(t)return i(s)},[t]);const o=R.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const _u=t=>t.key||"";function YE(t){const e=[];return R.Children.forEach(t,n=>{R.isValidElement(n)&&e.push(n)}),e}const z3=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",anchorY:l="top",root:c})=>{const[h,d]=$P(o),p=R.useMemo(()=>YE(t),[t]),g=o&&!h?[]:p.map(_u),y=R.useRef(!0),I=R.useRef(p),P=gy(()=>new Map),w=R.useRef(new Set),[_,E]=R.useState(p),[b,V]=R.useState(p);yA(()=>{y.current=!1,I.current=p;for(let v=0;v<b.length;v++){const S=_u(b[v]);g.includes(S)?(P.delete(S),w.current.delete(S)):P.get(S)!==!0&&P.set(S,!1)}},[b,g.length,g.join("-")]);const M=[];if(p!==_){let v=[...p];for(let S=0;S<b.length;S++){const A=b[S],N=_u(A);g.includes(N)||(v.splice(S,0,A),M.push(A))}return s==="wait"&&M.length&&(v=M),V(YE(v)),E(p),null}const{forceRender:x}=R.useContext(my);return k.jsx(k.Fragment,{children:b.map(v=>{const S=_u(v),A=o&&!h?!1:p===b||g.includes(S),N=()=>{if(w.current.has(S))return;if(w.current.add(S),P.has(S))P.set(S,!0);else return;let D=!0;P.forEach(C=>{C||(D=!1)}),D&&(x==null||x(),V(I.current),o&&(d==null||d()),r&&r())};return k.jsx($3,{isPresent:A,initial:!y.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:c,onExitComplete:A?void 0:N,anchorX:a,anchorY:l,children:v},S)})})},BP=R.createContext({strict:!1}),XE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let JE=!1;function W3(){if(JE)return;const t={};for(const e in XE)t[e]={isEnabled:n=>XE[e].some(r=>!!n[r])};yP(t),JE=!0}function zP(){return W3(),R$()}function H3(t){const e=zP();for(const n in t)e[n]={...e[n],...t[n]};yP(e)}const q3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function Yc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||q3.has(t)}let WP=t=>!Yc(t);function K3(t){typeof t=="function"&&(WP=e=>e.startsWith("on")?!Yc(e):t(e))}try{K3(require("@emotion/is-prop-valid").default)}catch{}function G3(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(WP(i)||n===!0&&Yc(i)||!e&&!Yc(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const Bh=R.createContext({});function Q3(t,e){if($h(t)){const{initial:n,animate:r}=t;return{initial:n===!1||tl(n)?n:void 0,animate:tl(r)?r:void 0}}return t.inherit!==!1?e:{}}function Y3(t){const{initial:e,animate:n}=Q3(t,R.useContext(Bh));return R.useMemo(()=>({initial:e,animate:n}),[ZE(e),ZE(n)])}function ZE(t){return Array.isArray(t)?t.join(" "):t}const Hy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function HP(t,e,n){for(const r in e)!wt(e[r])&&!IP(r,n)&&(t[r]=e[r])}function X3({transformTemplate:t},e){return R.useMemo(()=>{const n=Hy();return By(n,e,t),Object.assign({},n.vars,n.style)},[e])}function J3(t,e){const n=t.style||{},r={};return HP(r,n,t),Object.assign(r,X3(t,e)),r}function Z3(t,e){const n={},r=J3(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const qP=()=>({...Hy(),attrs:{}});function eB(t,e,n,r){const i=R.useMemo(()=>{const s=qP();return xP(s,e,PP(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};HP(s,t.style,t),i.style={...s,...i.style}}return i}const tB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function qy(t){return typeof t!="string"||t.includes("-")?!1:!!(tB.indexOf(t)>-1||/[A-Z]/u.test(t))}function nB(t,e,n,{latestValues:r},i,s=!1,o){const l=(o??qy(t)?eB:Z3)(e,r,i,t),c=G3(e,typeof t=="string",s),h=t!==R.Fragment?{...c,...l,ref:n}:{},{children:d}=e,p=R.useMemo(()=>wt(d)?d.get():d,[d]);return R.createElement(t,{...h,children:p})}function rB({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:iB(n,r,i,t),renderState:e()}}function iB(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=Gu(s[p]);let{initial:o,animate:a}=t;const l=$h(t),c=mP(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?a:o;if(d&&typeof d!="boolean"&&!Uh(d)){const p=Array.isArray(d)?d:[d];for(let g=0;g<p.length;g++){const y=Vy(t,p[g]);if(y){const{transitionEnd:I,transition:P,...w}=y;for(const _ in w){let E=w[_];if(Array.isArray(E)){const b=h?E.length-1:0;E=E[b]}E!==null&&(i[_]=E)}for(const _ in I)i[_]=I[_]}}}return i}const KP=t=>(e,n)=>{const r=R.useContext(Bh),i=R.useContext(jh),s=()=>rB(t,e,r,i);return n?s():gy(s)},sB=KP({scrapeMotionValuesFromProps:zy,createRenderState:Hy}),oB=KP({scrapeMotionValuesFromProps:CP,createRenderState:qP}),aB=Symbol.for("motionComponentSymbol");function lB(t,e,n){const r=R.useRef(n);R.useInsertionEffect(()=>{r.current=n});const i=R.useRef(null);return R.useCallback(s=>{var a;s&&((a=t.onMount)==null||a.call(t,s)),e&&(s?e.mount(s):e.unmount());const o=r.current;if(typeof o=="function")if(s){const l=o(s);typeof l=="function"&&(i.current=l)}else i.current?(i.current(),i.current=null):o(s);else o&&(o.current=s)},[e])}const GP=R.createContext({});function ps(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function uB(t,e,n,r,i,s){var E,b;const{visualElement:o}=R.useContext(Bh),a=R.useContext(BP),l=R.useContext(jh),c=R.useContext(Wy),h=c.reducedMotion,d=c.skipAnimations,p=R.useRef(null),g=R.useRef(!1);r=r||a.renderer,!p.current&&r&&(p.current=r(t,{visualState:e,parent:o,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:h,skipAnimations:d,isSVG:s}),g.current&&p.current&&(p.current.manuallyAnimateOnMount=!0));const y=p.current,I=R.useContext(GP);y&&!y.projection&&i&&(y.type==="html"||y.type==="svg")&&cB(p.current,n,i,I);const P=R.useRef(!1);R.useInsertionEffect(()=>{y&&P.current&&y.update(n,l)});const w=n[nP],_=R.useRef(!!w&&!((E=window.MotionHandoffIsComplete)!=null&&E.call(window,w))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,w)));return yA(()=>{g.current=!0,y&&(P.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),_.current&&y.animationState&&y.animationState.animateChanges())}),R.useEffect(()=>{y&&(!_.current&&y.animationState&&y.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var V;(V=window.MotionHandoffMarkAsComplete)==null||V.call(window,w)}),_.current=!1),y.enteringChildren=void 0)}),y}function cB(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:QP(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&ps(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:l,layoutRoot:c})}function QP(t){if(t)return t.options.allowProjection!==!1?t.projection:QP(t.parent)}function gf(t,{forwardMotionProps:e=!1,type:n}={},r,i){r&&H3(r);const s=n?n==="svg":qy(t),o=s?oB:sB;function a(c,h){let d;const p={...R.useContext(Wy),...c,layoutId:hB(c)},{isStatic:g}=p,y=Y3(c),I=o(c,g);if(!g&&gA){dB();const P=fB(p);d=P.MeasureLayout,y.visualElement=uB(t,I,p,i,P.ProjectionNode,s)}return k.jsxs(Bh.Provider,{value:y,children:[d&&y.visualElement?k.jsx(d,{visualElement:y.visualElement,...p}):null,nB(t,c,lB(I,y.visualElement,h),I,g,e,s)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const l=R.forwardRef(a);return l[aB]=t,l}function hB({layoutId:t}){const e=R.useContext(my).id;return e&&t!==void 0?e+"-"+t:t}function dB(t,e){R.useContext(BP).strict}function fB(t){const e=zP(),{drag:n,layout:r}=e;if(!n&&!r)return{};const i={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(t)||r!=null&&r.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function pB(t,e){if(typeof Proxy>"u")return gf;const n=new Map,r=(s,o)=>gf(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,gf(o,void 0,t,e)),n.get(o))})}const mB=(t,e)=>e.isSVG??qy(t)?new q$(e):new U$(e,{allowProjection:t!==R.Fragment});class gB extends vi{constructor(e){super(e),e.animationState||(e.animationState=X$(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Uh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let yB=0;class vB extends vi{constructor(){super(...arguments),this.id=yB++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const _B={animation:{Feature:gB},exit:{Feature:vB}};function xl(t){return{point:{x:t.pageX,y:t.pageY}}}const wB=t=>e=>Fy(e)&&t(e,xl(e));function Ta(t,e,n,r){return nl(t,e,wB(n),r)}const YP=({current:t})=>t?t.ownerDocument.defaultView:null,eT=(t,e)=>Math.abs(t-e);function EB(t,e){const n=eT(t.x,e.x),r=eT(t.y,e.y);return Math.sqrt(n**2+r**2)}const tT=new Set(["auto","scroll"]);class XP{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3,element:a}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=g=>{this.handleScroll(g.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=vf(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,I=EB(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!I)return;const{point:P}=g,{timestamp:w}=rt;this.history.push({...P,timestamp:w});const{onStart:_,onMove:E}=this.handlers;y||(_&&_(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=yf(y,this.transformPagePoint),we.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:I,onSessionEnd:P,resumeAnimation:w}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=vf(g.type==="pointercancel"?this.lastMoveEventInfo:yf(y,this.transformPagePoint),this.history);this.startEvent&&I&&I(g,_),P&&P(g,_)},!Fy(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=xl(e),c=yf(l,this.transformPagePoint),{point:h}=c,{timestamp:d}=rt;this.history=[{...h,timestamp:d}];const{onSessionStart:p}=n;p&&p(e,vf(c,this.history)),this.removeListeners=Tl(Ta(this.contextWindow,"pointermove",this.handlePointerMove),Ta(this.contextWindow,"pointerup",this.handlePointerUp),Ta(this.contextWindow,"pointercancel",this.handlePointerUp)),a&&this.startScrollTracking(a)}startScrollTracking(e){let n=e.parentElement;for(;n;){const r=getComputedStyle(n);(tT.has(r.overflowX)||tT.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const r=e===window,i=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},s={x:i.x-n.x,y:i.y-n.y};s.x===0&&s.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=s.x,this.lastMoveEventInfo.point.y+=s.y):this.history.length>0&&(this.history[0].x-=s.x,this.history[0].y-=s.y),this.scrollPositions.set(e,i),we.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),ci(this.updatePoint)}}function yf(t,e){return e?{point:e(t.point)}:t}function nT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function vf({point:t},e){return{point:t,delta:nT(t,JP(e)),offset:nT(t,TB(e)),velocity:SB(e,.1)}}function TB(t){return t[0]}function JP(t){return t[t.length-1]}function SB(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=JP(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>In(e)));)n--;if(!r)return{x:0,y:0};r===t[0]&&t.length>2&&i.timestamp-r.timestamp>In(e)*2&&(r=t[1]);const s=on(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function IB(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Pe(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Pe(n,t,r.max):Math.min(t,n)),t}function rT(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function xB(t,{top:e,left:n,bottom:r,right:i}){return{x:rT(t.x,n,i),y:rT(t.y,e,r)}}function iT(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function AB(t,e){return{x:iT(t.x,e.x),y:iT(t.y,e.y)}}function PB(t,e){let n=.5;const r=Ct(t),i=Ct(e);return i>r?n=Ja(e.min,e.max-r,t.min):r>i&&(n=Ja(t.min,t.max-i,e.min)),Wn(0,1,n)}function CB(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const pm=.35;function RB(t=pm){return t===!1?t=0:t===!0&&(t=pm),{x:sT(t,"left","right"),y:sT(t,"top","bottom")}}function sT(t,e,n){return{min:oT(t,e),max:oT(t,n)}}function oT(t,e){return typeof t=="number"?t:t[e]||0}const kB=new WeakMap;class bB{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=We(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=d=>{n&&this.snapToCursor(xl(d).point),this.stopAnimation()},o=(d,p)=>{const{drag:g,dragPropagation:y,onDragStart:I}=this.getProps();if(g&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=s$(g),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),kn(w=>{let _=this.getAxisMotionValue(w).get()||0;if($n.test(_)){const{projection:E}=this.visualElement;if(E&&E.layout){const b=E.layout.layoutBox[w];b&&(_=Ct(b)*(parseFloat(_)/100))}}this.originPoint[w]=_}),I&&we.update(()=>I(d,p),!1,!0),om(this.visualElement,"transform");const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},a=(d,p)=>{this.latestPointerEvent=d,this.latestPanInfo=p;const{dragPropagation:g,dragDirectionLock:y,onDirectionLock:I,onDrag:P}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:w}=p;if(y&&this.currentDirection===null){this.currentDirection=DB(w),this.currentDirection!==null&&I&&I(this.currentDirection);return}this.updateAxis("x",p.point,w),this.updateAxis("y",p.point,w),this.visualElement.render(),P&&we.update(()=>P(d,p),!1,!0)},l=(d,p)=>{this.latestPointerEvent=d,this.latestPanInfo=p,this.stop(d,p),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>{const{dragSnapToOrigin:d}=this.getProps();(d||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:h}=this.getProps();this.panSession=new XP(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:YP(this.visualElement),element:this.visualElement.current})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&we.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!wu(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=IB(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&ps(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=xB(r.layoutBox,e):this.constraints=!1,this.elastic=RB(n),i!==this.constraints&&!ps(e)&&r&&this.constraints&&!this.hasMutatedConstraints&&kn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=CB(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ps(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=V$(r,i.root,this.visualElement.getTransformPagePoint());let o=AB(i.layout.layoutBox,s);if(n){const a=n(b$(o));this.hasMutatedConstraints=!!a,a&&(o=_P(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=kn(h=>{if(!wu(h,n,this.currentDirection))return;let d=l&&l[h]||{};o&&(d={min:0,max:0});const p=i?200:1e6,g=i?40:1e7,y={type:"inertia",velocity:r?e[h]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(h,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return om(this.visualElement,e),r.start(Dy(e,r,0,n,this.visualElement,!1))}stopAnimation(){kn(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){kn(n=>{const{drag:r}=this.getProps();if(!wu(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n],l=s.get()||0;s.set(e[n]-Pe(o,a,.5)+l)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ps(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};kn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=PB({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),kn(o=>{if(!wu(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Pe(l,c,i[o]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;kB.set(this.visualElement,this);const e=this.visualElement.current,n=Ta(e,"pointerdown",c=>{const{drag:h,dragListener:d=!0}=this.getProps(),p=c.target,g=p!==e&&h$(p);h&&d&&!g&&this.start(c)});let r;const i=()=>{const{dragConstraints:c}=this.getProps();ps(c)&&c.current&&(this.constraints=this.resolveRefConstraints(),r||(r=NB(e,c.current,()=>this.scalePositionWithinConstraints())))},{projection:s}=this.visualElement,o=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),we.read(i);const a=nl(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:h})=>{this.isDragging&&h&&(kn(d=>{const p=this.getAxisMotionValue(d);p&&(this.originPoint[d]+=c[d].translate,p.set(p.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),l&&l(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=pm,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function aT(t){let e=!0;return()=>{if(e){e=!1;return}t()}}function NB(t,e,n){const r=pE(t,aT(n)),i=pE(e,aT(n));return()=>{r(),i()}}function wu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function DB(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class VB extends vi{constructor(e){super(e),this.removeGroupControls=ln,this.removeListeners=ln,this.controls=new bB(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ln}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const _f=t=>(e,n)=>{t&&we.update(()=>t(e,n),!1,!0)};class LB extends vi{constructor(){super(...arguments),this.removePointerDownListener=ln}onPointerDown(e){this.session=new XP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:YP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:_f(e),onStart:_f(n),onMove:_f(r),onEnd:(s,o)=>{delete this.session,i&&we.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Ta(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let wf=!1;class OB extends R.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),wf&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Qu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,e.layoutDependency!==n&&o.setOptions({...o.options,layoutDependency:n}),wf=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||we.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),My.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;wf=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ZP(t){const[e,n]=$P(),r=R.useContext(my);return k.jsx(OB,{...t,layoutGroup:r,switchLayoutGroup:R.useContext(GP),isPresent:e,safeToRemove:n})}const MB={pan:{Feature:LB},drag:{Feature:VB,ProjectionNode:UP,MeasureLayout:ZP}};function lT(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&we.postRender(()=>s(e,xl(e)))}class FB extends vi{mount(){const{current:e}=this.node;e&&(this.unmount=a$(e,(n,r)=>(lT(this.node,r,"Start"),i=>lT(this.node,i,"End"))))}unmount(){}}class jB extends vi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Tl(nl(this.node.current,"focus",()=>this.onFocus()),nl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function uT(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&we.postRender(()=>s(e,xl(e)))}class UB extends vi{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:n,propagate:r}=this.node.props;this.unmount=f$(e,(i,s)=>(uT(this.node,s,"Start"),(o,{success:a})=>uT(this.node,o,a?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:(r==null?void 0:r.tap)===!1})}unmount(){}}const mm=new WeakMap,Ef=new WeakMap,$B=t=>{const e=mm.get(t.target);e&&e(t)},BB=t=>{t.forEach($B)};function zB({root:t,...e}){const n=t||document;Ef.has(n)||Ef.set(n,{});const r=Ef.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(BB,{root:t,...e})),r[i]}function WB(t,e,n){const r=zB(e);return mm.set(t,n),r.observe(t),()=>{mm.delete(t),r.unobserve(t)}}const HB={some:0,all:1};class qB extends vi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:HB[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),p=c?h:d;p&&p(l)};return WB(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(KB(e,n))&&this.startObserver()}unmount(){}}function KB({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const GB={inView:{Feature:qB},tap:{Feature:UB},focus:{Feature:jB},hover:{Feature:FB}},QB={layout:{ProjectionNode:UP,MeasureLayout:ZP}},YB={..._B,...GB,...MB,...QB},XB=pB(YB,mB),JB=R.lazy(()=>Pn(()=>import("./Home-Ozvr1TYd.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),cT=R.lazy(()=>Pn(()=>import("./Classroom-Dn7YxA1A.js"),__vite__mapDeps([9,10,11,2,12,13,14,15,16,4,17,18]))),ZB=R.lazy(()=>Pn(()=>import("./Chat-DDgXO9DH.js"),__vite__mapDeps([19,3,17,20,21,12,14]))),e5=R.lazy(()=>Pn(()=>import("./TeacherDashboard-WQ1JUI-V.js"),__vite__mapDeps([22,10,11,5,15,23,6,2,20,24,12]))),t5=R.lazy(()=>Pn(()=>import("./StudentDashboard-DXAR7xD-.js"),__vite__mapDeps([25,23,6,2,26,7,11,20,12,8]))),n5=R.lazy(()=>Pn(()=>import("./Wallet-C8PqvU3Q.js"),__vite__mapDeps([27,17,1,15,14,16,12,28,26]))),r5=R.lazy(()=>Pn(()=>import("./UserProfile-DWTiAAQ1.js"),[])),i5=R.lazy(()=>Pn(()=>import("./Onboarding-C7C0_TGh.js"),__vite__mapDeps([29,8,2,17,4,30]))),s5=R.lazy(()=>Pn(()=>import("./AdminDashboard-BHujxIPd.js"),__vite__mapDeps([31,21,2,28,4,24,5,30,20,13]))),o5=R.lazy(()=>Pn(()=>import("./LichessCallback-DPryqb31.js"),__vite__mapDeps([32,10]))),a5=R.lazy(()=>Pn(()=>import("./ClubOffice-BBYrgzPw.js"),__vite__mapDeps([33,5]))),eC=Ui.createContext(void 0),l5=({children:t})=>{const[e,n]=R.useState(null),[r,i]=R.useState(null),[s,o]=R.useState(!0),[a,l]=R.useState(null);Ui.useEffect(()=>{const g=DM(zu,async y=>{if(l(null),y){i(y);try{const I=await Xi.getUser(y.uid);I?n(I.role):(console.warn("User exists in Auth but not in Firestore"),n(null))}catch(I){console.error("Error syncing user profile:",I),l("Error de conexin al cargar tu perfil. Revisa tu internet.")}}else i(null),n(null);o(!1)});return()=>g()},[]);const c=async()=>{try{const g=new tr;await ZM(zu,g)}catch(g){console.error("Login failed",g),p0.error("Error al iniciar sesin")}},h=async()=>{try{r&&await Xi.updateUserPresence(r.uid,"offline"),await VM(zu),n(null),i(null),l(null),p0.success("Sesin cerrada")}catch(g){console.error("Logout failed",g)}},d=r?r.uid:"",p=!!r;return s?k.jsx(Ky,{}):k.jsx(eC.Provider,{value:{userRole:e,setUserRole:n,currentUserId:d,isAuthenticated:p,currentUser:r,loginWithGoogle:c,logout:h,loading:s,authError:a},children:t})},Al=()=>{const t=Ui.useContext(eC);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},Rr=({children:t})=>{const{isAuthenticated:e}=Al();return e?t:k.jsx(FI,{to:"/"})},u5=({children:t})=>{const{currentUser:e}=Al(),[n,r]=R.useState(null);return Ui.useEffect(()=>{(async()=>{if(e){const s=await Xi.isAdmin(e.uid);r(s)}else r(!1)})()},[e]),n===null?k.jsx(Ky,{}):n?t:k.jsx(FI,{to:"/"})},Ky=()=>k.jsx("div",{className:"flex items-center justify-center min-h-screen bg-[#161512] text-gold",children:k.jsx("div",{className:"w-12 h-12 border-4 border-gold/30 border-t-gold rounded-full animate-spin"})}),c5=({message:t})=>k.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-[#161512] text-center px-6",children:[k.jsx("div",{className:"text-red-500 mb-4 animate-pulse",children:k.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[k.jsx("circle",{cx:"12",cy:"12",r:"10"}),k.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),k.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})}),k.jsx("h1",{className:"text-xl font-bold text-white mb-2",children:"Error de conexin"}),k.jsx("p",{className:"text-white/50 mb-6 max-w-sm",children:t}),k.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-gold text-black font-bold rounded-xl hover:bg-white transition-all uppercase tracking-widest text-xs",children:"Reintentar"})]}),h5=()=>{const t=po();return k.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center px-6",children:[k.jsx("div",{className:"text-8xl font-black text-gold/20 mb-4",children:"404"}),k.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Pgina no encontrada"}),k.jsx("p",{className:"text-white/40 mb-8 max-w-sm",children:"La pgina que buscas no existe o ha sido movida."}),k.jsx("button",{onClick:()=>t("/"),className:"px-6 py-3 bg-gold text-black font-black rounded-xl hover:bg-white transition-all",children:"Volver al inicio"})]})},qt=({children:t})=>k.jsx(XB.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:t}),d5=()=>{const t=Hn(),{isAuthenticated:e,userRole:n,loading:r,authError:i,currentUser:s}=Al(),o=po();return Ui.useEffect(()=>{if(!s)return;const a=t.pathname.startsWith("/classroom")||t.pathname.startsWith("/room"),l=d=>{Xi.updateUserPresence(s.uid,d).catch(console.error)};a||l("online");const c=()=>{a||(document.visibilityState==="visible"?l("online"):l("offline"))},h=()=>{l("offline")};return document.addEventListener("visibilitychange",c),window.addEventListener("beforeunload",h),()=>{document.removeEventListener("visibilitychange",c),window.removeEventListener("beforeunload",h)}},[s,t.pathname]),Ui.useEffect(()=>{!r&&!i&&(e?n===null&&t.pathname!=="/onboarding"?o("/onboarding"):n!==null&&t.pathname==="/onboarding"&&o(n==="teacher"?"/dashboard":"/student-dashboard"):t.pathname==="/onboarding"&&o("/"))},[r,e,n,t.pathname,o,i]),i?k.jsx(c5,{message:i}):k.jsx(z3,{mode:"wait",children:k.jsxs(iN,{location:t,children:[k.jsx(Dt,{path:"/",element:k.jsx(qt,{children:k.jsx(JB,{})})}),k.jsx(Dt,{path:"/onboarding",element:k.jsx(qt,{children:k.jsx(i5,{})})}),k.jsx(Dt,{path:"/chat/:teacherId",element:k.jsx(Rr,{children:k.jsx(qt,{children:k.jsx(ZB,{})})})}),k.jsx(Dt,{path:"/room/:teacherId",element:k.jsx(Rr,{children:k.jsx(qt,{children:k.jsx(cT,{})})})}),k.jsx(Dt,{path:"/classroom/:teacherId",element:k.jsx(Rr,{children:k.jsx(qt,{children:k.jsx(cT,{})})})}),k.jsx(Dt,{path:"/dashboard",element:k.jsx(Rr,{children:k.jsx(qt,{children:k.jsx(e5,{})})})}),k.jsx(Dt,{path:"/student-dashboard",element:k.jsx(Rr,{children:k.jsx(qt,{children:k.jsx(t5,{})})})}),k.jsx(Dt,{path:"/wallet",element:k.jsx(Rr,{children:k.jsx(qt,{children:k.jsx(n5,{})})})}),k.jsx(Dt,{path:"/profile",element:k.jsx(Rr,{children:k.jsx(qt,{children:k.jsx(r5,{})})})}),k.jsx(Dt,{path:"/office",element:k.jsx(Rr,{children:k.jsx(qt,{children:k.jsx(a5,{})})})}),k.jsx(Dt,{path:"/admin",element:k.jsx(u5,{children:k.jsx(qt,{children:k.jsx(s5,{})})})}),k.jsx(Dt,{path:"/lichess-callback",element:k.jsx(qt,{children:k.jsx(o5,{})})}),k.jsx(Dt,{path:"*",element:k.jsx(qt,{children:k.jsx(h5,{})})})]},t.pathname)})},f5=({children:t})=>{const e=Hn(),n=e.pathname.includes("/classroom/")||e.pathname.includes("/room/");return k.jsxs("div",{className:"min-h-screen bg-[#161512] text-[#bababa] font-sans",children:[!n&&k.jsx(tU,{}),k.jsx(rD,{position:"top-center",toastOptions:{style:{background:"#1b1a17",color:"#fff",border:"1px solid rgba(212, 175, 55, 0.2)"},success:{iconTheme:{primary:"#D4AF37",secondary:"#1b1a17"}},error:{iconTheme:{primary:"#ef4444",secondary:"#1b1a17"}}}}),k.jsx("main",{className:n?"":"pt-16",children:t})]})};function p5(){return k.jsx(dN,{basename:"/TopChess",future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:k.jsx(l5,{children:k.jsx(f5,{children:k.jsx(nU,{children:k.jsx(R.Suspense,{fallback:k.jsx(Ky,{}),children:k.jsx(d5,{})})})})})})}const{slice:m5,forEach:g5}=[];function y5(t){return g5.call(m5.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}function v5(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(t))}const hT=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,_5=function(t,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(e);let s=`${t}=${i}`;if(r.maxAge>0){const o=r.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(o)}`}if(r.domain){if(!hT.test(r.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${r.domain}`}if(r.path){if(!hT.test(r.path))throw new TypeError("option path is invalid");s+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(s+="; Partitioned"),s},dT={create(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+n*60*1e3)),r&&(i.domain=r),document.cookie=_5(t,e,i)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let i=n[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(t,e){this.create(t,"",-1,e)}};var w5={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return dT.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:r,cookieDomain:i,cookieOptions:s}=e;n&&typeof document<"u"&&dT.create(n,t,r,i,s)}},E5={name:"querystring",lookup(t){var r;let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const o=i.substring(1).split("&");for(let a=0;a<o.length;a++){const l=o[a].indexOf("=");l>0&&o[a].substring(0,l)===e&&(n=o[a].substring(l+1))}}return n}},T5={name:"hash",lookup(t){var i;let{lookupHash:e,lookupFromHashIndex:n}=t,r;if(typeof window<"u"){const{hash:s}=window.location;if(s&&s.length>2){const o=s.substring(1);if(e){const a=o.split("&");for(let l=0;l<a.length;l++){const c=a[l].indexOf("=");c>0&&a[l].substring(0,c)===e&&(r=a[l].substring(c+1))}}if(r)return r;if(!r&&n>-1){const a=s.match(/\/([a-zA-Z-]*)/g);return Array.isArray(a)?(i=a[typeof n=="number"?n:0])==null?void 0:i.replace("/",""):void 0}}}return r}};let cs=null;const fT=()=>{if(cs!==null)return cs;try{if(cs=typeof window<"u"&&window.localStorage!==null,!cs)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{cs=!1}return cs};var S5={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&fT())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&fT()&&window.localStorage.setItem(n,t)}};let hs=null;const pT=()=>{if(hs!==null)return hs;try{if(hs=typeof window<"u"&&window.sessionStorage!==null,!hs)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{hs=!1}return hs};var I5={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&pT())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&pT()&&window.sessionStorage.setItem(n,t)}},x5={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:i}=navigator;if(n)for(let s=0;s<n.length;s++)e.push(n[s]);r&&e.push(r),i&&e.push(i)}return e.length>0?e:void 0}},A5={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},P5={name:"path",lookup(t){var i;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(i=n[typeof e=="number"?e:0])==null?void 0:i.replace("/",""):void 0}},C5={name:"subdomain",lookup(t){var i,s;let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,r=typeof window<"u"&&((s=(i=window.location)==null?void 0:i.hostname)==null?void 0:s.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};let tC=!1;try{document.cookie,tC=!0}catch{}const nC=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];tC||nC.splice(1,1);const R5=()=>({order:nC,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class rC{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=y5(n,this.options||{},R5()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(w5),this.addDetector(E5),this.addDetector(S5),this.addDetector(I5),this.addDetector(x5),this.addDetector(A5),this.addDetector(P5),this.addDetector(C5),this.addDetector(T5)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return e.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(n=n.concat(i))}}),n=n.filter(r=>r!=null&&!v5(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}rC.type="languageDetector";const k5={title:"TopChess",tagline:"Domina el Ajedrez"},b5={home:"Inicio",login:"Iniciar Sesin",test_student:"Test Alumno",test_teacher:"Test Profesor",panel:"Mi Panel",admin:"Admin",profile:"Mi Perfil",logout:"Cerrar Sesin"},N5={badge:"La Plataforma Premium de Ajedrez",title:"Domina el Tablero",subtitle:"Sin Lmites",description:"Conecta con Grandes Maestros, accede a clases en vivo y mejora tu juego con herramientas de anlisis de ltima generacin.",cta_find:"Encontrar Mentor",cta_start:"Empezar Ahora",cta_teach:"Soy Profesor",cta_dashboard:"Mi Panel"},D5={students:"Estudiantes",teachers:"Maestros",support:"Soporte",rating:"Valoracin"},V5={title:"Todo lo que necesitas",subtitle:"Herramientas profesionales para estudiantes y maestros.",classroom:{title:"Aula Virtual Avanzada",desc:"Tablero interactivo sincronizado en tiempo real, chat de voz/video y herramientas de dibujo."},analysis:{title:"Anlisis con IA",desc:"Identifica tus errores al instante con Stockfish 16 y recibe sugerencias de mejora."},payments:{title:"Pagos Globales",desc:"Gestiona tus cobros y pagos de forma segura desde cualquier parte del mundo."},community:{title:"Comunidad Activa",desc:"Participa en torneos, nete a clubes y conecta con otros apasionados del ajedrez."},cert:{title:"Certificacin",desc:"Obtn certificados de nivel al completar cursos y alcanzar metas de ELO."},verified:{title:"Profesores Verificados",desc:"Todos nuestros maestros pasan por un riguroso proceso de verificacin de identidad y nivel."}},L5={title:"Listo para llevar tu ajedrez al",highlight:"siguiente nivel",button:"Comenzar Ahora"},O5={back:"Volver al inicio",analyzing:"Analizando tu perfil...",searching:"Buscando el mejor mentor para tu estilo de juego.",match_title:"Match Perfecto!",match_desc:"Basado en tus objetivos, te recomendamos a:",back_btn:"Volver",connect_btn:"Conectar",login_toast:"Iniciando sesin..."},M5={login_required:"Debes iniciar sesin para encontrar un mentor"},F5={app:k5,nav:b5,hero:N5,stats:D5,features:V5,cta_footer:L5,wizard:O5,toasts:M5},j5={title:"TopChess",tagline:"Master Chess"},U5={home:"Home",login:"Login",test_student:"Test Student",test_teacher:"Test Teacher",panel:"Dashboard",admin:"Admin",profile:"Profile",logout:"Logout"},$5={badge:"The Premium Chess Platform",title:"Master the Board",subtitle:"No Limits",description:"Connect with Grandmasters, access live classes, and improve your game with next-gen analysis tools.",cta_find:"Find Mentor",cta_start:"Start Now",cta_teach:"I'm a Teacher",cta_dashboard:"Dashboard"},B5={students:"Students",teachers:"Masters",support:"Support",rating:"Rating"},z5={title:"Everything you need",subtitle:"Professional tools for students and masters.",classroom:{title:"Advanced Virtual Classroom",desc:"Real-time synchronized interactive board, voice/video chat, and drawing tools."},analysis:{title:"AI Analysis",desc:"Identify mistakes instantly with Stockfish 16 and get improvement suggestions."},payments:{title:"Global Payments",desc:"Manage payments securely from anywhere in the world."},community:{title:"Active Community",desc:"Join tournaments, clubs, and connect with other chess enthusiasts."},cert:{title:"Certification",desc:"Get level certificates by completing courses and reaching ELO goals."},verified:{title:"Verified Teachers",desc:"All our masters undergo a rigorous identity and skill verification process."}},W5={title:"Ready to take your chess to the",highlight:"next level",button:"Start Now"},H5={back:"Back to Home",analyzing:"Analyzing your profile...",searching:"Searching for the best mentor for your playstyle.",match_title:"Perfect Match!",match_desc:"Based on your goals, we recommend:",back_btn:"Back",connect_btn:"Connect",login_toast:"Logging in..."},q5={login_required:"You must login to find a mentor"},K5={app:j5,nav:U5,hero:$5,stats:B5,features:z5,cta_footer:W5,wizard:H5,toasts:q5};Nt.use(rC).use(Fj).init({resources:{es:{translation:F5},en:{translation:K5}},lng:"es",fallbackLng:"es",interpolation:{escapeValue:!1}});CI(document.getElementById("root")).render(k.jsx(R.StrictMode,{children:k.jsx(p5,{})}));export{z3 as A,XF as B,JF as C,kw as G,oA as L,nj as M,Ui as R,sj as S,Ps as U,oj as X,Pn as _,Al as a,mA as b,$t as c,Kw as d,tj as e,Xi as f,FC as g,Q5 as h,bn as i,k as j,YF as k,PI as l,XB as m,eR as n,Y5 as o,eC as p,n9 as q,R as r,Yj as s,po as u,p0 as z};
