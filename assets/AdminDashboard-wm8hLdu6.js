import{c as m,a as M,u as V,b as E,r as i,j as e,f as d,z as x}from"./index-CzjBIZCx.js";import{U as j}from"./users-DujPExDD.js";import{G as f}from"./graduation-cap-6Q3ufDrZ.js";import{C as R}from"./calendar-CH8C-o6h.js";import{D as N}from"./dollar-sign-CqN4gAYW.js";import{C as H}from"./circle-check-big-BDazfSH4.js";import{a as G,A as I}from"./arrow-up-right-CCwhJMj3.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=m("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=m("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=m("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=m("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=m("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),te=()=>{const{currentUser:l}=M(),n=V(),{t:a}=E(),[r,b]=i.useState({users:0,teachers:0,requests:0,revenue:0}),[y,k]=i.useState([]),[C,_]=i.useState([]),[z,S]=i.useState([]),[T,D]=i.useState(!0),[h,A]=i.useState(""),[t,g]=i.useState("users"),u=async()=>{try{const[s,c,o,w]=await Promise.all([d.getPlatformStats(),d.getAllUsers(),d.getAllTeachers(),d.getAllTransactions()]);b(s),k(c),_(o),S(w.sort((U,B)=>B.timestamp-U.timestamp))}catch(s){console.error("Error fetching admin data:",s),x.error(a("admin.messages.load_error"))}finally{D(!1)}};i.useEffect(()=>{if((l==null?void 0:l.email)!=="andreslgumuzio@gmail.com"){n("/");return}u()},[l,n]);const L=async(s,c)=>{try{await d.verifyTeacher(s,!c),x.success(a(c?"admin.messages.verif_removed":"admin.messages.verif_added")),u()}catch{x.error(a("admin.messages.verif_error"))}},q=async(s,c)=>{const o=c==="banned";try{await d.banUser(s,!o),x.success(a(o?"admin.messages.user_unbanned":"admin.messages.user_banned")),u()}catch{x.error(a("admin.messages.status_error"))}},$=y.filter(s=>s.name.toLowerCase().includes(h.toLowerCase())||s.email.toLowerCase().includes(h.toLowerCase())),F=C.filter(s=>s.name.toLowerCase().includes(h.toLowerCase()));return T?e.jsx("div",{className:"min-h-screen bg-[#161512] flex items-center justify-center text-gold font-bold uppercase tracking-widest text-xs animate-pulse",children:a("admin.loading")}):e.jsx("div",{className:"min-h-screen bg-[#161512] text-white p-4 md:p-8 font-sans",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-black flex items-center gap-3 tracking-tighter",children:[e.jsx(K,{className:"text-gold h-10 w-10 drop-shadow-[0_0_10px_rgba(212,175,55,0.3)]"}),a("admin.title")]}),e.jsx("p",{className:"text-[#8b8982] text-sm uppercase tracking-widest font-bold opacity-60",children:a("admin.subtitle")})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"bg-[#262421] px-4 py-2 rounded-xl border border-[#302e2b] flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse shadow-[0_0_8px_#22c55e]"}),e.jsx("span",{className:"text-xs font-mono text-[#8b8982]",children:a("admin.status_online")})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(p,{icon:j,label:a("admin.stats.users"),value:r.users,color:"blue"}),e.jsx(p,{icon:f,label:a("admin.stats.teachers"),value:r.teachers,color:"gold"}),e.jsx(p,{icon:R,label:a("admin.stats.requests"),value:r.requests,color:"purple"}),e.jsx(p,{icon:N,label:a("admin.stats.revenue"),value:`${r.revenue.toFixed(2)}€`,color:"green"})]}),e.jsxs("div",{className:"flex p-1 bg-[#262421] rounded-2xl border border-[#302e2b] w-fit mx-auto md:mx-0",children:[e.jsx(v,{active:t==="users",onClick:()=>g("users"),icon:j,label:a("admin.tabs.users")}),e.jsx(v,{active:t==="teachers",onClick:()=>g("teachers"),icon:f,label:a("admin.tabs.teachers")}),e.jsx(v,{active:t==="payments",onClick:()=>g("payments"),icon:Z,label:a("admin.tabs.transactions")})]}),e.jsxs("div",{className:"glass-panel rounded-2xl overflow-hidden border border-white/5 shadow-2xl animate-fade-in",children:[e.jsxs("div",{className:"p-6 border-b border-[#302e2b] flex flex-col md:flex-row justify-between items-center gap-4 bg-white/5",children:[e.jsxs("h2",{className:"text-xl font-bold uppercase tracking-tight flex items-center gap-2",children:[t==="users"&&e.jsxs(e.Fragment,{children:[e.jsx(j,{size:20,className:"text-blue-400"})," ",a("admin.titles.users")]}),t==="teachers"&&e.jsxs(e.Fragment,{children:[e.jsx(f,{size:20,className:"text-gold"})," ",a("admin.titles.teachers")]}),t==="payments"&&e.jsxs(e.Fragment,{children:[e.jsx(N,{size:20,className:"text-green-400"})," ",a("admin.titles.payments")]})]}),e.jsxs("div",{className:"relative w-full md:w-80",children:[e.jsx(J,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[#666]",size:16}),e.jsx("input",{type:"text",placeholder:a("admin.filter"),className:"w-full bg-[#161512] border border-[#302e2b] rounded-xl pl-10 pr-4 py-2.5 text-sm focus:outline-none focus:border-gold/50 transition-all placeholder:text-[#444]",value:h,onChange:s=>A(s.target.value)})]})]}),e.jsxs("div",{className:"overflow-x-auto min-h-[400px]",children:[t==="users"&&e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-[#262421] text-[#8b8982] text-[10px] uppercase font-black tracking-widest",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:a("admin.table.identity")}),e.jsx("th",{className:"p-4",children:a("admin.table.role")}),e.jsx("th",{className:"p-4",children:a("admin.table.wallet")}),e.jsx("th",{className:"p-4",children:a("admin.table.status")}),e.jsx("th",{className:"p-4 text-right",children:a("admin.table.maintenance")})]})}),e.jsx("tbody",{className:"divide-y divide-[#302e2b]",children:$.map(s=>e.jsxs("tr",{className:"hover:bg-white/5 transition-colors group",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.photoURL||`https://ui-avatars.com/api/?name=${s.name}&background=random`,alt:"",className:"w-8 h-8 rounded-lg object-cover ring-1 ring-white/10"}),s.status==="banned"&&e.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 rounded-full p-0.5 border border-dark-bg",children:e.jsx(O,{size:8,className:"text-white"})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-sm tracking-tight",children:s.name}),e.jsx("span",{className:"text-[10px] text-[#666] font-mono",children:s.email})]})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`text-[10px] font-black uppercase px-2 py-0.5 rounded-full border ${s.role==="teacher"?"bg-gold/10 text-gold border-gold/20":"bg-blue-500/10 text-blue-400 border-blue-500/20"}`,children:s.role})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-1 text-xs font-mono text-green-400/80",children:[e.jsx(N,{size:10}),s.walletBalance||0]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`text-[10px] font-bold ${s.status==="banned"?"text-red-500":"text-green-500"}`,children:s.status==="banned"?a("admin.status.banned"):a("admin.status.active")})}),e.jsx("td",{className:"p-4 text-right",children:e.jsx("button",{onClick:()=>q(s.id,s.status||"active"),className:`p-2 rounded-lg transition-all ${s.status==="banned"?"bg-green-500/10 text-green-500 hover:bg-green-500/20":"bg-red-500/10 text-red-500 hover:bg-red-500/20"}`,title:s.status==="banned"?"Desbloquear":"Bloquear",children:e.jsx(P,{size:16})})})]},s.id))})]}),t==="teachers"&&e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-[#262421] text-[#8b8982] text-[10px] uppercase font-black tracking-widest",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:a("admin.table.teacher")}),e.jsx("th",{className:"p-4",children:a("admin.table.region")}),e.jsx("th",{className:"p-4",children:a("admin.table.price_com")}),e.jsx("th",{className:"p-4",children:a("admin.table.classes_earnings")}),e.jsx("th",{className:"p-4 text-right",children:a("admin.table.verification")})]})}),e.jsx("tbody",{className:"divide-y divide-[#302e2b]",children:F.map(s=>e.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:s.image,className:"w-8 h-8 rounded-lg object-cover grayscale group-hover:grayscale-0 transition-all border border-white/5",alt:""}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold text-sm",children:s.name}),s.isVerified&&e.jsx(H,{size:12,className:"text-gold"})]}),e.jsx("span",{className:"text-[10px] text-gold/80 font-mono italic",children:s.teachingStyle})]})]})}),e.jsx("td",{className:"p-4 text-xs font-bold text-[#8b8982]",children:s.region}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-xs font-bold",children:[s.price,s.currency==="EUR"?"€":"$"]}),e.jsxs("span",{className:"text-[10px] text-[#666]",children:["Fee: ",s.commissionRate*100,"%"]})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-xs font-bold",children:[s.classesGiven," Clases"]}),e.jsxs("span",{className:"text-[10px] text-green-400/80",children:[s.earnings.toFixed(0)," Total"]})]})}),e.jsx("td",{className:"p-4 text-right",children:e.jsx("button",{onClick:()=>L(s.id,s.isVerified||!1),className:`px-3 py-1.5 rounded-lg text-[10px] font-black tracking-widest uppercase transition-all border ${s.isVerified?"bg-gold text-black border-gold shadow-[0_0_10px_rgba(212,175,55,0.2)]":"bg-white/5 text-white/40 border-white/10 hover:border-gold/50 hover:text-gold"}`,children:s.isVerified?a("admin.status.verified"):a("admin.status.pending")})})]},s.id))})]}),t==="payments"&&e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-[#262421] text-[#8b8982] text-[10px] uppercase font-black tracking-widest",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:a("admin.table.type")}),e.jsx("th",{className:"p-4",children:a("admin.table.concept")}),e.jsx("th",{className:"p-4",children:a("admin.table.amount")}),e.jsx("th",{className:"p-4",children:a("admin.table.date_time")}),e.jsx("th",{className:"p-4",children:a("admin.table.participants")})]})}),e.jsx("tbody",{className:"divide-y divide-[#302e2b]",children:z.map(s=>e.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[e.jsx("td",{className:"p-4",children:s.type==="deposit"?e.jsx("div",{className:"p-2 bg-blue-500/10 text-blue-400 rounded-lg w-fit",children:e.jsx(G,{size:16})}):e.jsx("div",{className:"p-2 bg-green-500/10 text-green-400 rounded-lg w-fit",children:e.jsx(I,{size:16})})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"text-xs font-bold tracking-tight",children:s.description})}),e.jsx("td",{className:"p-4",children:e.jsxs("span",{className:`font-mono text-sm font-bold ${s.description.includes("Comisión")?"text-gold":"text-white"}`,children:[s.amount>0?"+":"",s.amount.toFixed(2),"€"]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col text-[10px] text-[#666]",children:[e.jsx("span",{className:"font-bold",children:new Date(s.timestamp).toLocaleDateString()}),e.jsx("span",{children:new Date(s.timestamp).toLocaleTimeString()})]})}),e.jsxs("td",{className:"p-4 text-[10px] font-mono text-white/30 truncate max-w-[150px]",children:[s.fromId," → ",s.toId]})]},s.id))})]})]})]})]})})},p=({icon:l,label:n,value:a,color:r})=>{const b={blue:"border-blue-500 text-blue-400 bg-blue-500/5",gold:"border-gold text-gold bg-gold/5",purple:"border-purple-500 text-purple-400 bg-purple-500/5",green:"border-green-500 text-green-400 bg-green-500/5"};return e.jsxs("div",{className:`glass-panel p-6 rounded-2xl flex flex-col gap-3 border-l-4 shadow-xl transition-all hover:scale-[1.02] ${b[r]}`,children:[e.jsx(l,{size:20,className:"opacity-80"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#8b8982] text-[10px] font-black uppercase tracking-widest",children:n}),e.jsx("h3",{className:"text-2xl font-black tracking-tighter text-white",children:a})]})]})},v=({active:l,onClick:n,icon:a,label:r})=>e.jsxs("button",{onClick:n,className:`flex items-center gap-2 px-6 py-2.5 rounded-xl transition-all text-xs font-black uppercase tracking-widest ${l?"bg-gold text-black shadow-lg shadow-gold/20":"text-[#8b8982] hover:text-white hover:bg-white/5"}`,children:[e.jsx(a,{size:14}),r]});export{te as default};
