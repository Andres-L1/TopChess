import{c as T,a as B,u as L,r,j as e,L as x,z}from"./index-B6WQaXe8.js";import{m as l}from"./mockDatabase-OcQ-zC2Z.js";import{T as E,V as I,a as M,X as $,C as A}from"./Calendar-OenVPvAR.js";import{L as P}from"./log-out-C50Thaat.js";import{C as D}from"./clock-Dgu0FzOE.js";import"./check-DdymfvJm.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=T("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),W=()=>{const g=B(),{currentUserId:n,logout:j}=g,b=L(),[f,m]=r.useState(0),[h,v]=r.useState([]),[p,N]=r.useState([]),[i,d]=r.useState(null),[w,y]=r.useState([]);r.useEffect(()=>{const s=l.getWallet(n);m(s.balance);const a=l.getRequestsForStudent(n),o=a.filter(t=>t.status==="approved").map(t=>l.getTeacherById(t.teacherId)).filter(Boolean),c=a.filter(t=>t.status==="pending").map(t=>({...l.getTeacherById(t.teacherId),requestDate:t.timestamp})).filter(Boolean);v(o),N(c);const u=()=>{m(l.getWallet(n).balance)};return window.addEventListener("wallet-update",u),()=>window.removeEventListener("wallet-update",u)},[n]);const k=s=>{const a=l.getTeacherAvailability(s.id);y(a),d(s)},S=s=>{const o=`Próximo ${["Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"][s.dayIndex]}`;z.promise(new Promise(c=>setTimeout(c,1e3)),{loading:"Confirmando reserva...",success:`Clase reservada para el ${o} a las ${s.hour}`,error:"Error al reservar"}).then(()=>{i&&(l.createBooking(n,i.id,`${s.dayIndex}-${s.hour}`,"2023-11-20"),d(null))})},C=()=>{j(),b("/")};return e.jsxs("div",{className:"p-8 max-w-7xl mx-auto space-y-8 animate-fade-in pb-24",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold font-display text-white",children:["Hola, ",e.jsx("span",{className:"text-gold",children:"Estudiante"})]}),e.jsx("p",{className:"text-text-muted",children:"Continúa tu camino hacia la maestría."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"bg-dark-panel border border-white/10 rounded-xl p-3 flex items-center gap-4 shadow-lg",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] text-text-muted uppercase tracking-wider",children:"Saldo Disponible"}),e.jsxs("p",{className:"text-xl font-bold text-white font-mono",children:[f.toFixed(2),"€"]})]}),e.jsx(x,{to:"/wallet",className:"btn-primary py-1.5 px-3 text-xs",children:"Recargar"})]}),e.jsx("button",{onClick:C,className:"ml-2 p-2 text-text-muted hover:text-red-400 transition-colors rounded-lg border border-transparent hover:border-red-500/20",title:"Cerrar Sesión",children:e.jsx(P,{size:20})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("section",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(E,{className:"text-gold",size:20})," Mis Mentores"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.length===0&&e.jsxs("div",{className:"col-span-2 p-8 rounded-2xl border border-dashed border-white/10 text-center text-text-muted",children:[e.jsx("p",{children:"Aún no tienes mentores activos."}),e.jsx(x,{to:"/",className:"text-gold hover:underline mt-2 inline-block",children:"Buscar Profesor"})]}),h.map(s=>e.jsxs("div",{className:"glass-panel p-4 rounded-xl flex flex-col gap-4 group hover:border-gold/30 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-12 h-12 rounded-full object-cover border-2 border-gold/20"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white",children:s.name}),e.jsx("p",{className:"text-xs text-text-muted",children:"GM • 2850 ELO"})]})]}),e.jsxs("div",{className:"flex gap-2 mt-auto",children:[e.jsxs(x,{to:`/classroom/${s.id}`,className:"flex-1 btn-secondary text-center text-xs py-2 flex items-center justify-center gap-2",children:[e.jsx(I,{size:14})," Entrar al Aula"]}),e.jsxs("button",{onClick:()=>k(s),className:"flex-1 bg-white/5 hover:bg-gold hover:text-black border border-white/10 text-white text-xs py-2 rounded-lg transition-all flex items-center justify-center gap-2",children:[e.jsx(M,{size:14})," Agendar"]})]})]},s.id))]})]}),e.jsxs("section",{className:"glass-panel p-6 rounded-2xl",children:[e.jsx("h2",{className:"text-lg font-bold text-white mb-4",children:"Tu Progreso Semanal"}),e.jsx("div",{className:"flex justify-between items-end h-32 gap-2",children:[40,65,30,85,50,90,60].map((s,a)=>e.jsx("div",{className:"flex-1 bg-white/5 rounded-t-lg relative group overflow-hidden",children:e.jsx("div",{style:{height:`${s}%`},className:"absolute bottom-0 w-full bg-gradient-to-t from-gold/20 to-gold/60 transition-all duration-500 group-hover:to-gold"})},a))}),e.jsxs("div",{className:"flex justify-between mt-2 text-xs text-text-muted font-mono",children:[e.jsx("span",{children:"L"}),e.jsx("span",{children:"M"}),e.jsx("span",{children:"X"}),e.jsx("span",{children:"J"}),e.jsx("span",{children:"V"}),e.jsx("span",{children:"S"}),e.jsx("span",{children:"D"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass-panel p-6 rounded-2xl",children:[e.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(D,{className:"text-blue-400",size:18})," Solicitudes Enviadas"]}),e.jsxs("div",{className:"space-y-3",children:[p.length===0&&e.jsx("p",{className:"text-xs text-text-muted italic",children:"No tienes solicitudes pendientes."}),p.map(s=>e.jsxs("div",{className:"p-3 bg-white/5 rounded-lg border border-white/5 flex items-center gap-3 opacity-70",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center text-xs",children:s.name.substring(0,2)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-white font-medium",children:s.name}),e.jsx("p",{className:"text-[10px] text-yellow-500",children:"Pendiente de aprobación"})]})]},s.id))]})]}),e.jsxs("div",{className:"glass-panel p-6 rounded-2xl bg-gradient-to-br from-dark-panel to-green-900/10 border-green-500/10",children:[e.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(R,{className:"text-green-400",size:18})," Próxima Clase"]}),e.jsxs("div",{className:"text-center py-6",children:[e.jsx("p",{className:"text-3xl font-bold text-white mb-1",children:"18:00"}),e.jsx("p",{className:"text-sm text-green-400 font-mono mb-4",children:"Hoy, 13 Nov"}),e.jsx("button",{className:"w-full btn-primary py-2 text-sm",children:"Unirse ahora"})]})]})]})]}),i&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-dark-panel border border-white/10 rounded-2xl w-full max-w-lg overflow-hidden shadow-2xl relative",children:[e.jsx("button",{onClick:()=>d(null),className:"absolute top-4 right-4 text-text-muted hover:text-white",children:e.jsx($,{size:24})}),e.jsxs("div",{className:"p-6 border-b border-white/5",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Reservar Clase"}),e.jsxs("p",{className:"text-sm text-text-muted",children:["con ",e.jsx("span",{className:"text-gold",children:i.name})]})]}),e.jsx("div",{className:"p-6",children:e.jsx(A,{mode:"view",availability:w,onSlotClick:S})})]})})]})};export{W as default};
