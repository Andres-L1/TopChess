import{c as d,a as y,u as k,r as a,j as e,f as n,z as c}from"./index-BDiw9Bx0.js";import{L as D}from"./Logo-EELoYUqs.js";import{A as u,a as A}from"./arrow-up-right-CWZJeiq1.js";import{C}from"./clock-DzH9WZzL.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=d("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=d("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=d("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),W=()=>{const{currentUserId:r,userRole:g}=y(),f=k(),[i,j]=a.useState({balance:0,currency:"EUR"}),[x,w]=a.useState([]),[v,o]=a.useState(!1),[l,h]=a.useState(50),[b,m]=a.useState(!0),p=async()=>{m(!0);try{const t=await n.getWallet(r),s=await n.getTransactions(r);j(t),w(s)}catch(t){console.error("Error loading wallet data",t),c.error("Error al cargar datos del monedero")}finally{m(!1)}};a.useEffect(()=>{r&&p()},[r]);const N=async()=>{try{await n.addFunds(r,Number(l)),o(!1),c.success(`Recarga de ${l}€ completada`),p()}catch(t){console.error("Error depositing funds",t),c.error("Error en la recarga")}};return e.jsxs("div",{className:"min-h-screen bg-[#161512] text-[#e0e0d1] font-sans selection:bg-[#D4AF37] selection:text-black pb-20",children:[e.jsx("div",{className:"border-b border-white/5 bg-[#262421]/50 backdrop-blur-md px-6 py-4 flex justify-between items-center sticky top-0 z-50",children:e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>f(-1),children:[e.jsx(D,{className:"w-8 h-8 text-[#D4AF37]"}),e.jsxs("h1",{className:"text-xl font-bold tracking-tight text-white",children:["Mi ",e.jsx("span",{className:"text-[#D4AF37]",children:"Billetera"})]})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-10 animate-fade-in",children:[e.jsxs("div",{className:"bg-gradient-to-br from-[#262421] to-[#1a1917] p-8 rounded-3xl border border-white/5 shadow-2xl mb-10 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:e.jsx(S,{size:150})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h2",{className:"text-[#8b8982] uppercase text-xs font-bold tracking-widest mb-2",children:"Saldo Disponible"}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-6",children:[e.jsx("span",{className:"text-6xl font-black text-white tracking-tight",children:b?"...":i.balance.toFixed(2)}),e.jsx("span",{className:"text-xl text-[#D4AF37] font-bold",children:i.currency})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>o(!0),className:"px-6 py-3 bg-[#D4AF37] text-black font-bold rounded-xl hover:bg-white transition-all shadow-lg shadow-[#D4AF37]/10 flex items-center gap-2 transform active:scale-95",children:[e.jsx(z,{size:20}),"Recargar Saldo"]}),g==="teacher"&&e.jsxs("button",{className:"px-6 py-3 bg-white/5 text-white font-bold rounded-xl hover:bg-white/10 border border-white/10 transition-all flex items-center gap-2",children:[e.jsx(u,{size:20}),"Retirar Fondos"]})]})]})]}),e.jsxs("h3",{className:"text-lg font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(C,{size:18,className:"text-[#8b8982]"}),"Historial de Transacciones"]}),e.jsx("div",{className:"bg-[#262421]/50 rounded-2xl border border-white/5 overflow-hidden",children:b?e.jsx("div",{className:"p-10 text-center text-[#8b8982]",children:"Cargando transacciones..."}):x.length===0?e.jsx("div",{className:"p-10 text-center text-[#8b8982] italic",children:"No hay transacciones recientes."}):e.jsx("div",{className:"divide-y divide-white/5",children:x.map(t=>{const s=t.type==="deposit"||t.type==="payment_received";return e.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-white/5 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${s?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"}`,children:s?e.jsx(A,{size:18}):e.jsx(u,{size:18})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-white text-sm",children:t.description}),e.jsxs("div",{className:"text-xs text-[#8b8982]",children:[new Date(t.timestamp).toLocaleDateString()," • ",new Date(t.timestamp).toLocaleTimeString()]})]})]}),e.jsxs("span",{className:`font-mono font-bold ${s?"text-green-500":"text-white"}`,children:[s?"+":"",Math.abs(t.amount).toFixed(2)," ",i.currency]})]},t.id)})})})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-[#262421] w-full max-w-md rounded-2xl border border-white/10 shadow-2xl overflow-hidden animate-enter",children:[e.jsx("div",{className:"p-6 border-b border-white/5",children:e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(F,{size:20,className:"text-[#D4AF37]"}),"Recargar Saldo"]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-[#8b8982] uppercase mb-2",children:"Cantidad a recargar"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[20,50,100].map(t=>e.jsxs("button",{onClick:()=>h(t),className:`py-2 rounded-lg font-bold border transition-all ${l===t?"bg-[#D4AF37] text-black border-[#D4AF37]":"bg-transparent text-white border-white/20 hover:border-white/50"}`,children:[t,"€"]},t))}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white font-bold",children:"€"}),e.jsx("input",{type:"number",value:l,onChange:t=>h(Number(t.target.value)),className:"w-full bg-[#1a1917] border border-white/10 rounded-xl py-3 pl-8 pr-4 text-white focus:outline-none focus:border-[#D4AF37] font-bold text-lg"})]})]}),e.jsx("div",{className:"bg-blue-500/10 p-3 rounded-lg border border-blue-500/20 text-xs text-blue-300",children:"ℹ️ Esto es una simulación. No se te cobrará dinero real."})]}),e.jsxs("div",{className:"p-4 bg-[#1a1917] flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 text-[#8b8982] hover:text-white font-bold transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:N,className:"px-6 py-2 bg-[#D4AF37] text-black font-bold rounded-lg hover:bg-white transition-colors shadow-lg",children:"Confirmar Recarga"})]})]})})]})};export{W as default};
