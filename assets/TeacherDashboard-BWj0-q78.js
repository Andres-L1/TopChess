import{c as B,r as i,j as e,X as W,B as xe,a as me,u as he,b as ue,h as R,e as J,f as d,z as x}from"./index-sXPYdASB.js";import{E as pe,C as ge,V as K}from"./Calendar-BuElciOf.js";import{S as q}from"./Skeleton-DyZxTsg0.js";import{l as Q}from"./lichessService-CGkUorkZ.js";import{U as H}from"./users-otVfixXZ.js";import{D as be}from"./dollar-sign-JPA0N9By.js";import{C as fe}from"./clock-DUkVKcB_.js";import{T as je}from"./trophy-Dz7amdZu.js";import"./check-Cc2TZ7fX.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=B("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=B("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=B("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),ye=({isOpen:a,onClose:N,onSave:y,students:r})=>{const[p,k]=i.useState(""),[j,L]=i.useState(""),[g,S]=i.useState(""),[m,_]=i.useState("lichess_study"),[C,z]=i.useState(""),[E,T]=i.useState(!1);if(!a)return null;const s=async n=>{n.preventDefault(),T(!0);try{const h=r.find(D=>D.id===g);await y({studentId:g,studentName:(h==null?void 0:h.name)||"Estudiante",title:p,description:j,type:m,referenceData:C}),N()}catch(h){console.error(h)}finally{T(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-dark-panel border border-white/10 rounded-2xl w-full max-w-lg overflow-hidden shadow-2xl relative",children:[e.jsx("button",{onClick:N,className:"absolute top-4 right-4 text-text-muted hover:text-white transition-colors",children:e.jsx(W,{size:24})}),e.jsxs("div",{className:"p-6 border-b border-white/5",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-3",children:[e.jsx(xe,{className:"text-gold",size:24}),"Asignar Tarea"]}),e.jsx("p",{className:"text-sm text-text-muted mt-1",children:"Crea un ejercicio para tus alumnos"})]}),e.jsxs("form",{onSubmit:s,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-xs font-bold text-text-muted uppercase tracking-wider flex items-center gap-2",children:[e.jsx(H,{size:14})," Alumno"]}),e.jsxs("select",{required:!0,value:g,onChange:n=>S(n.target.value),className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-gold/50 transition-all font-medium",children:[e.jsx("option",{value:"",children:"Selecciona un alumno..."}),r.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-xs font-bold text-text-muted uppercase tracking-wider flex items-center gap-2",children:[e.jsx(we,{size:14})," Título"]}),e.jsx("input",{type:"text",required:!0,placeholder:"Ej: Finales de Torres",value:p,onChange:n=>k(n.target.value),className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-gold/50 transition-all font-medium placeholder:text-white/20"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-text-muted uppercase tracking-wider",children:"Tipo"}),e.jsxs("select",{value:m,onChange:n=>_(n.target.value),className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-gold/50 transition-all",children:[e.jsx("option",{value:"lichess_study",children:"Estudio Lichess"}),e.jsx("option",{value:"custom_fen",children:"Posición (FEN)"}),e.jsx("option",{value:"puzzle",children:"Puzzle ID"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-text-muted uppercase tracking-wider",children:m==="lichess_study"?"URL estudio":m==="custom_fen"?"FEN String":"Puzzle ID"}),e.jsx("input",{type:"text",required:!0,placeholder:m==="lichess_study"?"https://lichess.org/study/...":"...",value:C,onChange:n=>z(n.target.value),className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-gold/50 transition-all font-mono text-xs"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-text-muted uppercase tracking-wider",children:"Instrucciones"}),e.jsx("textarea",{rows:3,placeholder:"Explica qué debe hacer el alumno...",value:j,onChange:n=>L(n.target.value),className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-gold/50 transition-all resize-none placeholder:text-white/20"})]}),e.jsx("button",{type:"submit",disabled:E,className:"w-full bg-gold hover:bg-white text-black font-black uppercase tracking-widest py-4 rounded-xl transition-all hover:scale-[1.02] shadow-lg shadow-gold/10 mt-4 disabled:opacity-50 disabled:cursor-not-allowed",children:E?"Asignando...":"Asignar Tarea"})]})]})})};async function ke(){const a=new Uint8Array(32);return window.crypto.getRandomValues(a),Y(a)}async function Se(a){const y=new TextEncoder().encode(a),r=await window.crypto.subtle.digest("SHA-256",y);return Y(new Uint8Array(r))}function Y(a){return btoa(String.fromCharCode(...a)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const qe=()=>{var V;const{currentUserId:a,logout:N}=me(),y=he(),{t:r}=ue(),[p,k]=i.useState("overview"),[j,L]=i.useState({earnings:0,students:0,hours:0}),[g,S]=i.useState([]),[m,_]=i.useState([]),[C,z]=i.useState([]),[E,T]=i.useState([]),[s,n]=i.useState(null),[h,D]=i.useState(null),[ee,G]=i.useState(!1),[I,O]=i.useState(!0);i.useEffect(()=>{a&&(async()=>{O(!0);try{const l=await d.getTeacherById(a);n(l);const u=await d.getTeacherAvailability(a),w=await d.getRequestsForTeacher(a),U=await d.getBookingsForUser(a,"teacher"),M=await d.getHomeworksForTeacher(a);z(M),l&&L({earnings:l.earnings,students:l.classesGiven>0?Math.floor(l.classesGiven/4):0,hours:l.classesGiven});const F=w.filter(o=>o.status==="pending").map(async o=>{const f=await d.getUser(o.studentId);return{...o,studentName:(f==null?void 0:f.name)||"Usuario"}}),c=await Promise.all(F);S(c);const v=w.filter(o=>o.status==="approved"),$=new Map;v.forEach(o=>{$.has(o.studentId)||$.set(o.studentId,o)});const ie=Array.from($.values()).map(async o=>{const f=await d.getUser(o.studentId);return f?{...f,requestId:o.id}:null}),de=await Promise.all(ie);if(_(de.filter(o=>o!==null)),T(u),U.length>0){const o=new Date().toISOString().split("T")[0],ce=[...U.filter(A=>A.status!=="cancelled"&&A.date>=o)].sort((A,X)=>{const Z=A.date.localeCompare(X.date);return Z!==0?Z:A.time.localeCompare(X.time)});D(ce[0]??null)}}catch(l){console.error("Error fetching dashboard data",l),x.error("Error al cargar datos")}finally{O(!1)}})()},[a]);const te=async t=>{try{await d.updateRequestStatus(t,"approved"),S(c=>c.filter(v=>v.id!==t)),x.success("Solicitud aceptada");const u=(await d.getRequestsForTeacher(a)).filter(c=>c.status==="approved"),w=new Map;u.forEach(c=>{w.has(c.studentId)||w.set(c.studentId,c)});const U=Array.from(w.values()).map(async c=>{const v=await d.getUser(c.studentId);return v?{...v,requestId:c.id}:null}),M=await Promise.all(U);_(M.filter(c=>c!==null));const F=await d.getTeacherById(a);n(F)}catch(l){console.error("Error accepting request:",l),x.error("Error al procesar solicitud")}},se=async t=>{try{await d.updateRequestStatus(t,"rejected"),S(l=>l.filter(u=>u.id!==t)),x.success("Solicitud rechazada")}catch(l){console.error("Error rejecting request:",l),x.error("Error al rechazar solicitud")}},ae=async t=>{await d.updateTeacherAvailability(a,t),T(t),x.success("Horario actualizado correctamente")},le=async t=>{try{const l={...t,id:`hw_${Date.now()}`,teacherId:a,status:"pending",assignedAt:Date.now()};await d.createHomework(l),z(u=>[l,...u]),x.success("Tarea asignada correctamente")}catch(l){console.error("Error create homework",l),x.error("Error al asignar tarea")}},re=()=>{N(),y("/")},P=t=>t<10?{name:"Novato",next:"Instructor",target:10,currentComm:.5,nextComm:.55}:t<50?{name:"Instructor",next:"Profesor",target:50,currentComm:.55,nextComm:.6}:t<200?{name:"Profesor",next:"Maestro",target:200,currentComm:.6,nextComm:.7}:{name:"Maestro",next:"Gran Maestro",target:1e3,currentComm:.7,nextComm:.85},b=P(s?s.classesGiven:0),ne=s?Math.min(100,s.classesGiven/b.target*100):0,oe=(s==null?void 0:s.currency)==="EUR"?"€":"$";return e.jsxs("div",{className:"p-4 md:p-8 max-w-7xl mx-auto space-y-6 md:space-y-8 animate-fade-in pb-24",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold font-display text-white",children:[r("dashboard.title")," ",e.jsx("span",{className:"text-gold",children:"."})]}),e.jsx("p",{className:"text-sm md:text-base text-text-muted",children:r("dashboard.subtitle")})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 md:gap-4 items-center w-full md:w-auto",children:[e.jsxs(R,{to:`/classroom/${a}`,className:"btn-secondary flex items-center gap-2 text-[10px] sm:text-sm md:text-base flex-1 md:flex-none justify-center py-2 px-2 sm:px-4",children:[e.jsx(pe,{size:18}),e.jsx("span",{className:"truncate",children:r("dashboard.my_classroom")})]}),e.jsxs("div",{className:"flex gap-1 p-1 bg-dark-panel rounded-lg border border-white/5 flex-1 md:flex-none justify-center",children:[e.jsx("button",{onClick:()=>k("overview"),className:`flex-1 md:flex-none px-2 sm:px-4 py-2 rounded-md text-[10px] sm:text-sm font-medium transition-all ${p==="overview"?"bg-gold text-black shadow-lg":"text-text-muted hover:text-white"}`,children:r("dashboard.overview")}),e.jsx("button",{onClick:()=>k("schedule"),className:`flex-1 md:flex-none px-2 sm:px-4 py-2 rounded-md text-[10px] sm:text-sm font-medium transition-all ${p==="schedule"?"bg-gold text-black shadow-lg":"text-text-muted hover:text-white"}`,children:r("dashboard.schedule")}),e.jsx("button",{onClick:()=>k("homework"),className:`flex-1 md:flex-none px-2 sm:px-4 py-2 rounded-md text-[10px] sm:text-sm font-medium transition-all ${p==="homework"?"bg-gold text-black shadow-lg":"text-text-muted hover:text-white"}`,children:"Tareas"})]}),e.jsx("button",{onClick:re,className:"p-2 text-text-muted hover:text-red-400 transition-colors rounded-lg border border-white/5 hover:border-red-500/20",title:r("nav.exit"),"aria-label":r("nav.exit"),children:e.jsx(J,{size:20})})]})]}),p==="schedule"?e.jsx("div",{className:"glass-panel p-4 md:p-6 rounded-2xl animate-enter overflow-x-auto",children:e.jsx("div",{className:"min-w-[600px] md:min-w-0",children:e.jsx(ge,{mode:"edit",availability:E,onSaveAvailability:ae})})}):p==="homework"?e.jsxs("div",{className:"space-y-6 animate-enter",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Tareas Asignadas"}),e.jsx("button",{onClick:()=>G(!0),className:"bg-gold hover:bg-white text-black px-4 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all shadow-lg shadow-gold/10",children:"+ Nueva Tarea"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.length===0?e.jsx("div",{className:"col-span-full py-12 text-center border-2 border-dashed border-white/5 rounded-2xl",children:e.jsx("p",{className:"text-text-muted",children:"No has asignado tareas aún."})}):C.map(t=>e.jsxs("div",{className:"glass-panel p-5 rounded-2xl border border-white/5 hover:border-gold/20 transition-all group relative overflow-hidden",children:[e.jsx("div",{className:`absolute top-0 right-0 w-16 h-16 rounded-full blur-2xl -translate-y-1/2 translate-x-1/2 ${t.status==="completed"?"bg-green-500/20":"bg-gold/10"}`}),e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-black uppercase tracking-widest ${t.status==="completed"?"bg-green-500/10 text-green-400":"bg-yellow-500/10 text-yellow-500"}`,children:t.status==="completed"?"Completada":"Pendiente"}),e.jsx("span",{className:"text-[10px] text-text-muted font-mono",children:new Date(t.assignedAt).toLocaleDateString()})]}),e.jsx("h3",{className:"font-bold text-white mb-1 truncate",title:t.title,children:t.title}),e.jsx("p",{className:"text-xs text-text-muted mb-4 line-clamp-2",children:t.description||"Sin descripción"}),e.jsxs("div",{className:"flex items-center gap-2 mt-auto pt-3 border-t border-white/5 text-xs",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-white/10 flex items-center justify-center font-bold text-[10px]",children:(t.studentName||"U").substring(0,1)}),e.jsx("span",{className:"text-white/80 font-bold",children:t.studentName})]})]},t.id))}),e.jsx(ye,{isOpen:ee,onClose:()=>G(!1),onSave:le,students:m})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:I?e.jsx(e.Fragment,{children:[1,2,3,4].map(t=>e.jsxs("div",{className:"glass-panel p-4 md:p-6 rounded-2xl flex flex-col justify-between",children:[e.jsx(q,{width:"40%",height:20}),e.jsx(q,{width:"80%",height:40})]},t))}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"glass-panel p-4 md:p-6 rounded-2xl flex flex-col justify-between group hover:border-gold/30 transition-all",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{className:"p-3 rounded-xl bg-green-500/10 text-green-400 group-hover:scale-110 transition-transform",children:e.jsx(be,{size:24})}),e.jsxs("span",{className:"text-xs font-mono text-green-400/80",children:["Ganancia: ",(b.currentComm*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("span",{className:"text-2xl md:text-3xl font-bold text-white tracking-tight",children:[j.earnings.toFixed(2),oe]}),e.jsx("p",{className:"text-xs md:text-sm text-text-muted",children:r("dashboard.total_earnings")})]})]}),e.jsxs("div",{className:"glass-panel p-4 md:p-6 rounded-2xl flex flex-col justify-between group hover:border-gold/30 transition-all",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsx("div",{className:"p-3 rounded-xl bg-blue-500/10 text-blue-400 group-hover:scale-110 transition-transform",children:e.jsx(H,{size:24})})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("span",{className:"text-2xl md:text-3xl font-bold text-white tracking-tight",children:j.students}),e.jsx("p",{className:"text-xs md:text-sm text-text-muted",children:r("dashboard.active_students")})]})]}),e.jsxs("div",{className:"glass-panel p-4 md:p-6 rounded-2xl flex flex-col justify-between group hover:border-gold/30 transition-all",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsx("div",{className:"p-3 rounded-xl bg-purple-500/10 text-purple-400 group-hover:scale-110 transition-transform",children:e.jsx(fe,{size:24})})}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("span",{className:"text-2xl md:text-3xl font-bold text-white tracking-tight",children:[j.hours,"h"]}),e.jsx("p",{className:"text-xs md:text-sm text-text-muted",children:r("dashboard.classes_given")})]})]}),e.jsxs("div",{className:"glass-panel p-4 md:p-6 rounded-2xl bg-gradient-to-br from-dark-panel to-gold/5 border-gold/20 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gold/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(je,{size:20,className:"text-gold"}),e.jsxs("span",{className:"text-gold font-bold text-sm uppercase tracking-wider",children:["Nivel ",b.name]}),(s==null?void 0:s.title)&&e.jsx("span",{className:"ml-auto px-1.5 py-0.5 bg-gold text-black text-[8px] rounded font-black tracking-widest",children:s.title})]}),e.jsx("div",{className:"w-full bg-black/40 h-2 rounded-full mb-2 overflow-hidden relative",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-gold to-orange-500 shadow-[0_0_10px_rgba(255,215,0,0.5)] transition-all duration-1000",style:{width:`${ne}%`}})}),e.jsxs("p",{className:"text-xs text-text-muted flex justify-between",children:[e.jsxs("span",{children:[(s==null?void 0:s.classesGiven)||0," / ",b.target," Clases"]}),e.jsxs("span",{className:"text-gold",children:["Siguiente: ",b.next]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-white/5 text-[10px] space-y-1",children:[e.jsxs("p",{className:"flex justify-between text-white/80",children:[e.jsx("span",{children:"Tu Comisión Actual:"})," ",e.jsxs("span",{className:"text-green-400 font-mono font-bold",children:[(b.currentComm*100).toFixed(0),"%"]})]}),e.jsxs("p",{className:"flex justify-between text-white/50",children:[e.jsx("span",{children:"Siguiente Nivel:"})," ",e.jsxs("span",{className:"text-gold font-mono",children:[(b.nextComm*100).toFixed(0),"%"]})]})]})]})]})]})}),e.jsxs("div",{className:"flex gap-6 flex-col lg:flex-row h-full",children:[e.jsxs("div",{className:"flex-1 glass-panel rounded-2xl p-4 md:p-6 min-h-[400px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-bold text-white",children:r("dashboard.pending_requests")}),!I&&g.length>0&&e.jsxs("span",{className:"bg-red-500/20 text-red-400 px-2 py-0.5 rounded text-xs font-bold animate-pulse",children:[g.length," nuevas"]})]}),e.jsx("div",{className:"space-y-4",children:I?e.jsx(e.Fragment,{children:[1,2,3].map(t=>e.jsx("div",{className:"p-3 md:p-4 rounded-xl bg-white/5 border border-white/5 flex items-center justify-between gap-3",children:e.jsx(q,{width:"100%",height:60})},t))}):g.length===0?e.jsxs("div",{className:"text-center py-10 text-white/20 border-2 border-dashed border-white/5 rounded-2xl",children:[e.jsx(ve,{size:40,className:"mx-auto mb-4 opacity-10"}),e.jsx("p",{className:"text-sm font-medium",children:"Bandeja de entrada vacía"})]}):g.map(t=>e.jsxs("div",{className:"p-4 rounded-2xl bg-gradient-to-r from-white/[0.03] to-transparent border border-white/5 hover:border-gold/30 transition-all flex flex-col sm:flex-row items-start sm:items-center justify-between group gap-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 w-1 bg-gold scale-y-0 group-hover:scale-y-100 transition-transform origin-top"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gold/10 flex items-center justify-center font-bold text-gold border border-gold/20 shadow-lg",children:(t.studentName||"U").substring(0,1).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white text-sm",children:t.studentName||"Interesado"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gold animate-pulse"}),e.jsx("span",{className:"text-[10px] text-gold/60 font-black uppercase tracking-widest",children:"Nueva Solicitud"})]})]})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsx("button",{onClick:()=>te(t.id),className:"flex-1 sm:flex-none px-4 py-2 rounded-xl bg-gold text-black font-black text-[10px] uppercase tracking-widest hover:bg-white transition-all shadow-lg shadow-gold/10",children:"Aceptar"}),e.jsx("button",{onClick:()=>se(t.id),className:"p-2 rounded-xl bg-white/5 text-white/40 hover:bg-red-500/10 hover:text-red-400 transition-all border border-white/10",children:e.jsx(W,{size:18})})]})]},t.id))})]}),e.jsxs("div",{className:"w-full lg:w-80 flex flex-col gap-6",children:[e.jsxs("div",{className:"glass-panel rounded-2xl p-4 md:p-6 flex flex-col gap-4",children:[e.jsx("h2",{className:"text-lg md:text-xl font-bold text-white mb-2",children:r("dashboard.quick_access")}),e.jsxs(R,{to:`/classroom/${a}`,className:"group relative overflow-hidden rounded-xl aspect-video bg-black flex items-center justify-center border border-white/10 hover:border-gold/50 transition-all",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-dark-panel to-gold/20 opacity-40 group-hover:scale-105 transition-transform duration-700"}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gold/90 text-black flex items-center justify-center shadow-[0_0_20px_rgba(255,215,0,0.3)] group-hover:scale-110 transition-transform",children:e.jsx(K,{size:24})}),e.jsx("span",{className:"font-bold text-white tracking-wide",children:r("dashboard.enter_classroom")})]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/5 space-y-2",children:[e.jsx("h4",{className:"font-bold text-sm text-gold",children:r("dashboard.next_class")}),h?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs text-white",children:["Clase el ",h.date]}),e.jsxs("p",{className:"text-[10px] text-text-muted",children:["Hora: ",h.time]}),e.jsx("div",{className:"h-1 w-full bg-black/50 rounded-full overflow-hidden mt-1",children:e.jsx("div",{className:"h-full bg-green-500 w-full animate-pulse-slow"})})]}):e.jsx("p",{className:"text-xs text-text-muted italic",children:"No tienes clases próximas agendadas."})]})]}),e.jsxs("div",{className:"glass-panel rounded-2xl p-4 md:p-6 flex flex-col gap-4 bg-gradient-to-br from-[#1b1a17] to-white/[0.05]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center",children:e.jsx("img",{src:"https://lichess.org/assets/images/favicon-32-white.png",alt:"Lichess",className:"w-5 h-5 opacity-80"})}),e.jsx("h2",{className:"text-lg font-bold text-white",children:"Lichess Sync"}),(s==null?void 0:s.lichessAccessToken)&&e.jsx("div",{className:"ml-auto w-2 h-2 rounded-full bg-green-500 shadow-[0_0_10px_rgba(34,197,94,0.5)]"})]}),e.jsx("p",{className:"text-[10px] text-white/50 leading-relaxed",children:s!=null&&s.lichessAccessToken?`Conectado como ${s.lichessUsername}. Tus estudios privados ahora son visibles en el aula.`:"Conecta tu cuenta para importar estudios privados y públicos directamente en el Aula."}),e.jsx("div",{className:"pt-2",children:s!=null&&s.lichessAccessToken?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-grow bg-white/5 border border-white/10 rounded-xl px-4 py-2 flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-white/10 flex items-center justify-center font-bold text-[10px] text-white",children:(V=s.lichessUsername)==null?void 0:V.substring(0,1).toUpperCase()}),e.jsx("span",{className:"text-xs text-white/90 font-bold",children:s.lichessUsername})]}),e.jsx("button",{onClick:async()=>{try{await d.updateTeacher(a,{lichessAccessToken:void 0,lichessUsername:void 0}),n(t=>t?{...t,lichessAccessToken:void 0,lichessUsername:void 0}:null),x.success("Desconectado de Lichess")}catch{x.error("Error al desconectar")}},className:"p-2 bg-red-500/10 hover:bg-red-500/20 border border-red-500/20 rounded-xl text-red-500 transition-all",title:"Desconectar",children:e.jsx(J,{size:16})})]}):e.jsx("button",{onClick:async()=>{const t=await ke(),l=await Se(t);sessionStorage.setItem("lichess_code_verifier",t);const u=new URLSearchParams({response_type:"code",client_id:Q.getLICHESS_CLIENT_ID(),redirect_uri:Q.getREDIRECT_URI(),scope:"study:read",code_challenge_method:"S256",code_challenge:l,state:Math.random().toString(36).substring(2)});window.location.href=`https://lichess.org/oauth?${u.toString()}`},className:"w-full py-3 bg-white text-black rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-gold transition-all hover:scale-[1.02] shadow-xl shadow-white/5",children:"Conectar con Lichess"})})]})]}),e.jsxs("div",{className:"flex-1 glass-panel rounded-2xl p-4 md:p-6 min-h-[400px]",children:[e.jsx("h2",{className:"text-lg md:text-xl font-bold text-white mb-6",children:"Mis Alumnos"}),e.jsx("div",{className:"space-y-4",children:I?[1,2].map(t=>e.jsx(q,{width:"100%",height:80},t)):m.length===0?e.jsxs("div",{className:"text-center py-10 text-white/20 border-2 border-dashed border-white/5 rounded-2xl",children:[e.jsx(H,{size:40,className:"mx-auto mb-4 opacity-10"}),e.jsx("p",{className:"text-sm font-medium",children:"Sin alumnos activos"})]}):m.map(t=>e.jsxs("div",{className:"p-5 rounded-2xl bg-[#1b1a17] border border-white/5 hover:border-gold/20 transition-all flex flex-col gap-4 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-gold/20 to-gold/5 flex items-center justify-center font-bold text-gold border border-gold/10",children:(t.name||"U").substring(0,1).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white text-sm",children:t.name||"Usuario"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-[9px] font-black text-white/30 uppercase tracking-widest bg-white/5 px-2 py-0.5 rounded-full",children:"ESTUDIANTE"}),e.jsx("div",{className:"w-1 h-1 rounded-full bg-green-500"}),e.jsx("span",{className:"text-[9px] text-green-500/60 font-black uppercase tracking-widest",children:"En línea"})]})]})]}),e.jsx("div",{className:"flex flex-col items-end",children:e.jsx("span",{className:"text-[10px] font-mono text-white/40 italic",children:"Última clase: Ayer"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(R,{to:`/chat/${t.id}`,className:"bg-white/5 hover:bg-white/10 text-white/80 py-2.5 rounded-xl transition-all flex items-center justify-center gap-2 group",children:[e.jsx(Ne,{size:14,className:"group-hover:text-gold transition-colors"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Mensaje"})]}),e.jsxs(R,{to:`/classroom/${a}`,className:"bg-gold hover:bg-white text-black py-2.5 rounded-xl transition-all flex items-center justify-center gap-2 group font-black shadow-lg shadow-gold/5",children:[e.jsx(K,{size:14}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Aula en vivo"})]})]})]},t.id))})]})]})]})]})};export{qe as default};
